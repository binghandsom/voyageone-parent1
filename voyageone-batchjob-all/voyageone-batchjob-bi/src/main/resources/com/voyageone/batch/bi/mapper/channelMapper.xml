<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.voyageone.batch.bi.mapper.ChannelMapper">

	<!-- 获得vm_channel信息结构 -->
	<resultMap id="channelMap" type="batch.bi.ChannelBean">
		<result column="id" property="id"/>
		<result column="code" property="code"/>
		<result column="name" property="name"/>
		<result column="name_en" property="name_en"/>
		<result column="name_cn" property="name_cn"/>
		<result column="enable" property="enable"/>
	</resultMap>

	<!-- 设定vm_channel检索条件 -->
	<sql id="vm_channel_condition">
		<where>
			<if test="id != null and id != '' ">
				and id = #{id}
			</if>
			<if test="code != null and code != '' ">
				and code = #{code}
			</if>
			<if test="name != null and name != '' ">
				and name = #{name}
			</if>
			<if test="enable != null and enable != '' ">
				and enable = #{enable}
			</if>
		</where>
	</sql>

	<!-- 获得vm_channel数量 -->
	<select id="vm_channel_count"  parameterType="batch.bi.ChannelBean" resultType="int">
		select
		count(1)
		from bi_master.vm_channel
		<include refid="vm_channel_condition"/>
	</select>

	<!-- 检索vm_channel信息 -->
	<select id="select_code_vm_channel"  parameterType="Map" resultType="String">
		select
		code
		from bi_master.vm_channel
		<include refid="vm_channel_condition"/>
	</select>

	<select id="select_list_vm_channel"  parameterType="batch.bi.ChannelBean" resultMap="channelMap">
		select
		id,
		code,
		name,
		name_en,
		name_cn,
		enable
		from bi_master.vm_channel
		<include refid="vm_channel_condition"/>
	</select>

	<insert id="replace_vm_channel" parameterType="Map" useGeneratedKeys="true">
		REPLACE INTO bi_master.vm_channel
		<foreach collection="column" index="index" item="columnname" open="(" separator="," close=")">
			${columnname}
		</foreach>
		VALUES
		<foreach collection="value" item="ChannelBean" separator=",">
			(
			#{ChannelBean.id},
			#{ChannelBean.code},
			#{ChannelBean.name},
			#{ChannelBean.name_en},
			#{ChannelBean.name_cn},
			#{ChannelBean.enable},
			#{ChannelBean.create_time},
			#{ChannelBean.create_user},
			#{ChannelBean.update_time},
			#{ChannelBean.update_user}
			)
		</foreach>

	</insert>

	<!-- 更新vm_channel信息 -->
	<update id="update_vm_channel"  parameterType="batch.bi.ChannelBean">
		UPDATE bi_master.vm_channel
		SET
		cor_column_table_name = #{cor_column_table_name}
		<include refid="vm_channel_condition"/>
	</update>

	<!-- 插入vm_channel信息 -->
	<insert id="insert_vm_channel"  parameterType="batch.bi.ChannelBean">
		INSERT INTO bi_master.vm_channel (
		id,
		code,
		name,
		name_en,
		name_cn,
		enable,
		create_time,
		create_user,
		update_time,
		update_user
		)
		VALUES
			(
			#{ChannelBean.id},
			#{ChannelBean.code},
			#{ChannelBean.name},
			#{ChannelBean.name_en},
			#{ChannelBean.name_cn},
			#{ChannelBean.enable},
			#{ChannelBean.create_time},
			#{ChannelBean.create_user},
			#{ChannelBean.update_time},
			#{ChannelBean.update_user}
			)
	</insert>
</mapper>
