package com.voyageone.batch.cms.service;

import com.voyageone.batch.core.modelbean.TaskControlBean;
import com.voyageone.common.components.jumei.Bean.JmGetProductInfoRes;
import com.voyageone.common.components.jumei.JumeiProductService;
import com.voyageone.common.configs.Enums.CartEnums;
import com.voyageone.common.configs.Enums.ChannelConfigEnums;
import com.voyageone.common.configs.ShopConfigs;
import com.voyageone.common.configs.beans.ShopBean;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.test.context.ContextConfiguration;
import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;

import java.io.FileWriter;
import java.io.PrintWriter;
import java.util.ArrayList;
import java.util.List;

import static org.junit.Assert.*;

/**
 * @author james.li on 2016/1/26.
 * @version 2.0.0
 */
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration("classpath:context-cms-test.xml")
public class CmsUploadJmProductServiceTest {

    @Autowired
    CmsUploadJmProductService cmsUploadJmProductService;

    @Autowired
    JumeiProductService jumeiProductService;
    @Test
    public void testOnStartup() throws Exception {
        List<TaskControlBean> taskControlList = new ArrayList<>();
        cmsUploadJmProductService.onStartup(taskControlList);
    }

    @Test
    public void testGetTime() throws Exception {

        Long a=CmsUploadJmProductService.getTime("2016-03-10 10:00:00");
        System.out.println(a);
    }

    @Test
    public void testGetProductInfo() throws Exception {
        ShopBean shopBean = new ShopBean();
        shopBean.setAppKey("131");
        shopBean.setSessionKey("7e059a48c30c67d2693be14275c2d3be");
        shopBean.setAppSecret("0f9e3437ca010f63f2c4f3a216b7f4bc9698f071");
        shopBean.setApp_url("http://openapi.ext.jumei.com/");
        String[] productList= {"2207458","2210009","2210003","2117231","2117235","1997477","2210291","2210289","2210292","2210288","2210287","2210293","2210294","2210295","2210296","2210297","2210298","2210299","2210286","2210285","2210290","1997505","1997480","1830964","1810569","2210083","1836919","1810560","2210078","1810576","1810539","2357121","2209993","2160444","1997483","1997485","2117256","2117264","2117257","1997490","1997417","2212276","2279086","2212296","1997419","2210339","2210349","2210340","2210342","2210341","2210348","2210344","2210347","2208830","2208833","2267817","2208838","2208836","1831240","2208846","2208837","2208841","2208843","2208842","2212274","2212271","2212269","1831216","2212279","2212281","1831374","2212286","2211841","2212216","2212289","2208839","2212291","2212222","2212220","1831371","2212226","2212228","2210075","2210088","2210090","2210068","2210067","2210065","2210063","2210061","2209998","2210038","2210059","2210016","1836918","1810572","2210057","2210056","1831010","2210096","2210035","2210034","2210033","1836929","2210105","1836927","2210027","2210025","2210021","2210024","2210023","2210022","1836931","1831003","2210002","2210046","2210020","1830566","1830565","2210014","2210102","2210019","2210013","2210012","2210011","2279007","2210007","2210006","1830557","2279004","2117281","2117271","2210005","2279001","2278998","2210053","2278994","2210054","2210036","2278990","2278988","2278897","2212233","2208847","2208840","1997423","2210350","2210345","2210346","2209112","1823272","1823268","2209825","2209131","2209115","2278852","2207459","1997425","1832390","1832388","1832401","1832397","1832384","1997427","1997430","1997432","2207756","1832429","2208848","2210136","2210134","2160372","2209775","2209776","1832456","1823248","1823243","2208844","2209113","1997442","1997444","1997385","2267802","1832962","1832958","2279257","2210040","2210109","2210108","2279248","2279247","2279245","2210104","2210041","2210082","2210064","1830990","1832954","2212292","2212293","2212186","2212036","2212188","1823142","2209870","1823133","2209130","2209871","2117280","1997394","2117262","1997396","2117260","2209117","1823057","2209136","2209831","1822999","2212194","2209135","2278850","1822960","2209226","2278848","1822957","2211844","2209124","2209120","2212197","1831342","2212201","2207461","2212295","2212234","2212236","2212237","2212238","2212240","2209133","1822897","1761805","2211847","2212184","2212091","2210055","1822850","1822845","1822837","2209227","2209129","2212182","1822824","1822781","1822775","1831394","1831365","1822807","2209128","2209823","2209229","1822766","1822760","1822755","1822747","1822742","2212088","2212085","2212084","2209263","1822715","2209264","2209251","1822721","2160361","1831362","2212206","2212072","1822726","1822735","1822739","2209259","2209268","1822750","2209260","2209873","2209824","2209261","2209827","1822762","2209254","2209255","1822772","2209266","2209874","2209785","2212204","2212093","2211840","2278842","1822801","1822808","1822814","2211842","2212073","2211843","1831333","1831337","2212096","2212097","2212099","2212101","2211902","2212102","2209931","2209930","2209973","2209988","2209911","2209985","2278836","1822820","1822833","1822841","2209935","2209782","2209908","1822909","2209936","2209780","1822966","2209875","1831357","1831178","1831172","2212103","2212047","2212071","1831127","2211851","1831142","2212051","2212104","1831331","1831113","1831116","2212069","1831110","2212068","2212065","1831108","1831104","1831283","2212061","2212046","2212044","2212010","2212043","2212009","2212007","1831250","2212005","2212003","2212001","2271628","1831256","2212039","2211901","2212037","2212012","2271608","1823070","1823076","2209897","2209894","1823088","1823117","2271633","2209912","2209883","2209836","2278835","2209882","2267819","2209880","2209839","2209913","2278834","2278833","2209878","2209915","2209940","2117307","2209941","2212013","2209902","2212016","2211970","2212020","2211898","2211971","2211972","2211973","2211974","2211975","2211976","2211977","2212021","2212022","2211897","2212024","2212026","2209867","2209866","2209865","2209903","2209863","2209860","2209921","2209886","2209887","2279079","2279052","2211969","2211968","2211905","2211906","2211908","2211909","2211910","2211911","2211966","2209858","2117318","2211915","2211916","2211965","2211964","2211904","2217352","2211895","2211903","2211894","2278830","2117308","2117315","2210320","2210327","2210321","2210322","2210323","2210324","2210325","2210328","2210329","2210326","2210337","2210336","2210330","2210335","2210334","2210331","2210333","2210332","2207762","1997404","2117320","2211791","2209123","2267535","2267530","1824253","2278820","2267520","2209749","2267450","1824221","2210688","2209847","2271670","2210739","1824908","1824899","1824185","1824903","1823891","1823901","1823913","1823916","2211308","2211295","2211291","2211286","2211302","2211311","1823729","1823723","2211133","2211326","2211128","1824275","1824260","1824263","2278818","2278817","1824266","1823914","1824230","2278782","1997411","1825295","1825294","1825426","1825476","1825464","1825244","2163333","2163351","2163330","2163337","2163335","2163355","2163353","2163369","2163372","2163354","2163375","2163368","2163363","2163357","2163374","2163371","2163359","2163364","2163384","2163365","2163367","2163356","2163360","2163396","2163385","2163387","2163389","2163391","2163400","2163390","2163398","2163399","2163401","2163394","2163393","2163404","2163403","2163402","2163411","2163412","2163415","2163416","2163413","2163414","2163490","2163423","2163424","2163497","2163419","2163425","2163494","2163502","2163428","2163421","2163417","2163420","2163430","2163418","2163426","2163499","1825240","1825503","2211826","2211805","2210609","2211828","2211804","2211800","2211829","1825460","2211125","1823855","2211121","1823854","2211118","1824194","2211123","2211119","2211116","2211112","2211129","1824197","1824201","2211113","1832911","2211108","2211107","2211111","2211283","2211106","2211115","2279277","2279275","1832912","2211099","2211091","2211141","2210546","2211674","1830934","1830931","2210755","2210811","2210747","2278784","2210618","2210620","2209272","2278816","2278814","1997347","2117312","2211089","1830930","1830926","1830918","1997350","2163445","1997366","2278813","2209797","2209274","2209794","2278812","2278788","1830917","1830916","1830914","1830910","1830905","1830899","2209927","1830897","1830896","2209925","2209922","2209920","2209916","2211084","2211328","1832916","2210000","2209996","1830893","1832919","2279269","2279266","2209995","2209968","2209962","2209961","2209960","2209959","2209957","2211088","2209953","2209946","2209942","2117328","2117324","2117327","2117345","2117365","2117398","1997301","1997302","2209939","2279288","2279287","1997305","2211797","2211796","2211052","2161927","2211698","2209106","2210612","2211775","1825439","2211793","2211049","2211057","2215648","2210533","2215649","2215650","2211068","2215651","1825109","1825112","2161932","2211064","2161936","2211667","1825085","2211042","2211043","2161944","1825088","2279236","2161947","1825076","1825054","2161913","2215652","1825059","2271762","2211776","2211780","2211781","2211782","2211783","1997312","2211058","2211785","2211792","1830928","1830927","1830920","1830912","2161940","1831910","2210396","2210399","1831938","2210422","2210383","1831906","2210404","2210407","2210409","2271731","1825027","1825029","2161951","1825032","1830877","2210582","2161954","2211806","2211790","2279224","2211767","2211765","2211766","2211779","2211778","1830859","1830856","2211742","1830858","1830861","2211743","2211744","2211745","2211747","2211748","2267789","2211750","2210611","2211061","1830769","2210580","2211673","2211739","2211738","2211737","2211309","1830771","2211735","1830833","1830830","2210560","2210557","2211733","1830829","1830827","1830825","1830821","1830814","1830774","1830764","1830766","1830763","2210895","2210894","2267603","2211732","2210892","2117380","2117373","1997203","1997205","2163493","1830740","1830737","1830731","1997210","1997214","1997217","1997222","2210301","2160833","2160431","2279259","2209855","1823889","2209987","2209972","2210302","2210303","1832935","1832944","2210304","2210305","2210306","1832961","2209971","2209969","1832940","2209966","1830724","2210307","1832267","2210310","1830701","1830698","1830693","1830691","1830689","1830686","1830683","1830682","1830678","1830523","1832280","1824897","1830521","1830525","1832268","1832186","1830526","1832243","1832189","2210311","2210300","1832952","1832943","1832931","1832923","1832930","2160389","2209928","2209918","2209859","2209910","2209906","2209869","2209892","2209891","2209881","2209876","2210844","2267516","2267514","2267513","2267510","2267460","2278810","2278808","2210845","2211670","2278791","2278807","2278801","2278798","1997155","1997156","1997160","1830895","2210420","2209786","2209276","2209754","2211080","2211086","2211076","2160480","1830878","1830780","1830785","2160492","2211083","2278792","2278795","2210312","2210313","1832211","2210314","2271737","2117382","1997171","2117375","2117390","2117378","2117408","2117413","2117415","2117431","2117409","2117416","2117411","2117412","2271729","2117434","2117437","2117442","2117439","2117446","1996991","2163537","2163377","2210308","2210317","2210319","2117206","2117477","2117479","2117483","2117491","2117481","2117485","2210315","2210309","1832145","2117511","2117494","2117544","2117534","1997022","2163540","2117539","2117543","1830530","1830533","1823797","1823798","1823799","1823803","1823808","1823821","1823827","1830539","1830547","1823868","1830556","1823751","2211078","1823746","1823784","1823776","1823739","1823669","1823667","1823665","1823563","2211104","1824198","1824102","1824081","2160471","1824117","1824199","1830672","1830666","1830653","2210170","1830648","1830644","1830630","2211071","2211073","1830620","1830618","1830615","1830612","1830611","2210216","2210173","1830605","1830593","1830584","2207463","2207462","2207466","2207473","2207465","2207467","2207755","2207482","2207479","1832453","1832434","2207494","2207471","2207469","2207489","2207764","2207768","1832428","1832427","2207491","2207484","2207470","2207485","2207488","2207758","2207760","2207476","2207487","2207474","2207483","2207492","2207481","2207478","2207741","2207743","2207746","2207750","2207744","2207747","2207761","2207765","2207752","2207748","2207767","2207751","1830568","1830567","1830564","1830561","1830558","1997032","2117535","1830765","1830761","2210410","1832099","2210366","1831903","1831942","1831902","1831901","1831900","1831899","2210419","2210416","2210374","2279286","2279284","2279282","2210371","2279280","1996958","2210125","2210124","2161585","2210122","2210118","2161576","2161580","2210116","2211666","2211696","2210869","2211704","1830738","1830735","2160349","2211731","1830712","2210625","1830702","2210615","2279210","2279204","2279200","2279198","1830704","2211730","2210846","2210864","2279196","2279192","1830700","1830697","2210818","2210887","2210885","2210883","2210882","2210817","1830695","1830694","2210816","1830760","2210815","1830688","2210814","2210813","2210812","2279157","2215653","1830690","1830685","2279149","2279187","2279182","1830662","1830656","2210749","2210752","2210621","2210757","2210760","1830646","1830639","1830635","2210787","2210810","2210809","2210800","2210808","2210807","2210744","1830684","1830628","1830625","1830627","1830622","1830577","1830581","2210627","2210878","2210701","1830591","1830603","2210740","2211708","2211707","2210543","2210707","2210711","2211691","2210719","1830597","1830610","2210731","1830609","2210648","1830607","2210643","2211706","2211689","2210666","2210698","2210697","2210696","2210695","2271724","2271723","2271718","2271728","2271714","2271708","2271702","2271701","2271695","2271594","2271727","2271726","2271735","2163269","1997044"};

        FileWriter fw=new FileWriter("f:\\jumei_hash_id2.csv");
        PrintWriter pw=new PrintWriter(fw);

        try {
            for(int i=0;i<productList.length;i++){
                JmGetProductInfoRes jmGetProductInfoRes = jumeiProductService.getProductById(shopBean, productList[i]);
                pw.println((i+1)+","+jmGetProductInfoRes.getProduct_id() + "," + jmGetProductInfoRes.getHash_ids());
                if(i%10 == 0){
                    pw.flush();
                }
            }
        }catch (Exception e){

        }finally {
            pw.close();
            fw.close();
        }

    }
}