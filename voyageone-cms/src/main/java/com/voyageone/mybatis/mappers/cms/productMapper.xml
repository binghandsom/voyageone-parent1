<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.voyageone.cms.sql">
  <resultMap id="USProductInfoResultMap" type="com.voyageone.cms.formbean.ProductUSBean" >
    <result column="product_id" property="productId"  />
    <result column="channel_id" property="channelId"  />
    <result column="model_id" property="modelId"/>
    <result column="code" property="code"  />
    <result column="name" property="name"  />
    <result column="color_map_id" property="colorMapId"  />
    <result column="color" property="color"/>
    <result column="made_in_country_id" property="madeInCountryId"  />
    <result column="material_fabric_1_id" property="materialFabric1Id"  />
    <result column="material_fabric_2_id" property="materialFabric2Id"  />
    <result column="material_fabric_3_id" property="materialFabric3Id"  />
    <result column="image_item_count" property="imageItemCount"  />
    <result column="image_box_count" property="imageBoxCount"  />
    <result column="image_angle_count" property="imageAngleCount"  />
    <result column="available_time" property="availableTime"  />
    <result column="promotion_tag" property="promotionTag"  />
    <result column="accessory" property="accessory"/>
    <result column="url_key" property="urlKey" />
    <result column="is_new_arrival" property="isNewArrival" jdbcType="BOOLEAN"/>
    <result column="is_outlets_on_sale" property="isOutletsOnSale" jdbcType="BOOLEAN"/>
    <result column="is_reward_eligible" property="isRewardEligible" jdbcType="BOOLEAN"/>
    <result column="is_discount_eligible" property="isDiscountEligible"  jdbcType="BOOLEAN"/>
    <result column="is_phone_order_only" property="isPhoneOrderOnly" jdbcType="BOOLEAN" />
    <result column="order_limit_count" property="orderLimitCount"  />
    <result column="is_approved_description" property="isApprovedDescription" jdbcType="BOOLEAN" />
    <result column="is_effective" property="isEffective" jdbcType="BOOLEAN" />
    <result column="main_category_id" property="mainCategoryId"  />
    <result column="amazon_browse_category_id" property="amazonBrowseTreeId" />
    <result column="modified" property="modified"  />
    <result column="created" property="created"/>
    <result column="google_category_id" property="googleCategoryId" />
    <result column="price_grabber_category_id"  property="pricegrabberCategoryId"/>
    <result column="abstract" property="usAbstract"/>
    <result column="short_description" property="shortDescription"/>
    <result column="long_description" property="longDescription"/>
    <result column="product_type_short_name" property="productType"/>
    <result column="brand_name" property="brand"/>
  </resultMap>
	<select id="cms_get_USProductInfo" resultMap="USProductInfoResultMap" parameterType="HashMap">
	SELECT
		a.product_id,
		f.model_id,
		a.channel_id,
		a.name,
		a.code,
		a.color,
		a.color_map_id,
    	h.product_type_id,
    	g.product_type_short_name,
    	i.brand_name,
		a.made_in_country_id,
		a.material_fabric_1_id,
		a.material_fabric_2_id,
		a.material_fabric_3_id,
		b.abstract,
		b.short_description,
		b.long_description,
		b.accessory,
		a.image_angle_count,
		a.image_box_count,
		a.image_item_count,
		a.available_time,
		a.url_key,
		a.is_outlets_on_sale,
		a.is_new_arrival,
		a.is_reward_eligible,
		a.is_discount_eligible,
		a.is_phone_order_only,
		a.is_effective,
		a.order_limit_count,
		a.promotion_tag,
		a.is_approved_description,
		b.main_category_id,
		c.amazon_browse_category_id,
		d.google_category_id,
		e.price_grabber_category_id,
		a.modified,
		a.created
	FROM
		cms_bt_product a
	LEFT JOIN cms_bt_product_extend b ON a.product_id = b.product_id
	LEFT JOIN cms_bt_amazon_product_extend c ON c.product_id = a.product_id
	LEFT JOIN cms_bt_google_product_extend d ON d.product_id = a.product_id
	LEFT JOIN cms_bt_pricegrabber_product_extend e ON e.product_id = a.product_id
	LEFT JOIN cms_bt_relation_model_product f ON f.product_id = a.product_id
	LEFT JOIN cms_bt_model h on h.model_id=f.model_id
  	LEFT JOIN cms_mt_brand i on i.brand_id=h.brand_id
  	LEFT JOIN cms_mt_product_type g on g.product_type_id=h.product_type_id
	where 
		a.product_id=#{productId}
		and a.channel_id=#{channelId}
	</select>
	<resultMap  id="CNProductInfoResultMap" type="com.voyageone.cms.formbean.ProductCNBean">
		<result column="product_id" property="productId"/>
	   	<result column="channel_id" property="channelId"/>
	   	<result column="model_id" property="modelId"/>
	  <association property="cnBaseProductInfo" javaType="com.voyageone.cms.formbean.ProductCNBaseProductInfo"> 
	   <result column="code" property="code"/>
	   <result column="url_key" property="urlKey"/>
	   <result column="cn_name" property="cnName"/>
	   <result column="cn_color" property="cnColor"/>	
	   <result column="cn_is_approved_description" property="cnIsApprovedDescription"/> 
	   <result column="made_in_country_id" property="madeInCountryName"/>
	   <result column="name1" property="materialFabric1Name"/>
	   <result column="name2" property="materialFabric2Name"/>
	   <result column="name3" property="materialFabric3Name"/>
	   <result column="cn_abstract" property="cnAbstract"/>
	   <result column="cn_short_description" property="cnShortDescription"/>
	   <result column="cn_long_description" property="cnLongDescription"/>
	   <result column="hs_code_id" property="hsCodeId"/>
	   <result column="hs_code_pu_id" property="hsCodePuId"/>
	   <result column="main_category_id" property="mainCategoryId"/>
	   <result column="reference_msrp" property="referenceMsrp"/>
	   <result column="reference_price" property="referencePrice"/>
	   <result column="modified" property="modified"/>
	   	<result column="product_id" property="productId"/>
	   	<result column="channel_id" property="channelId"/>
	   	<result column="model_id" property="modelId"/>
     </association>
	  <association property="tmProductInfo" javaType="com.voyageone.cms.formbean.ProductCNTMProductInfo"> 
	   <result column="tb_name" property="tbName"/>
	   <result column="tb_attachment_name" property="tbAttachmentName"/>
	   <result column="tm_name" property="tmName"/>
	   <result column="tm_attachment_name" property="tmAttachmentName"/>
	   <result column="tg_name" property="tgName"/>
	   <result column="tg_attachment_name" property="tgAttachmentName"/>
	   <result column="tm_short_description" property="tmShortDescription"/>
	   <result column="tm_long_description" property="tmLongDescription"/>
	   <result column="tm_category_id" property="tmCategoryId"/>
	   <result column="tmmodified" property="modified"/>
	   	<result column="product_id" property="productId"/>
	   	<result column="channel_id" property="channelId"/>
	   	<result column="model_id" property="modelId"/>
	  </association>
	   <association property="jdProductInfo" javaType="com.voyageone.cms.formbean.ProductCNJDProductInfo">
	   <result column="jg_name" property="jgName"/>
	   <result column="jd_name" property="jdName"/>
	   <result column="jd_short_description" property="jdShortDescription"/>
	   <result column="jd_long_description" property="jdLongDescription"/>
	   <result column="jd_category_id" property="jdCategoryId"/>
	   <result column="jdmodified" property="modified"/>
	   	<result column="product_id" property="productId"/>
	   	<result column="channel_id" property="channelId"/>
	   	<result column="model_id" property="modelId"/>
	 </association>
	</resultMap>
	<select id="cms_get_CNProductInfo" resultMap="CNProductInfoResultMap" parameterType="HashMap">
	SELECT
		a.product_id,
		a.channel_id,
		a.code,
		a.url_key,
		a.cn_name,
		a.cn_color,
		a.cn_is_approved_description,
   		h.model_id,
		i.made_in_country_id,
		j.material_fabric_name as name1,
		k.material_fabric_name as name2 ,
		l.material_fabric_name as name3,
		b.cn_abstract,
		b.cn_short_description,
		b.cn_long_description,
		b.hs_code_id,
		b.hs_code_pu_id,
		b.main_category_id,
		b.reference_msrp,
		b.reference_price,
    	a.modified,
		f.tb_name,
		f.tb_attachment_name,
		f.tm_name,
		f.tm_attachment_name,
		f.tg_name,
		f.tg_attachment_name,
		f.tm_short_description,
		f.tm_long_description,
		f.tm_category_id,
		f.modified as tmmodified,
		g.jg_name,
		g.jd_name,
		g.jd_short_description,
		g.jd_long_description,
		g.jd_category_id,
		g.modified as jdmodified
	FROM
		cms_bt_cn_product a
	LEFT JOIN cms_bt_cn_product_extend b ON a.product_id = b.product_id
	LEFT JOIN cms_bt_cn_tm_product_extend f ON f.product_id = a.product_id
	LEFT JOIN cms_bt_cn_jd_product_extend g ON g.product_id = a.product_id
	LEFT JOIN cms_bt_relation_model_product h ON h.product_id = a.product_id
	LEFT JOIN cms_bt_product i ON i.product_id = a.product_id
	LEFT JOIN cms_mt_material_fabric j ON j.material_fabric_id = i.material_fabric_1_id
	LEFT JOIN cms_mt_material_fabric k ON k.material_fabric_id = i.material_fabric_2_id
	LEFT JOIN cms_mt_material_fabric l ON l.material_fabric_id = i.material_fabric_3_id
	where 
		a.product_id=#{productId}
		and a.channel_id=#{channelId}
	
	</select>
	<resultMap type="com.voyageone.cms.formbean.ProductUSPriceInfo" id="USProductPriceInfo">
		<result column="product_id" property="productId"/>
		<result column="channel_id" property="channelId"/>
		<result column="cart_id" property="cartId"/>
		<result column="free_shipping_type_id" property="freeShippingTypeId"/>
		<result column="price" property="price"/>
		<result column="price" property="currentPrice"/>
		<result column="profit" property="profit"/>
		<result column="discount" property="discount"/>
		<result column="pre_publish_before_sharing_days" property="prePublishBeforeSharingDays"/>
		<result column="approved_datetime" property="approvedDatetime"/>
		<result column="is_on_sale" property="isOnSale" jdbcType="BOOLEAN"/>
		<result column="is_outlets_on_sale" property="isOutletsOnSale" jdbcType="BOOLEAN"/>
		<result column="is_approved" property="isApproved"/>
		<result column="pre_publish_datetime"  property="prePublishDatetime"/>
		<result column="publish_datetime" property="publishDatetime"/>
		<result column="no_approve_comment" property="noApproveComment"/>
		<result column="msrp" property="msrp"/>
		<result column="code" property="code"/>
		<result column="model_id" property="modelId"/>
		<result column="comment" property="comment"/>
		<result column="modified" property="modified"/>
		<result column="modifier" property="modifier"/>
	</resultMap>
	<select id="cms_get_USProductOfficalPriceInfo" resultMap="USProductPriceInfo" parameterType="HashMap">
		SELECT
			a.product_id,
			a.channel_id,
			a.cart_id,
			a.free_shipping_type_id,
			a.profit,
			a.price,
			a.is_on_sale,
			a.is_outlets_on_sale,
			a.no_approve_comment,
			b.code,
			date_format(a.pre_publish_datetime,'%Y-%m-%d' ) as pre_publish_datetime,
			a.discount,
			a.pre_publish_before_sharing_days,
			c.publish_datetime,
			a.is_approved,
			a.approved_datetime,
			b.msrp,
			d.model_id
		FROM
			cms_bt_product_share a
		LEFT JOIN cms_bt_product b ON b.product_id = a.product_id
	    LEFT JOIN voyageone_ims.ims_bt_product c ON c.product_id = a.product_id and c.cart_id=a.cart_id
		LEFT JOIN cms_bt_relation_model_product d ON d.product_id = a.product_id

		WHERE 
			a.product_id=#{productId}
	   		and a.channel_id=#{channelId}
	   		<if test="cartId != null ">
	   		and a.cart_id = #{cartId}
	   		</if>
	   		
</select>
	
  <resultMap id="CNProductBasePricetMap" type="com.voyageone.cms.formbean.ProductCNPriceInfo" >
    <result column="product_id" property="productId" />
    <result column="channel_id" property="channelId" />
    <result column="cart_id" property="cartId"  />
    <result column="free_shipping_type_id" property="freeShippingTypeId"  />
    <result column="first_sale_price" property="firstSalePrice"  />
    <result column="cn_price" property="cnPrice"  />
    <result column="cn_price" property="currentCnPrice"  />
    <result column="cn_price_discount" property="cnPriceDiscount"  />
    <result column="effective_price" property="effectivePrice"  />
    <result column="cn_price_rmb" property="cnPriceRmb"  />
    <result column="cn_price_adjustment_rmb" property="cnPriceAdjustmentRmb"  />
    <result column="cn_price_final_rmb" property="cnPriceFinalRmb" />
    <result column="cn_price_final_rmb_discount" property="cnPriceFinalRmbDiscount"  />
    <result column="pre_publish_datetime" property="prePublishDatetime"  />
    <result column="is_on_sale" property="isOnSale" jdbcType="BOOLEAN" />
    <result column="is_outlets_on_sale" property="isOutletsOnSale" jdbcType="BOOLEAN"/>
    <result column="is_approved" property="isApproved" jdbcType="BOOLEAN" />
    <result column="approved_datetime" property="approvedDatetime" />
    <result column="publish_datetime" property="publishDatetime"/>
    <result column="modified" property="modified" />
    <result column="no_approve_comment" property="noApproveComment"/>
    <result column="model_id" property="modelId"/>
    <result column="cn_group_id" property="cnGroupId"/>
    <result column="msrp" property="msrp"/>
    <result column="code" property="code"/>
    <result column="reference_msrp" property="referenceMsrp"/>
    <result column="reference_price" property="referencePrice"/>
    <result column="cn_price_final_rmb" property="currentCnPriceFinalRmb"/>
    <result column="num_iid" property="numIid"/>
 
  </resultMap>
  <select id="cms_get_CNProductBasePriceInfo"  resultMap="CNProductBasePricetMap"  parameterType="HashMap">
  SELECT
		a.product_id,
		a.channel_id,
		a.cart_id,
		a.free_shipping_type_id,
		a.first_sale_price,
		a.cn_price,
		a.cn_price_discount,
	    b.msrp,
	    b.code,
	    e.reference_msrp,
	    e.reference_price,
		a.effective_price,
		a.cn_price_rmb,
		a.cn_price_adjustment_rmb,
		a.cn_price_final_rmb,
		a.cn_price_final_rmb_discount,
		date_format(a.pre_publish_datetime,'%Y-%m-%d' ) as pre_publish_datetime,
		a.pre_publish_datetime,
		a.is_outlets_on_sale,
		a.is_on_sale,
		a.is_outlets_on_sale,
		a.is_approved,
		a.approved_datetime,
		a.no_approve_comment,
		a.modified,
   		c.publish_datetime,
   		c.num_iid,
		d.model_id,
		d.cn_group_id
	FROM
		cms_bt_cn_product_share a
    LEFT JOIN cms_bt_product b on b.product_id=a.product_id
    LEFT JOIN voyageone_ims.ims_bt_product c on a.product_id=c.product_id and a.cart_id=c.cart_id
		LEFT JOIN cms_bt_relation_model_product d ON d.product_id = a.product_id
    LEFT JOIN cms_bt_cn_model e on e.model_id=d.model_id
 	where 
 		a.product_id = #{productId}
      	and a.channel_id = #{channelId}
      	<if test="cartId != null ">
	   	and a.cart_id = #{cartId}
	   	</if>
  
  </select>
  <resultMap id="CNProductCartPricetMap" type="com.voyageone.cms.formbean.ProductCNCartPriceInfo" >
    <result column="product_id" property="productId" />
    <result column="channel_id" property="channelId" />
    <result column="cart_id" property="cartId"  />
    <result column="free_shipping_type_id" property="freeShippingTypeId"  />
    <result column="cn_price_adjustment_rmb" property="cnPriceAdjustmentRmb"  />
    <result column="cn_price_final_rmb" property="cnPriceFinalRmb" />
    <result column="cn_price_final_rmb_discount" property="cnPriceFinalRmbDiscount"  />
    <result column="pre_publish_datetime" property="prePublishDatetime"  />
    <result column="is_on_sale" property="isOnSale" jdbcType="BOOLEAN" />
    <result column="is_approved" property="isApproved" jdbcType="BOOLEAN" />
    <result column="approved_datetime" property="approvedDatetime" />
    <result column="modified" property="modified" />
    <result column="no_approve_comment" property="noApproveComment"/>
 
  </resultMap>
  <select id="cms_get_CNProductCartPriceInfo"  resultMap="CNProductCartPricetMap" parameterType="HashMap">
  	SELECT
		product_id,
		channel_id,
		cart_id,
		free_shipping_type_id,
		cn_price_adjustment_rmb,
		cn_price_final_rmb,
		cn_price_final_rmb_discount,
		date_format(pre_publish_datetime,'%Y-%m-%d' ) as pre_publish_datetime,
		is_on_sale,
		is_approved,
		approved_datetime,
		no_approve_comment,
		modified
	
	FROM
		cms_bt_cn_product_share 
 	where 
 		product_id = #{productId}
      	and channel_id = #{channelId}
    ORDER BY 
  		cart_id
  
  </select>
  <resultMap type="com.voyageone.cms.formbean.ProductPriceSettingBean" id="CNProductPriceSettingMap">
    <result column="product_id" property="productId"/>
    <result column="model_id" property="modelId"/>
    <result column="channel_id" property="channelId"/>
    <result column="base_price_id" property="basePriceId"/>
    <result column="pricing_factor" property="pricingFactor"/>
    <result column="exchange_rate" property="exchangeRate"/> 
    <result column="over_heard_1" property="overHeard1"/>
    <result column="over_heard_2" property="overHeard2"/>
    <result column="over_heard_3" property="overHeard3"/>
    <result column="over_heard_4" property="overHeard4"/>
    <result column="over_heard_5" property="overHeard5"/>
    <result column="shipping_compensation" property="shippingCompensation"/>
    <result column="modified" property="modified"/>
  </resultMap>
  <select id="cms_get_CNProductPriceSettingInfo"  resultMap="CNProductPriceSettingMap"  parameterType="HashMap">
  		SELECT
    	a.model_id,
		a.product_id ,
		a.channel_id,
		b.base_price_id,
		b.pricing_factor,
		b.exchange_rate,
		b.over_heard_1,
		b.over_heard_2,
		b.over_heard_3,
		b.over_heard_4,
		b.over_heard_5,
		b.shipping_compensation,
		b.modified
	FROM
     	cms_bt_relation_model_product a  
		LEFT JOIN 	cms_bt_cn_product_price_setting  b on a.product_id=b.product_id
	where 
 		a.product_id = #{productId}
      	and a.channel_id = #{channelId}
  
  </select>
  <select id="cms_get_ProductImage" resultType="com.voyageone.cms.formbean.ProductImage" parameterType="HashMap">
  	SELECT
		product_id AS productId,
		channel_id AS channelId,
		image_type_id AS imageTypeId,
		image_id AS imageId,
		image_name AS imageName,
		image_name AS imageUrl,
		display_order AS displayOrder
	FROM
		cms_bt_product_image
	where 
 		product_id = #{productId}
      	and channel_id = #{channelId}
  
  </select>
  <select id="get_custom_info" parameterType="HashMap" resultType="HashMap">
  	SELECT
		c.cfg_val2 as name,
		b.attribute_value as value
	FROM
		cms_bt_product a,
		cms_mt_product_attribute b,
		cms_mt_feed_config c
	WHERE
		a.channel_id = b.channel_id
	AND a.product_id = #{productId,jdbcType=INTEGER} 
	AND a.channel_id = #{channelId,jdbcType=VARCHAR}
	AND a.url_key = b.product_url_key
	AND c.order_channel_id = b.channel_id
	AND c.cfg_name = b.attribute_name
  </select>
  <!-- cms_bt_product -->
  <insert id="insert_cms_bt_product" parameterType="com.voyageone.cms.formbean.ProductUSBean" >
    insert into cms_bt_product
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="productId != null" >
        product_id,
      </if>
      <if test="channelId != null" >
        channel_id,
      </if>
      <if test="code != null" >
        code,
      </if>
      <if test="name != null" >
        name,
      </if>
      <if test="productTypeId != null" >
        product_type_id,
      </if>
      <if test="colorMapId != null" >
        color_map_id,
      </if>
      <if test="color != null" >
        color,
      </if>
      <if test="msrp != null" >
        msrp,
      </if>
      <if test="madeInCountryId != null" >
        made_in_country_id,
      </if>
      <if test="materialFabric1Id != null" >
        material_fabric_1_id,
      </if>
      <if test="materialFabric2Id != null" >
        material_fabric_2_id,
      </if>
      <if test="materialFabric3Id != null" >
        material_fabric_3_id,
      </if>
      <if test="imageItemCount != null" >
        image_item_count,
      </if>
      <if test="imageBoxCount != null" >
        image_box_count,
      </if>
      <if test="imageAngleCount != null" >
        image_angle_count,
      </if>
      <if test="availableTime != null" >
        available_time,
      </if>
      <if test="promotionTag != null" >
        promotion_tag,
      </if>
      <if test="urlKey != null" >
        url_key,
      </if>
      <if test="isNewArrival != null" >
        is_new_arrival,
      </if>
      <if test="isOutletsOnSale != null" >
        is_outlets_on_sale,
      </if>
      <if test="isRewardEligible != null" >
        is_reward_eligible,
      </if>
      <if test="isDiscountEligible != null" >
        is_discount_eligible,
      </if>
      <if test="isPhoneOrderOnly != null" >
        is_phone_order_only,
      </if>
      <if test="orderLimitCount != null" >
        order_limit_count,
      </if>
      <if test="isApprovedDescription != null" >
        is_approved_description,
      </if>
      <if test="isEffective != null" >
        is_effective,
      </if>
        created,
      <if test="modifier != null" >
        creater,
      </if>
        modified,
      <if test="modifier != null" >
        modifier,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="productId != null" >
        #{productId,jdbcType=INTEGER},
      </if>
      <if test="channelId != null" >
        #{channelId,jdbcType=VARCHAR},
      </if>
      <if test="code != null" >
        #{code,jdbcType=VARCHAR},
      </if>
      <if test="name != null" >
        #{name,jdbcType=VARCHAR},
      </if>
      <if test="productTypeId != null" >
        #{productTypeId,jdbcType=INTEGER},
      </if>
      <if test="colorMapId != null" >
        #{colorMapId,jdbcType=INTEGER},
      </if>
      <if test="color != null" >
        #{color,jdbcType=VARCHAR},
      </if>
      <if test="msrp != null" >
        #{msrp,jdbcType=DECIMAL},
      </if>
      <if test="madeInCountryId != null" >
        #{madeInCountryId,jdbcType=INTEGER},
      </if>
      <if test="materialFabric1Id != null" >
        #{materialFabric1Id,jdbcType=INTEGER},
      </if>
      <if test="materialFabric2Id != null" >
        #{materialFabric2Id,jdbcType=INTEGER},
      </if>
      <if test="materialFabric3Id != null" >
        #{materialFabric3Id,jdbcType=INTEGER},
      </if>
      <if test="imageItemCount != null" >
        #{imageItemCount,jdbcType=INTEGER},
      </if>
      <if test="imageBoxCount != null" >
        #{imageBoxCount,jdbcType=INTEGER},
      </if>
      <if test="imageAngleCount != null" >
        #{imageAngleCount,jdbcType=INTEGER},
      </if>
      <if test="availableTime != null" >
        #{availableTime,jdbcType=VARCHAR},
      </if>
      <if test="promotionTag != null" >
        #{promotionTag,jdbcType=VARCHAR},
      </if>
      <if test="urlKey != null" >
        #{urlKey,jdbcType=VARCHAR},
      </if>
      <if test="isNewArrival != null" >
        #{isNewArrival,jdbcType=CHAR},
      </if>
      <if test="isOutletsOnSale != null" >
        #{isOutletsOnSale,jdbcType=CHAR},
      </if>
      <if test="isRewardEligible != null" >
        #{isRewardEligible,jdbcType=CHAR},
      </if>
      <if test="isDiscountEligible != null" >
        #{isDiscountEligible,jdbcType=CHAR},
      </if>
      <if test="isPhoneOrderOnly != null" >
        #{isPhoneOrderOnly,jdbcType=CHAR},
      </if>
      <if test="orderLimitCount != null" >
        #{orderLimitCount,jdbcType=INTEGER},
      </if>
      <if test="isApprovedDescription != null" >
        #{isApprovedDescription,jdbcType=CHAR},
      </if>
      <if test="isEffective != null" >
        #{isEffective,jdbcType=CHAR},
      </if>
        now(),
      <if test="modifier != null" >
        #{modifier,jdbcType=VARCHAR},
      </if>
     	now(),
      <if test="modifier != null" >
        #{modifier,jdbcType=VARCHAR},
      </if>
    </trim>
  </insert>
  <update id="update_cms_bt_product" parameterType="com.voyageone.cms.formbean.ProductUSBean" >
    update cms_bt_product
    <set >
      <if test="code != null" >
        code = #{code,jdbcType=VARCHAR},
      </if>
      <if test="name != null" >
        name = #{name,jdbcType=VARCHAR},
      </if>
      <if test="productTypeId != null" >
        product_type_id = #{productTypeId,jdbcType=INTEGER},
      </if>
      <if test="colorMapId != null" >
        color_map_id = #{colorMapId,jdbcType=INTEGER},
      </if>
      <if test="color != null" >
        color = #{color,jdbcType=VARCHAR},
      </if>
      <if test="msrp != null" >
        msrp = #{msrp,jdbcType=DECIMAL},
      </if>
      <if test="madeInCountryId != null" >
        made_in_country_id = #{madeInCountryId,jdbcType=INTEGER},
      </if>
      <if test="materialFabric1Id != null" >
        material_fabric_1_id = #{materialFabric1Id,jdbcType=INTEGER},
      </if>
      <if test="materialFabric2Id != null" >
        material_fabric_2_id = #{materialFabric2Id,jdbcType=INTEGER},
      </if>
      <if test="materialFabric3Id != null" >
        material_fabric_3_id = #{materialFabric3Id,jdbcType=INTEGER},
      </if>
      <if test="imageItemCount != null" >
        image_item_count = #{imageItemCount,jdbcType=INTEGER},
      </if>
      <if test="imageBoxCount != null" >
        image_box_count = #{imageBoxCount,jdbcType=INTEGER},
      </if>
      <if test="imageAngleCount != null" >
        image_angle_count = #{imageAngleCount,jdbcType=INTEGER},
      </if>
      <if test="availableTime != null" >
        available_time = #{availableTime,jdbcType=VARCHAR},
      </if>
      <if test="promotionTag != null" >
        promotion_tag = #{promotionTag,jdbcType=VARCHAR},
      </if>
      <if test="urlKey != null" >
        url_key = #{urlKey,jdbcType=VARCHAR},
      </if>
      <if test="isNewArrival != null" >
        is_new_arrival = #{isNewArrival,jdbcType=CHAR},
      </if>
      <if test="isOutletsOnSale != null" >
        is_outlets_on_sale = #{isOutletsOnSale,jdbcType=CHAR},
      </if>
      <if test="isRewardEligible != null" >
        is_reward_eligible = #{isRewardEligible,jdbcType=CHAR},
      </if>
      <if test="isDiscountEligible != null" >
        is_discount_eligible = #{isDiscountEligible,jdbcType=CHAR},
      </if>
      <if test="isPhoneOrderOnly != null" >
        is_phone_order_only = #{isPhoneOrderOnly,jdbcType=CHAR},
      </if>
      <if test="orderLimitCount != null" >
        order_limit_count = #{orderLimitCount,jdbcType=INTEGER},
      </if>
      <if test="isApprovedDescription != null" >
        is_approved_description = #{isApprovedDescription,jdbcType=CHAR},
      </if>
      <if test="isEffective != null" >
        is_effective = #{isEffective,jdbcType=CHAR},
      </if>
        modified = now(),
      <if test="modifier != null" >
        modifier = #{modifier,jdbcType=VARCHAR},
      </if>
    </set>
    where product_id = #{productId,jdbcType=INTEGER}
      and channel_id = #{channelId,jdbcType=VARCHAR}
  </update>
  <!-- cms_bt_product_extend -->
  <insert id="insert_cms_bt_product_extend" parameterType="com.voyageone.cms.formbean.ProductUSBean" >
    insert into cms_bt_product_extend
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="productId != null" >
        product_id,
      </if>
      <if test="channelId != null" >
        channel_id,
      </if>
      <if test="usAbstract != null" >
        abstract,
      </if>
      <if test="shortDescription != null" >
        short_description,
      </if>
      <if test="accessory != null" >
        accessory,
      </if>
      <if test="promotionTag != null" >
        promotion_tag,
      </if>
      <if test="mainCategoryId != null" >
        main_category_id,
      </if>
        created,
      <if test="modifier != null" >
        creater,
      </if>
        modified,
      <if test="modifier != null" >
        modifier,
      </if>
      <if test="longDescription != null" >
        long_description,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="productId != null" >
        #{productId,jdbcType=INTEGER},
      </if>
      <if test="channelId != null" >
        #{channelId,jdbcType=VARCHAR},
      </if>
      <if test="usAbstract != null" >
        #{usAbstract,jdbcType=VARCHAR},
      </if>
      <if test="shortDescription != null" >
        #{shortDescription,jdbcType=VARCHAR},
      </if>
      <if test="accessory != null" >
        #{accessory,jdbcType=VARCHAR},
      </if>
      <if test="promotionTag != null" >
        #{promotionTag,jdbcType=VARCHAR},
      </if>
      <if test="mainCategoryId != null" >
        #{mainCategoryId,jdbcType=INTEGER},
      </if>
        now(),
      <if test="modifier != null" >
        #{modifier,jdbcType=VARCHAR},
      </if>
		now(),
      <if test="modifier != null" >
        #{modifier,jdbcType=VARCHAR},
      </if>
      <if test="longDescription != null" >
        #{longDescription,jdbcType=LONGVARCHAR},
      </if>
    </trim>
  </insert>
  <update id="update_cms_bt_product_extend" parameterType="com.voyageone.cms.formbean.ProductUSBean" >
    update cms_bt_product_extend
    <set >
      <if test="usAbstract != null" >
        abstract = #{usAbstract,jdbcType=VARCHAR},
      </if>
      <if test="shortDescription != null" >
        short_description = #{shortDescription,jdbcType=VARCHAR},
      </if>
      <if test="accessory != null" >
        accessory = #{accessory,jdbcType=VARCHAR},
      </if>
      <if test="promotionTag != null" >
        promotion_tag = #{promotionTag,jdbcType=VARCHAR},
      </if>
      <if test="mainCategoryId != null" >
        main_category_id = #{mainCategoryId,jdbcType=INTEGER},
      </if>
        modified = now(),
      <if test="modifier != null" >
        modifier = #{modifier,jdbcType=VARCHAR},
      </if>
      <if test="longDescription != null" >
        long_description = #{longDescription,jdbcType=LONGVARCHAR},
      </if>
    </set>
    where product_id = #{productId,jdbcType=INTEGER}
      and channel_id = #{channelId,jdbcType=VARCHAR}
  </update>
  <delete id="delete_cms_bt_product_extend" parameterType="com.voyageone.cms.formbean.ProductUSBean" >
    delete from cms_bt_product
    where product_id = #{productId,jdbcType=INTEGER}
      and channel_id = #{channelId,jdbcType=VARCHAR}
  </delete>
  <!-- cms_bt_google_product_extend -->
  <insert id="insert_cms_bt_google_product_extend" parameterType="com.voyageone.cms.formbean.ProductUSBean" >
    insert into cms_bt_google_product_extend
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="productId != null" >
        product_id,
      </if>
      <if test="channelId != null" >
        channel_id,
      </if>
      <if test="googleCategoryId != null" >
        google_category_id,
      </if>
      <if test="googleDepartmentId != null" >
        google_department_id,
      </if>
        created,
      <if test="modifier != null" >
        creater,
      </if>
        modified,
      <if test="modifier != null" >
        modifier,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="productId != null" >
        #{productId,jdbcType=INTEGER},
      </if>
      <if test="channelId != null" >
        #{channelId,jdbcType=VARCHAR},
      </if>
      <if test="googleCategoryId != null" >
        #{googleCategoryId,jdbcType=INTEGER},
      </if>
      <if test="googleDepartmentId != null" >
        #{googleDepartmentId,jdbcType=INTEGER},
      </if>
        now(),
      <if test="modifier != null" >
        #{creater,jdbcType=VARCHAR},
      </if>
 		now(),
      <if test="modifier != null" >
        #{modifier,jdbcType=VARCHAR},
      </if>
    </trim>
  </insert>
  <update id="update_cms_bt_google_product_extend" parameterType="com.voyageone.cms.formbean.ProductUSBean" >
    update cms_bt_google_product_extend
    <set >
      <if test="googleCategoryId != null" >
        google_category_id = #{googleCategoryId,jdbcType=INTEGER},
      </if>
      <if test="googleDepartmentId != null" >
        google_department_id = #{googleDepartmentId,jdbcType=INTEGER},
      </if>
        modified = now(),
      <if test="modifier != null" >
        modifier = #{modifier,jdbcType=VARCHAR},
      </if>
    </set>
    where product_id = #{productId,jdbcType=INTEGER}
      and channel_id = #{channelId,jdbcType=VARCHAR}
  </update>  
  <delete id="delete_cms_bt_google_product_extend" parameterType="com.voyageone.cms.formbean.ProductUSBean" >
    delete from cms_bt_google_product_extend
    where product_id = #{productId,jdbcType=INTEGER}
      and channel_id = #{channelId,jdbcType=VARCHAR}
  </delete>
  <!-- cms_bt_amazon_product_extend -->
  <insert id="insert_cms_bt_amazon_product_extend" parameterType="com.voyageone.cms.formbean.ProductUSBean" >
    insert into cms_bt_amazon_product_extend
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="productId != null" >
        product_id,
      </if>
      <if test="channelId != null" >
        channel_id,
      </if>
      <if test="amazonBrowseTreeId != null" >
        amazon_browse_tree_id,
      </if>
        created,
      <if test="modifier != null" >
        creater,
      </if>
        modified,
      <if test="modifier != null" >
        modifier,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="productId != null" >
        #{productId,jdbcType=INTEGER},
      </if>
      <if test="channelId != null" >
        #{channelId,jdbcType=VARCHAR},
      </if>
      <if test="amazonBrowseTreeId != null" >
        #{amazonBrowseTreeId,jdbcType=INTEGER},
      </if>
        now(),
      <if test="modifier != null" >
        #{modifier,jdbcType=VARCHAR},
      </if>
        now(),
      <if test="modifier != null" >
        #{modifier,jdbcType=VARCHAR},
      </if>
    </trim>
  </insert>
  <update id="update_cms_bt_amazon_product_extend" parameterType="com.voyageone.cms.formbean.ProductUSBean" >
    update cms_bt_amazon_product_extend
    <set >
      <if test="amazonBrowseTreeId != null" >
        amazon_browse_tree_id = #{amazonBrowseTreeId,jdbcType=INTEGER},
      </if>
        modified = now(),
      <if test="modifier != null" >
        modifier = #{modifier,jdbcType=VARCHAR},
      </if>
    </set>
    where product_id = #{productId,jdbcType=INTEGER}
      and channel_id = #{channelId,jdbcType=VARCHAR}
  </update>
  <delete id="delete_cms_bt_amazon_product_extend" parameterType="com.voyageone.cms.formbean.ProductUSBean" >
    delete from cms_bt_amazon_product_extend
    where product_id = #{productId,jdbcType=INTEGER}
      and channel_id = #{channelId,jdbcType=VARCHAR}
  </delete>
  <!-- cms_bt_pricegrabber_product_extend -->
  <insert id="insert_cms_bt_pricegrabber_product_extend" parameterType="com.voyageone.cms.formbean.ProductUSBean" >
    insert into cms_bt_pricegrabber_product_extend
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="productId != null" >
        product_id,
      </if>
      <if test="channelId != null" >
        channel_id,
      </if>
      <if test="pricegrabberCategoryId != null" >
        pricegrabber_category_id,
      </if>
        created,
      <if test="modifier != null" >
        creater,
      </if>
        modified,
      <if test="modifier != null" >
        modifier,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="productId != null" >
        #{productId,jdbcType=INTEGER},
      </if>
      <if test="channelId != null" >
        #{channelId,jdbcType=VARCHAR},
      </if>
      <if test="pricegrabberCategoryId != null" >
        #{pricegrabberCategoryId,jdbcType=INTEGER},
      </if>
        now(),
      <if test="modifier != null" >
        #{modifier,jdbcType=VARCHAR},
      </if>
        now(),
      <if test="modifier != null" >
        #{modifier,jdbcType=VARCHAR},
      </if>
    </trim>
  </insert>
  <update id="update_cms_bt_pricegrabber_product_extend" parameterType="com.voyageone.cms.formbean.ProductUSBean" >
    update cms_bt_pricegrabber_product_extend
    <set >
      <if test="pricegrabberCategoryId != null" >
        pricegrabber_category_id = #{pricegrabberCategoryId,jdbcType=INTEGER},
      </if>
        modified = now(),
      <if test="modifier != null" >
        modifier = #{modifier,jdbcType=VARCHAR},
      </if>
    </set>
    where product_id = #{productId,jdbcType=INTEGER}
      and channel_id = #{channelId,jdbcType=VARCHAR}
  </update>
  <delete id="delete_cms_bt_pricegrabber_product_extend" parameterType="com.voyageone.cms.formbean.ProductUSBean" >
    delete from cms_bt_cn_product_extend
    where product_id = #{productId,jdbcType=INTEGER}
      and channel_id = #{channelId,jdbcType=VARCHAR}
  </delete>
  <!-- cms_bt_cn_product -->
  <insert id="insert_cms_bt_cn_product" parameterType="com.voyageone.cms.formbean.ProductCNBaseProductInfo" >
    insert into cms_bt_cn_product
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="productId != null" >
        product_id,
      </if>
      <if test="channelId != null" >
        channel_id,
      </if>
      <if test="code != null" >
        code,
      </if>
      <if test="urlKey != null" >
        url_key,
      </if>
      <if test="cnName != null" >
        cn_name,
      </if>
      <if test="cnColor != null" >
        cn_color,
      </if>
      <if test="cnIsApprovedDescription != null" >
        cn_is_approved_description,
      </if>      
        created,
      <if test="modifier != null" >
        creater,
      </if>
        modified,
      <if test="modifier != null" >
        modifier,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="productId != null" >
        #{productId,jdbcType=INTEGER},
      </if>
      <if test="channelId != null" >
        #{channelId,jdbcType=VARCHAR},
      </if>
      <if test="code != null" >
        #{code,jdbcType=VARCHAR},
      </if>
      <if test="urlKey != null" >
        #{urlKey,jdbcType=VARCHAR},
      </if>
      <if test="cnName != null" >
        #{cnName,jdbcType=VARCHAR},
      </if>
      <if test="cnColor != null" >
        #{cnColor,jdbcType=VARCHAR},
      </if>
      <if test="cnIsApprovedDescription != null" >
        #{cnIsApprovedDescription,jdbcType=BOOLEAN},
      </if>       
		now(),
      <if test="modifier != null" >
        #{modifier,jdbcType=VARCHAR},
      </if>
        now(),
      <if test="modifier != null" >
        #{modifier,jdbcType=VARCHAR},
      </if>
    </trim>
  </insert>
  <update id="update_cms_bt_cn_product" parameterType="com.voyageone.cms.formbean.ProductCNBaseProductInfo" >
    update cms_bt_cn_product
    <set >
      <if test="code != null" >
        code = #{code,jdbcType=VARCHAR},
      </if>
      <if test="urlKey != null" >
        url_key = #{urlKey,jdbcType=VARCHAR},
      </if>
      <if test="cnName != null" >
        cn_name = #{cnName,jdbcType=VARCHAR},
      </if>
      <if test="cnColor != null" >
        cn_color = #{cnColor,jdbcType=VARCHAR},
      </if>
      <if test="cnIsApprovedDescription != null" >
        cn_is_approved_description = #{cnIsApprovedDescription,jdbcType=BOOLEAN},
      </if>
        modified = now(),
      <if test="modifier != null" >
        modifier = #{modifier,jdbcType=VARCHAR},
      </if>
    </set>
    where product_id = #{productId,jdbcType=INTEGER}
      and channel_id = #{channelId,jdbcType=VARCHAR}
  </update>

  <!-- cms_bt_cn_product_extend -->
  <insert id="insert_cms_bt_cn_product_extend" parameterType="com.voyageone.cms.formbean.ProductCNBaseProductInfo" >
    insert into cms_bt_cn_product_extend
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="productId != null" >
        product_id,
      </if>
      <if test="channelId != null" >
        channel_id,
      </if>
      <if test="cnAbstract != null" >
        cn_abstract,
      </if>
      <if test="cnShortDescription != null" >
        cn_short_description,
      </if>
      <if test="displayImages != null" >
        display_images,
      </if>
      <if test="referenceMsrp != null" >
        reference_msrp,
      </if>
      <if test="referencePrice != null" >
        reference_price,
      </if>
      <if test="hsCodeId != null" >
        hs_code_id,
      </if>
      <if test="hsCodePuId != null" >
        hs_code_pu_id,
      </if>
      <if test="mainCategoryId != null" >
        main_category_id,
      </if>
        created,
      <if test="modifier != null" >
        creater,
      </if>
        modified,
      <if test="modifier != null" >
        modifier,
      </if>
      <if test="cnLongDescription != null" >
        cn_long_description,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="productId != null" >
        #{productId,jdbcType=INTEGER},
      </if>
      <if test="channelId != null" >
        #{channelId,jdbcType=VARCHAR},
      </if>
      <if test="cnAbstract != null" >
        #{cnAbstract,jdbcType=VARCHAR},
      </if>
      <if test="cnShortDescription != null" >
        #{cnShortDescription,jdbcType=VARCHAR},
      </if>
      <if test="displayImages != null" >
        #{displayImages,jdbcType=VARCHAR},
      </if>
      <if test="referenceMsrp != null" >
        #{referenceMsrp,jdbcType=DECIMAL},
      </if>
      <if test="referencePrice != null" >
        #{referencePrice,jdbcType=DECIMAL},
      </if>
      <if test="hsCodeId != null" >
        #{hsCodeId,jdbcType=INTEGER},
      </if>
      <if test="hsCodePuId != null" >
        #{hsCodePuId,jdbcType=INTEGER},
      </if>
      <if test="mainCategoryId != null" >
        #{mainCategoryId,jdbcType=INTEGER},
      </if>
        now(),
      <if test="modifier != null" >
        #{modifier,jdbcType=VARCHAR},
      </if>
        now(),
      <if test="modifier != null" >
        #{modifier,jdbcType=VARCHAR},
      </if>
      <if test="cnLongDescription != null" >
        #{cnLongDescription,jdbcType=LONGVARCHAR},
      </if>
    </trim>
  </insert>
  <update id="update_cms_bt_cn_product_extend" parameterType="com.voyageone.cms.formbean.ProductCNBaseProductInfo" >
    update cms_bt_cn_product_extend
    <set >
      <if test="cnAbstract != null" >
        cn_abstract = #{cnAbstract,jdbcType=VARCHAR},
      </if>
      <if test="cnShortDescription != null" >
        cn_short_description = #{cnShortDescription,jdbcType=VARCHAR},
      </if>
      <if test="displayImages != null" >
        display_images = #{displayImages,jdbcType=VARCHAR},
      </if>
      <if test="referenceMsrp != null" >
        reference_msrp = #{referenceMsrp,jdbcType=DECIMAL},
      </if>
      <if test="referencePrice != null" >
        reference_price = #{referencePrice,jdbcType=DECIMAL},
      </if>
      <if test="hsCodeId != null" >
        hs_code_id = #{hsCodeId,jdbcType=INTEGER},
      </if>
      <if test="hsCodePuId != null" >
        hs_code_pu_id = #{hsCodePuId,jdbcType=INTEGER},
      </if>
      <if test="mainCategoryId != null" >
        main_category_id = #{mainCategoryId,jdbcType=INTEGER},
      </if>
        modified = now(),
      <if test="modifier != null" >
        modifier = #{modifier,jdbcType=VARCHAR},
      </if>
      <if test="cnLongDescription != null" >
        cn_long_description = #{cnLongDescription,jdbcType=LONGVARCHAR},
      </if>
    </set>
    where product_id = #{productId,jdbcType=INTEGER}
      and channel_id = #{channelId,jdbcType=VARCHAR}
  </update>
  <delete id="delete_cms_bt_cn_product_extend" parameterType="com.voyageone.cms.formbean.ProductCNBaseProductInfo" >
    delete from cms_bt_cn_product_extend
    where product_id = #{productId,jdbcType=INTEGER}
      and channel_id = #{channelId,jdbcType=VARCHAR}
  </delete>
  
  <!-- cms_bt_cn_tm_product_extend -->
  <insert id="insert_cms_bt_cn_tm_product_extend" parameterType="com.voyageone.cms.formbean.ProductCNTMProductInfo" >
    insert into cms_bt_cn_tm_product_extend
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="productId != null" >
        product_id,
      </if>
      <if test="channelId != null" >
        channel_id,
      </if>
      <if test="tbName != null" >
        tb_name,
      </if>
      <if test="tbAttachmentName != null" >
        tb_attachment_name,
      </if>
      <if test="tmName != null" >
        tm_name,
      </if>
      <if test="tmAttachmentName != null" >
        tm_attachment_name,
      </if>
      <if test="tgName != null" >
        tg_name,
      </if>
      <if test="tgAttachmentName != null" >
        tg_attachment_name,
      </if>
      <if test="tmShortDescription != null" >
        tm_short_description,
      </if>
      <if test="tmCategoryId != null" >
        tm_category_id,
      </if>
        created,
      <if test="modifier != null" >
        creater,
      </if>
        modified,
      <if test="modifier != null" >
        modifier,
      </if>
      <if test="tmLongDescription != null" >
        tm_long_description,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="productId != null" >
        #{productId,jdbcType=INTEGER},
      </if>
      <if test="channelId != null" >
        #{channelId,jdbcType=VARCHAR},
      </if>
      <if test="tbName != null" >
        #{tbName,jdbcType=VARCHAR},
      </if>
      <if test="tbAttachmentName != null" >
        #{tbAttachmentName,jdbcType=VARCHAR},
      </if>
      <if test="tmName != null" >
        #{tmName,jdbcType=VARCHAR},
      </if>
      <if test="tmAttachmentName != null" >
        #{tmAttachmentName,jdbcType=VARCHAR},
      </if>
      <if test="tgName != null" >
        #{tgName,jdbcType=VARCHAR},
      </if>
      <if test="tgAttachmentName != null" >
        #{tgAttachmentName,jdbcType=VARCHAR},
      </if>
      <if test="tmShortDescription != null" >
        #{tmShortDescription,jdbcType=VARCHAR},
      </if>
      <if test="tmCategoryId != null" >
        #{tmCategoryId,jdbcType=INTEGER},
      </if>
        now(),
      <if test="modifier != null" >
        #{modifier,jdbcType=VARCHAR},
      </if>
        now(),
      <if test="modifier != null" >
        #{modifier,jdbcType=VARCHAR},
      </if>
      <if test="tmLongDescription != null" >
        #{tmLongDescription,jdbcType=LONGVARCHAR},
      </if>
    </trim>
  </insert>
  <update id="update_cms_bt_cn_tm_product_extend" parameterType="com.voyageone.cms.formbean.ProductCNTMProductInfo" >
    update cms_bt_cn_tm_product_extend
    <set >
      <if test="tbName != null" >
        tb_name = #{tbName,jdbcType=VARCHAR},
      </if>
      <if test="tbAttachmentName != null" >
        tb_attachment_name = #{tbAttachmentName,jdbcType=VARCHAR},
      </if>
      <if test="tmName != null" >
        tm_name = #{tmName,jdbcType=VARCHAR},
      </if>
      <if test="tmAttachmentName != null" >
        tm_attachment_name = #{tmAttachmentName,jdbcType=VARCHAR},
      </if>
      <if test="tgName != null" >
        tg_name = #{tgName,jdbcType=VARCHAR},
      </if>
      <if test="tgAttachmentName != null" >
        tg_attachment_name = #{tgAttachmentName,jdbcType=VARCHAR},
      </if>
      <if test="tmShortDescription != null" >
        tm_short_description = #{tmShortDescription,jdbcType=VARCHAR},
      </if>
      <if test="tmCategoryId != null" >
        tm_category_id = #{tmCategoryId,jdbcType=INTEGER},
      </if>
        modified = now(),
      <if test="modifier != null" >
        modifier = #{modifier,jdbcType=VARCHAR},
      </if>
      <if test="tmLongDescription != null" >
        tm_long_description = #{tmLongDescription,jdbcType=LONGVARCHAR},
      </if>
    </set>
    where product_id = #{productId,jdbcType=INTEGER}
      and channel_id = #{channelId,jdbcType=VARCHAR}
  </update>
  <delete id="delete_cms_bt_cn_tm_product_extend" parameterType="com.voyageone.cms.formbean.ProductCNTMProductInfo" >
    delete from cms_bt_cn_tm_product_extend
    where product_id = #{productId,jdbcType=INTEGER}
      and channel_id = #{channelId,jdbcType=VARCHAR}
  </delete>
  
  <!-- cms_bt_cn_jd_product_extend -->
  <insert id="insert_cms_bt_cn_jd_product_extend" parameterType="com.voyageone.cms.formbean.ProductCNJDProductInfo" >
    insert into cms_bt_cn_jd_product_extend
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="productId != null" >
        product_id,
      </if>
      <if test="channelId != null" >
        channel_id,
      </if>
      <if test="jdName != null" >
        jd_name,
      </if>
      <if test="jgName != null" >
        jg_name,
      </if>
      <if test="jdShortDescription != null" >
        jd_short_description,
      </if>
      <if test="jdCategoryId != null" >
        jd_category_id,
      </if>
        created,
      <if test="modifier != null" >
        creater,
      </if>
        modified,
      <if test="modifier != null" >
        modifier,
      </if>
      <if test="jdLongDescription != null" >
        jd_long_description,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="productId != null" >
        #{productId,jdbcType=INTEGER},
      </if>
      <if test="channelId != null" >
        #{channelId,jdbcType=VARCHAR},
      </if>
      <if test="jdName != null" >
        #{jdName,jdbcType=VARCHAR},
      </if>
      <if test="jgName != null" >
        #{jgName,jdbcType=VARCHAR},
      </if>
      <if test="jdShortDescription != null" >
        #{jdShortDescription,jdbcType=VARCHAR},
      </if>
      <if test="jdCategoryId != null" >
        #{jdCategoryId,jdbcType=INTEGER},
      </if>
        now(),
      <if test="modifier != null" >
        #{modifier,jdbcType=VARCHAR},
      </if>
        now(),
      <if test="modifier != null" >
        #{modifier,jdbcType=VARCHAR},
      </if>
      <if test="jdLongDescription != null" >
        #{jdLongDescription,jdbcType=LONGVARCHAR},
      </if>
    </trim>
  </insert>
  <update id="update_cms_bt_cn_jd_product_extend" parameterType="com.voyageone.cms.formbean.ProductCNJDProductInfo" >
    update cms_bt_cn_jd_product_extend
    <set >
      <if test="jdName != null" >
        jd_name = #{jdName,jdbcType=VARCHAR},
      </if>
      <if test="jgName != null" >
        jg_name = #{jgName,jdbcType=VARCHAR},
      </if>
      <if test="jdShortDescription != null" >
        jd_short_description = #{jdShortDescription,jdbcType=VARCHAR},
      </if>
      <if test="jdCategoryId != null" >
        jd_category_id = #{jdCategoryId,jdbcType=INTEGER},
      </if>
        modified = now(),
      <if test="modifier != null" >
        modifier = #{modifier,jdbcType=VARCHAR},
      </if>
      <if test="jdLongDescription != null" >
        jd_long_description = #{jdLongDescription,jdbcType=LONGVARCHAR},
      </if>
    </set>
    where product_id = #{productId,jdbcType=INTEGER}
      and channel_id = #{channelId,jdbcType=VARCHAR}
  </update>
  <delete id="delete_cms_bt_cn_jd_product_extend" parameterType="com.voyageone.cms.formbean.ProductCNJDProductInfo" >
    delete from cms_bt_cn_jd_product_extend
    where product_id = #{productId,jdbcType=INTEGER}
      and channel_id = #{channelId,jdbcType=VARCHAR}
  </delete>
  
  <insert id="insert_cms_bt_history_product_price" parameterType="HashMap" >
    insert into cms_bt_history_product_price
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="productId != null" >
        product_id,
      </if>
      <if test="channelId != null" >
        channel_id,
      </if>
      <if test="cartId != null" >
        cart_id,
      </if>
      <if test="price != null" >
        price,
      </if>
      <if test="effectivePrice != null" >
        effective_price,
      </if>
      <if test="cnPriceRmb != null" >
        cn_price_rmb,
      </if>
      <if test="cnPriceAdjustmentRmb != null" >
        cn_price_adjustment_rmb,
      </if>
      <if test="cnPriceFinalRmb != null" >
        cn_price_final_rmb,
      </if>
        created,
      <if test="modifier != null" >
        creater,
      </if>
        modified,
      <if test="modifier != null" >
        modifier,
      </if>
      <if test="comment != null" >
        comment,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="id != null" >
        #{id,jdbcType=INTEGER},
      </if>
      <if test="productId != null" >
        #{productId,jdbcType=INTEGER},
      </if>
      <if test="channelId != null" >
        #{channelId,jdbcType=VARCHAR},
      </if>
      <if test="cartId != null" >
        #{cartId,jdbcType=INTEGER},
      </if>
      <if test="price != null" >
        #{price,jdbcType=DECIMAL},
      </if>
      <if test="effectivePrice != null" >
        #{effectivePrice,jdbcType=DECIMAL},
      </if>
      <if test="cnPriceRmb != null" >
        #{cnPriceRmb,jdbcType=DECIMAL},
      </if>
      <if test="cnPriceAdjustmentRmb != null" >
        #{cnPriceAdjustmentRmb,jdbcType=DECIMAL},
      </if>
      <if test="cnPriceFinalRmb != null" >
        #{cnPriceFinalRmb,jdbcType=DECIMAL},
      </if>
        now(),
      <if test="modifier != null" >
        #{modifier,jdbcType=VARCHAR},
      </if>
        now(),
      <if test="modifier != null" >
        #{modifier,jdbcType=VARCHAR},
      </if>
      <if test="comment != null" >
        #{comment,jdbcType=LONGVARCHAR},
      </if>
    </trim>
  </insert>
  
  <!-- cms_bt_product_share -->
  <update id="update_cms_bt_product_share" parameterType="com.voyageone.cms.formbean.ProductUSPriceInfo" >
    update cms_bt_product_share
    <set >
      <if test="freeShippingTypeId != null" >
        free_shipping_type_id = #{freeShippingTypeId,jdbcType=INTEGER},
      </if>
      <if test="price != null" >
        price = #{price,jdbcType=DECIMAL},
      </if>
      <if test="discount != null" >
        discount = #{discount,jdbcType=DECIMAL},
      </if>
      <if test="profit != null" >
        profit = #{profit,jdbcType=DECIMAL},
      </if>
      <if test="prePublishBeforeSharingDays != null" >
        pre_publish_before_sharing_days = #{prePublishBeforeSharingDays,jdbcType=INTEGER},
      </if>
      <if test="prePublishDatetime != null" >
        pre_publish_datetime = #{prePublishDatetime,jdbcType=TIMESTAMP},
      </if>
      <if test="isOutletsOnSale != null" >
        is_outlets_on_sale = #{isOutletsOnSale,jdbcType=CHAR},
      </if>
      <if test="isOnSale != null" >
        is_on_sale = #{isOnSale,jdbcType=CHAR},
      </if>
      <if test="isApproved != null" >
        is_approved = #{isApproved,jdbcType=CHAR},
      </if>
      <if test="approvedDatetime != null" >
        approved_datetime = #{approvedDatetime,jdbcType=TIMESTAMP},
      </if>
        modified = now(),
      <if test="modifier != null" >
        modifier = #{modifier,jdbcType=VARCHAR},
      </if>
      <if test="noApproveComment != null" >
        no_approve_comment = #{noApproveComment,jdbcType=LONGVARCHAR},
      </if>
    </set>
    where product_id = #{productId,jdbcType=INTEGER}
      and channel_id = #{channelId,jdbcType=VARCHAR}
      and cart_id = #{cartId,jdbcType=INTEGER}
  </update>
  <!-- cms_bt_cn_product_share -->
  <update id="update_cms_bt_cn_product_share" parameterType="com.voyageone.cms.formbean.ProductCNPriceInfo" >
    update cms_bt_cn_product_share
    <set >
      <if test="freeShippingTypeId != null" >
        free_shipping_type_id = #{freeShippingTypeId,jdbcType=INTEGER},
      </if>
      <if test="firstSalePrice != null" >
        first_sale_price = #{firstSalePrice,jdbcType=DECIMAL},
      </if>
      <if test="cnPrice != null" >
        cn_price = #{cnPrice,jdbcType=DECIMAL},
      </if>
      <if test="cnPriceDiscount != null" >
        cn_price_discount = #{cnPriceDiscount,jdbcType=DECIMAL},
      </if>
      <if test="effectivePrice != null" >
        effective_price = #{effectivePrice,jdbcType=DECIMAL},
      </if>
      <if test="cnPriceRmb != null" >
        cn_price_rmb = #{cnPriceRmb,jdbcType=DECIMAL},
      </if>
      <if test="cnPriceAdjustmentRmb != null" >
        cn_price_adjustment_rmb = #{cnPriceAdjustmentRmb,jdbcType=DECIMAL},
      </if>
      <if test="cnPriceFinalRmb != null" >
        cn_price_final_rmb = #{cnPriceFinalRmb,jdbcType=DECIMAL},
      </if>
      <if test="cnPriceFinalRmbDiscount != null" >
        cn_price_final_rmb_discount = #{cnPriceFinalRmbDiscount,jdbcType=DECIMAL},
      </if>
      <if test="prePublishDatetime != null" >
        pre_publish_datetime = #{prePublishDatetime,jdbcType=TIMESTAMP},
      </if>
      <if test="isOutletsOnSale != null" >
        is_outlets_on_sale = #{isOutletsOnSale,jdbcType=CHAR},
      </if>      
      <if test="isOnSale != null" >
        is_on_sale = #{isOnSale,jdbcType=CHAR},
      </if>
      <if test="isApproved != null" >
        is_approved = #{isApproved,jdbcType=CHAR},
      </if>
      <if test="approvedDatetime != null" >
        approved_datetime = #{approvedDatetime,jdbcType=TIMESTAMP},
      </if>
        modified = now(),
      <if test="modifier != null" >
        modifier = #{modifier,jdbcType=VARCHAR},
      </if>
      <if test="noApproveComment != null" >
        no_approve_comment = #{noApproveComment,jdbcType=LONGVARCHAR},
      </if>
    </set>
    where product_id = #{productId,jdbcType=INTEGER}
      and channel_id = #{channelId,jdbcType=VARCHAR}
      and cart_id = #{cartId,jdbcType=INTEGER}
  </update>
  <insert id="insert_cms_bt_product_share" parameterType="com.voyageone.cms.formbean.ProductUSPriceInfo" >
    insert into cms_bt_product_share
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="productId != null" >
        product_id,
      </if>
      <if test="channelId != null" >
        channel_id,
      </if>
      <if test="cartId != null" >
        cart_id,
      </if>
      <if test="freeShippingTypeId != null" >
        free_shipping_type_id,
      </if>
      <if test="price != null" >
        price,
      </if>
      <if test="discount != null" >
        discount,
      </if>
      <if test="profit != null" >
        profit,
      </if>
      <if test="prePublishBeforeSharingDays != null" >
        pre_publish_before_sharing_days,
      </if>
      <if test="prePublishDatetime != null" >
        pre_publish_datetime,
      </if>
      <if test="isOutletsOnSale != null" >
        is_outlets_on_sale,
      </if>
      <if test="isOnSale != null" >
        is_on_sale,
      </if>
      <if test="isApproved != null" >
        is_approved,
      </if>
      <if test="approvedDatetime != null" >
        approved_datetime,
      </if>
        created,
      <if test="modifier != null" >
        creater,
      </if>
        modified,
      <if test="modifier != null" >
        modifier,
      </if>
      <if test="noApproveComment != null" >
        no_approve_comment,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="productId != null" >
        #{productId,jdbcType=INTEGER},
      </if>
      <if test="channelId != null" >
        #{channelId,jdbcType=VARCHAR},
      </if>
      <if test="cartId != null" >
        #{cartId,jdbcType=INTEGER},
      </if>
      <if test="freeShippingTypeId != null" >
        #{freeShippingTypeId,jdbcType=INTEGER},
      </if>
      <if test="price != null" >
        #{price,jdbcType=DECIMAL},
      </if>
      <if test="discount != null" >
        #{discount,jdbcType=DECIMAL},
      </if>
      <if test="profit != null" >
        #{profit,jdbcType=DECIMAL},
      </if>
      <if test="prePublishBeforeSharingDays != null" >
        #{prePublishBeforeSharingDays,jdbcType=INTEGER},
      </if>
      <if test="prePublishDatetime != null" >
        #{prePublishDatetime,jdbcType=TIMESTAMP},
      </if>
      <if test="isOutletsOnSale != null" >
        #{isOutletsOnSale,jdbcType=CHAR},
      </if>
      <if test="isOnSale != null" >
        #{isOnSale,jdbcType=CHAR},
      </if>
      <if test="isApproved != null" >
        #{isApproved,jdbcType=CHAR},
      </if>
      <if test="approvedDatetime != null" >
        #{approvedDatetime,jdbcType=TIMESTAMP},
      </if>
        now(),
      <if test="modifier != null" >
        #{modifier,jdbcType=VARCHAR},
      </if>
        now(),
      <if test="modifier != null" >
        #{modifier,jdbcType=VARCHAR},
      </if>
      <if test="noApproveComment != null" >
        #{noApproveComment,jdbcType=LONGVARCHAR},
      </if>
    </trim>
  </insert>
  <select id="cms_get_inventory" resultType="HashMap" parameterType="HashMap">
  	SELECT
		b.size, 
		a.qty_china as qtyChina,
		a.qty_orgin as qtyOrign
	FROM
		Synship.wms_bt_inventory_center_logic a
	LEFT JOIN Synship.wms_bt_item_details b ON a.sku = b.sku
	WHERE
		a.order_channel_id = #{channelId}
		AND a.CODE = #{code}
  </select>
  
  <insert id="insert_cms_bt_cn_product_price_setting" parameterType="com.voyageone.cms.formbean.ProductPriceSettingBean" >
    insert into cms_bt_cn_product_price_setting
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="productId != null" >
        product_id,
      </if>
      <if test="channelId != null" >
        channel_id,
      </if>
      <if test="basePriceId != null" >
        base_price_id,
      </if>
      <if test="pricingFactor != null" >
        pricing_factor,
      </if>
      <if test="exchangeRate != null" >
        exchange_rate,
      </if>
      <if test="overHeard1 != null" >
        over_heard_1,
      </if>
      <if test="overHeard2 != null" >
        over_heard_2,
      </if>
      <if test="overHeard3 != null" >
        over_heard_3,
      </if>
      <if test="overHeard4 != null" >
        over_heard_4,
      </if>
      <if test="overHeard5 != null" >
        over_heard_5,
      </if>
      <if test="shippingCompensation != null" >
        shipping_compensation,
      </if>
        created,
      <if test="modifier != null" >
        creater,
      </if>
        modified,
      <if test="modifier != null" >
        modifier,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="productId != null" >
        #{productId,jdbcType=INTEGER},
      </if>
      <if test="channelId != null" >
        #{channelId,jdbcType=VARCHAR},
      </if>
      <if test="basePriceId != null" >
        #{basePriceId,jdbcType=INTEGER},
      </if>
      <if test="pricingFactor != null" >
        #{pricingFactor,jdbcType=DECIMAL},
      </if>
      <if test="exchangeRate != null" >
        #{exchangeRate,jdbcType=DECIMAL},
      </if>
      <if test="overHeard1 != null" >
        #{overHeard1,jdbcType=VARCHAR},
      </if>
      <if test="overHeard2 != null" >
        #{overHeard2,jdbcType=VARCHAR},
      </if>
      <if test="overHeard3 != null" >
        #{overHeard3,jdbcType=VARCHAR},
      </if>
      <if test="overHeard4 != null" >
        #{overHeard4,jdbcType=VARCHAR},
      </if>
      <if test="overHeard5 != null" >
        #{overHeard5,jdbcType=VARCHAR},
      </if>
      <if test="shippingCompensation != null" >
        #{shippingCompensation,jdbcType=DECIMAL},
      </if>
        now(),
      <if test="modifier != null" >
        #{modifier,jdbcType=VARCHAR},
      </if>
        now(),
      <if test="modifier != null" >
        #{modifier,jdbcType=VARCHAR},
      </if>
    </trim>
  </insert>
  <update id="update_cms_bt_cn_product_price_setting" parameterType="com.voyageone.cms.formbean.ProductPriceSettingBean" >
    update cms_bt_cn_product_price_setting
    <set >
      <if test="basePriceId != null" >
        base_price_id = #{basePriceId,jdbcType=INTEGER},
      </if>
      <if test="pricingFactor != null" >
        pricing_factor = #{pricingFactor,jdbcType=DECIMAL},
      </if>
      <if test="exchangeRate != null" >
        exchange_rate = #{exchangeRate,jdbcType=DECIMAL},
      </if>
      <if test="overHeard1 != null" >
        over_heard_1 = #{overHeard1,jdbcType=VARCHAR},
      </if>
      <if test="overHeard2 != null" >
        over_heard_2 = #{overHeard2,jdbcType=VARCHAR},
      </if>
      <if test="overHeard3 != null" >
        over_heard_3 = #{overHeard3,jdbcType=VARCHAR},
      </if>
      <if test="overHeard4 != null" >
        over_heard_4 = #{overHeard4,jdbcType=VARCHAR},
      </if>
      <if test="overHeard5 != null" >
        over_heard_5 = #{overHeard5,jdbcType=VARCHAR},
      </if>
      <if test="shippingCompensation != null" >
        shipping_compensation = #{shippingCompensation,jdbcType=DECIMAL},
      </if>
        created = now(),
      <if test="modifier != null" >
        creater = #{modifier,jdbcType=VARCHAR},
      </if>
        modified = now(),
      <if test="modifier != null" >
        modifier = #{modifier,jdbcType=VARCHAR},
      </if>
    </set>
    where product_id = #{productId,jdbcType=INTEGER}
      and channel_id = #{channelId,jdbcType=VARCHAR}
  </update>
    <delete id="delete_cms_bt_cn_product_price_setting" parameterType="com.voyageone.cms.formbean.ProductPriceSettingBean" >
    delete from cms_bt_cn_product_price_setting
    where product_id = #{productId,jdbcType=INTEGER}
      and channel_id = #{channelId,jdbcType=VARCHAR}
  </delete>
  <insert id="insert_cms_bt_cn_product_share" parameterType="com.voyageone.cms.formbean.ProductCNPriceInfo" >
    insert IGNORE into cms_bt_cn_product_share
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="productId != null" >
        product_id,
      </if>
      <if test="channelId != null" >
        channel_id,
      </if>
      <if test="cartId != null" >
        cart_id,
      </if>
      <if test="freeShippingTypeId != null" >
        free_shipping_type_id,
      </if>
      <if test="firstSalePrice != null" >
        first_sale_price,
      </if>
      <if test="cnPrice != null" >
        cn_price,
      </if>
      <if test="cnPriceDiscount != null" >
        cn_price_discount,
      </if>
      <if test="effectivePrice != null" >
        effective_price,
      </if>
      <if test="cnPriceRmb != null" >
        cn_price_rmb,
      </if>
      <if test="cnPriceAdjustmentRmb != null" >
        cn_price_adjustment_rmb,
      </if>
      <if test="cnPriceFinalRmb != null" >
        cn_price_final_rmb,
      </if>
      <if test="cnPriceFinalRmbDiscount != null" >
        cn_price_final_rmb_discount,
      </if>
      <if test="prePublishDatetime != null" >
        pre_publish_datetime,
      </if>
      <if test="isOutletsOnSale != null" >
        is_outlets_on_sale,
      </if>
      <if test="isOnSale != null" >
        is_on_sale,
      </if>
      <if test="isApproved != null" >
        is_approved,
      </if>
      <if test="approvedDatetime != null" >
        approved_datetime,
      </if>
        created,
      <if test="modifier != null" >
        creater,
      </if>
        modified,
      <if test="modifier != null" >
        modifier,
      </if>
      <if test="noApproveComment != null" >
        no_approve_comment,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="productId != null" >
        #{productId,jdbcType=INTEGER},
      </if>
      <if test="channelId != null" >
        #{channelId,jdbcType=VARCHAR},
      </if>
      <if test="cartId != null" >
        #{cartId,jdbcType=INTEGER},
      </if>
      <if test="freeShippingTypeId != null" >
        #{freeShippingTypeId,jdbcType=INTEGER},
      </if>
      <if test="firstSalePrice != null" >
        #{firstSalePrice,jdbcType=DECIMAL},
      </if>
      <if test="cnPrice != null" >
        #{cnPrice,jdbcType=DECIMAL},
      </if>
      <if test="cnPriceDiscount != null" >
        #{cnPriceDiscount,jdbcType=DECIMAL},
      </if>
      <if test="effectivePrice != null" >
        #{effectivePrice,jdbcType=DECIMAL},
      </if>
      <if test="cnPriceRmb != null" >
        #{cnPriceRmb,jdbcType=DECIMAL},
      </if>
      <if test="cnPriceAdjustmentRmb != null" >
        #{cnPriceAdjustmentRmb,jdbcType=DECIMAL},
      </if>
      <if test="cnPriceFinalRmb != null" >
        #{cnPriceFinalRmb,jdbcType=DECIMAL},
      </if>
      <if test="cnPriceFinalRmbDiscount != null" >
        #{cnPriceFinalRmbDiscount,jdbcType=DECIMAL},
      </if>
      <if test="prePublishDatetime != null" >
        #{prePublishDatetime,jdbcType=TIMESTAMP},
      </if>
      <if test="isOutletsOnSale != null" >
        #{isOutletsOnSale,jdbcType=CHAR},
      </if>
      <if test="isOnSale != null" >
        #{isOnSale,jdbcType=CHAR},
      </if>
      <if test="isApproved != null" >
        #{isApproved,jdbcType=CHAR},
      </if>
      <if test="approvedDatetime != null" >
        #{approvedDatetime,jdbcType=TIMESTAMP},
      </if>
     	 now(),
      <if test="modifier != null" >
        #{modifier,jdbcType=VARCHAR},
      </if>
		now(),
      <if test="modifier != null" >
        #{modifier,jdbcType=VARCHAR},
      </if>
      <if test="noApproveComment != null" >
        #{noApproveComment,jdbcType=LONGVARCHAR},
      </if>
    </trim>
  </insert>
  <insert id="insert_product_cms_bt_history_price_setting" parameterType="com.voyageone.cms.formbean.ProductPriceSettingBean" >
    insert into cms_bt_history_price_setting
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="productId != null" >
        category_model_product_id,
      </if>
      <if test="channelId != null" >
        channel_id,
      </if>
        price_setting_type,
      <if test="basePriceId != null" >
        base_price_id,
      </if>
      <if test="pricingFactor != null" >
        pricing_factor,
      </if>
      <if test="exchangeRate != null" >
        exchange_rate,
      </if>
      <if test="overHeard1 != null" >
        over_heard_1,
      </if>
      <if test="overHeard2 != null" >
        over_heard_2,
      </if>
      
      <if test="shippingCompensation != null" >
        shipping_compensation,
      </if>
        created,
      <if test="modifier != null" >
        creater,
      </if>
        modified,
      <if test="modifier != null" >
        modifier,
      </if>
      <if test="comment != null" >
        comment,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
  
      <if test="productId != null" >
        #{productId,jdbcType=INTEGER},
      </if>
      <if test="channelId != null" >
        #{channelId,jdbcType=VARCHAR},
      </if>
        '3',
      <if test="basePriceId != null" >
        #{basePriceId,jdbcType=INTEGER},
      </if>
      <if test="pricingFactor != null" >
        #{pricingFactor,jdbcType=DECIMAL},
      </if>
      <if test="exchangeRate != null" >
        #{exchangeRate,jdbcType=DECIMAL},
      </if>
      <if test="overHeard1 != null" >
        #{overHeard1,jdbcType=VARCHAR},
      </if>
      <if test="overHeard2 != null" >
        #{overHeard2,jdbcType=VARCHAR},
      </if>
      <if test="shippingCompensation != null" >
        #{shippingCompensation,jdbcType=DECIMAL},
      </if>
        now(),
      <if test="modifier != null" >
        #{modifier,jdbcType=VARCHAR},
      </if>
		now(),
      <if test="modifier != null" >
        #{modifier,jdbcType=VARCHAR},
      </if>
      <if test="comment != null" >
        #{comment,jdbcType=LONGVARCHAR},
      </if>
    </trim>
  </insert>
  <insert id="insert_new_arrivals" parameterType="com.voyageone.cms.formbean.ProductUSBean">
  INSERT cms_bt_relation_category_product (
	category_id,
	product_id,
	channel_id,
	display_order,
	is_hight_light_product,
	cn_display_order,
	cn_is_hight_light_product,
	created,
	creater,
	modified,
	modifier
)
VALUES
	(
		3,
		#{productId},
		#{channelId},
		getMaxDisplayOrder(3,#{channelId},'cms_bt_relation_category_product',0),
		0,
		getMaxDisplayOrder(3,#{channelId},'cms_bt_relation_category_product',0),
		0,
		now(),
		#{modifier},
		now(),
		#{modifier}
	)
  </insert>
  <delete id="delete_new_arrivals" parameterType="com.voyageone.cms.formbean.ProductUSBean">
  delete from cms_bt_relation_category_product
    where category_id = '003'
      and channel_id = #{channelId}
      and product_id = #{productId}
   </delete>
   
   	<select id="cms_mt_type_value"  parameterType="HashMap" resultType="String">
		SELECT
			t.value as value
		FROM
			cms_mt_value t
		WHERE
			t.is_active = '1'
			and t.channel_id = #{channelId}
			and t.type_id = #{typeId}
	</select>

	<update id="update_cms_bt_product_effective" >
		update cms_bt_product t
		   set t.is_effective = #{effective},
			   t.modified = now(),
			   t.modifier = #{modifier}
		 where t.channel_id = #{channelId}
		   and t.product_id in (
		<foreach collection="productIdList" item="item" separator=",">
		   #{item}
		</foreach>
		)
	</update>

	<update id="update_cms_bt_cn_product_extend_hscode" >
		update cms_bt_cn_product_extend t
		   set <if test="hsCodeId != null and hsCodeId != '' ">
			   		t.hs_code_id = #{hsCodeId},
			   </if>
			   <if test="hsCodePuId != null and hsCodePuId != '' ">
				    t.hs_code_pu_id = #{hsCodePuId},
			   </if>
			   t.modified = now(),
			   t.modifier = #{modifier}
		 where t.channel_id = #{channelId}
		   and t.product_id in (
		       <foreach collection="productIdList" item="item" separator=",">
			       #{item}
			   </foreach>
			   )
	</update>

	<insert id="insert_cms_bt_product_his_price">
		insert into cms_bt_history_product_price
			   (product_id, channel_id, cart_id, cn_price_final_rmb, comment, created, creater, modified, modifier)
		values
			   <foreach collection="contentList" item="item" separator=",">
				   (
				     #{item.productId},
				   	 #{item.channelId},
				   	 #{item.cartId},
				     #{item.cnPriceFinalRmb},
				     #{item.comment},
				     now(),
				     #{modifier},
				     now(),
				     #{modifier}
				   )
			   </foreach>
	</insert>

	<update id="update_cms_bt_product_share_batch">
		update cms_bt_cn_product_share t
		   set <if test="freeShippingTypeId != '' and freeShippingTypeId != null">
			   	   t.free_shipping_type_id = #{freeShippingTypeId},
			   </if>
			   <if test="percent != '' and percent != null">
			       t.cn_price_final_rmb = cn_price_final_rmb * #{percent},
			   </if>
			   <if test="isOnSale != '' and isOnSale != null">
				   t.is_on_sale = #{isOnSale},
			   </if>
			   <if test="isApproved != '' and isApproved != null">
			   	   t.is_approved = #{isApproved},
			   </if>
			   <if test="prePublishDatetime != '' and prePublishDatetime != null">
				   t.pre_publish_datetime = #{prePublishDatetime},
			   </if>
			   <if test="isOutletsOnSale != '' and isOutletsOnSale != null">
		    	   t.is_outlets_on_sale = #{isOutletsOnSale},
		       </if>
			   <if test="discount != '' and discount != null">
			       t.cn_price_final_rmb_discount = #{discount},
		       </if>
			   t.modified = now(),
			   t.modifier = #{modifier}
		 where t.cart_id = #{cartId}
		   and t.channel_id = #{channelId}
		   and t.product_id in
			   (
			   	 <foreach collection="productIdList" item="item" separator=",">
			   	  	#{item}
		   	     </foreach>
			   )
	</update>

	<resultMap id="productPromotionMap" type="com.voyageone.cms.modelbean.RelationPromotionProduct">
		<result column="name" property="name"/>
		<result column="effective_date_start" property="effectiveDateStart"/>
		<result column="effective_date_end" property="effectiveDateEnd"/>
		<result column="discount_sale_price" property="discountSalePrice"/>
		<result column="discount_percent" property="discountPercent"/>
		<result column="is_selection_over" property="isSelectionOver"/>
		<result column="is_sign_up_over" property="isSignUpOver"/>
		<result column="is_isolation_stock_over" property="isIsolationStockOver"/>
		<result column="is_activity_over" property="isActivityOver"/>
	</resultMap>
	<select id="select_product_promotion_history" resultMap="productPromotionMap">
		select prom.`name`,
			   prom.effective_date_start effective_date_start,
			   prom.effective_date_end effective_date_end,
			   rel.discount_sale_price,
			   rel.discount_percent,
			   prom.is_selection_over,
			   prom.is_sign_up_over,
			   prom.is_isolation_stock_over,
			   prom.is_activity_over
		  from cms_bt_promotion prom,
			   cms_bt_relation_promotion_product rel
		 where prom.channel_id = rel.channel_id
		   and prom.promotion_id = rel.promotion_id
		   and rel.product_id = #{productId}
		   and rel.channel_id = #{channelId}
		   and prom.cart_id = #{cartId}
		 order by prom.effective_date_end desc
		<if test="offset != null and pageCount != null">
			limit #{offset}, #{pageCount}
		</if>
	</select>

	<select id="select_product_promotion_history_count" resultType="int">
		select count(1)
		  from cms_bt_promotion prom,
		       cms_bt_relation_promotion_product rel
		 where prom.channel_id = rel.channel_id
		   and prom.promotion_id = rel.promotion_id
		   and rel.product_id = #{productId}
		   and rel.channel_id = #{channelId}
		   and prom.cart_id = #{cartId}
	</select>

	<select id="select_product_price_history" resultMap="USProductPriceInfo">
		select if(#{priceType} = '1', t.price, t.cn_price_final_rmb) price,
			   t.`comment`,
			   t.modified,
			   t.modifier
		  from cms_bt_history_product_price t
		 where t.product_id = #{productId}
		   and t.cart_id = #{cartId}
		   and t.channel_id = #{channelId}
		 order by t.modified desc
		   <if test="offset != null and pageCount != null">
			   limit #{offset}, #{pageCount}
		   </if>
	</select>

	<select id="select_product_price_history_count" resultType="int">
		select count(1)
		  from cms_bt_history_product_price t
		  where t.product_id = #{productId}
			and t.cart_id = #{cartId}
			and t.channel_id = #{channelId}
	</select>
	
	<insert id="insert_cms_bt_product_image" parameterType="HashMap">
		insert into cms_bt_product_image
	        (product_id,
	        channel_id,
	        image_type_id,
	        image_id,
	        image_name,
	        display_order,
	        created,
	        creater,
	        modified,
	        modifier
	     )value(
	        #{productId,jdbcType=INTEGER},
	        #{channelId,jdbcType=VARCHAR},
	        #{imageTypeId,jdbcType=INTEGER},
	      	getMaxImageId(#{productId},#{channelId},#{imageTypeId}),
	        #{imageName,jdbcType=VARCHAR},
	      	getMaxDisplayOrder(#{productId},#{channelId},'cms_bt_product_image',#{imageTypeId}),
	        now(),
	        #{modifier,jdbcType=VARCHAR},
	        now(),
	        #{modifier,jdbcType=VARCHAR})
	</insert>
	<update id="update_cms_bt_product_image_item_count"  parameterType="HashMap">
		UPDATE cms_bt_product a
		INNER JOIN (
			SELECT
				t.product_id,
				t.channel_id,
				count(t.image_name) as image_item_count
			FROM
				cms_bt_product_image t
			WHERE
				t.product_id = #{productId}
			AND t.channel_id = #{channelId}
		) b ON a.product_id = b.product_id and a.channel_id = b.channel_id
		SET a.image_item_count = b.image_item_count
	</update>
	<delete id="del_cms_bt_product_image_item" parameterType="HashMap">
		delete from cms_bt_product_image
		where  product_id = #{productId}
				and channel_id = #{channelId}
				and image_type_id = #{imageTypeId}
				and image_id = #{imageId}
	</delete>

	<update id="update_cms_bt_cn_product_isappproveddes">
		update cms_bt_cn_product t
		   set t.cn_is_approved_description = #{cnIsApprovedDescription},
		       t.modified = now(),
		       t.modifier = #{modifier}
		 where t.channel_id = #{channelId}
		   and t.product_id in (
		<foreach collection="productIdList" item="item" separator=",">
			#{item}
		</foreach>
		)
	</update>

	<resultMap  id="ProductInfoMap" type="com.voyageone.cms.formbean.ProductCNBaseProductInfo">
		<result column="product_id" property="productId" ></result>
		<result column="model_id" property="modelId"></result>
		<result column="code" property="code"></result>
	</resultMap>
	<select id="select_product_info_by_id" resultMap="ProductInfoMap">
		select t1.product_id, t1.model_id, t2.`code`
		  from cms_bt_relation_model_product t1,
			   cms_bt_product t2
		 where t1.product_id = t2.product_id
		   and t1.channel_id = #{channelId}
		   and t1.product_id in (
		<foreach collection="productIdList" item="item" separator=",">
			#{item}
		</foreach>
		)
	</select>

	<insert id="insert_ims_bt_product">
		insert into voyageone_ims.ims_bt_product
		(channel_id, cart_id, product_id, model_id, code, cn_group_id, pre_publish_datetime, publish_status, created, creater, modified, modifier)
		values
			(
			 #{channelId},
			 #{cartId},
			 #{productId},
			 #{modelId},
			 #{code},
			 1,
			 #{prePublishDatetime},
			 '0',
			 now(),
			 #{modifier},
			 now(),
			 #{modifier}
			)
		on duplicate key update
			publish_status = '0',
			<if test="prePublishDatetime != '' and prePublishDatetime != null">
				pre_publish_datetime = #{prePublishDatetime},
			</if>
			modified = now(),
			modifier = #{modifier}
	</insert>

	<update id="update_Ims_Bt_Product">
		update voyageone_ims.ims_bt_product t
		   set t.publish_status = '0',
			   t.modifier = #{modifier},
			   t.modified = now()
		 where t.cart_id = #{cartId}
		   and t.channel_id = #{channelId}
		   and t.product_id in (
		<foreach collection="productIdList" item="item" separator=",">
			#{item}
		</foreach>
		)
	</update>
</mapper>