<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.voyageone.cms.sql">
	<select id="cms_get_us_model_info" parameterType="HashMap"
			resultType="com.voyageone.cms.formbean.ModelUSBean">
	SELECT
		a.model_id as modelId,
		a.channel_id as channelId,
		a.product_type_id as productTypeId,
		g.product_type_name as productTypeName,
		h.brand_name as brand,
		a.brand_id as brandId,
		a.model as model,
		a.name as name,
		a.abstract as usAbstract,
		a.short_description as shortDescription,
		a.long_description as longDescription,
		a.size_type_id as sizeTypeId,
		a.is_unisex as isUnisex,
		a.size_offset as sizeOffset,
		a.weight as weight,
		a.is_taxable as isTaxable,
		a.accessory as accessory,
		a.promotion_tag as promotionTag,
		a.blog_url as blogUrl,
		a.url_key as urlKey,
		a.is_effective as isEffective,
		b.seo_title as seoTitle,
		b.seo_description as seoDescription,
		b.seo_keywords as seoKeywords,
		c.amazon_browse_category_id as amazonBrowseCategoryId,
		d.google_category_id as googleCategoryId,
		e.price_grabber_category_id as priceGrabberCategoryId,
		f.is_primary_category as isPrimaryCategory,
		f.category_id as primaryCategoryId,
		a.created as created,
		a.creater as creater,
		a.modified as modified,
		a.modifier as modifier
		FROM
		cms_bt_model a
		LEFT JOIN cms_bt_model_extend b ON a.model_id = b.model_id
		AND a.channel_id = b.channel_id
		LEFT JOIN cms_bt_amazon_model_extend c on a.model_id = c.model_id
		AND a.channel_id = c.channel_id
		LEFT JOIN cms_bt_google_model_extend d on a.model_id = d.model_id
		AND a.channel_id = d.channel_id
		LEFT JOIN cms_bt_pricegrabber_model_extend e on a.model_id = e.model_id
		AND a.channel_id = e.channel_id
		LEFT JOIN cms_bt_relation_category_model AS f on a.model_id = f.model_id
		AND f.channel_id = f.channel_id
		LEFT JOIN cms_mt_product_type g on a.product_type_id = g.product_type_id
		AND a.channel_id = g.channel_id
		LEFT JOIN cms_mt_brand h on h.brand_id = a.brand_id
		AND h.channel_id = a.channel_id		
		where a.model_id = #{modelId}
		and a.channel_id = #{channelId}
		and f.is_primary_category = 1
	</select>
	<resultMap id="modelCNInfo" type="com.voyageone.cms.formbean.ModelCNBean">
		<association property="cnBaseModelInfo"
					 javaType="com.voyageone.cms.formbean.ModelCNBaseBean">
			<result column="model_id" jdbcType="INTEGER" property="modelId" />
			<result column="channel_id" jdbcType="VARCHAR" property="channelId" />
			<result column="url_key" jdbcType="VARCHAR" property="urlKey" />
			<result column="cn_name" jdbcType="VARCHAR" property="cnName" />
			<result column="cn_abstract" jdbcType="VARCHAR" property="cnAbstract" />
			<result column="cn_short_description" jdbcType="VARCHAR"
					property="cnShortDescription" />
			<result column="cn_long_description" jdbcType="VARCHAR"
					property="cnLongDescription" />
			<result column="cn_size_type_id" jdbcType="INTEGER" property="cnSizeTypeId" />
			<result column="display_images" jdbcType="VARCHAR" property="displayImages" />
			<result column="reference_msrp" jdbcType="DECIMAL" property="referenceMsrp" />
			<result column="reference_price" jdbcType="DECIMAL" property="referencePrice" />
			<result column="cn_seo_title" jdbcType="VARCHAR" property="cnSeoTitle" />
			<result column="cn_seo_description" jdbcType="VARCHAR"
					property="cnSeoDescription" />
			<result column="cn_seo_keywords" jdbcType="VARCHAR" property="cnSeoKeywords" />
			<result column="hs_code_id" jdbcType="INTEGER" property="hsCodeId" />
			<result column="hs_code_pu_id" jdbcType="INTEGER" property="hsCodePuId" />
			<result column="size_chart_id" jdbcType="INTEGER" property="sizeChartId" />
			<result column="cn_is_primary_category" jdbcType="INTEGER"
					property="cnIsPrimaryCategory" />

			<result column="main_category_id" jdbcType="VARCHAR"
					property="mainCategoryId" />
			<result column="category_id" jdbcType="INTEGER" property="primaryCategoryId" />
			<result column="created" property="created" jdbcType="TIMESTAMP" />
			<result column="creater" property="creater" jdbcType="VARCHAR" />
			<result column="modified" property="modified" jdbcType="TIMESTAMP" />
			<result column="modifier" property="modifier" jdbcType="VARCHAR" />
		</association>
		<association property="tmModelInfo"
					 javaType="com.voyageone.cms.formbean.ModelTMBean">
			<result column="tb_name" jdbcType="VARCHAR" property="tbName" />
			<result column="tb_attachment_name" jdbcType="VARCHAR"
					property="tbAttachmentName" />
			<result column="tm_name" jdbcType="VARCHAR" property="tmName" />
			<result column="tm_attachment_name" jdbcType="VARCHAR"
					property="tmAttachmentName" />
			<result column="tg_name" jdbcType="VARCHAR" property="tgName" />
			<result column="tg_attachment_name" jdbcType="VARCHAR"
					property="tgAttachmentName" />
			<result column="tm_short_description" jdbcType="VARCHAR"
					property="tmShortDescription" />
			<result column="tm_category_id" jdbcType="VARCHAR" property="tmCategoryId" />
			<result column="model_id" jdbcType="INTEGER" property="modelId" />
			<result column="channel_id" jdbcType="VARCHAR" property="channelId" />
			<result column="tm_long_description" jdbcType="VARCHAR" property="tmLongDescription" />

		</association>
		<association property="jdModelInfo"
					 javaType="com.voyageone.cms.formbean.ModelJDBean">
			<result column="jd_name" jdbcType="VARCHAR" property="jdName" />
			<result column="jg_name" jdbcType="VARCHAR" property="jgName" />
			<result column="jd_short_description" jdbcType="VARCHAR"
					property="jdShortDescription" />
			<result column="jd_long_description" jdbcType="VARCHAR"
					property="jdLongDescription" />
			<result column="jd_category_id" jdbcType="VARCHAR" property="jdCategoryId" />
			<result column="model_id" jdbcType="INTEGER" property="modelId" />
			<result column="channel_id" jdbcType="VARCHAR" property="channelId" />
		</association>
	</resultMap>
	<select id="cms_get_cn_model_info" parameterType="HashMap"
			resultMap="modelCNInfo">
		SELECT
		a.model_id,
		a.channel_id,
		a.url_key,
		a.cn_name,
		a.cn_abstract,
		a.cn_short_description,
		a.cn_long_description,
		a.cn_size_type_id,
		a.display_images,
		a.reference_msrp,
		a.reference_price,
		b.cn_seo_title,
		b.cn_seo_description,
		b.cn_seo_keywords,
		b.hs_code_id,
		b.hs_code_pu_id,
		b.size_chart_id,
		b.main_category_id,
		c.jd_name,
		c.jg_name,
		c.jd_short_description,
		c.jd_long_description,
		c.jd_category_id,
		d.tb_name,
		d.tb_attachment_name,
		d.tm_name,
		d.tm_attachment_name,
		d.tg_name,
		d.tg_attachment_name,
		d.tm_short_description,
		d.tm_long_description,
		d.tm_category_id,
		e.cn_is_primary_category,
		e.category_id,
		a.created,
		a.creater,
		a.modified,
		a.modifier
		FROM
		cms_bt_cn_model AS a
		LEFT JOIN cms_bt_cn_model_extend AS b ON a.model_id = b.model_id
		AND a.channel_id = b.channel_id
		LEFT JOIN cms_bt_cn_jd_model_extend AS c ON a.model_id = c.model_id
		AND a.channel_id = c.channel_id
		LEFT JOIN cms_bt_cn_tm_model_extend AS d ON a.model_id = d.model_id
		AND a.channel_id = d.channel_id
		LEFT JOIN cms_bt_relation_category_model AS e on a.model_id = e.model_id
		AND a.channel_id = e.channel_id
		where a.model_id = #{modelId}
		and a.channel_id = #{channelId}
		and e.cn_is_primary_category = 1
	</select>

	<select id="cms_bt_cn_model_price_setting" parameterType="HashMap"
			resultType="com.voyageone.cms.formbean.ModelPriceSettingBean">
		SELECT
		a.category_id AS primaryCategoryId,
		a.model_id AS modelId,
		a.channel_id AS channelId,
		a.cn_is_primary_category as cnIsPrimaryCategory,
		b.base_price_id AS basePriceId,
		b.pricing_factor AS pricingFactor,
		b.exchange_rate AS exchangeRate,
		b.over_heard_1 AS overHeard1,
		b.over_heard_2 AS overHeard2,
		b.shipping_compensation AS 		shippingCompensation
		FROM
		cms_bt_relation_category_model a
		LEFT JOIN
		cms_bt_cn_model_price_setting b ON a.model_id = b.model_id
		AND
		a.channel_id = b.channel_id
		where a.model_id = #{modelId}
		and a.channel_id = #{channelId}
		and a.cn_is_primary_category = 1
	</select>
	<resultMap id="sub_category_model" type="HashMap">
		<result column="categoryId" jdbcType="INTEGER" property="categoryId" />
		<result column="modelId" property="modelId" />
		<result column="channelId" property="channelId" />
		<result column="isPrimaryCategory" property="isPrimaryCategory" javaType="BOOLEAN" jdbcType="BOOLEAN"/>
		<result column="cnIsPrimaryCategory" property="cnIsPrimaryCategory"  javaType="BOOLEAN" jdbcType="BOOLEAN"/>
		<result column="name" property="name" />
		<result column="cnName" property="cnName" />
		<result column="created" property="created" />
		<result column="modified" property="modified" />
	</resultMap>
	<select id="cms_bt_relation_category_model" parameterType="HashMap"
			resultMap="sub_category_model">
		SELECT
		a.category_id as categoryId,
		a.model_id AS modelId,
		a.channel_id AS channelId,
		a.is_primary_category as isPrimaryCategory,
		a.cn_is_primary_category as cnIsPrimaryCategory,
		b.name as name,
		c.cn_name as cnName,
		date_format(b.created,'%Y-%m-%d %T' ) as created, 
		date_format(b.modified,'%Y-%m-%d %T' ) as modified
		FROM
		cms_bt_relation_category_model a
		left join cms_bt_category b on a.category_id = b.category_id and a.channel_id = b.channel_id
		left join cms_bt_cn_category c on a.category_id = c.category_id and a.channel_id = c.channel_id
		where a.model_id = #{modelId}
		and a.channel_id = #{channelId}
	</select>
	<delete id="delete_cms_bt_relation_category_model" parameterType="HashMap">
	    delete from cms_bt_relation_category_model
    	where model_id = #{modelId,jdbcType=INTEGER}
      			and channel_id = #{channelId,jdbcType=VARCHAR}
      			and category_id = #{categoryId,jdbcType=INTEGER}
	</delete>
	<update id="update_cms_bt_cn_model_price_setting" parameterType="com.voyageone.cms.formbean.ModelPriceSettingBean" >
		update cms_bt_cn_model_price_setting
		<set >
			<if test="basePriceId != null and basePriceId !=''" >
				base_price_id = #{basePriceId,jdbcType=INTEGER},
			</if>
			<if test="basePriceId == ''" >
				base_price_id = null,
			</if>
			<if test="pricingFactor != null and pricingFactor !=''" >
				pricing_factor = #{pricingFactor,jdbcType=DECIMAL},
			</if>
			<if test="pricingFactor == ''" >
				pricing_factor = null,
			</if>
			<if test="exchangeRate != null" >
				exchange_rate = #{exchangeRate,jdbcType=DECIMAL},
			</if>
			<if test="overHeard1 != null" >
				over_heard_1 = #{overHeard1,jdbcType=VARCHAR},
			</if>
			<if test="overHeard2 != null" >
				over_heard_2 = #{overHeard2,jdbcType=VARCHAR},
			</if>
			<if test="shippingCompensation != null" >
				shipping_compensation = #{shippingCompensation,jdbcType=DECIMAL},
			</if>
			modified = now(),
			<if test="modifier != null" >
				modifier = #{modifier,jdbcType=VARCHAR},
			</if>
		</set>
		where model_id = #{modelId,jdbcType=INTEGER}
		and channel_id = #{channelId,jdbcType=VARCHAR}
	</update>
	<insert id="insert_cms_bt_cn_model_price_setting" parameterType="com.voyageone.cms.formbean.ModelPriceSettingBean" >
		insert into cms_bt_cn_model_price_setting
		<trim prefix="(" suffix=")" suffixOverrides="," >
			<if test="modelId != null" >
				model_id,
			</if>
			<if test="channelId != null" >
				channel_id,
			</if>
			<if test="basePriceId != null" >
				base_price_id,
			</if>
			<if test="pricingFactor != null" >
				pricing_factor,
			</if>
			<if test="exchangeRate != null" >
				exchange_rate,
			</if>
			<if test="overHeard1 != null" >
				over_heard_1,
			</if>
			<if test="overHeard2 != null" >
				over_heard_2,
			</if>
			<if test="shippingCompensation != null" >
				shipping_compensation,
			</if>
			created,
			<if test="modifier != null" >
				creater,
			</if>
			modified,
			<if test="modifier != null" >
				modifier,
			</if>
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides="," >
			<if test="modelId != null" >
				#{modelId,jdbcType=INTEGER},
			</if>
			<if test="channelId != null" >
				#{channelId,jdbcType=VARCHAR},
			</if>
			<if test="basePriceId != null" >
				#{basePriceId,jdbcType=INTEGER},
			</if>
			<if test="pricingFactor != null" >
				#{pricingFactor,jdbcType=DECIMAL},
			</if>
			<if test="exchangeRate != null" >
				#{exchangeRate,jdbcType=DECIMAL},
			</if>
			<if test="overHeard1 != null" >
				#{overHeard1,jdbcType=VARCHAR},
			</if>
			<if test="overHeard2 != null" >
				#{overHeard2,jdbcType=VARCHAR},
			</if>
			<if test="shippingCompensation != null" >
				#{shippingCompensation,jdbcType=DECIMAL},
			</if>
			now(),
			<if test="modifier != null" >
				#{modifier,jdbcType=VARCHAR},
			</if>
			now(),
			<if test="modifier != null" >
				#{modifier,jdbcType=VARCHAR},
			</if>
		</trim>
	</insert>
	<delete id="delete_cms_bt_cn_model_price_setting" parameterType="com.voyageone.cms.formbean.ModelPriceSettingBean" >
    delete from cms_bt_cn_model_price_setting
    where model_id = #{modelId,jdbcType=INTEGER}
      and channel_id = #{channelId,jdbcType=VARCHAR}
  </delete>
	<insert id="insert_model_cms_bt_history_price_setting" parameterType="com.voyageone.cms.formbean.ModelPriceSettingBean" >
		insert into cms_bt_history_price_setting
		<trim prefix="(" suffix=")" suffixOverrides="," >
			<if test="modelId != null" >
				category_model_product_id,
			</if>
			<if test="channelId != null" >
				channel_id,
			</if>
			price_setting_type,
			<if test="basePriceId != null" >
				base_price_id,
			</if>
			<if test="pricingFactor != null" >
				pricing_factor,
			</if>
			<if test="exchangeRate != null" >
				exchange_rate,
			</if>
			<if test="overHeard1 != null" >
				over_heard_1,
			</if>
			<if test="overHeard2 != null" >
				over_heard_2,
			</if>

			<if test="shippingCompensation != null" >
				shipping_compensation,
			</if>
			created,
			<if test="modifier != null" >
				creater,
			</if>
			modified,
			<if test="modifier != null" >
				modifier,
			</if>
			<if test="comment != null" >
				comment,
			</if>
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides="," >

			<if test="modelId != null" >
				#{modelId,jdbcType=INTEGER},
			</if>
			<if test="channelId != null" >
				#{channelId,jdbcType=VARCHAR},
			</if>
			'2',
			<if test="basePriceId != null" >
				#{basePriceId,jdbcType=INTEGER},
			</if>
			<if test="pricingFactor != null" >
				#{pricingFactor,jdbcType=DECIMAL},
			</if>
			<if test="exchangeRate != null" >
				#{exchangeRate,jdbcType=DECIMAL},
			</if>
			<if test="overHeard1 != null" >
				#{overHeard1,jdbcType=VARCHAR},
			</if>
			<if test="overHeard2 != null" >
				#{overHeard2,jdbcType=VARCHAR},
			</if>
			<if test="shippingCompensation != null" >
				#{shippingCompensation,jdbcType=DECIMAL},
			</if>
			now(),
			<if test="modifier != null" >
				#{modifier,jdbcType=VARCHAR},
			</if>
			now(),
			<if test="modifier != null" >
				#{modifier,jdbcType=VARCHAR},
			</if>
			<if test="comment != null" >
				#{comment,jdbcType=LONGVARCHAR},
			</if>
		</trim>
	</insert>
	<update id="update_cms_bt_cn_model" parameterType="com.voyageone.cms.formbean.ModelCNBean">
		update cms_bt_cn_model
		<set>
			<if test="cnName != null">
				cn_name = #{cnName,jdbcType=VARCHAR},
			</if>
			<if test="cnAbstract != null">
				cn_abstract = #{cnAbstract,jdbcType=VARCHAR},
			</if>
			<if test="cnShortDescription != null">
				cn_short_description = #{cnShortDescription,jdbcType=VARCHAR},
			</if>
			<if test="cnSizeTypeId != null">
				cn_size_type_id = #{cnSizeTypeId,jdbcType=INTEGER},
			</if>
			<if test="displayImages != null">
				display_images = #{displayImages,jdbcType=VARCHAR},
			</if>
			<if test="referenceMsrp != null">
				reference_msrp = #{referenceMsrp,jdbcType=DECIMAL},
			</if>
			<if test="referencePrice != null">
				reference_price = #{referencePrice,jdbcType=DECIMAL},
			</if>
			modified = now(),
			<if test="modifier != null">
				modifier = #{modifier,jdbcType=VARCHAR},
			</if>
			<if test="model != null">
				model = #{model,jdbcType=VARCHAR},
			</if>
			<if test="cnLongDescription != null">
				cn_long_description = #{cnLongDescription,jdbcType=LONGVARCHAR},
			</if>
		</set>
		where model_id = #{modelId,jdbcType=INTEGER}
		and channel_id = #{channelId,jdbcType=VARCHAR}
	</update>
	<update id="update_cms_bt_cn_model_extend" parameterType="com.voyageone.cms.formbean.ModelCNBaseBean">
		update cms_bt_cn_model_extend
		<set>
			<if test="cnSeoTitle != null">
				cn_seo_title = #{cnSeoTitle,jdbcType=VARCHAR},
			</if>
			<if test="cnSeoDescription != null">
				cn_seo_description = #{cnSeoDescription,jdbcType=VARCHAR},
			</if>
			<if test="cnSeoKeywords != null">
				cn_seo_keywords = #{cnSeoKeywords,jdbcType=VARCHAR},
			</if>
			<if test="hsCodeId != null">
				hs_code_id = #{hsCodeId,jdbcType=INTEGER},
			</if>
			<if test="hsCodePuId != null">
				hs_code_pu_id = #{hsCodePuId,jdbcType=INTEGER},
			</if>
			<if test="sizeChartId != null">
				size_chart_id = #{sizeChartId,jdbcType=INTEGER},
			</if>
			<if test="mainCategoryId != null">
				main_category_id	 = #{mainCategoryId,jdbcType=INTEGER},
			</if>
			modified = now(),
			<if test="modifier != null">
				modifier = #{modifier,jdbcType=VARCHAR},
			</if>
		</set>
		where model_id = #{modelId,jdbcType=INTEGER}
		and channel_id = #{channelId,jdbcType=VARCHAR}
	</update>
	<update id="update_cms_bt_cn_jd_model_extend" parameterType="com.voyageone.cms.formbean.ModelJDBean">
		update cms_bt_cn_jd_model_extend
		<set>
			<if test="jdName != null">
				jd_name = #{jdName,jdbcType=VARCHAR},
			</if>
			<if test="jgName != null">
				jg_name = #{jgName,jdbcType=VARCHAR},
			</if>
			<if test="jdShortDescription != null">
				jd_short_description = #{jdShortDescription,jdbcType=VARCHAR},
			</if>
			<if test="jdCategoryId != null">
				jd_category_id = #{jdCategoryId,jdbcType=VARCHAR},
			</if>
			modified = now(),
			<if test="modifier != null">
				modifier = #{modifier,jdbcType=VARCHAR},
			</if>
			<if test="jdLongDescription != null">
				jd_long_description = #{jdLongDescription,jdbcType=LONGVARCHAR},
			</if>
		</set>
		where model_id = #{modelId,jdbcType=INTEGER}
		and channel_id = #{channelId,jdbcType=VARCHAR}
	</update>
	<update id="update_cms_bt_cn_tm_model_extend" parameterType="com.voyageone.cms.formbean.ModelTMBean">
		update cms_bt_cn_tm_model_extend
		<set>
			<if test="tbName != null">
				tb_name = #{tbName,jdbcType=VARCHAR},
			</if>
			<if test="tbAttachmentName != null">
				tb_attachment_name = #{tbAttachmentName,jdbcType=VARCHAR},
			</if>
			<if test="tmName != null">
				tm_name = #{tmName,jdbcType=VARCHAR},
			</if>
			<if test="tmAttachmentName != null">
				tm_attachment_name = #{tmAttachmentName,jdbcType=VARCHAR},
			</if>
			<if test="tgName != null">
				tg_name = #{tgName,jdbcType=INTEGER},
			</if>
			<if test="tgAttachmentName != null">
				tg_attachment_name = #{tgAttachmentName,jdbcType=VARCHAR},
			</if>
			<if test="tmShortDescription != null">
				tm_short_description = #{tmShortDescription,jdbcType=VARCHAR},
			</if>
			<if test="tmLongDescription != null">
				tm_long_description = #{tmLongDescription,jdbcType=VARCHAR},
			</if>
			<if test="tmCategoryId != null">
				tm_category_id = #{tmCategoryId,jdbcType=VARCHAR},
			</if>
			modified = now(),
			<if test="modifier != null">
				modifier = #{modifier,jdbcType=VARCHAR},
			</if>
		</set>
		where model_id = #{modelId,jdbcType=INTEGER}
		and channel_id = #{channelId,jdbcType=VARCHAR}
	</update>
	<update id="update_cms_bt_publish_product_status" parameterType="HashMap">
		update voyageone_ims.ims_bt_product
		<set>
			<if test="isPublished != null">
				is_published = #{isPublished,jdbcType=BOOLEAN},
			</if>
			publish_status = 0,
			modified = now(),
			<if test="modifier != null">
				modifier = #{modifier,jdbcType=VARCHAR},
			</if>
		</set>
		WHERE
		channel_id = #{channelId,jdbcType=VARCHAR}
		<if test="modelId != null">
			and product_id IN (
			SELECT
			t.product_id
			FROM
			cms_bt_relation_model_product t
			WHERE
			t.model_id = #{modelId,jdbcType=INTEGER}
			and t.channel_id = #{channelId,jdbcType=VARCHAR}
			)
		</if>
		<if test="productId != null">
			and product_id = #{productId}
		</if>
		<if test="platformId != null">
			and cart_id in (select cart_id from Synship.viw_com_cart_shop_channel_mapping where platform_id = #{platformId})
		</if>
		<if test="cart == 'cn'">
			and cart_id >19 and 80 > cart_id
		</if>
		<if test="cart == 'us'">
			and (20 >cart_id or cart_id > 79)
		</if>
		<if test="cartId != null">
			and cart_id = #{cartId}
		</if>
	</update>
	<insert id="insert_cms_bt_publish_product_status" parameterType="HashMap" >
		insert into voyageone_ims.ims_bt_product
		<trim prefix="(" suffix=")" suffixOverrides="," >
			<if test="productId != null" >
				product_id,
			</if>
			<if test="channelId != null" >
				channel_id,
			</if>
			<if test="cartId != null" >
				cart_id,
			</if>
			<if test="modelId != null" >
				model_id,
			</if>
			<if test="code != null" >
				code,
			</if>
			<if test="cnGroupId != null" >
				cn_group_id,
			</if>
			<if test="isPublished != null" >
				is_published,
			</if>
			<if test="publishProductId != null" >
				publish_product_id,
			</if>
			<if test="publishProductStatus != null" >
				publish_product_status,
			</if>
			<if test="numIid != null" >
				num_iid,
			</if>
			<if test="publishDatetime != null" >
				publish_datetime,
			</if>
			<if test="publishStatus != null" >
				publish_status,
			</if>
			created,
			<if test="modifier != null" >
				creater,
			</if>
			modified,
			<if test="modifier != null" >
				modifier,
			</if>
			<if test="publishFaildComment != null" >
				publish_faild_comment,
			</if>
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides="," >
			<if test="productId != null" >
				#{productId,jdbcType=INTEGER},
			</if>
			<if test="channelId != null" >
				#{channelId,jdbcType=VARCHAR},
			</if>
			<if test="cartId != null" >
				#{cartId,jdbcType=INTEGER},
			</if>
			<if test="modelId != null" >
				#{modelId,jdbcType=INTEGER},
			</if>
			<if test="code != null" >
				#{code,jdbcType=VARCHAR},
			</if>
			<if test="cnGroupId != null" >
				#{cnGroupId,jdbcType=INTEGER},
			</if>
			<if test="isPublished != null" >
				#{isPublished,jdbcType=CHAR},
			</if>
			<if test="publishProductId != null" >
				#{publishProductId,jdbcType=VARCHAR},
			</if>
			<if test="publishProductStatus != null" >
				#{publishProductStatus,jdbcType=CHAR},
			</if>
			<if test="numIid != null" >
				#{numIid,jdbcType=VARCHAR},
			</if>
			<if test="publishDatetime != null" >
				#{publishDatetime,jdbcType=TIMESTAMP},
			</if>
			<if test="publishStatus != null" >
				#{publishStatus,jdbcType=CHAR},
			</if>
			now(),
			<if test="modifier != null" >
				#{modifier,jdbcType=VARCHAR},
			</if>
			now(),
			<if test="modifier != null" >
				#{modifier,jdbcType=VARCHAR},
			</if>
			<if test="publishFaildComment != null" >
				#{publishFaildComment,jdbcType=LONGVARCHAR},
			</if>
		</trim>
	</insert>
	<update id="update_cms_bt_model_extend" parameterType="com.voyageone.cms.formbean.ModelUSBean">
		update cms_bt_model_extend
		<set>
			<if test="seoTitle != null">
				seo_title = #{seoTitle,jdbcType=VARCHAR},
			</if>
			<if test="seoDescription != null">
				seo_description = #{seoDescription,jdbcType=VARCHAR},
			</if>
			<if test="seoKeywords != null">
				seo_keywords = #{seoKeywords,jdbcType=VARCHAR},
			</if>
			<if test="mainCategoryId != null">
				main_category_id = #{mainCategoryId,jdbcType=VARCHAR},
			</if>
			modified = now(),
			<if test="modifier != null">
				modifier = #{modifier,jdbcType=VARCHAR},
			</if>
		</set>
		where model_id = #{modelId,jdbcType=INTEGER}
		and channel_id = #{channelId,jdbcType=VARCHAR}
	</update>
	<update id="update_cms_bt_model" parameterType="com.voyageone.cms.formbean.ModelUSBean">
		update cms_bt_model
		<set>
			<if test="productTypeId != null">
				product_type_id = #{productTypeId,jdbcType=INTEGER},
			</if>
			<if test="brandId != null">
				brand_id = #{brandId,jdbcType=INTEGER},
			</if>
			<if test="model != null">
				model = #{model,jdbcType=VARCHAR},
			</if>
			<if test="name != null">
				name = #{name,jdbcType=VARCHAR},
			</if>
			<if test="usAbstract != null">
				abstract = #{usAbstract,jdbcType=VARCHAR},
			</if>
			<if test="shortDescription != null">
				short_description = #{shortDescription,jdbcType=VARCHAR},
			</if>
			<if test="sizeTypeId != null">
				size_type_id = #{sizeTypeId,jdbcType=INTEGER},
			</if>
			<if test="isUnisex != null">
				is_unisex = #{isUnisex,jdbcType=CHAR},
			</if>
			<if test="sizeOffset != null">
				size_offset = #{sizeOffset,jdbcType=VARCHAR},
			</if>
			<if test="weight != null">
				weight = #{weight,jdbcType=VARCHAR},
			</if>
			<if test="isTaxable != null">
				is_taxable = #{isTaxable,jdbcType=CHAR},
			</if>
			<if test="accessory != null">
				accessory = #{accessory,jdbcType=VARCHAR},
			</if>
			<if test="promotionTag != null">
				promotion_tag = #{promotionTag,jdbcType=VARCHAR},
			</if>
			<if test="blogUrl != null">
				blog_url = #{blogUrl,jdbcType=VARCHAR},
			</if>
			<if test="urlKey != null">
				url_key = #{urlKey,jdbcType=VARCHAR},
			</if>
			<if test="isEffective != null">
				is_effective = #{isEffective,jdbcType=CHAR},
			</if>

			modified = now(),
			<if test="modifier != null">
				modifier = #{modifier,jdbcType=VARCHAR},
			</if>
			<if test="longDescription != null">
				long_description = #{longDescription,jdbcType=LONGVARCHAR},
			</if>
		</set>
		where model_id = #{modelId,jdbcType=INTEGER}
		and channel_id = #{channelId,jdbcType=VARCHAR}
		and modified =  #{modified,jdbcType=TIMESTAMP}
	</update>
	<update id="update_cms_bt_google_model_extend" parameterType="com.voyageone.cms.formbean.ModelUSBean" >
		update cms_bt_google_model_extend
		<set >
			<if test="googleCategoryId != null" >
				google_category_id = #{googleCategoryId,jdbcType=VARCHAR},
			</if>
			modified = now(),
			<if test="modifier != null" >
				modifier = #{modifier,jdbcType=VARCHAR},
			</if>
		</set>
		where model_id = #{modelId,jdbcType=INTEGER}
		and channel_id = #{channelId,jdbcType=VARCHAR}
	</update>
	<update id="update_cms_bt_amazon_model_extend" parameterType="com.voyageone.cms.formbean.ModelUSBean" >
		update cms_bt_amazon_model_extend
		<set >
			<if test="amazonBrowseCategoryId != null" >
				amazon_browse_category_id = #{amazonBrowseCategoryId,jdbcType=VARCHAR},
			</if>
			modified = now(),
			<if test="modifier != null" >
				modifier = #{modifier,jdbcType=VARCHAR},
			</if>
		</set>
		where model_id = #{modelId,jdbcType=INTEGER}
		and channel_id = #{channelId,jdbcType=VARCHAR}
	</update>
	<update id="update_cms_bt_pricegrabber_model_extend" parameterType="com.voyageone.cms.formbean.ModelUSBean" >
		update cms_bt_pricegrabber_model_extend
		<set >
			<if test="priceGrabberCategoryId != null" >
				price_grabber_category_id = #{priceGrabberCategoryId,jdbcType=VARCHAR},
			</if>
			modified = now(),
			<if test="modifier != null" >
				modifier = #{modifier,jdbcType=VARCHAR},
			</if>
		</set>
		where model_id = #{modelId,jdbcType=INTEGER}
		and channel_id = #{channelId,jdbcType=VARCHAR}
	</update>
	<insert id="insert_cms_bt_model" parameterType="com.voyageone.cms.formbean.ModelUSBean" >
		insert into cms_bt_model
		<trim prefix="(" suffix=")" suffixOverrides="," >
			<if test="modelId != null" >
				model_id,
			</if>
			<if test="channelId != null" >
				channel_id,
			</if>
			<if test="productTypeId != null" >
				product_type_id,
			</if>
			<if test="brandId != null" >
				brand_id,
			</if>
			<if test="model != null" >
				model,
			</if>
			<if test="name != null" >
				name,
			</if>
			<if test="usAbstract != null" >
				abstract,
			</if>
			<if test="shortDescription != null" >
				short_description,
			</if>
			<if test="sizeTypeId != null" >
				size_type_id,
			</if>
			<if test="isUnisex != null" >
				is_unisex,
			</if>
			<if test="sizeOffset != null" >
				size_offset,
			</if>
			<if test="weight != null" >
				weight,
			</if>
			<if test="isTaxable != null" >
				is_taxable,
			</if>
			<if test="accessory != null" >
				accessory,
			</if>
			<if test="promotionTag != null" >
				promotion_tag,
			</if>
			<if test="blogUrl != null" >
				blog_url,
			</if>
			<if test="urlKey != null" >
				url_key,
			</if>
			<if test="isEffective != null" >
				is_effective,
			</if>
			created,
			<if test="creater != null" >
				creater,
			</if>
			modified,
			<if test="modifier != null" >
				modifier,
			</if>
			<if test="longDescription != null" >
				long_description,
			</if>
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides="," >
			<if test="modelId != null" >
				#{modelId,jdbcType=INTEGER},
			</if>
			<if test="channelId != null" >
				#{channelId,jdbcType=VARCHAR},
			</if>
			<if test="productTypeId != null" >
				#{productTypeId,jdbcType=INTEGER},
			</if>
			<if test="brandId != null" >
				#{brandId,jdbcType=INTEGER},
			</if>
			<if test="model != null" >
				#{model,jdbcType=VARCHAR},
			</if>
			<if test="name != null" >
				#{name,jdbcType=VARCHAR},
			</if>
			<if test="usAbstract != null" >
				#{usAbstract,jdbcType=VARCHAR},
			</if>
			<if test="shortDescription != null" >
				#{shortDescription,jdbcType=VARCHAR},
			</if>
			<if test="sizeTypeId != null" >
				#{sizeTypeId,jdbcType=INTEGER},
			</if>
			<if test="isUnisex != null" >
				#{isUnisex,jdbcType=CHAR},
			</if>
			<if test="sizeOffset != null" >
				#{sizeOffset,jdbcType=VARCHAR},
			</if>
			<if test="weight != null" >
				#{weight,jdbcType=VARCHAR},
			</if>
			<if test="isTaxable != null" >
				#{isTaxable,jdbcType=CHAR},
			</if>
			<if test="accessory != null" >
				#{accessory,jdbcType=VARCHAR},
			</if>
			<if test="promotionTag != null" >
				#{promotionTag,jdbcType=VARCHAR},
			</if>
			<if test="blogUrl != null" >
				#{blogUrl,jdbcType=VARCHAR},
			</if>
			<if test="urlKey != null" >
				#{urlKey,jdbcType=VARCHAR},
			</if>
			<if test="isEffective != null" >
				#{isEffective,jdbcType=CHAR},
			</if>
			now(),
			<if test="creater != null" >
				#{creater,jdbcType=VARCHAR},
			</if>
			now(),
			<if test="modifier != null" >
				#{modifier,jdbcType=VARCHAR},
			</if>
			<if test="longDescription != null" >
				#{longDescription,jdbcType=LONGVARCHAR},
			</if>
		</trim>
	</insert>

	<insert id="insert_cms_bt_model_extend" parameterType="com.voyageone.cms.formbean.ModelUSBean" >
		insert into cms_bt_model_extend
		<trim prefix="(" suffix=")" suffixOverrides="," >
			<if test="modelId != null" >
				model_id,
			</if>
			<if test="channelId != null" >
				channel_id,
			</if>
			<if test="seoTitle != null" >
				seo_title,
			</if>
			<if test="seoDescription != null" >
				seo_description,
			</if>
			<if test="seoKeywords != null" >
				seo_keywords,
			</if>
			<if test="mainCategoryId != null" >
				main_category_id,
			</if>
			created,
			<if test="creater != null" >
				creater,
			</if>
			modified,
			<if test="modifier != null" >
				modifier,
			</if>
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides="," >
			<if test="modelId != null" >
				#{modelId,jdbcType=INTEGER},
			</if>
			<if test="channelId != null" >
				#{channelId,jdbcType=VARCHAR},
			</if>
			<if test="seoTitle != null" >
				#{seoTitle,jdbcType=VARCHAR},
			</if>
			<if test="seoDescription != null" >
				#{seoDescription,jdbcType=VARCHAR},
			</if>
			<if test="seoKeywords != null" >
				#{seoKeywords,jdbcType=VARCHAR},
			</if>
			<if test="mainCategoryId != null" >
				#{mainCategoryId,jdbcType=VARCHAR},
			</if>
			now(),
			<if test="creater != null" >
				#{creater,jdbcType=VARCHAR},
			</if>
			now(),
			<if test="modifier != null" >
				#{modifier,jdbcType=VARCHAR},
			</if>
		</trim>
	</insert>

	<insert id="insert_cms_bt_google_model_extend" parameterType="com.voyageone.cms.formbean.ModelUSBean" >
		insert into cms_bt_google_model_extend
		<trim prefix="(" suffix=")" suffixOverrides="," >
			<if test="modelId != null" >
				model_id,
			</if>
			<if test="channelId != null" >
				channel_id,
			</if>
			<if test="googleCategoryId != null" >
				google_category_id,
			</if>
			created,
			<if test="creater != null" >
				creater,
			</if>
			modified,
			<if test="modifier != null" >
				modifier,
			</if>
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides="," >
			<if test="modelId != null" >
				#{modelId,jdbcType=INTEGER},
			</if>
			<if test="channelId != null" >
				#{channelId,jdbcType=VARCHAR},
			</if>
			<if test="googleCategoryId != null" >
				#{googleCategoryId,jdbcType=VARCHAR},
			</if>
			now(),
			<if test="creater != null" >
				#{creater,jdbcType=VARCHAR},
			</if>
			now(),
			<if test="modifier != null" >
				#{modifier,jdbcType=VARCHAR},
			</if>
		</trim>
	</insert>

	<insert id="insert_cms_bt_amazon_model_extend" parameterType="com.voyageone.cms.formbean.ModelUSBean" >
		insert into cms_bt_amazon_model_extend
		<trim prefix="(" suffix=")" suffixOverrides="," >
			<if test="modelId != null" >
				model_id,
			</if>
			<if test="channelId != null" >
				channel_id,
			</if>
			<if test="amazonBrowseCategoryId != null" >
				amazon_browse_category_id,
			</if>
			created,
			<if test="creater != null" >
				creater,
			</if>
			modified,
			<if test="modifier != null" >
				modifier,
			</if>
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides="," >
			<if test="modelId != null" >
				#{modelId,jdbcType=INTEGER},
			</if>
			<if test="channelId != null" >
				#{channelId,jdbcType=VARCHAR},
			</if>
			<if test="amazonBrowseCategoryId != null" >
				#{amazonBrowseCategoryId,jdbcType=VARCHAR},
			</if>
			now(),
			<if test="creater != null" >
				#{creater,jdbcType=VARCHAR},
			</if>
			now(),
			<if test="modifier != null" >
				#{modifier,jdbcType=VARCHAR},
			</if>
		</trim>
	</insert>
	<insert id="insert_cms_bt_pricegrabber_model_extend" parameterType="com.voyageone.cms.formbean.ModelUSBean" >
		insert into cms_bt_pricegrabber_model_extend
		<trim prefix="(" suffix=")" suffixOverrides="," >
			<if test="modelId != null" >
				model_id,
			</if>
			<if test="channelId != null" >
				channel_id,
			</if>
			<if test="priceGrabberCategoryId != null" >
				price_grabber_category_id,
			</if>
			created,
			<if test="creater != null" >
				creater,
			</if>
			modified,
			<if test="modifier != null" >
				modifier,
			</if>
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides="," >
			<if test="modelId != null" >
				#{modelId,jdbcType=INTEGER},
			</if>
			<if test="channelId != null" >
				#{channelId,jdbcType=VARCHAR},
			</if>
			<if test="priceGrabberCategoryId != null" >
				#{priceGrabberCategoryId,jdbcType=VARCHAR},
			</if>
			now(),
			<if test="creater != null" >
				#{creater,jdbcType=VARCHAR},
			</if>
			now(),
			<if test="modifier != null" >
				#{modifier,jdbcType=VARCHAR},
			</if>
		</trim>
	</insert>

	<insert id="insert_cms_bt_cn_model" parameterType="com.voyageone.cms.formbean.ModelCNBean" >
		insert into cms_bt_cn_model
		<trim prefix="(" suffix=")" suffixOverrides="," >
			<if test="modelId != null" >
				model_id,
			</if>
			<if test="channelId != null" >
				channel_id,
			</if>
			<if test="cnName != null" >
				cn_name,
			</if>
			<if test="cnAbstract != null" >
				cn_abstract,
			</if>
			<if test="cnShortDescription != null" >
				cn_short_description,
			</if>
			<if test="cnSizeTypeId != null" >
				cn_size_type_id,
			</if>
			<if test="displayImages != null" >
				display_images,
			</if>
			<if test="referenceMsrp != null" >
				reference_msrp,
			</if>
			<if test="referencePrice != null" >
				reference_price,
			</if>
			created,
			<if test="creater != null" >
				creater,
			</if>
			modified,
			<if test="modifier != null" >
				modifier,
			</if>
			<if test="model != null" >
				model,
			</if>
			<if test="cnLongDescription != null" >
				cn_long_description,
			</if>
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides="," >
			<if test="modelId != null" >
				#{modelId,jdbcType=INTEGER},
			</if>
			<if test="channelId != null" >
				#{channelId,jdbcType=VARCHAR},
			</if>
			<if test="cnName != null" >
				#{cnName,jdbcType=VARCHAR},
			</if>
			<if test="cnAbstract != null" >
				#{cnAbstract,jdbcType=VARCHAR},
			</if>
			<if test="cnShortDescription != null" >
				#{cnShortDescription,jdbcType=VARCHAR},
			</if>
			<if test="cnSizeTypeId != null" >
				#{cnSizeTypeId,jdbcType=INTEGER},
			</if>
			<if test="displayImages != null" >
				#{displayImages,jdbcType=VARCHAR},
			</if>
			<if test="referenceMsrp != null" >
				#{referenceMsrp,jdbcType=DECIMAL},
			</if>
			<if test="referencePrice != null" >
				#{referencePrice,jdbcType=DECIMAL},
			</if>
			now(),
			<if test="creater != null" >
				#{creater,jdbcType=VARCHAR},
			</if>
			now(),
			<if test="modifier != null" >
				#{modifier,jdbcType=VARCHAR},
			</if>
			<if test="model != null" >
				#{model,jdbcType=VARCHAR},
			</if>
			<if test="cnLongDescription != null" >
				#{cnLongDescription,jdbcType=LONGVARCHAR},
			</if>
		</trim>
	</insert>
	<insert id="insert_cms_bt_cn_model_extend" parameterType="com.voyageone.cms.formbean.ModelCNBaseBean" >
		insert into cms_bt_cn_model_extend
		<trim prefix="(" suffix=")" suffixOverrides="," >
			<if test="modelId != null" >
				model_id,
			</if>
			<if test="channelId != null" >
				channel_id,
			</if>
			<if test="cnSeoTitle != null" >
				cn_seo_title,
			</if>
			<if test="cnSeoDescription != null" >
				cn_seo_description,
			</if>
			<if test="cnSeoKeywords != null" >
				cn_seo_keywords,
			</if>
			<if test="hsCodeId != null" >
				hs_code_id,
			</if>
			<if test="hsCodePuId != null" >
				hs_code_pu_id,
			</if>
			<if test="sizeChartId != null" >
				size_chart_id,
			</if>
			<if test="mainCategoryId != null" >
				main_category_id,
			</if>
			created,
			<if test="creater != null" >
				creater,
			</if>
			modified,
			<if test="modifier != null" >
				modifier,
			</if>
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides="," >
			<if test="modelId != null" >
				#{modelId,jdbcType=INTEGER},
			</if>
			<if test="channelId != null" >
				#{channelId,jdbcType=VARCHAR},
			</if>
			<if test="cnSeoTitle != null" >
				#{cnSeoTitle,jdbcType=VARCHAR},
			</if>
			<if test="cnSeoDescription != null" >
				#{cnSeoDescription,jdbcType=VARCHAR},
			</if>
			<if test="cnSeoKeywords != null" >
				#{cnSeoKeywords,jdbcType=VARCHAR},
			</if>
			<if test="hsCodeId != null" >
				#{hsCodeId,jdbcType=INTEGER},
			</if>
			<if test="hsCodePuId != null" >
				#{hsCodePuId,jdbcType=INTEGER},
			</if>
			<if test="sizeChartId != null" >
				#{sizeChartId,jdbcType=INTEGER},
			</if>
			<if test="mainCategoryId != null" >
				#{mainCategoryId},
			</if>
			now(),
			<if test="creater != null" >
				#{creater,jdbcType=VARCHAR},
			</if>
			<if test="modified != null" >
				now(),
			</if>
			<if test="modifier != null" >
				#{modifier,jdbcType=VARCHAR},
			</if>
		</trim>
	</insert>

	<insert id="insert_cms_bt_cn_jd_model_extend" parameterType="com.voyageone.cms.formbean.ModelJDBean" >
		insert into cms_bt_cn_jd_model_extend
		<trim prefix="(" suffix=")" suffixOverrides="," >
			<if test="modelId != null" >
				model_id,
			</if>
			<if test="channelId != null" >
				channel_id,
			</if>
			<if test="jdName != null" >
				jd_name,
			</if>
			<if test="jgName != null" >
				jg_name,
			</if>
			<if test="jdShortDescription != null" >
				jd_short_description,
			</if>
			<if test="jdCategoryId != null" >
				jd_category_id,
			</if>
			created,
			<if test="creater != null" >
				creater,
			</if>
			modified,
			<if test="modifier != null" >
				modifier,
			</if>
			<if test="jdLongDescription != null" >
				jd_long_description,
			</if>
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides="," >
			<if test="modelId != null" >
				#{modelId,jdbcType=INTEGER},
			</if>
			<if test="channelId != null" >
				#{channelId,jdbcType=VARCHAR},
			</if>
			<if test="jdName != null" >
				#{jdName,jdbcType=VARCHAR},
			</if>
			<if test="jgName != null" >
				#{jgName,jdbcType=VARCHAR},
			</if>
			<if test="jdShortDescription != null" >
				#{jdShortDescription,jdbcType=VARCHAR},
			</if>
			<if test="jdCategoryId != null" >
				#{jdCategoryId,jdbcType=VARCHAR},
			</if>
			now(),
			<if test="creater != null" >
				#{creater,jdbcType=VARCHAR},
			</if>
			now(),
			<if test="modifier != null" >
				#{modifier,jdbcType=VARCHAR},
			</if>
			<if test="jdLongDescription != null" >
				#{jdLongDescription,jdbcType=LONGVARCHAR},
			</if>
		</trim>
	</insert>

	<insert id="insert_cms_bt_cn_tm_model_extend" parameterType="com.voyageone.cms.formbean.ModelTMBean" >
		insert into cms_bt_cn_tm_model_extend
		<trim prefix="(" suffix=")" suffixOverrides="," >
			<if test="modelId != null" >
				model_id,
			</if>
			<if test="channelId != null" >
				channel_id,
			</if>
			<if test="tbName != null" >
				tb_name,
			</if>
			<if test="tbAttachmentName != null" >
				tb_attachment_name,
			</if>
			<if test="tmName != null" >
				tm_name,
			</if>
			<if test="tmAttachmentName != null" >
				tm_attachment_name,
			</if>
			<if test="tgName != null" >
				tg_name,
			</if>
			<if test="tgAttachmentName != null" >
				tg_attachment_name,
			</if>
			<if test="tmShortDescription != null" >
				tm_short_description,
			</if>
			<if test="tmCategoryId != null" >
				tm_category_id,
			</if>
			created,
			<if test="creater != null" >
				creater,
			</if>
			modified,
			<if test="modifier != null" >
				modifier,
			</if>
			<if test="tmLongDescription != null" >
				tm_long_description,
			</if>
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides="," >
			<if test="modelId != null" >
				#{modelId,jdbcType=INTEGER},
			</if>
			<if test="channelId != null" >
				#{channelId,jdbcType=VARCHAR},
			</if>
			<if test="tbName != null" >
				#{tbName,jdbcType=VARCHAR},
			</if>
			<if test="tbAttachmentName != null" >
				#{tbAttachmentName,jdbcType=VARCHAR},
			</if>
			<if test="tmName != null" >
				#{tmName,jdbcType=VARCHAR},
			</if>
			<if test="tmAttachmentName != null" >
				#{tmAttachmentName,jdbcType=VARCHAR},
			</if>
			<if test="tgName != null" >
				#{tgName,jdbcType=VARCHAR},
			</if>
			<if test="tgAttachmentName != null" >
				#{tgAttachmentName,jdbcType=VARCHAR},
			</if>
			<if test="tmShortDescription != null" >
				#{tmShortDescription,jdbcType=VARCHAR},
			</if>
			<if test="tmCategoryId != null" >
				#{tmCategoryId,jdbcType=VARCHAR},
			</if>
			now(),
			<if test="creater != null" >
				#{creater,jdbcType=VARCHAR},
			</if>
			now(),
			<if test="modifier != null" >
				#{modifier,jdbcType=VARCHAR},
			</if>
			<if test="tmLongDescription != null" >
				#{tmLongDescription,jdbcType=LONGVARCHAR},
			</if>
		</trim>
	</insert>
	<delete id="delete_cms_bt_model_extend" parameterType="com.voyageone.cms.formbean.ModelUSBean">
  		delete from cms_bt_model_extend
    	where model_id = #{modelId,jdbcType=INTEGER}
      	and channel_id = #{channelId,jdbcType=VARCHAR}
  </delete>
	<delete id="delete_cms_bt_google_model_extend" parameterType="com.voyageone.cms.formbean.ModelUSBean">
  		delete from cms_bt_google_model_extend
    	where model_id = #{modelId,jdbcType=INTEGER}
      	and channel_id = #{channelId,jdbcType=VARCHAR}
  </delete>
	<delete id="delete_cms_bt_pricegrabber_model_extend" parameterType="com.voyageone.cms.formbean.ModelUSBean">
  		delete from cms_bt_pricegrabber_model_extend
    	where model_id = #{modelId,jdbcType=INTEGER}
      	and channel_id = #{channelId,jdbcType=VARCHAR}
  </delete>
	<delete id="delete_cms_bt_amazon_model_extend" parameterType="com.voyageone.cms.formbean.ModelUSBean">
  		delete from cms_bt_amazon_model_extend
    	where model_id = #{modelId,jdbcType=INTEGER}
      	and channel_id = #{channelId,jdbcType=VARCHAR}
  </delete>
	<delete id="delete_cms_bt_cn_model_extend" parameterType="com.voyageone.cms.formbean.ModelCNBean">
  		delete from cms_bt_cn_model_extend
    	where model_id = #{modelId,jdbcType=INTEGER}
      	and channel_id = #{channelId,jdbcType=VARCHAR}
  </delete>
	<delete id="delete_cms_bt_cn_jd_model_extend" parameterType="com.voyageone.cms.formbean.ModelCNBean">
  		delete from cms_bt_cn_jd_model_extend
    	where model_id = #{modelId,jdbcType=INTEGER}
      	and channel_id = #{channelId,jdbcType=VARCHAR}
  </delete>
	<delete id="delete_cms_bt_cn_tm_model_extend" parameterType="com.voyageone.cms.formbean.ModelCNBean">
  		delete from cms_bt_cn_tm_model_extend
    	where model_id = #{modelId,jdbcType=INTEGER}
      	and channel_id = #{channelId,jdbcType=VARCHAR}
  </delete>

	<update id="update_cms_bt_relation_category_model" parameterType="HashMap" >
		update cms_bt_relation_category_model
		<set >
			<if test="displayOrder != null" >
				display_order = #{displayOrder,jdbcType=INTEGER},
			</if>
			<if test="isPrimaryCategory != null" >
				is_primary_category = #{isPrimaryCategory,jdbcType=CHAR},
			</if>
			<if test="cnDisplayOrder != null" >
				cn_display_order = #{cnDisplayOrder,jdbcType=INTEGER},
			</if>
			<if test="cnIsPrimaryCategory != null" >
				cn_is_primary_category = #{cnIsPrimaryCategory,jdbcType=CHAR},
			</if>
			modified = now(),
			<if test="modifier != null" >
				modifier = #{modifier,jdbcType=VARCHAR},
			</if>
		</set>
		where
		model_id = #{modelId,jdbcType=INTEGER}
		and channel_id = #{channelId,jdbcType=VARCHAR}
		<if test="categoryId != null" >
			and  category_id = #{categoryId,jdbcType=INTEGER}
		</if>
		<if test="typeId == 2" >
			and cn_is_primary_category = '1'
		</if>
		<if test="typeId == 1" >
			and is_primary_category = '1'
		</if>
	</update>
	<resultMap type="com.voyageone.cms.formbean.ModelProductUSBean" id="ModelProductResultMap">
		<result column="model_id" property="modelId"/>
		<result column="channel_id" property="channelId"/>
		<result column="product_id" property="productId"/>
		<result column="code" property="code"/>
		<result column="name" property="name"/>
		<result column="product_type_name" property="productType"/>
		<result column="brand_name" property="brand"/>
		<result column="size_type_name" property="sizeType"/>
		<result column="display_order" property="displayOrder"/>
		<result column="msrp" property="msrp"/>
		<result column="is_new_arrival" javaType="BOOLEAN" property="isNewArrival"/>
		<result column="is_reward_eligible" javaType="BOOLEAN" property="isRewardEligible"/>
		<result column="is_discount_eligible" javaType="BOOLEAN" property="isDiscountEligible"/>
		<result column="is_phone_order_only" javaType="BOOLEAN"  property="isPhoneOrderOnly"/>
		<result column="is_approved_description" javaType="BOOLEAN" property="isApprovedDescription"/>
		<result column="is_effective" javaType="BOOLEAN" property="isEffective"/>
		<result column="color" property="color"/>
		<result column="color_name" property="colorMap"/>
		<result column="country_name" property="madeInCountry"/>
		<result column="materialFabric" property="materialFabric" typeHandler="com.voyageone.cms.utils.EmptyStringIfNull"/>
		<result column="url_key" property="urlKey"/>
		<result column="order_limit_count" property="orderLimitCount"/>
		<result column="promotion_tag" property="promotionTag"/>
		<result column="abstract" property="usAbstract" typeHandler="com.voyageone.cms.utils.EmptyStringIfNull"/>
		<result column="short_description" property="shortDescription" typeHandler="com.voyageone.cms.utils.EmptyStringIfNull"/>
		<result column="long_description" property="longDescription" typeHandler="com.voyageone.cms.utils.EmptyStringIfNull"/>
		<result column="accessory" property="accessory"/>
		<result column="usOfficialIsOnSale" property="usOfficialIsOnSale"/>
		<result column="usOfficialIsApproved" property="usOfficialIsApproved"/>
		<result column="usOfficialFreeShippingType" property="usOfficialFreeShippingType"/>
		<result column="usOfficialPrice" property="usOfficialPrice"/>
		<result column="usAmazonIsOnSale" property="usAmazonIsOnSale"/>
		<result column="usAmazonIsApproved" property="usAmazonIsApproved"/>
		<result column="usAmazonFreeShippingType" property="usAmazonFreeShippingType"/>
		<result column="usAmazonPrice" property="usAmazonPrice"/>
		<result column="usAmazonPrePublishDateTime" property="usAmazonPrePublishDateTime"/>
		<result column="cn_price" property="cnPrice"/>
		<result column="cn_price_rmb" property="cnPriceRmb"/>
		<result column="cn_price_adjustment_rmb" property="cnPriceAdjustmentRmb"/>
		<result column="cn_is_on_sale" javaType="BOOLEAN" property="cnIsOnSale"/>
		<result column="cn_is_approved" javaType="BOOLEAN" property="cnIsApproved"/>
		<result column="image_name" property="productImgUrl"/>
		<result column="quantity" property="quantity"/>
		<result column="is_primary_product" property="isPrimaryProduct"  jdbcType="BOOLEAN"/>
		<result column="created" property="created"/>
		<result column="creater" property="creater"/>
		<result column="modified" property="modified"/>
		<result column="modifier" property="modifier"/>
		<result column="usOfficialSneakerSales7Days" property="usOfficialSneakerSales7Days"/>
		<result column="usOfficialSneakerSales7DaysPercent" property="usOfficialSneakerSales7DaysPercent" typeHandler="com.voyageone.cms.utils.EmptyStringPercent"/>
		<result column="usOfficialSneakerSales30Days" property="usOfficialSneakerSales30Days"/>
		<result column="usOfficialSneakerSales30DaysPercent" property="usOfficialSneakerSales30DaysPercent" typeHandler="com.voyageone.cms.utils.EmptyStringPercent"/>
		<result column="usOfficialSneakerSalesInThisYear" property="usOfficialSneakerSalesInThisYear"/>
		<result column="usOfficialSneakerSalesInThisYearPercent" property="usOfficialSneakerSalesInThisYearPercent" typeHandler="com.voyageone.cms.utils.EmptyStringPercent"/>
		<result column="usAmazonSales7Days" property="usAmazonSales7Days"/>
		<result column="usAmazonSales7DaysPercent" property="usAmazonSales7DaysPercent" typeHandler="com.voyageone.cms.utils.EmptyStringPercent"/>
		<result column="usAmazonSales30Days" property="usAmazonSales30Days"/>
		<result column="usAmazonSales30DaysPercent" property="usAmazonSales30DaysPercent" typeHandler="com.voyageone.cms.utils.EmptyStringPercent"/>
		<result column="usAmazonSalesInThisYear" property="usAmazonSalesInThisYear"/>
		<result column="usAmazonSalesInThisYearPercent" property="usAmazonSalesInThisYearPercent" typeHandler="com.voyageone.cms.utils.EmptyStringPercent"/>
		<result column="cnSales7Days" property="cnSales7Days"/>
		<result column="cnSales7DaysPercent" property="cnSales7DaysPercent" typeHandler="com.voyageone.cms.utils.EmptyStringPercent"/>
		<result column="cnSales30Days" property="cnSales30Days"/>
		<result column="cnSales30DaysPercent" property="cnSales30DaysPercent" typeHandler="com.voyageone.cms.utils.EmptyStringPercent"/>
		<result column="cnSalesInThisYear" property="cnSalesInThisYear"/>
		<result column="cnSalesInThisYearPercent" property="cnSalesInThisYearPercent" typeHandler="com.voyageone.cms.utils.EmptyStringPercent"/>
		<result column="usOfficialSneakerRXSales7Days" property="usOfficialSneakerRXSales7Days"/>
		<result column="usOfficialSneakerRXSales7DaysPercent" property="usOfficialSneakerRXSales7DaysPercent" typeHandler="com.voyageone.cms.utils.EmptyStringPercent"/>
		<result column="usOfficialSneakerRXSales30Days" property="usOfficialSneakerRXSales30Days"/>
		<result column="usOfficialSneakerRXSales30DaysPercent" property="usOfficialSneakerRXSales30DaysPercent" typeHandler="com.voyageone.cms.utils.EmptyStringPercent"/>
		<result column="usOfficialSneakerRXSalesInThisYear" property="usOfficialSneakerRXSalesInThisYear"/>
		<result column="usOfficialSneakerRXSalesInThisYearPercent" property="usOfficialSneakerRXSalesInThisYearPercent" typeHandler="com.voyageone.cms.utils.EmptyStringPercent"/>
		<result column="usOfficialSneakerWSSales7Days" property="usOfficialSneakerWSSales7Days"/>
		<result column="usOfficialSneakerWSSales7DaysPercent" property="usOfficialSneakerWSSales7DaysPercent" typeHandler="com.voyageone.cms.utils.EmptyStringPercent"/>
		<result column="usOfficialSneakerWSSales30Days" property="usOfficialSneakerWSSales30Days"/>
		<result column="usOfficialSneakerWSSales30DaysPercent" property="usOfficialSneakerWSSales30DaysPercent" typeHandler="com.voyageone.cms.utils.EmptyStringPercent"/>
		<result column="usOfficialSneakerWSSalesInThisYear" property="usOfficialSneakerWSSalesInThisYear"/>
		<result column="usOfficialSneakerWSSalesInThisYearPercent" property="usOfficialSneakerWSSalesInThisYearPercent"/>
		<result column="usOfficialSneakerMobileSales7Days" property="usOfficialSneakerMobileSales7Days"/>
		<result column="usOfficialSneakerMobileSales7DaysPercent" property="usOfficialSneakerMobileSales7DaysPercent" typeHandler="com.voyageone.cms.utils.EmptyStringPercent"/>
		<result column="usOfficialSneakerMobileSales30Days" property="usOfficialSneakerMobileSales30Days"/>
		<result column="usOfficialSneakerMobileSales30DaysPercent" property="usOfficialSneakerMobileSales30DaysPercent" typeHandler="com.voyageone.cms.utils.EmptyStringPercent"/>
		<result column="usOfficialSneakerMobileSalesInThisYear" property="usOfficialSneakerMobileSalesInThisYear"/>
		<result column="usOfficialSneakerMobileSalesInThisYearPercent" property="usOfficialSneakerMobileSalesInThisYearPercent" typeHandler="com.voyageone.cms.utils.EmptyStringPercent"/>

	</resultMap>
	<select id="cms_get_USModelProductList"  resultMap="ModelProductResultMap" parameterType="HashMap">
		SELECT
		b.code,
		b.name,
		a.display_order,
		a.is_primary_product,
		b.product_type_name,
		b.brand_name,
		b.size_type_name,
		b.is_new_arrival,
		b.is_reward_eligible,
		b.is_discount_eligible,
		b.is_phone_order_only,
		b.is_approved_description,
		b.color_name,
		b.color,
		b.country_name,
		b.materialFabric,
		b.abstract,
		b.accessory,
		b.short_description,
		b.long_description,
		b.order_limit_count,
		b.promotion_tag,
		SUM(IFNULL(t2.qty_china,0)) as quantity,
		b.url_key,
		b.created,
		b.modified,
		b.msrp,
		b.usOfficialPrice,
		b.usOfficialFreeShippingType,
		b.usOfficialIsOnSale,
		b.usOfficialIsApproved,
		0 as usOfficialSneakerRXSales7Days,
		'' as usOfficialSneakerRXSales7DaysPercent,
		0 as usOfficialSneakerRXSales30Days,
		'' as usOfficialSneakerRXSales30DaysPercent,
		0 as usOfficialSneakerRXSalesInThisYear,
		'' as usOfficialSneakerRXSalesInThisYearPercent,
		b.usOfficialSneakerSales7Days,
		b.usOfficialSneakerSales7DaysPercent,
		b.usOfficialSneakerSales30Days,
		b.usOfficialSneakerSales30DaysPercent,
		b.usOfficialSneakerSalesInThisYear,
		b.usOfficialSneakerSalesInThisYearPercent,
		0 as usOfficialSneakerWSSales7Days,
		'' as usOfficialSneakerWSSales7DaysPercent,
		0 as usOfficialSneakerWSSales30Days,
		'' as usOfficialSneakerWSSales30DaysPercent,
		0 as usOfficialSneakerWSSalesInThisYear,
		'' as usOfficialSneakerWSSalesInThisYearPercent,
		0 as usOfficialSneakerMobileSales7Days,
		'' as usOfficialSneakerMobileSales7DaysPercent,
		0 as usOfficialSneakerMobileSales30Days,
		'' as usOfficialSneakerMobileSales30DaysPercent,
		0 as usOfficialSneakerMobileSalesInThisYear,
		'' as usOfficialSneakerMobileSalesInThisYearPercent,
		b.usAmazonPrice,
		b.usAmazonFreeShippingType,
		b.usAmazonIsOnSale,
		b.usAmazonIsApproved,
		b.usAmazonPrePublishDateTime,
		b.usAmazonSales7Days,
		b.usAmazonSales7DaysPercent,
		b.usAmazonSales30Days,
		b.usAmazonSales30DaysPercent,
		b.usAmazonSalesInThisYear,
		b.usAmazonSalesInThisYearPercent,
		b.cn_price,
		b.cn_price_rmb,
		b.cnPriceFinalRmb,
		b.cnFreeShippingType,
		b.cn_is_on_sale,
		b.cn_is_approved,
		b.cnPrePublishDateTime,
		b.cnSales7Days,
		b.cnSales7DaysPercent,
		b.cnSales30Days,
		b.cnSales30DaysPercent,
		b.cnSalesInThisYear,
		b.cnSalesInThisYearPercent,
		a.channel_id,
		b.product_id,
		a.model_id,
		b.is_unisex,
		b.is_effective,
		b.cn_price_adjustment_rmb,
		b.cn_price_discount,
		b.image_name,
		b.modifier,
		b.creater
		FROM
		cms_bt_relation_model_product a
		LEFT JOIN view_us_product_info_list b ON a.product_id = b.product_id and a.channel_id=b.channel_id
		LEFT JOIN Synship.wms_bt_inventory_center_logic t2 ON t2.code = b.CODE and t2.order_channel_id = b.channel_id
		WHERE
		a.model_id = #{modelId}
		and a.channel_id = #{channelId}

		GROUP BY b.CODE,b.channel_id
		<if test="order != null and order != ''">
			ORDER BY #{order,jdbcType=INTEGER}  ${dir}
		</if>
		<if test="order == null or order == ''">
			ORDER BY a.cn_display_order
		</if>
		<if test="start != null and length != null">
			LIMIT #{start}, #{length}
		</if>
	</select>
	<select id="cms_get_USModelProductList_count" resultType="Integer"  parameterType="HashMap">
		select
	  	 	count(1)
		FROM
			cms_bt_relation_model_product b 
		WHERE 
			b.model_id=#{modelId}
	     	and b.channel_id=#{channelId}
	</select>
	<resultMap type="com.voyageone.cms.formbean.ModelProductCNBean" id="ModelCNProductResultMap">
		<result column="model_id" property="modelId"/>
		<result column="product_id" property="productId"/>
		<result column="channel_id" property="channelId"/>
		<result column="code" property="code"/>
		<result column="cn_name" property="cnName"/>
		<result column="cn_display_order" property="cnDisplayOrder"/>
		<result column="product_type_name" property="productType"/>
		<result column="brand_name" property="brand"/>
		<result column="size_type_name" property="cnSizeType"/>
		<result column="is_approved_description" property="isApprovedDescription"/>
		<result column="is_effective" property="isEffective"/>
		<result column="color_name" property="colorMap"/>
		<result column="cn_color" property="cnColor"/>
		<result column="madeInCountry" property="madeInCountry"/>
		<result column="materialFabric" property="materialFabric" typeHandler="com.voyageone.cms.utils.EmptyStringIfNull"/>
		<result column="cnAbstract" property="cnAbstract" typeHandler="com.voyageone.cms.utils.EmptyStringIfNull"/>
		<result column="cnLongDescription" property="cnLongDescription" typeHandler="com.voyageone.cms.utils.EmptyStringIfNull"/>
		<result column="cnShortDescription" property="cnShortDescription" typeHandler="com.voyageone.cms.utils.EmptyStringIfNull"/>
		<result column="urlKey" property="urlKey"/>
		<result column="created" property="created"/>
		<result column="creater" property="creater"/>
		<result column="modified" property="modified"/>
		<result column="modifier" property="modifier"/>
		<result column="referenceMsrp" property="referenceMsrp"/>
		<result column="referencePrice" property="referencePrice"/>
		<result column="firstSalePrice" property="firstSalePrice"/>
		<result column="cnPrice" property="cnPrice"/>
		<result column="effectivePrice" property="effectivePrice"/>
		<result column="cnPriceRmb" property="cnPriceRmb"/>
		<result column="cnPriceAdjustmentRmb" property="cnPriceAdjustmentRmb"/>
		<result column="cnPriceFinalRmb" property="cnPriceFinalRmb"/>
		<result column="cnIsOnSale" property="cnIsOnSale"/>
		<result column="cnIsApproved" property="cnIsApproved"/>
		<result column="cnOfficialPriceAdjustmentRmb" property="cnOfficialPriceAdjustmentRmb"/>
		<result column="cnOfficialPriceFinalRmb" property="cnOfficialPriceFinalRmb"/>
		<result column="cnOfficialFreeShippingType" property="cnOfficialFreeShippingType"/>
		<result column="cnOfficialIsOnSale" property="cnOfficialIsOnSale"/>
		<result column="cnOfficialIsApproved" property="cnOfficialIsApproved"/>
		<result column="cnOfficialPrePublishDateTime" property="cnOfficialPrePublishDateTime"/>
		<result column="tbPriceAdjustmentRmb" property="tbPriceAdjustmentRmb"/>
		<result column="tbPriceFinalRmb" property="tbPriceFinalRmb"/>
		<result column="tbFreeShippingType" property="tbFreeShippingType"/>
		<result column="tbIsOnSale" property="tbIsOnSale"/>
		<result column="tbIsApproved" property="tbIsApproved"/>
		<result column="tbPrePublishDateTime" property="tbPrePublishDateTime"/>
		<result column="tmPriceAdjustmentRmb" property="tmPriceAdjustmentRmb"/>
		<result column="tmPriceFinalRmb" property="tmPriceFinalRmb"/>
		<result column="tmFreeShippingType" property="tmFreeShippingType"/>
		<result column="tmIsOnSale" property="tmIsOnSale"/>
		<result column="tmIsApproved" property="tmIsApproved"/>
		<result column="tmPrePublishDateTime" property="tmPrePublishDateTime"/>
		<result column="tgPriceAdjustmentRmb" property="tgPriceAdjustmentRmb"/>
		<result column="tgPriceFinalRmb" property="tgPriceFinalRmb"/>
		<result column="tgFreeShippingType" property="tgFreeShippingType"/>
		<result column="tgIsOnSale" property="tgIsOnSale"/>
		<result column="tgIsApproved" property="tgIsApproved"/>
		<result column="tgPrePublishDateTime" property="tgPrePublishDateTime"/>
		<result column="jdPriceAdjustmentRmb" property="jdPriceAdjustmentRmb"/>
		<result column="jdPriceFinalRmb" property="jdPriceFinalRmb"/>
		<result column="jdFreeShippingType" property="jdFreeShippingType"/>
		<result column="jdIsOnSale" property="jdIsOnSale"/>
		<result column="jdIsApproved" property="jdIsApproved"/>
		<result column="jdPrePublishDateTime" property="jdPrePublishDateTime"/>
		<result column="jgPriceAdjustmentRmb" property="jgPriceAdjustmentRmb"/>
		<result column="jgPriceFinalRmb" property="jgPriceFinalRmb"/>
		<result column="jgFreeShippingType" property="jgFreeShippingType"/>
		<result column="jgIsOnSale" property="jgIsOnSale"/>
		<result column="jgIsApproved" property="jgIsApproved"/>
		<result column="jgPrePublishDateTime" property="jgPrePublishDateTime"/>
		<result column="image_name" property="productImgUrl"/>
		<result column="quantity" property="quantity"/>
		<result column="cn_is_primary_product" property="cnIsPrimaryProduct"  jdbcType="BOOLEAN"/>
		<result column="cnSales30Days" property="cnSales30Days" typeHandler="com.voyageone.cms.utils.EmptyStringIfNull"/>
		<result column="cnSales30DaysPercent" property="cnSales30DaysPercent" typeHandler="com.voyageone.cms.utils.EmptyStringPercent"/>
		<result column="cnSales7Days" property="cnSales7Days" typeHandler="com.voyageone.cms.utils.EmptyStringIfNull"/>
		<result column="cnSales7DaysPercent" property="cnSales7DaysPercent" typeHandler="com.voyageone.cms.utils.EmptyStringPercent"/>
		<result column="cnSalesAllDays" property="cnSalesAllDays" typeHandler="com.voyageone.cms.utils.EmptyStringIfNull"/>
		<result column="cnSalesAllDaysPercent" property="cnSalesAllDaysPercent" typeHandler="com.voyageone.cms.utils.EmptyStringPercent"/>
		<result column="cnOfficialSales30Days" property="cnOfficialSales30Days" typeHandler="com.voyageone.cms.utils.EmptyStringIfNull"/>
		<result column="cnOfficialSales30DaysPercent" property="cnOfficialSales30DaysPercent" typeHandler="com.voyageone.cms.utils.EmptyStringPercent"/>
		<result column="cnOfficialSales7Days" property="cnOfficialSales7Days" typeHandler="com.voyageone.cms.utils.EmptyStringIfNull"/>
		<result column="cnOfficialSales7DaysPercent" property="cnOfficialSales7DaysPercent" typeHandler="com.voyageone.cms.utils.EmptyStringPercent"/>
		<result column="cnOfficialSalesAllDays" property="cnOfficialSalesAllDays" typeHandler="com.voyageone.cms.utils.EmptyStringIfNull"/>
		<result column="cnOfficialSalesAllDaysPercent" property="cnOfficialSalesAllDaysPercent" typeHandler="com.voyageone.cms.utils.EmptyStringPercent"/>
		<result column="tbSales30Days" property="tbSales30Days" typeHandler="com.voyageone.cms.utils.EmptyStringIfNull"/>
		<result column="tbSales30DaysPercent" property="tbSales30DaysPercent" typeHandler="com.voyageone.cms.utils.EmptyStringPercent"/>
		<result column="tbSales7Days" property="tbSales7Days" typeHandler="com.voyageone.cms.utils.EmptyStringIfNull"/>
		<result column="tbSales7DaysPercent" property="tbSales7DaysPercent" typeHandler="com.voyageone.cms.utils.EmptyStringPercent"/>
		<result column="tbSalesAllDays" property="tbSalesAllDays" typeHandler="com.voyageone.cms.utils.EmptyStringIfNull"/>
		<result column="tbSalesAllDaysPercent" property="tbSalesAllDaysPercent" typeHandler="com.voyageone.cms.utils.EmptyStringPercent"/>
		<result column="tmSales30Days" property="tmSales30Days" typeHandler="com.voyageone.cms.utils.EmptyStringIfNull"/>
		<result column="tmSales30DaysPercent" property="tmSales30DaysPercent" typeHandler="com.voyageone.cms.utils.EmptyStringPercent"/>
		<result column="tmSales7Days" property="tmSales7Days" typeHandler="com.voyageone.cms.utils.EmptyStringIfNull"/>
		<result column="tmSales7DaysPercent" property="tmSales7DaysPercent" typeHandler="com.voyageone.cms.utils.EmptyStringPercent"/>
		<result column="tmSalesAllDays" property="tmSalesAllDays" typeHandler="com.voyageone.cms.utils.EmptyStringIfNull"/>
		<result column="tmSalesAllDaysPercent" property="tmSalesAllDaysPercent" typeHandler="com.voyageone.cms.utils.EmptyStringPercent"/>
		<result column="tgSales30Days" property="tgSales30Days" typeHandler="com.voyageone.cms.utils.EmptyStringIfNull"/>
		<result column="tgSales30DaysPercent" property="tgSales30DaysPercent" typeHandler="com.voyageone.cms.utils.EmptyStringPercent"/>
		<result column="tgSales7Days" property="tgSales7Days" typeHandler="com.voyageone.cms.utils.EmptyStringIfNull"/>
		<result column="tgSales7DaysPercent" property="tgSales7DaysPercent" typeHandler="com.voyageone.cms.utils.EmptyStringPercent"/>
		<result column="tgSalesAllDays" property="tgSalesAllDays" typeHandler="com.voyageone.cms.utils.EmptyStringIfNull"/>
		<result column="tgSalesAllDaysPercent" property="tgSalesAllDaysPercent" typeHandler="com.voyageone.cms.utils.EmptyStringPercent"/>
		<result column="jdSales30Days" property="jdSales30Days" typeHandler="com.voyageone.cms.utils.EmptyStringIfNull"/>
		<result column="jdSales30DaysPercent" property="jdSales30DaysPercent" typeHandler="com.voyageone.cms.utils.EmptyStringPercent"/>
		<result column="jdSales7Days" property="jdSales7Days" typeHandler="com.voyageone.cms.utils.EmptyStringIfNull"/>
		<result column="jdSales7DaysPercent" property="jdSales7DaysPercent" typeHandler="com.voyageone.cms.utils.EmptyStringPercent"/>
		<result column="jdSalesAllDays" property="jdSalesAllDays" typeHandler="com.voyageone.cms.utils.EmptyStringIfNull"/>
		<result column="jdSalesAllDaysPercent" property="jdSalesAllDaysPercent" typeHandler="com.voyageone.cms.utils.EmptyStringPercent"/>
		<result column="jgSales30Days" property="jgSales30Days" typeHandler="com.voyageone.cms.utils.EmptyStringIfNull"/>
		<result column="jgSales30DaysPercent" property="jgSales30DaysPercent" typeHandler="com.voyageone.cms.utils.EmptyStringPercent"/>
		<result column="jgSales7Days" property="jgSales7Days" typeHandler="com.voyageone.cms.utils.EmptyStringIfNull"/>
		<result column="jgSales7DaysPercent" property="jgSales7DaysPercent" typeHandler="com.voyageone.cms.utils.EmptyStringPercent"/>
		<result column="jgSalesAllDays" property="jgSalesAllDays" typeHandler="com.voyageone.cms.utils.EmptyStringIfNull"/>
		<result column="jgSalesAllDaysPercent" property="jgSalesAllDaysPercent" typeHandler="com.voyageone.cms.utils.EmptyStringPercent"/>
		<result column="cnSalesInThisYear" property="cnSalesInThisYear" typeHandler="com.voyageone.cms.utils.EmptyStringIfNull"/>
		<result column="cnSalesInThisYearPercent" property="cnSalesInThisYearPercent" typeHandler="com.voyageone.cms.utils.EmptyStringPercent"/>
		<result column="cnOfficialSalesInThisYear" property="cnOfficialSalesInThisYear" typeHandler="com.voyageone.cms.utils.EmptyStringIfNull"/>
		<result column="cnOfficialSalesInThisYearPercent" property="cnOfficialSalesInThisYearPercent" typeHandler="com.voyageone.cms.utils.EmptyStringPercent"/>
		<result column="tbSalesInThisYear" property="tbSalesInThisYear" typeHandler="com.voyageone.cms.utils.EmptyStringIfNull"/>
		<result column="tbSalesInThisYearPercent" property="tbSalesInThisYearPercent" typeHandler="com.voyageone.cms.utils.EmptyStringPercent"/>
		<result column="tmSalesInThisYear" property="tmSalesInThisYear" typeHandler="com.voyageone.cms.utils.EmptyStringIfNull"/>
		<result column="tmSalesInThisYearPercent" property="tmSalesInThisYearPercent" typeHandler="com.voyageone.cms.utils.EmptyStringPercent"/>
		<result column="tgSalesInThisYear" property="tgSalesInThisYear" typeHandler="com.voyageone.cms.utils.EmptyStringIfNull"/>
		<result column="tgSalesInThisYearPercent" property="tgSalesInThisYearPercent" typeHandler="com.voyageone.cms.utils.EmptyStringPercent"/>
		<result column="jdSalesInThisYear" property="jdSalesInThisYear" typeHandler="com.voyageone.cms.utils.EmptyStringIfNull"/>
		<result column="jdSalesInThisYearPercent" property="jdSalesInThisYearPercent" typeHandler="com.voyageone.cms.utils.EmptyStringPercent"/>
		<result column="jgSalesInThisYear" property="jgSalesInThisYear" typeHandler="com.voyageone.cms.utils.EmptyStringIfNull"/>
		<result column="jgSalesInThisYearPercent" property="jgSalesInThisYearPercent" typeHandler="com.voyageone.cms.utils.EmptyStringPercent"/>

	</resultMap>
	<select id="cms_get_CNModelProductList" resultMap="ModelCNProductResultMap" parameterType="HashMap">
		select
		b.code,
		b.cn_name,
		b.cn_display_order,
		a.cn_is_primary_product,
		b.product_type_name,
		b.brand_name,
		b.size_type_name,
		b.color_name,
		b.cn_color,
		b.madeInCountry AS madeInCountry,
		b.materialFabric AS materialFabric,
		b.cnAbstract AS cnAbstract,
		b.cnShortDescription AS cnShortDescription,
		b.cnLongDescription AS cnLongDescription,
		SUM(IFNULL(c.qty_china,0)) as quantity,
		b.urlKey AS urlKey,
		b.created,
		b.modified,
		b.referenceMsrp AS referenceMsrp,
		b.referencePrice AS referencePrice,
		b.cnPrice AS cnPrice,
		b.cnPriceRmb AS cnPriceRmb,
		b.cnPriceFinalRmb AS cnPriceFinalRmb,
		b.cnIsOnSale AS cnIsOnSale,
		b.cnIsApproved AS cnIsApproved,
		b.cnSales7Days,
		b.cnSales7DaysPercent,
		b.cnSales30Days,
		b.cnSales30DaysPercent,
		b.cnSalesInThisYear,
		b.cnSalesInThisYearPercent,
		b.cnOfficialPriceFinalRmb AS cnOfficialPriceFinalRmb,
		b.cnOfficialFreeShippingType AS cnOfficialFreeShippingType,
		b.cnOfficialIsOnSale AS cnOfficialIsOnSale,
		b.cnOfficialIsApproved AS cnOfficialIsApproved,
		b.cnOfficialPrePublishDateTime AS cnOfficialPrePublishDateTime,
		b.cnOfficialSales7Days,
		b.cnOfficialSales7DaysPercent,
		b.cnOfficialSales30Days,
		b.cnOfficialSales30DaysPercent,
		b.cnOfficialSalesInThisYear,
		b.cnOfficialSalesInThisYearPercent,
		b.tbPriceFinalRmb AS tbPriceFinalRmb,
		b.tbFreeShippingType AS tbFreeShippingType,
		b.tbIsOnSale AS tbIsOnSale,
		b.tbIsApproved AS tbIsApproved,
		b.tbPrePublishDateTime AS tbPrePublishDateTime,
		b.tbSales7Days,
		b.tbSales7DaysPercent,
		b.tbSales30Days,
		b.tbSales30DaysPercent,
		b.tbSalesInThisYear,
		b.tbSalesInThisYearPercent,
		b.tmPriceFinalRmb AS tmPriceFinalRmb,
		b.tmFreeShippingType AS tmFreeShippingType,
		b.tmIsOnSale AS tmIsOnSale,
		b.tmIsApproved AS tmIsApproved,
		b.tmPrePublishDateTime AS tmPrePublishDateTime,
		b.tmSales7Days,
		b.tmSales7DaysPercent,
		b.tmSales30Days,
		b.tmSales30DaysPercent,
		b.tmSalesInThisYear,
		b.tmSalesInThisYearPercent,
		b.tgPriceFinalRmb AS tgPriceFinalRmb,
		b.tgFreeShippingType AS tgFreeShippingType,
		b.tgIsOnSale AS tgIsOnSale,
		b.tgIsApproved AS tgIsApproved,
		b.tgPrePublishDateTime AS tgPrePublishDateTime,
		b.tgSales7Days,
		b.tgSales7DaysPercent,
		b.tgSales30Days,
		b.tgSales30DaysPercent,
		b.tgSalesInThisYear,
		b.tgSalesInThisYearPercent,
		b.jdPriceFinalRmb AS jdPriceFinalRmb,
		b.jdFreeShippingType AS jdFreeShippingType,
		b.jdIsOnSale AS jdIsOnSale,
		b.jdIsApproved AS jdIsApproved,
		b.jdPrePublishDateTime AS jdPrePublishDateTime,
		b.jdSales7Days,
		b.jdSales7DaysPercent,
		b.jdSales30Days,
		b.jdSales30DaysPercent,
		b.jdSalesInThisYear,
		b.jdSalesInThisYearPercent,
		b.jgPriceFinalRmb AS jgPriceFinalRmb,
		b.jgFreeShippingType AS jgFreeShippingType,
		b.jgIsOnSale AS jgIsOnSale,
		b.jgIsApproved AS jgIsApproved,
		b.jgPrePublishDateTime AS jgPrePublishDateTime,
		b.jgSales7Days,
		b.jgSales7DaysPercent,
		b.jgSales30Days,
		b.jgSales30DaysPercent,
		b.jgSalesInThisYear,
		b.jgSalesInThisYearPercent,
		a.channel_id,
		b.cnOfficialPriceAdjustmentRmb AS cnOfficialPriceAdjustmentRmb,
		b.cnOfficialSalesAllDays,
		b.cnOfficialSalesAllDaysPercent,
		b.cnPriceAdjustmentRmb AS cnPriceAdjustmentRmb,
		b.cnSalesAllDays,
		b.cnSalesAllDaysPercent,
		b.creater,
		b.effectivePrice AS effectivePrice,
		b.firstSalePrice AS firstSalePrice,
		b.image_name,
		b.is_approved_description,
		b.is_effective,
		b.jdPriceAdjustmentRmb AS jdPriceAdjustmentRmb,
		b.jdSalesAllDays,
		b.jdSalesAllDaysPercent,
		b.jgPriceAdjustmentRmb AS jgPriceAdjustmentRmb,
		b.jgSalesAllDays,
		b.jgSalesAllDaysPercent,
		a.model_id,
		b.modifier,
		a.product_id,
		b.tbPriceAdjustmentRmb AS tbPriceAdjustmentRmb,
		b.tbSalesAllDays,
		b.tbSalesAllDaysPercent,
		b.tgPriceAdjustmentRmb AS tgPriceAdjustmentRmb,
		b.tgSalesAllDays,
		b.tgSalesAllDaysPercent,
		b.tmPriceAdjustmentRmb AS tmPriceAdjustmentRmb,
		b.tmSalesAllDays,
		b.tmSalesAllDaysPercent
		FROM
		cms_bt_relation_model_product a
		LEFT JOIN view_cn_product_info_list b ON a.product_id = b.product_id and a.channel_id = b.channel_id
		LEFT JOIN Synship.wms_bt_inventory_center_logic c ON c.code = b.CODE and c.order_channel_id = b.channel_id
		WHERE
		a.model_id=#{modelId}
		and a.channel_id=#{channelId}
		GROUP BY b.code,b.channel_id
		<if test="order != null and order != ''">
			ORDER BY #{order,jdbcType=INTEGER}  ${dir}
		</if>
		<if test="order == null or order == ''">
			ORDER BY b.cn_display_order
		</if>
		<if test="start != null and length != null">
			LIMIT #{start}, #{length}
		</if>
	</select>
	<select id="cms_get_CNModelProductList_count" resultType="Integer"  parameterType="HashMap">
		select
	  	 	count(1)
		FROM
			cms_bt_relation_model_product b 
		WHERE 
			b.model_id=#{modelId}
	     	and b.channel_id=#{channelId}
	</select>
	<resultMap type="com.voyageone.cms.formbean.ProductPriceSettingBean" id="modelProductPriceSettingMap">
		<result column="model_id" property="modelId"/>
		<result column="product_id" property="productId"/>
		<result column="channel_id" property="channelId"/>
		<result column="base_price_id" property="basePriceId"/>
		<result column="pricing_factor" property="pricingFactor"/>
		<result column="exchange_rate" property="exchangeRate"/>
		<result column="over_heard_1" property="overHeard1"/>
		<result column="over_heard_2" property="overHeard2"/>
		<result column="over_heard_3" property="overHeard3"/>
		<result column="over_heard_4" property="overHeard4"/>
		<result column="over_heard_5" property="overHeard5"/>
		<result column="shipping_compensation" property="shippingCompensation"/>
		<result column="modified" property="modified"/>
	</resultMap>
	<select id="get_model_product_price_setting" parameterType="HashMap" resultMap="modelProductPriceSettingMap">
		  SELECT
			a.model_id,
		  	a.channel_id,
			a.product_id,
			b.channel_id,
			b.base_price_id,
			b.pricing_factor,
			b.exchange_rate,
			b.over_heard_1,
			b.over_heard_2,
			b.shipping_compensation
		 FROM
			cms_bt_relation_model_product AS a
		LEFT JOIN cms_bt_cn_product_price_setting AS b ON a.product_id = b.product_id
		AND a.channel_id = b.channel_id
		where a.model_id = #{modelId}
		and a.channel_id = #{channelId}
  </select>

	<delete id="cms_movetomodel_delete_pm_relation">
		delete from cms_bt_relation_model_product where product_id in ${productIdString}
  	</delete>

	<delete id="cms_movetomodel_delete_pc_relation">
		delete from cms_bt_relation_category_product where product_id in ${productIdString} and category_id > 500;
  	</delete>

	<insert id="cms_movetomodel_create_pm_relation">
		insert into cms_bt_relation_model_product
		(model_id, product_id, channel_id, display_order, cn_display_order, creater, modifier)
		values
		<foreach collection="paramModelProductList" item="item" separator=",">
			(
			#{item.modelId},
			#{item.productId},
			#{item.channelId},
			(select max(display_order) + 1 from cms_bt_relation_model_product t where t.channel_id = #{item.channelId} and t.model_id = #{item.modelId} group by t.channel_id, t.model_id),
			(select max(cn_display_order) + 1 from cms_bt_relation_model_product t where t.channel_id = #{item.channelId} and t.model_id = #{item.modelId} group by t.channel_id, t.model_id),
			#{item.modifier},
			#{item.modifier}
			)
		</foreach>
	</insert>

	<insert id="cms_movetomodel_create_pc_relation">
		insert into cms_bt_relation_category_product
		(category_id, product_id, channel_id, display_order, cn_display_order, creater, modifier)
		values
		<foreach collection="paramCategoryProductList" item="item" separator=",">
			(
			#{item.categoryId},
			#{item.productId},
			#{item.channelId},
			(select max(display_order) + 1 from cms_bt_relation_category_product t where t.channel_id = #{item.channelId} and t.category_id = #{item.categoryId} group by t.channel_id, t.category_id),
			(select max(cn_display_order) + 1 from cms_bt_relation_category_product t where t.channel_id = #{item.channelId} and t.category_id = #{item.categoryId} group by t.channel_id, t.category_id),
			#{item.modifier},
			#{item.modifier}
			)
		</foreach>
	</insert>

</mapper>