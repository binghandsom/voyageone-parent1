<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.voyageone.web2.cms.sql">
    <select id="cms_mt_dict_selectByCondition" resultType="com.voyageone.web2.cms.model.CmsMtDictModel" parameterType="HashMap">
        SELECT
        id,
        order_channel_id,
        cart_id,
        name,
        `value`,
        comment,
        creater,
        created,
        modifier,
        modified
        FROM voyageone_cms2.cms_mt_dict
        WHERE order_channel_id = #{channel_id}
        <if test="name != null and name != ''">
            AND name like CONCAT('%',#{name},'%' )
        </if>
        <if test="offset != null and rows != null">
            LIMIT #{offset}, #{rows};
        </if>
    </select>

    <select id="cms_mt_dict_selectAllCount" resultType="int" parameterType="HashMap">
        SELECT count(1)
        FROM voyageone_cms2.cms_mt_dict
        WHERE order_channel_id = #{channel_id}
        <if test="name != null and name != ''">
            AND name like CONCAT('%',#{name},'%' )
        </if>
    </select>

    <insert id="cms_mt_dict_insertDict" parameterType="com.voyageone.web2.cms.model.CmsMtDictModel">
        INSERT INTO voyageone_cms2.cms_mt_dict (order_channel_id, name, value, created, creater)
        VALUES (#{order_channel_id}, #{name}, #{value}, NOW(), #{creater})
    </insert>

    <update id="cms_mt_dict_updateDict" parameterType="com.voyageone.web2.cms.model.CmsMtDictModel">
        UPDATE voyageone_cms2.cms_mt_dict
        SET name = #{name}, value = #{value}, modified = NOW(), modifier = #{modifier}
        WHERE id = #{id} AND modified = #{modified}
    </update>

    <delete id="cms_mt_dict_deleteDict" parameterType="com.voyageone.web2.cms.model.CmsMtDictModel">
        DELETE FROM voyageone_cms2.cms_mt_dict
        WHERE id = #{id}
    </delete>

    <select id="cms_mt_dict_selectByName" parameterType="com.voyageone.web2.cms.model.CmsMtDictModel" resultType="com.voyageone.web2.cms.model.CmsMtDictModel">
        SELECT
        id,
        order_channel_id,
        name,
        value,
        created,
        creater,
        modified,
        modifier
        FROM voyageone_cms2.cms_mt_dict
        WHERE order_channel_id = #{order_channel_id} AND name = #{name}
    </select>

    <select id="cms_mt_dict_selectSimpleDict" resultType="com.voyageone.web2.cms.model.CmsMtDictModel">
        SELECT
        id,
        order_channel_id,
        name
        FROM voyageone_cms2.cms_mt_dict
        WHERE order_channel_id = #{channel_id}
    </select>

    <insert id="cms_mt_dict_insertDict_log" parameterType="com.voyageone.web2.cms.model.CmsMtDictModel">
        INSERT INTO voyageone_cms2.cms_mt_dict_log (dict_id,order_channel_id, cart_id, name, value, created, creater, modified, modifier)
        VALUES (#{id},#{order_channel_id}, #{cart_id}, #{name}, #{value}, #{created}, #{creater}, NOW(), #{modifier})
    </insert>
</mapper>