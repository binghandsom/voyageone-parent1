<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.voyageone.service.dao.sql">

    <select id="cms_mt_feed_config_key" resultType="com.voyageone.service.bean.cms.CmsMtFeedConfigBean">
        SELECT
            a.cfg_name cfgName,
            a.cms_cfg_name cmsCfgName,
            a.cms_cfg_name_lev cmsCfgNameLev,
            a.cms_cfg_name_order cmsCfgNameOrder,
            a.cms_is_cfg_val1_display cmsIsCfgVal1Display,
            a.cms_is_cfg_val2_display cmsIsCfgVal2Display,
            a.cms_is_cfg_val3_display cmsIsCfgVal3Display
        FROM
            voyageone_cms2.cms_mt_feed_config_key a
    </select>

    <select id="cms_mt_feed_config_selectByChannelId" resultType="com.voyageone.service.bean.cms.CmsMtFeedConfigBean" parameterType="String">
        SELECT
            b.order_channel_id orderChannelId,
            b.cfg_val1 cfgVal1,
            b.cfg_val2 cfgVal2,
            b.cfg_val3 cfgVal3,
            b.`comment` comment,
            a.cfg_name cfgName,
            a.cms_cfg_name cmsCfgName,
            a.cms_cfg_name_lev cmsCfgNameLev,
            a.cms_cfg_name_order cmsCfgNameOrder,
            a.cms_is_cfg_val1_display cmsIsCfgVal1Display,
            a.cms_is_cfg_val2_display cmsIsCfgVal2Display,
            a.cms_is_cfg_val3_display cmsIsCfgVal3Display
        FROM
            voyageone_cms2.cms_mt_feed_config_key a
        LEFT JOIN voyageone_cms2.cms_mt_feed_config b ON a.cfg_name = b.cfg_name
        WHERE
            b.order_channel_id = #{channelId, jdbcType=VARCHAR}
        ORDER BY
            a.cms_cfg_name_order,
            a.cms_cfg_name_lev DESC
    </select>

    <delete id="cms_mt_feed_config_deleteByChannelId">
        DELETE FROM voyageone_cms2.cms_mt_feed_config
        WHERE order_channel_id = #{channelId}
    </delete>
</mapper>
