<div class="container-fluid" ng-controller="newRtnSessionCtrl" ng-init="initialize()">
    <div>
        <object id="AutoScale" classid="clsid:0F8E58C5-FB1B-11E3-B02E-74867A50EFA7" style="display: none;"></object>
    </div>
    <div class="panel panel-primary">
        <div class="panel-heading">
            <h3 class="panel-title">
                <span  translate="WMS_NEWEDITSESSION"></span>
                <span ng-if="returnTypeFlg" class="text-warning" translate="WMS_NOT_TO_CALCULATE_INVENTORY"></span>
            </h3>
        </div>
        <div class="panel-body ng-binding form-inline">
            <div class="form-group">
                <div class="input-group">
                    <label class="input-group-addon" translate="WMS_SESSIONNAME"></label>
                    <ui-select ng-model="search.sessionId" style="min-width: 220px">
                        <ui-select-match placeholder="select a session">{{$select.selected.created_local}}</ui-select-match>
                        <ui-select-choices repeat="i.return_session_id as i in processingSessionList | filter: $select.search">
                            <div ng-bind-html="i.created_local"></div>
                        </ui-select-choices>
                    </ui-select>
                </div>
            </div>
            <div class="form-group" ng-show="isShow()">
                <div class="input-group">
                    <label class="input-group-addon" translate="WMS_STORE"></label>
                    <ui-select ng-model="search.storeId" style="min-width: 150px">
                        <ui-select-match placeholder="select a store">{{$select.selected.store_name}}</ui-select-match>
                        <ui-select-choices repeat="i.store_id as i in userStore | filter: $select.search">
                            <div ng-bind-html="i.store_name"></div>
                        </ui-select-choices>
                    </ui-select>
                </div>
            </div>
            <div class="form-group">
                <div class="input-group">
                    <label for="newRtnSession-orderNumber" class="input-group-addon" translate="WMS_ORDERNUMBER"></label>
                    <input id="newRtnSession-orderNumber" placeholder="Order number" focus-me="true" class="form-control" type="text" ng-model="orderNumber" enter-click="#orderNumber-scan"/>
                </div>
            </div>
            <div class="form-group">
                <button id="orderNumber-scan" pop-return-info="{{ orderNumber }}" class="btn btn-sm btn-primary" translate="WMS_SCAN" ng-click="scanOrderNumber()"></button>
                <button class="btn btn-sm btn-danger" ng-click="doCloseSession()" translate="WMS_CLOSESESSION"></button>
            </div>
        </div>

        <div class="panel-body">
            <div class="table-responsive">
                <span translate="WMS_RECORDNUMBER"></span><span ng-bind="vm.returnList.count"></span>
                <!--表格主体-->
                <table if-no-rows="vm.returnList" class="table table-bordered table-hover table-condensed">
                    <thead>
                    <tr>
                        <th class="col-fix-no">#</th>
                        <th translate="WMS_RESID"></th>
                        <th translate="WMS_ORDERNUMBER"></th>
                        <th translate="WMS_SKU"></th>
                        <th translate="WMS_PRODUCTNAME"></th>
                        <th translate="WMS_STATUS"></th>
                        <th translate="WMS_CONDITION"></th>
                        <th translate="WMS_REASON"></th>
                        <th translate="WMS_EXPRESSCOMPANY"></th>
                        <th translate="WMS_TRACKINGNO"></th>
                        <th translate="WMS_NOTE"></th>
                        <th class="col-fix-op" translate="WMS_OPERATION"></th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr ng-repeat="returnInfo in vm.returnList">
                        <td class="col-fix-no">{{$index + 1}}</td>
                        <td>{{returnInfo.res_id}}</td>
                        <td>{{returnInfo.order_num}}</td>
                        <td>{{returnInfo.sku}}</td>
                        <td>{{returnInfo.product_name}}</td>
                        <td>{{returnInfo.status_name}}</td>
                        <td>{{returnInfo.condition}}</td>
                        <td>{{returnInfo.reason_name}}</td>
                        <td>{{returnInfo.received_from}}</td>
                        <td>{{returnInfo.tracking_no}}</td>
                        <td>{{returnInfo.notes}}</td>
                        <td class="col-fix-op">
                            <button class="btn btn-xs btn-success" context-menu="session-info-operations" ng-click="vm.returnList.selected = returnInfo">
                                <label translate="WMS_OPERATION"></label>
                                <span class="caret"></span>
                            </button>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <ul id="session-info-operations" role="menu" class="dropdown-menu">
        <li><a href="javascript:" ng-click="editRow()"><i class="fa fa-pencil-square"></i>&nbsp;<span  translate="WMS_EDIT"></span></a></li>
        <li><a href="javascript:" ng-click="delRow()"><i class="fa fa-trash"></i>&nbsp;<span translate="WMS_DELETE"></span></a></li>
        <li class="divider"></li>
        <li><a href="javascript:" ng-click="printRow()"><i class="fa fa-print"></i>&nbsp;<span translate="WMS_PRINT"></span></a></li>
    </ul>
</div>

