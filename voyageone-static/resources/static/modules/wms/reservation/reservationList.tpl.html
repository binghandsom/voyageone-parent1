<div class="container-fluid" ng-controller="reservationListCtrl" ng-init="initialize()"	ng-cloak >
    <div class="panel panel-primary" bs-collapse="">
        <div class="panel-heading" role="tab">
            <h4 class="panel-title">
                <a bs-collapse-toggle="" class="ng-binding" data-toggle="collapse">
                    Advanced Search
                </a>
            </h4>
        </div>

        <div class="panel-body ng-binding form-inline">
            <div class="row row-flow mb10">
                <div class="col-md-2">
                    <div class="input-group">
                        <span class="input-group-addon" translate="WMS_RESID"></span>
                        <input id="id" name="id" placeholder="Reservation ID" ng-model="search.reservation_id" class="form-control" type="text" value="" maxlength="15" bs-tooltip="" />
                    </div>
                </div>
                <div class="col-md-2">
                    <div class="input-group">
                        <span class="input-group-addon" translate="WMS_ORDERNUMBER"></span>
                        <input id="order_number" name="order_number" ng-model="search.order_number" placeholder="Order Number" class="form-control" type="text" value="" maxlength="15" bs-tooltip="" />
                    </div>
                </div>
                <div class="col-md-2">
                    <div class="input-group">
                        <span class="input-group-addon" translate="WMS_SYNSHIPNO"></span>
                        <input id="syn_ship_no" name="syn_ship_no" ng-model="search.synShipNo" placeholder="SynShipNo" class="form-control" type="text" value="" maxlength="20" bs-tooltip="" />
                    </div>
                </div>
                <div class="col-md-2">
                    <div class="input-group">
                        <span class="input-group-addon" translate="WMS_WEBORDERID"></span>
                        <input id="source_order_id" name="source_order_id" ng-model="search.source_order_id" placeholder="WebOrderId" class="form-control" type="text" value="" maxlength="20" bs-tooltip=""/>
                    </div>
                </div>
                <div class="col-md-2">
                    <div class="input-group">
                        <span class="input-group-addon" translate="WMS_STORE"></span>
                        <ui-select ng-model="search.store_id" style="min-width: 200px">
                            <ui-select-match placeholder="select a Store">
                                {{$select.selected.store_name}}
                            </ui-select-match>
                            <ui-select-choices repeat="i.store_id as i in userStore | filter: $select.search">
                                <div ng-bind-html="i.store_name"></div>
                            </ui-select-choices>
                        </ui-select>
                    </div>
                </div>
                <div class="col-md-2">
                    <div class="input-group">
                        <span class="input-group-addon" translate="WMS_STATUS"></span>
                        <ui-select ng-model="search.res_status_id" style="min-width: 220px">
                            <ui-select-match placeholder="select a session">
                                {{$select.selected.name}}
                            </ui-select-match>
                            <ui-select-choices repeat="i.id  as i in rsvStatus | filter: $select.search">
                                <div ng-bind-html="i.name"></div>
                            </ui-select-choices>
                        </ui-select>
                    </div>
                </div>
            </div>
                <div class="row row-flow mb10">
                    <div class="col-md-2">
                        <div class="input-group">
                            <span class="input-group-addon" translate="WMS_CHANNEL"></span>
                            <ui-select ng-model="search.order_channel_id" style="min-width: 160px">
                                <ui-select-match placeholder="select a channnel">
                                    {{$select.selected.propertyName}}
                                </ui-select-match>
                                <ui-select-choices repeat="i.propertyId  as i in propertyPermissions | filter: $select.search">
                                    <div ng-bind-html="i.propertyName"></div>
                                </ui-select-choices>
                            </ui-select>
                        </div>
                    </div>
                <div class="col-md-2">
                    <div class="input-group">
                        <span class="input-group-addon" translate="WMS_SHIP"></span>
                        <ui-select ng-model="search.ship_channel" style="min-width: 200px">
                            <ui-select-match placeholder="select a channnel">
                                {{$select.selected.name}}
                            </ui-select-match>
                            <ui-select-choices repeat="i.id  as i in ship_channel_id | filter: $select.search">
                                <div ng-bind-html="i.name"></div>
                            </ui-select-choices>
                        </ui-select>
                    </div>
                </div>
                <div class="col-md-2">
                    <div class="input-group">
                        <span class="input-group-addon" translate="WMS_LOCK"></span>
                        <ui-select ng-model="search.isLock" style="min-width: 200px">
                            <ui-select-match placeholder="select a session">
                                {{$select.selected.name}}
                            </ui-select-match>
                            <ui-select-choices repeat="i.id  as i in isLock | filter: $select.search">
                                <div ng-bind-html="i.name"></div>
                            </ui-select-choices>
                        </ui-select>
                    </div>
                </div>
                <div class="col-md-2">
                    <div class="input-group">
                        <span class="input-group-addon" translate="WMS_IDCARD"></span>
                        <ui-select ng-model="search.hasIdCard" style="min-width: 200px">
                            <ui-select-match placeholder="select a session">
                                {{$select.selected.name}}
                            </ui-select-match>
                            <ui-select-choices repeat="i.id as i in hasIdCard | filter: $select.search">
                                <div ng-bind-html="i.name"></div>
                            </ui-select-choices>
                        </ui-select>
                    </div>
                 </div>
                <div class="col-md-2">
                    <div class="input-group">
                        <span class="input-group-addon" translate="WMS_SESTATUS"></span>
                        <ui-select ng-model="search.order_status" style="width: 200px">
                            <ui-select-match placeholder="select a session">
                                {{$select.selected.name}}
                            </ui-select-match>
                            <ui-select-choices repeat="i.id as i in order_status | filter: $select.search">
                                <div ng-bind-html="i.name"></div>
                            </ui-select-choices>
                        </ui-select>
                    </div>
                </div>
            </div>

            <div class="row row-flow mb10">
                <div class="col-md-4">
                    <div class="input-group">
                        <span class="input-group-addon" translate="WMS_FROM"></span>
                        <input class="form-control" type="text" ng-model="search.orderDateTime_s"
                               is-open="fromOpened" ng-click="fromOpened = true" placeholder="Select a date"
                               datepicker-popup="yyyy-MM-dd" datepicker-append-to-body="1" max-date="search.orderDateTime_e"/>
                        <span class="input-group-addon" translate="WMS_TO"></span>
                        <input class="form-control" type="text" ng-model="search.orderDateTime_e"
                               is-open="toOpened" ng-click="toOpened = true" placeholder="Select a date"
                               datepicker-popup="yyyy-MM-dd" datepicker-append-to-body="1" min-date="search.orderDateTime_s"/>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="input-group" >
                        <span class="input-group-addon" translate="WMS_SHOP"></span>
                        <ui-select ng-model="search.cart_id"  style="width: 300px">
                            <ui-select-match placeholder="select a Shop">
                                {{$select.selected.shop_name}}
                            </ui-select-match>
                            <ui-select-choices repeat="i.shop_id as i in shopList | filter: $select.search">
                                <div ng-bind-html="i.shop_name"></div>
                            </ui-select-choices>
                        </ui-select>
                    </div>
                </div>
                <div class="col-md-5">
                    <button class="btn btn-sm btn-primary" ng-click="doSearch(1)"><i class="fa fa-search"></i>&nbsp;<span  translate="WMS_SEARCH"></span></button>
                    <button class="btn btn-primary" translate="WMS_WORKLOAD" ng-show="flase"></button>
                </div>
            </div>
         </div>

    </div>

    <div class="panel panel-primary">
        <div class="panel-body">
                <div class="table-responsive mb10">
                    <span translate="WMS_RECORDNUMBER"></span><span ng-bind="pageOption.total"></span>
                    <!--表格主体-->
                    <table if-no-rows="reservationList" class="table table-striped table-bordered table-hover table-condensed">
                        <thead>
                        <tr>
                            <th class="col-fix-no">#</th>
                            <th translate="WMS_RESID"></th>
                            <th translate="WMS_ORDERNUMBER"></th>
                            <th translate="WMS_SYNSHIPNO"></th>
                            <th translate="WMS_WEBORDERID"></th>
                            <th translate="WMS_SKU"></th>
                            <th translate="WMS_PRODUCTNAME"></th>
                            <th translate="WMS_STORE"></th>
                            <th translate="WMS_STATUS"></th>
                            <th translate="WMS_SESTATUS"></th>
                            <th translate="WMS_CHANNEL"></th>
                            <th translate="WMS_SHIP"></th>
                            <th translate="WMS_LOCK"></th>
                            <th translate="WMS_IDCARD"></th>
                            <th translate="WMS_CREATETIME"></th>
                            <th translate="WMS_ORDERTIME"></th>
                            <th translate="WMS_OPERATION"></th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr ng-repeat="reservationInfo in reservationList">
                            <td class="col-fix-no" >{{$index + 1 +  (pageOption.curr - 1) * pageOption.size }}</td>
                            <td><span reservation-log="{{reservationInfo.reservation_id}}"><a>{{reservationInfo.reservation_id}}</a></span></td>
                            <td>{{reservationInfo.order_number}}</td>
                            <td>{{reservationInfo.synShipNo}}</td>
                            <td>{{reservationInfo.source_order_id}}</td>
                            <td><a pop-wms-inventory-info="{{reservationInfo}}">{{reservationInfo.sku}}</a></td>
                            <td>{{reservationInfo.product}}</td>
                            <td>
                                <a href="javascript:" ng-click="changeStore(reservationInfo)" ng-show="reservationInfo.res_status_id == '11' && reservationInfo.change_store_flg == '1'">{{reservationInfo.store_name}}</a>
                                <span ng-hide="reservationInfo.res_status_id == '11' && reservationInfo.change_store_flg == '1' ">{{reservationInfo.store_name}}</span>
                            </td>
                            <td>{{reservationInfo.res_status_name}}</td>
                            <td>{{reservationInfo.order_status}}</td>
                            <td>{{reservationInfo.order_channel_name}}</td>
                            <td>{{reservationInfo.ship_channel}}</td>
                            <td>{{reservationInfo.isLock}}</td>
                            <td>{{reservationInfo.hasIdCard}}</td>
                            <td>{{reservationInfo.created}}</td>
                            <td>{{reservationInfo.orderDateTime}}</td>
                            <td class="col-fix-op">
                                <button class="btn btn-xs btn-success" context-menu="reservation-info-operations" ng-click="setValue(reservationInfo)" >
                                    <label translate="WMS_OPERATION"></label>
                                    <span class="caret"></span>
                                </button>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            <div class="text-center" paging="pageOption"></div>
        </div>
    </div>
    <ul id="reservation-info-operations" class="dropdown-menu">
        <li><a href="javascript:" ng-click="changeKind('2','')" translate="WMS_NOTE"></a></li>
        <li><a href="javascript:" ng-click="changeKind('3','Cancelled')" ng-show="liViewCtl.cancel" translate="WMS_CANCEL"></a></li>
        <li><a href="javascript:" ng-click="changeKind('4','BackOrdered')" ng-show="liViewCtl.backOrder" translate="WMS_BACKORDER"></a></li>
        <li><a href="javascript:" ng-click="changeKind('5','Open')" ng-show="liViewCtl.open" translate="WMS_OPEN"></a></li>
        <li><a href="javascript:" ng-click="changeKind('6','BackOrderConfirmed')" ng-show="liViewCtl.backOrderConfirmed" translate="WMS_CONFIRMED"></a></li>
    </ul>
</div>

