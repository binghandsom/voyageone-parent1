<div ng-controller="newPromotionController" ng-init="initialize()">
    <div class="bg-light lter b-b wrapper-md vo_page_header clearfix">
        <div class="row">
            <div class="vo_page_title col-sm-2"><!--<h1 class="m-n font-thin h3 text-vo" translate="CMS_TXT_PARENT_CATEGORY"></h1>--></div>
            <!-- .vo_page_title -->
            <div class="col-sm-6 text-left hidden-xs">
                <div class="form-group">
                    <!--<select chosen="" ng-model="parentCategoryId" ng-options="category.categoryId as category.name for category in $root.cmsMaster.categoryList" class="chosen-select input-md w-md" ng-change="changedParentCategory()">-->
                    <!--</select>-->
                </div>
                <!-- .form-group -->
            </div>
            <!-- .col-sm-6 -->
        </div>
        <!-- .row -->
    </div>

    <div class="wrapper-md">

        <div class="row">

            <div class="col-lg-12">

                <div >
                    <accordion class="vo_accordion vo_attr" close-others="oneAtATime">
                        <accordion class="vo_accordion vo_attr">
                            <accordion-group is-open="true">
                                <accordion-heading><span translate="CMS_TXT_NEW_PROMOTION"></span>
                                    <i class="pull-right glyphicon"></i>
                                </accordion-heading>
                                <div>
                                    <tabset class="tab-container">
                                        <!-- US Category Info -->
                                        <tab>
                                            <!-- <tab-heading><span class="glyphicon glyphicon-tag"></span>&nbsp;<span translate="CMS_TXT_PROMOTION"></span></tab-heading> -->
                                            <tab-heading><span class="glyphicon glyphicon-tag"></span>&nbsp;<span translate="CMS_TXT_PROMOTION"></span></tab-heading>
                                            <div class="container-fluid">
                                                <form class="form-horizontal" name="formPromotionInfo" novalidate="">
                                                    <div class="col-sm-6">
                                                        <div class="form-group">
                                                            <label for="txtPromotionName" class="col-sm-4 control-label vo_reqfield" translate="CMS_TXT_NAME"></label>
                                                            <div class="col-sm-8">
                                                                <input  type="text" name="txtPromotionName" id="txtPromotionName" class="form-control" ng-model= "promotionInfo.name" ng-maxlength="50" required="" >
                                                                <va-check ng-show="formPromotionInfo.txtPromotionName.$error.required" check-type="required"></va-check>
                                                                <va-check ng-show="formPromotionInfo.txtPromotionName.$error.maxlength" check-type="maxlength" check-param="50"></va-check>
                                                            </div>
                                                        </div><!-- .form-group -->

                                                        <div class="form-group">
                                                            <label class="col-sm-4 control-label vo_reqfield" translate="CMS_TXT_CART"></label>
                                                            <div class="col-sm-8">
                                                                <div class="input-group">

                                                                    <ui-select name="selPromotionCartId" id="selPromotionCartId" ng-model="promotionInfo.cartId" theme="bootstrap" ng-disabled="disabled"
                                                                               class="text-left" name="selProtionCartId"  required="">
                                                                        <ui-select-match placeholder="Select..." class="text-left">{{$select.selected.cart_name}}</ui-select-match>
                                                                        <ui-select-choices repeat="cart.cart_id as cart in $root.cmsMaster.cartList | filter: $select.search">
                                                                            <span ng-bind-html="cart.cart_name | highlight: $select.search"></span>
                                                                        </ui-select-choices>
                                                                    </ui-select>
                                                                    <span class="input-group-btn">
                                                                        <button type="button" ng-click="clearCartId()" class="btn btn-default">
                                                                            <small>
                                                                                <em class="fa fa-times text-muted"></em>
                                                                            </small>
                                                                        </button>
                                                                    </span>
                                                                </div>
                                                                <va-check ng-show="formPromotionInfo.selPromotionCartId.$error.required" check-type="required"></va-check>
                                                            </div>
                                                        </div><!-- .form-group -->

                                                        <div class="form-group">
                                                            <label for="txtPromotionAttachmentName" class="col-sm-4 control-label" translate="CMS_TXT_ATTACHMENT_NAME"></label>
                                                            <div class="col-sm-8">
                                             <textarea class="form-control no-resize" ng-model= "promotionInfo.attachment" rows="3" id="txtPromotionAttachmentName"
                                                       name="txtPromotionAttachmentName" ng-maxlength="200"></textarea>
                                                                <va-check ng-show="formPromotionInfo.txtPromotionAttachmentName.$error.maxlength" check-type="maxlength" check-param="200"></va-check>
                                                            </div>
                                                        </div><!-- .form-group -->

                                                        <div class="form-group">
                                                            <label for="txtPromotionComment" class="col-sm-4 control-label" translate="CMS_TXT_COMMENT"></label>
                                                            <div class="col-sm-8">
                                                                <textarea class="form-control no-resize" ng-model="promotionInfo.comment" rows="3" id="txtPromotionComment" name="txtPromotionComment" ></textarea>
                                                            </div>
                                                        </div><!-- .form-group -->

                                                    </div><!--.col -->

                                                    <div class="col-sm-6">
                                                        <div class="form-group">
                                                            <label class="col-sm-4 control-label" translate="CMS_TXT_PREHEAT_DATE"></label>
                                                            <div class="form-group col-sm-8 p-r-none">
                                                                <div for="txtPromotionPreheatTimeStart" class="col-sm-5 p-l-none p-r-none" ng-controller="datePickerController">
                                                                    <div class="input-group">
                                                                        <input type="text" name="txtPromotionPreheatTimeStart" ng-model="promotionInfo.preheatDateStart" id="txtPromotionPreheatTimeStart" class="form-control" datepicker-popup="{{$root.dateFormat}}"
                                                                               is-open="promotionPreHeadTimeStart" datepicker-options="dateOptions" close-text="Close"  />
                                                     <span class="input-group-btn">
                                                         <button type="button" class="btn btn-default" ng-click="openDatePicker($event, 'promotionPreHeadTimeStart')"><i class="glyphicon glyphicon-calendar"></i></button>
                                                     </span>
                                                                    </div>
                                                                </div>
                                                                <div class="col-sm-2 p-l-none p-r-none text-center">-</div>
                                                                <div for="txtPromotionPreheatTimeEnd" class="col-sm-5 p-l-none" ng-controller="datePickerController">
                                                                    <div class="input-group">
                                                                        <input type="text" name="txtPromotionPreheatTimeEnd" ng-model="promotionInfo.preheatDateEnd" id="txtPromotionPreheatTimeEnd" class="form-control" datepicker-popup="{{$root.dateFormat}}"
                                                                               is-open="promotionPreHeadTimeEnd" datepicker-options="dateOptions" close-text="Close"  />
                                                     <span class="input-group-btn">
                                                         <button type="button" class="btn btn-default" ng-click="openDatePicker($event, 'promotionPreHeadTimeEnd')"><i class="glyphicon glyphicon-calendar"></i></button>
                                                     </span>
                                                                    </div>
                                                                </div>
                                                                <va-check ng-show="formPromotionInfo.txtPromotionPreheatTimeStart.$error.date || formPromotionInfo.txtPromotionPreheatTimeEnd.$error.date" check-type="date"></va-check>
                                                            </div>
                                                        </div>

                                                        <div class="form-group">
                                                            <label class="col-sm-4 control-label vo_reqfield" translate="CMS_TXT_EFFECTIVE_DATE"></label>
                                                            <div class="form-group col-sm-8 p-r-none">
                                                                <div for="txtPromotionEffectiveTimeStart" class="col-sm-5 p-l-none p-r-none" ng-controller="datePickerController">
                                                                    <div class="input-group">
                                                                        <input type="text" name="txtPromotionEffectiveTimeStart" ng-model="promotionInfo.effectiveDateStart" id="txtPromotionEffectiveTimeStart" class="form-control" datepicker-popup="{{$root.dateFormat}}"
                                                                               is-open="promotionEffectiveTimeStart" datepicker-options="dateOptions" close-text="Close"   required=""/>
                                                                <span class="input-group-btn">
                                                                <button type="button" class="btn btn-default" ng-click="openDatePicker($event, 'promotionEffectiveTimeStart')"><i class="glyphicon glyphicon-calendar"></i></button>
                                                                </span>
                                                                    </div>
                                                                </div>
                                                                <div class="col-sm-2 p-l-none p-r-none text-center">-</div>
                                                                <div for="txtPromotionEffectiveTimeEnd" class="col-sm-5 p-l-none" ng-controller="datePickerController">
                                                                    <div class="input-group">
                                                                        <input type="text" name="txtPromotionEffectiveTimeEnd" ng-model="promotionInfo.effectiveDateEnd" id="txtPromotionEffectiveTimeEnd" class="form-control" datepicker-popup="{{$root.dateFormat}}"
                                                                               is-open="promotionEffectiveTimeEnd" datepicker-options="dateOptions" close-text="Close"   required=""/>
                                                                <span class="input-group-btn">
                                                                <button type="button" class="btn btn-default" ng-click="openDatePicker($event, 'promotionEffectiveTimeEnd')"><i class="glyphicon glyphicon-calendar"></i></button>
                                                                </span>
                                                                    </div>
                                                                </div>
                                                                <va-check ng-show="formPromotionInfo.txtPromotionEffectiveTimeStart.$error.required || formPromotionInfo.txtPromotionEffectiveTimeEnd.$error.required" check-type="required"></va-check>
                                                                <va-check ng-show="!formPromotionInfo.txtPromotionEffectiveTimeStart.$error.required && !formPromotionInfo.txtPromotionEffectiveTimeEnd.$error.required && (formPromotionInfo.txtPromotionEffectiveTimeStart.$error.date || formPromotionInfo.txtPromotionEffectiveTimeEnd.$error.date)" check-type="date"></va-check>
                                                            </div>
                                                        </div>

                                                        <div class="form-group">
                                                            <label class="col-sm-4 control-label" translate="CMS_TXT_PRODUCT_SELECTION_OVER"></label>
                                                            <div class="col-sm-8">
                                                                <div class="onoffswitch">
                                                                    <input type="checkbox" name="promotionisSelectionOver" class="onoffswitch-checkbox" id="promotionisSelectionOver" ng-model="promotionInfo.isSelectionOver" >
                                                                    <label class="onoffswitch-label" for="promotionisSelectionOver">
                                                                        <span class="onoffswitch-inner"></span>
                                                                        <span class="onoffswitch-switch"></span>
                                                                    </label>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div class="form-group">
                                                            <label class="col-sm-4 control-label" translate="CMS_TXT_ACTIVITY_CONFIRM_OVER"></label>
                                                            <div class="col-sm-8">
                                                                <div class="onoffswitch">
                                                                    <input type="checkbox" name="promotionisSignUpOver" class="onoffswitch-checkbox" id="promotionisSignUpOver" ng-model="promotionInfo.isSignUpOver" >
                                                                    <label class="onoffswitch-label" for="promotionisSignUpOver">
                                                                        <span class="onoffswitch-inner"></span>
                                                                        <span class="onoffswitch-switch"></span>
                                                                    </label>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div class="form-group">
                                                            <label class="col-sm-4 control-label" translate="CMS_TXT_LOCATION_STOCK_OVER"></label>
                                                            <div class="col-sm-8">
                                                                <div class="onoffswitch">
                                                                    <input type="checkbox" name="promotionisIsolationStockOver" class="onoffswitch-checkbox" id="promotionisIsolationStockOver" ng-model="promotionInfo.isIsolationStockOver" >
                                                                    <label class="onoffswitch-label" for="promotionisIsolationStockOver">
                                                                        <span class="onoffswitch-inner"></span>
                                                                        <span class="onoffswitch-switch"></span>
                                                                    </label>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div class="form-group">
                                                            <label class="col-sm-4 control-label"translate="CMS_TXT_ACTIVITY_OVER"></label>
                                                            <div class="col-sm-8">
                                                                <div class="onoffswitch">
                                                                    <input type="checkbox" name="promotionisActivityOver" class="onoffswitch-checkbox" id="promotionisActivityOver" ng-model="promotionInfo.isActivityOver" >
                                                                    <label class="onoffswitch-label" for="promotionisActivityOver">
                                                                        <span class="onoffswitch-inner"></span>
                                                                        <span class="onoffswitch-switch"></span>
                                                                    </label>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div><!-- .col -->

                                                    <div class="col-sm-12 control-savebar">
                                                        <div class="col-sm-12 text-center">
                                                            <div class="form-group">
                                                                <button type="button" class="btn btn-default" translate="CMS_BTN_CANCEL" data-ng-click="undoSaveNewPromotionInfo()"></button>
                                                                <button type="button" class="btn btn-vo" ng-disabled="formPromotionInfo.$invalid" translate="CMS_BTN_SAVE" data-ng-click="doSaveNewPromotionInfo()"></button>
                                                            </div>
                                                        </div>
                                                    </div><!-- .col -->
                                                </form>
                                            </div>
                                        </tab>
                                    </tabset>
                                </div>
                                <!-- / tab -->
                            </accordion-group>
                        </accordion><!-- .accordion -->
                </div><!-- accordion ng-controller -->
            </div><!-- .row -->
        </div><!-- end .wrapper-md -->
    </div>
</div>