/*
  filename: angular.integralui.treegrid.min.js
  version : 3.1.5
  Copyright © 2014-2016 Lidor Systems. All rights reserved.

  This file is part of the "IntegralUI" Library. 
                                                                   
  The contents of this file are subject to the IntegralUI Studio for Web License, and may not be used except in compliance with the License.
  A copy of the License should have been installed in the product's root installation directory or it can be found at
  http://www.lidorsystems.com/products/web/studio/license-agreement.aspx.
                                                            
  This SOFTWARE is provided "AS IS", WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License for the specific language 
  governing rights and limitations under the License. Any infringement will be prosecuted under applicable laws.                           
*/
angular.module("integralui").factory("IntegralUITreeGridService",["$rootScope",function(c){var e=null;return{addColumn:function(f,g){c.$broadcast(f+"-add-column",g)},clearColumns:function(f){c.$broadcast(f+"-clear-columns")},insertColumnAt:function(f,g,t){c.$broadcast(f+"-insert-column-at",g,t)},insertColumnBefore:function(f,g,t){c.$broadcast(f+"-insert-column-before",g,t)},insertColumnAfter:function(f,g,t){c.$broadcast(f+"-insert-column-after",g,t)},removeColumn:function(f,g){c.$broadcast(f+"-remove-column",
g)},removeColumnAt:function(f,g){c.$broadcast(f+"-remove-column-at",g)},addRow:function(f,g,t){c.$broadcast(f+"-add-row",g,t)},clearRows:function(f,g){c.$broadcast(f+"-clear-rows",g)},insertRowAt:function(f,g,t,m){c.$broadcast(f+"-insert-row-at",g,t,m)},insertRowBefore:function(f,g,t){c.$broadcast(f+"-insert-row-before",g,t)},insertRowAfter:function(f,g,t){c.$broadcast(f+"-insert-row-after",g,t)},removeRow:function(f,g){c.$broadcast(f+"-remove-row",g)},removeRowAt:function(f,g,t){c.$broadcast(f+"-remove-row-at",
g,t)},exportToJSON:function(f,g,t,m,e){c.$broadcast(f+"-export-json",g,t,m,e);f=this.getTempData();this.clearTempData();return f?f:""},loadData:function(f,g,e,m,ba){c.$broadcast(f+"-load-data",g,e,m,ba)},openEditor:function(f,g){c.$broadcast(f+"-open-editor",g)},closeEditor:function(f,g){c.$broadcast(f+"-close-editor",g)},collapse:function(f,g){c.$broadcast(f+"-collapse",g)},expand:function(f,g){c.$broadcast(f+"-expand",g)},expandColIndex:function(f,g){c.$broadcast(f+"-expand-col-index",g)},toggle:function(f,
g){c.$broadcast(f+"-toggle",g)},filter:function(f,g,e){c.$broadcast(f+"-filter",g,e)},findRowById:function(f,g){c.$broadcast(f+"-find-row-by-id",g);var e=this.getTempData();this.clearTempData();return e?e:null},findRowByPath:function(f,g,e){c.$broadcast(f+"-find-row-by-path",g,e);f=this.getTempData();this.clearTempData();return f?f:null},findRowByText:function(f,g){c.$broadcast(f+"-find-row-by-text",g);var e=this.getTempData();this.clearTempData();return e?e:null},getCellAt:function(f,g){c.$broadcast(f+
"-get-cell-at",g);var e=this.getTempData();this.clearTempData();return e?e:null},getRowAt:function(f,g){c.$broadcast(f+"-get-row-at",g);var e=this.getTempData();this.clearTempData();return e?e:null},getRowParent:function(f,g){c.$broadcast(f+"-get-row-parent",g);var e=this.getTempData();this.clearTempData();return e?e:null},focus:function(f,g){c.$broadcast(f+"-focus",g)},clearTempData:function(){e=null},ensureVisible:function(f,g){c.$broadcast(f+"-ensure-visible",g)},getTempData:function(){return e},
getRowLevel:function(f,g){c.$broadcast(f+"-get-row-level",g);var e=this.getTempData();this.clearTempData();return e?e:0},getFlatList:function(f,g){c.$broadcast(f+"-get-flat-list",g);var e=this.getTempData();this.clearTempData();return e?e:[]},getFullPath:function(f,g){c.$broadcast(f+"-get-full-path",g);var e=this.getTempData();this.clearTempData();return e?e:""},getHoverColumn:function(f,g){c.$broadcast(f+"-get-hover-column",g);var e=this.getTempData();this.clearTempData();return e?e:null},getList:function(f,
g){c.$broadcast(f+"-get-list",g);var e=this.getTempData();this.clearTempData();return e?e:[]},setTempData:function(c){e=c},topRow:function(f,g){if(g)c.$broadcast(f+"-set-top-row",g);else return c.$broadcast(f+"-get-top-row"),g=this.getTempData(),this.clearTempData(),g?g:null},beginLoad:function(f,g,e){c.$broadcast(f+"-begin-load",g,e)},endLoad:function(f,g){c.$broadcast(f+"-end-load",g)},moveColumn:function(f,g,e){c.$broadcast(f+"-move-column",g,e)},moveRow:function(f,g,e,m,ba){c.$broadcast(f+"-move-row",
g,e,m,ba)},getScrollPos:function(f){c.$broadcast(f+"-get-scroll-pos");f=this.getTempData();this.clearTempData();return f?f:{x:0,y:0}},getMaxScrollPos:function(f){c.$broadcast(f+"-get-max-scroll-pos");f=this.getTempData();this.clearTempData();return f?f:{x:0,y:0}},setScrollPos:function(f,g){c.$broadcast(f+"-set-scroll-pos",g)},scrollTo:function(f,g,e){c.$broadcast(f+"-scroll-to",g,e)},currentPage:function(f,g){if(void 0!=g&&null!=g)c.$broadcast(f+"-set-current-page",g);else{c.$broadcast(f+"-get-current-page");
var e=this.getTempData();this.clearTempData();return void 0!=e?e:-1}},firstPage:function(f){c.$broadcast(f+"-first-page")},lastPage:function(f){c.$broadcast(f+"-last-page")},nextPage:function(f){c.$broadcast(f+"-next-page")},prevPage:function(f){c.$broadcast(f+"-prev-page")},clearSelection:function(f){c.$broadcast(f+"-clear-selection")},selectedColumn:function(f,e){if(e)c.$broadcast(f+"-set-selected-column",e);else{c.$broadcast(f+"-get-selected-column");var t=this.getTempData();this.clearTempData();
return t?t:null}},selectedRow:function(f,e){if(e)c.$broadcast(f+"-set-selected-row",e);else{c.$broadcast(f+"-get-selected-row");var t=this.getTempData();this.clearTempData();return t?t:null}},selectedRows:function(f,e){if(e)c.$broadcast(f+"-set-selected-rows",e);else{c.$broadcast(f+"-get-selected-rows");var t=this.getTempData();this.clearTempData();return t?t:null}},sort:function(f,e,t,m){c.$broadcast(f+"-sort",e,t,m)},refresh:function(f,e,t){c.$broadcast(f+"-refresh",e,t)},resumeLayout:function(f,
e){c.$broadcast(f+"-resume-layout",e)},suspendLayout:function(f,e){c.$broadcast(f+"-suspend-layout",e)},updateLayout:function(e,g){c.$broadcast(e+"-update-layout",g)},updateView:function(e){c.$broadcast(e+"-update-view")}}}]).controller("IntegralUITreeGridController",["$scope","$element","$timeout","$window","$interval","IntegralUIInternalService","IntegralUIDataService","IntegralUITreeGridService","IntegralUIDragDrop","IntegralUIFilter",function(c,e,f,g,t,m,ba,k,n,Wb){var a=this;this.suppressProcess=
!1;this.hoverCell=this.hoverRow=this.hoverColumn=null;a.defaultCheckBoxStyle={general:"iui-checkbox",box:{general:"iui-checkbox-box",disabled:"iui-checkbox-box-disabled",checked:"iui-checkbox-checked",indeterminate:"iui-checkbox-indeterminate",unchecked:"iui-checkbox-unchecked"}};a.defaultStyle={general:"iui-treegrid",column:{general:{content:"iui-treegrid-column-cell-content",disabled:"iui-treegrid-column-disabled",normal:"iui-treegrid-column",hovered:"iui-treegrid-column-hovered",selected:"iui-treegrid-column-selected"},
header:{content:"iui-treegrid-column-header-cell-content",disabled:"iui-treegrid-column-header-disabled",normal:"iui-treegrid-column-header",hovered:"iui-treegrid-column-header-hovered",selected:"iui-treegrid-column-header-selected"},body:{content:"iui-treegrid-column-body-cell-content",disabled:"iui-treegrid-column-body-disabled",normal:"iui-treegrid-column-body",hovered:"iui-treegrid-column-body-hovered",selected:"iui-treegrid-column-body-selected"},footer:{content:"iui-treegrid-column-footer-cell-content",
disabled:"iui-treegrid-column-footer-disabled",normal:"iui-treegrid-column-footer",hovered:"iui-treegrid-column-footer-hovered",selected:"iui-treegrid-column-footer-selected"}},row:{general:{disabled:"iui-treegrid-row-disabled",focused:"iui-treegrid-row-focused",normal:"iui-treegrid-row",hovered:"iui-treegrid-row-hovered",selected:"iui-treegrid-row-selected"},checkBox:{general:"iui-checkbox",box:{general:"iui-checkbox-box",disabled:"iui-checkbox-box-disabled",checked:"iui-checkbox-checked",indeterminate:"iui-checkbox-indeterminate",
unchecked:"iui-checkbox-unchecked"}},expandBox:{general:"iui-treegrid-expand-box",animated:"iui-treegrid-expand-box-load",expanded:"iui-treegrid-expand-box-open",collapsed:"iui-treegrid-expand-box-close"},cell:{content:"iui-treegrid-row-cell-content",general:"iui-treegrid-row-cell",disabled:"iui-treegrid-row-cell-disabled",focused:"iui-treegrid-row-cell-focused",normal:"iui-treegrid-row-cell",hovered:"iui-treegrid-row-cell-hovered",selected:"iui-treegrid-row-cell-selected"}},cell:{content:"iui-treegrid-row-cell-content",
general:"iui-treegrid-row-cell",disabled:"iui-treegrid-row-cell-disabled",focused:"iui-treegrid-row-cell-focused",normal:"iui-treegrid-row-cell",hovered:"iui-treegrid-row-cell-hovered",selected:"iui-treegrid-row-cell-selected"}};this.updatePaging=function(b){a.options.paging=b?{enabled:m.isFieldAvailable(b.enabled,!1),showControlPanel:m.isFieldAvailable(b.showControlPanel,!0),pageSize:m.isFieldAvailable(b.pageSize,100)}:{enabled:!1,showControlPanel:!0,pageSize:100}};this.updateOptions=function(b){b?
(a.options={allowAnimation:m.isFieldAvailable(b.allowAnimation,!0),allowCellFocus:m.isFieldAvailable(b.allowCellFocus,!0),allowColumnReorder:m.isFieldAvailable(b.allowColumnReorder,!1),allowDrag:m.isFieldAvailable(b.allowDrag,!1),allowDrop:m.isFieldAvailable(b.allowDrop,!0),allowFilter:m.isFieldAvailable(b.allowFilter,!1),allowFocus:m.isFieldAvailable(b.allowFocus,!0),animationSpeed:200,autoExpand:m.isFieldAvailable(b.autoExpand,!0),controlStyle:a.defaultStyle,editorSettings:{activate:"click"},enabled:m.isFieldAvailable(b.enabled,
!0),expandColIndex:m.isFieldAvailable(b.expandColIndex,void 0!=a.options.expandColIndex?a.options.expandColIndex:0),fillSpace:m.isFieldAvailable(b.fillSpace,!1),gridLines:m.isFieldAvailable(b.gridLines,"both"),hoverSelection:m.isFieldAvailable(b.hoverSelection,!1),indent:m.isFieldAvailable(b.indent,15),labelEdit:m.isFieldAvailable(b.labelEdit,!1),loadRows:[],pathSeparator:m.isFieldAvailable(b.pathSeparator,"\\"),rowHeight:m.isFieldAvailable(b.rowHeight,-1),rtl:m.isFieldAvailable(b.rtl,!1),selectedColumn:m.isFieldAvailable(b.selectedColumn,
a.options.selectedColumn?a.options.selectedColumn:null),selectedIndex:-1,selectedRow:m.isFieldAvailable(b.selectedRow,a.options.selectedRow?a.options.selectedRow:null),selectedRows:a.options.selectedRows?a.options.selectedRows:[],selectionMode:m.isFieldAvailable(b.selectionMode,"one"),showExpandBoxes:m.isFieldAvailable(b.showExpandBoxes,!0),showFooter:m.isFieldAvailable(b.showFooter,!0),showHeader:m.isFieldAvailable(b.showHeader,!0),showIcons:m.isFieldAvailable(b.showIcons,!0),sorting:m.isFieldAvailable(b.sorting,
"none")},a.updatePaging(b.paging),a.updateDataFields(b.dataFields),a.updateControlStyle(b.controlStyle)):(a.options={allowAnimation:!0,allowCellFocus:!0,allowColumnReorder:!1,allowDrag:!1,allowDrop:!0,allowFilter:!1,allowFocus:!0,animationSpeed:200,autoExpand:!0,controlStyle:a.defaultStyle,editorSettings:{activate:"click"},enabled:!0,expandColIndex:0,fillSpace:!1,gridLines:"both",hoverSelection:!1,indent:15,labelEdit:!1,loadRows:[],pathSeparator:"\\",rowHeight:-1,rtl:!1,selectedColumn:null,selectedIndex:-1,
selectedRow:null,selectedRows:[],selectionMode:"one",showExpandBoxes:!0,showFooter:!0,showHeader:!0,showIcons:!0,sorting:"none"},a.updatePaging(),a.updateDataFields())};a.options={};this.updateColumnFields=function(b){a.options.columnFields=b?{allowDrag:b.allowDrag?b.allowDrag:"allowDrag",allowDrop:b.allowDrop?b.allowDrop:"allowDrop",allowFilter:b.allowFilter?b.allowFilter:"allowFilter",cellTemplateUrl:b.cellTemplateUrl?b.cellTemplateUrl:"cellTemplateUrl",comparer:b.comparer?b.comparer:"comparer",
contentAlignment:b.contentAlignment?b.contentAlignment:"contentAlignment",contextMenu:b.contextMenu?b.contextMenu:"contextMenu",editorType:b.editorType?b.editorType:"editorType",editorSettings:b.editorSettings?b.editorSettings:"editorSettings",editorTemplate:b.editorTemplate?b.editorTemplate:"editorTemplate",filterParams:b.filterParams?b.filterParams:"filterParams",filterTemplate:b.filterTemplate?b.filterTemplate:"filterTemplate",fixed:b.fixed?b.fixed:"fixed",fixedWidth:b.fixedWidth?b.fixedWidth:
"fixedWidth",footerAlignment:b.footerAlignment?b.footerAlignment:"footerAlignment",footerContent:b.footerContent?b.footerContent:"footerContent",footerTemplate:b.footerTemplate?b.footerTemplate:"footerTemplate",footerTemplateModel:b.footerTemplateModel?b.footerTemplateModel:"footerTemplateModel",footerText:b.footerText?b.footerText:"footerText",footerTooltip:b.footerTooltip?b.footerTooltip:"footerTooltip",headerAlignment:b.headerAlignment?b.headerAlignment:"headerAlignment",headerContent:b.headerContent?
b.headerContent:"headerContent",headerTemplate:b.headerTemplate?b.headerTemplate:"headerTemplate",headerTemplateModel:b.headerTemplateModel?b.headerTemplateModel:"headerTemplateModel",headerTemplateModel:b.headerTemplateModel?b.headerTemplateModel:"headerTemplateModel",headerText:b.headerText?b.headerText:"headerText",headerTooltip:b.headerTooltip?b.headerTooltip:"headerTooltip",icon:b.icon?b.icon:"icon",id:b.id?b.id:"id",minWidth:b.minWidth?b.minWidth:"minWidth",maxWidth:b.maxWidth?b.maxWidth:"maxWidth",
style:b.style?b.style:"style",templateSettings:b.templateSettings?b.templateSettings:"templateSettings",visible:b.visible?b.visible:"visible",width:b.width?b.width:"width"}:{allowDrag:"allowDrag",allowDrop:"allowDrop",allowFilter:"allowFilter",cellTemplateUrl:"cellTemplateUrl",comparer:"comparer",contentAlignment:"contentAlignment",contextMenu:"contextMenu",editorType:"editorType",editorSettings:"editorSettings",editorTemplate:"editorTemplate",filterParams:"filterParams",filterTemplate:"filterTemplate",
fixed:"fixed",fixedWidth:"fixedWidth",footerAlignment:"footerAlignment",footerContent:"footerContent",footerTemplate:"footerTemplate",footerTemplateModel:"footerTemplateModel",footerTemplateObj:"footerTemplateObj",footerText:"footerText",footerTooltip:"footerTooltip",headerAlignment:"headerAlignment",headerContent:"headerContent",headerTemplate:"headerTemplate",headerTemplateModel:"headerTemplateModel",headerTemplateObj:"headerTemplateObj",headerText:"headerText",headerTooltip:"headerTooltip",icon:"icon",
id:"id",minWidth:"minWidth",maxWidth:"maxWidth",style:"style",templateSettings:"templateSettings",visible:"visible",width:"width"};a.columnsObj&&a.columnsObj.updateDataFields(a.options.columnFields)};this.updateRowFields=function(b){a.options.rowFields=b?{allowDrag:b.allowDrag?b.allowDrag:"allowDrag",allowDrop:b.allowDrop?b.allowDrop:"allowDrop",allowFocus:b.allowFocus?b.allowFocus:"allowFocus",cells:b.cells?b.cells:"cells",content:b.content?b.content:"content",contextMenu:b.contextMenu?b.contextMenu:
"contextMenu",enabled:b.enabled?b.enabled:"enabled",expanded:b.expanded?b.expanded:"expanded",hasChildren:b.hasChildren?b.hasChildren:"hasChildren",icon:b.icon?b.icon:"icon",id:b.id?b.id:"id",objects:b.rows?b.rows:"rows",pid:b.pid?b.pid:"pid",rows:b.rows?b.rows:"rows",statusIcon:b.statusIcon?b.statusIcon:"statusIcon",style:b.style?b.style:"style",subobjects:b.cells?b.cells:"cells",text:b.text?b.text:"text",tooltip:b.tooltip?b.tooltip:"tooltip"}:{allowDrag:"allowDrag",allowDrop:"allowDrop",allowFocus:"allowFocus",
cells:"cells",content:"content",contextMenu:"contextMenu",enabled:"enabled",expanded:"expanded",hasChildren:"hasChildren",icon:"icon",id:"id",objects:"rows",pid:"pid",rows:"rows",statusIcon:"statusIcon",style:"style",subobjects:"cells",text:"text",tooltip:"tooltip"};a.rowsObj&&a.rowsObj.updateDataFields(a.options.rowFields)};this.updateCellFields=function(b){a.options.cellFields=b?{allowEdit:b.allowEdit?b.allowEdit:"allowEdit",cid:b.cid?b.cid:"cid",content:b.content?b.content:"content",contextMenu:b.contextMenu?
b.contextMenu:"contextMenu",enabled:b.enabled?b.enabled:"enabled",labelEdit:b.labelEdit?b.labelEdit:"labelEdit",rid:b.rid?b.rid:"rid",style:b.style?b.style:"style",templateObj:b.templateObj?b.templateObj:"templateObj",text:b.text?b.text:"text",tooltip:b.tooltip?b.tooltip:"tooltip",value:b.value?b.value:"value"}:{allowEdit:"allowEdit",cid:"cid",content:"content",contextMenu:"contextMenu",enabled:"enabled",labelEdit:"labelEdit",rid:"rid",style:"style",templateObj:"templateObj",text:"text",tooltip:"tooltip",
value:"value"}};this.updateDataFields=function(b){b?(a.updateColumnFields(b.column),a.updateRowFields(b.row),a.updateCellFields(b.cell)):(a.updateColumnFields(),a.updateRowFields(),a.updateCellFields())};a.updateOptions();c.$on(c.name+"-add-column",function(b,d){a.columnsObj.insertAt(d,-1,null,a.columnIsAdded)});c.$on(c.name+"-clear-columns",function(b){a.columnsObj.clear(null,a.columnsAreCleared)});c.$on(c.name+"-insert-column-at",function(b,d,c){a.columnsObj.insertAt(d,c,null,a.columnIsAdded)});
c.$on(c.name+"-insert-column-after",function(b,d,c){a.columnsObj.insertByRef(d,c,!0,a.columnIsAdded)});c.$on(c.name+"-insert-column-before",function(b,d,c){a.columnsObj.insertByRef(d,c,!1,a.columnIsAdded)});c.$on(c.name+"-remove-column",function(b,d){a.columnsObj.removeAt(d,-1,null,a.columnIsRemoved)});c.$on(c.name+"-remove-column-at",function(b,d){a.columnsObj.removeAt(null,d,null,a.columnIsRemoved)});this.columnsAreCleared=function(b){a.options.selectedColumn&&(a.options.selectedColumn.selected=
!1);a.options.selectedColumn=null;a.updateLayout()};a.columnIsAdded=function(){a.updateLayout()};a.columnIsRemoved=function(b,d){a.updateLayout()};c.$on(c.name+"-add-row",function(b,d,c){a.rowsObj.insertAt(d,-1,c,a.rowIsAdded)});c.$on(c.name+"-clear-rows",function(b,d){a.rowsObj.clear(d,a.rowsAreCleared)});c.$on(c.name+"-insert-row-at",function(b,d,c,h){a.rowsObj.insertAt(d,c,h,a.rowIsAdded)});c.$on(c.name+"-insert-row-after",function(b,d,c){a.rowsObj.insertByRef(d,c,!0,a.rowIsAdded)});c.$on(c.name+
"-insert-row-before",function(b,d,c){a.rowsObj.insertByRef(d,c,!1,a.rowIsAdded)});c.$on(c.name+"-remove-row",function(b,d){a.rowsObj.removeAt(d,-1,null,a.rowIsRemoved)});c.$on(c.name+"-remove-row-at",function(b,d,c){a.rowsObj.removeAt(null,d,c,a.rowIsRemoved)});this.rowsAreCleared=function(b){b||(a.clearPrevSelection(),a.options.selectedRow=null,a.setScrollPos({x:0,y:0}));a.updateCurrentLayout()};this.rowIsAdded=function(){a.updateCurrentLayout()};this.rowIsRemoved=function(b,d,c){a.updateCurrentLayout()};
this.objIsRemoved=function(b,d,c){a.updateCurrentLayout()};a.columnList=[];a.columnFilterList=[];a.isThereLeftFixedColumns=!1;a.isThereRightFixedColumns=!1;this.updateColumnList=function(){a.columnList.length=0;a.columnFilterList.length=0;a.isThereLeftFixedColumns=!1;a.isThereRightFixedColumns=!1;var b=a.columnsObj.getList();if(b)for(var d=0;d<b.length;d++){var c=b[d];c.type="column";c[a.options.columnFields.id]||(c[a.options.columnFields.id]=m.getUniqueId());if(0!=c[a.options.columnFields.visible]){var h=
c[a.options.columnFields.filterParams],h=h?Wb.createTree(h.conditions,h.formula):null;a.columnFilterList.push({cid:c[a.options.columnFields.id],tree:h});a.columnList.push(c);switch(c[a.options.columnFields.fixed]){case "left":a.isThereLeftFixedColumns||(a.isThereLeftFixedColumns=!0);break;case "right":a.isThereRightFixedColumns||(a.isThereRightFixedColumns=!0)}}}};var sc=function(b){for(var d=null,c=0;c<a.columnFilterList.length;c++)if(a.columnFilterList[c].cid==b){d=a.columnFilterList[c].tree;break}return d},
A=function(b,d){if(0==a.options.allowFilter)return!0;var c=!0;if(b)for(var h,u,e,f=0;f<b[a.options.rowFields.cells].length&&(c=!0,e=b[a.options.rowFields.cells][f],h=e[a.options.cellFields.cid],u=a.getColumnById(h),!u&&f<a.columnList.length&&(u=a.columnList[f]),u&&u[a.options.columnFields.filterParams]&&(c=u[a.options.columnFields.filterParams],u=e[a.options.cellFields.value]?e[a.options.cellFields.value]:e[a.options.cellFields.text],c=c.callback?c.callback(u,e,b):Wb.match(u,c.conditions,c.formula,
sc(h))),c);f++);return c},X=a.options.indent;a.currentPageList=[];a.pageList=[];a.onlyCurrentPage=!1;a.currentList=[];a.fullIndentList=[];a.fullList=[];a.indentList=[];a.longestRow=null;a.isThereChildRows=!1;a.pageRowCount=0;a.pageNumber=0;a.currentPageNumber=1;this.isThereVisibleChildren=function(b){var d=!1;if(b&&(b=b[a.options.rowFields.rows])&&0<b.length)for(var c=0;c<b.length;c++)if(A(b[c])){d=!0;break}return d};var J=function(b,d,c,h){b.type="row";b[a.options.rowFields.id]||(b[a.options.rowFields.id]=
m.getUniqueId());c&&(b[a.options.rowFields.pid]=c);c=!0;var u=b[a.options.rowFields.cells];if(u&&0<u.length){c=A(b,h);for(var e,f,g,k=0;k<a.columnList.length;k++){g=a.columnList[k];e=g[a.options.columnFields.id];f=g[a.options.columnFields.editorType];g=g[a.options.columnFields.editorSettings];var n=k;e&&(n=a.getCellIndexById(u,k,e));0<=n&&n<u.length&&(u[n].type="cell",u[n][a.options.cellFields.rid]=b[a.options.rowFields.id],a.setDefaultCellValue(u[n],f,g))}}c&&(h?(a.fullList.push(b),a.fullIndentList.push(d)):
a.options.paging.enabled?a.onlyCurrentPage?a.currentPageList.push({row:b,indent:d}):(b[a.options.rowFields.pid]||a.pageRowCount++,a.pageRowCount>a.options.paging.pageSize&&(a.pageRowCount=1,a.pageNumber++,a.pageList.push([])),a.pageList[a.pageNumber].push({row:b,indent:d})):(a.currentList.push(b),a.indentList.push(d)));return c},v=function(b,d,c,h){if(!b[a.options.rowFields.rows])return c=J(b,d,c,h);if(c=J(b,d,c,h)){var u=0,e;if(h||a.isRowExpanded(b)){var f=b[a.options.rowFields.rows];if(f){a.applySorting(f);
for(var g=0;g<f.length;g++)(e=v(f[g],d+X,b[a.options.rowFields.id],h))&&u++}}h||a.isThereChildRows||!(0<u||!a.isRowExpanded(b)&&b[a.options.rowFields.rows]&&0<b[a.options.rowFields.rows].length&&a.isThereVisibleChildren(b))||(a.isThereChildRows=!0)}return c};this.getFullList=function(){a.fullList.length=0;a.fullIndentList.length=0;for(var b=a.rowsObj.getList(),d=0;d<b.length;d++)v(b[d],0,null,!0);return a.fullList};this.getCurrentList=function(){return a.currentList};this.updateCurrentList=function(){a.currentList.length=
0;a.indentList.length=0;X=a.options.indent;if(a.options.paging.enabled){if(1<=a.currentPageNumber&&a.currentPageNumber<=a.pageList.length)for(var b=0;b<a.pageList[a.currentPageNumber-1].length;b++)a.currentList.push(a.pageList[a.currentPageNumber-1][b].row),a.indentList.push(a.pageList[a.currentPageNumber-1][b].indent)}else{a.isThereChildRows=!1;var d=a.rowsObj.getList();if(d)for(a.applySorting(d),b=0;b<d.length;b++)v(d[b],0,null,!1)}};this.updateCurrentPageList=function(){a.currentPageList.length=
0;a.isThereChildRows=!1;a.onlyCurrentPage=!0;X=a.options.indent;if(1<a.currentPageNumber){var b=a.pageList[a.currentPageNumber-1];if(b&&0<b.length){a.applySorting(b);for(var d=0;d<b.length;d++)v(b[d],0,null,!1)}a.pageList[a.currentPageNumber-1]=a.currentPageList}a.onlyCurrentPage=!1};this.updatePageList=function(){a.pageList.length=0;a.pageRowCount=0;a.pageNumber=0;a.isThereChildRows=!1;X=a.options.indent;var b=a.rowsObj.getList();if(b&&0<b.length){a.applySorting(b);a.pageList.push([]);for(var d=
0;d<b.length;d++)v(b[d],0,null,!1);0<a.pageList.length&&0==a.pageList[a.pageList.length-1].length&&a.pageList.splice(a.pageList.length-1,1)}};this.columnEvents={clear:function(a){return angular.isDefined(c.events)&&c.events.clearColumns?c.events.clearColumns({parent:a.e.parent}):c.clearColumns(a)},objAdded:function(a){return angular.isDefined(c.events)&&c.events.columnAdded?c.events.columnAdded({column:a.e.column}):c.columnAdded(a)},objAdding:function(a){return angular.isDefined(c.events)&&c.events.rowAdding?
c.events.columnAdding({column:a.e.column}):c.columnAdding(a)},objRemoved:function(a){return angular.isDefined(c.events)&&c.events.rowRemoved?c.events.columnRemoved({column:a.e.column}):c.columnRemoved(a)},objRemoving:function(a){return angular.isDefined(c.events)&&c.events.rowRemoving?c.events.columnRemoving({column:a.e.column}):c.columnRemoving(a)}};this.rowEvents={clear:function(a){return angular.isDefined(c.events)&&c.events.clearRows?c.events.clearRows({parent:a.e.parent}):c.clearRows(a)},objAdded:function(a){return angular.isDefined(c.events)&&
c.events.rowAdded?c.events.rowAdded({row:a.e.row}):c.rowAdded(a)},objAdding:function(a){return angular.isDefined(c.events)&&c.events.rowAdding?c.events.rowAdding({row:a.e.row}):c.rowAdding(a)},objRemoved:function(a){return angular.isDefined(c.events)&&c.events.rowRemoved?c.events.rowRemoved({row:a.e.row}):c.rowRemoved(a)},objRemoving:function(a){return angular.isDefined(c.events)&&c.events.rowRemoving?c.events.rowRemoving({row:a.e.row}):c.rowRemoving(a)}};this.getRowFields=function(a){return{content:a.content?
a.content:"content",icon:a.icon?a.icon:"icon",id:a.id?a.id:"id",pid:a.pid?a.pid:"pid",objects:a.rows?a.rows:"rows",subobjects:a.cells?a.cells:"cells",text:a.text?a.text:"text"}};a.columnsObj=new ba({objects:c.columns,events:a.columnEvents,fields:a.options.columnFields});a.rowsObj=new ba({objects:c.rows,events:a.rowEvents,fields:a.getRowFields(a.options.rowFields)});c.$on(c.name+"-load-data",function(b,d,c,h,u){a.loadData(d,c,h,u)});c.$on(c.name+"-export-json",function(b,d,c,h,u){k.setTempData(a.exportToJSON(d,
c,h,u))});this.exportToJSON=function(b,d,c,h){var u=h,u=u?u:null,e=a.columnsObj.getList();b=JSON.stringify(e,b?b:[a.options.columnFields.allowDrag,a.options.columnFields.allowDrop,a.options.columnFields.allowFilter,a.options.columnFields.cellTemplateUrl,a.options.columnFields.contentAlignment,a.options.columnFields.contextMenu,a.options.columnFields.editorType,a.options.columnFields.editorSettings,a.options.columnFields.editorTemplate,a.options.columnFields.filterParams,a.options.columnFields.filterTemplate,
a.options.columnFields.fixed,a.options.columnFields.fixedWidth,a.options.columnFields.footerAlignment,a.options.columnFields.footerContent,a.options.columnFields.footerTemplate,a.options.columnFields.footerTooltip,a.options.columnFields.footerText,a.options.columnFields.headerAlignment,a.options.columnFields.headerContent,a.options.columnFields.headerTemplate,a.options.columnFields.headerText,a.options.columnFields.headerTooltip,a.options.columnFields.icon,a.options.columnFields.id,a.options.columnFields.style,
a.options.columnFields.templateSettings,a.options.columnFields.visible,a.options.columnFields.width],u);h=h?h:null;u=!1!==c?a.getFullList():a.rowsObj.getList();d=d?d:[a.options.rowFields.allowCellFocus,a.options.rowFields.allowDrag,a.options.rowFields.allowDrop,a.options.rowFields.allowFocus,a.options.rowFields.cells,a.options.rowFields.content,a.options.rowFields.contextMenu,a.options.rowFields.enabled,a.options.rowFields.expanded,a.options.rowFields.hasChildren,a.options.rowFields.icon,a.options.rowFields.id,
a.options.rowFields.pid,a.options.rowFields.statusIcon,a.options.rowFields.style,a.options.rowFields.text,a.options.rowFields.tooltip,a.options.cellFields.rid];0==c&&d.push(a.options.rowFields.rows);c=JSON.stringify(u,d,h);return'[\n{ "columns": '+b+' },\n{ "rows": '+c+" }\n]"};this.loadData=function(b,d,G,h){a.suspendLayout();a.updateDataFields(G);var u=[],e=a.options.rowFields;a.rowsObj.clear(d,a.rowsAreCleared);if(b)if(!1!==h){var f=[];b.forEach(function(a,b){var d=a[e.pid];f[d]?(f[d][e.rows]||
(f[d][e.rows]=[]),f[a[e.id]]=a,f[d][e.rows].push(a)):(f[a[e.id]]=a,u.push(a))});f.length=0}else u=b;if(d)for(d[a.options.rowFields.rows]=u,b=0;b<d[a.options.rowFields.rows].length;b++)d[a.options.rowFields.rows][b][a.options.rowFields.pid]=d[a.options.rowFields.id];else if(angular.isDefined(c.rows))for(b=c.rows.length=0;b<u.length;b++)c.rows.push(u[b]);a.rowsObj=new ba({objects:c.rows,events:a.rowEvents,fields:a.getRowFields(a.options.rowFields)});a.resumeLayout()};this.updateData=function(){a.options.rowFields.dataSource&&
(a.loadData(a.options.rowFields.dataSource),a.rowsObj=new ba({objects:c.rows,events:a.rowEvents,fields:a.getRowFields(a.options.rowFields)}))};var xa=!1;this.dragDropStatus=function(a){if(void 0!=a)xa=a;else return xa};this.getDnDSource=function(a){return{text:a.dataTransfer?a.dataTransfer.getData("text"):a.originalEvent.dataTransfer?a.originalEvent.dataTransfer.getData("text"):""}};this.getTouchData=function(a){return a.changedTouches?a.changedTouches:a.originalEvent?a.originalEvent.changedTouches:
null};var Ga=angular.element('<div class="iui-drop-marker" data-element="dropmark"></div>');this.getDropMarkLine=function(){return dropMarkLine};a.getMousePos=function(a){return{x:a.pageX?a.pageX:a.originalEvent?a.originalEvent.pageX:0,y:a.pageY?a.pageY:a.originalEvent?a.originalEvent.pageY:0}};this.getCtrlName=function(){return angular.isDefined(c.name)?c.name:""};e.bind("dragenter",function(b){b.preventDefault();if(a.options.enabled){var d=n.getData();d.source||(d.source=a.getDnDSource(b));b={event:b,
sourceTree:d.sourceCtrl?d.sourceCtrl.getCtrlName():"",dragRow:d.source,targetTree:a.getCtrlName(),targetRow:d.target,mousePos:a.getMousePos(b)};a.callDragEnter(b)}});e.bind("dragover",function(b){b.preventDefault();if(a.options.enabled&&a.isDropInRange(b)){var d=!0;b.dataTransfer?d="none"===b.dataTransfer.effectAllowed?!1:!0:b.originalEvent&&b.originalEvent.dataTransfer&&(d="none"===b.originalEvent.dataTransfer.effectAllowed?!1:!0);if(d)if(b.dataTransfer?b.dataTransfer.dropEffect=a.options.allowDrop?
"move":"none":b.originalEvent&&b.originalEvent.dataTransfer&&(b.originalEvent.dataTransfer.dropEffect=a.options.allowDrop?"move":"none"),d=n.getData(),d.source||(d.source=a.getDnDSource(b)),n.setData({source:d.source,sourceCtrl:d.sourceCtrl,target:null,dropPos:-1}),d={event:b,sourceTree:d.sourceCtrl?d.sourceCtrl.getCtrlName():"",dragRow:d.source,targetTree:a.getCtrlName(),targetRow:null,isDropAllowed:a.options.allowDrop,dropPos:-1,mousePos:a.getMousePos(b)},0==a.callDragOver(d))b.dataTransfer?b.dataTransfer.dropEffect=
"none":b.originalEvent&&b.originalEvent.dataTransfer&&(b.originalEvent.dataTransfer.dropEffect="none"),a.dropMark();else{d=a.getMousePos(b);b=d.y+16;var d=d.x+20,G=a.getDropMarkWindow();G.empty();G.append("<span class='iui-drop-marker-move-end'></span><span class='iui-drop-marker-title'>"+(c.name?c.name:"TreeGrid")+"</span>");a.updateDropMarkElem(a.getDropMarkWindow(),{top:b,left:d});a.dropMark(!0)}}else a.dropMark(),b.dataTransfer?b.dataTransfer.dropEffect="none":b.originalEvent&&b.originalEvent.dataTransfer&&
(b.originalEvent.dataTransfer.dropEffect="none")});e.bind("drop",function(b){b.preventDefault();if(a.options.enabled){a.dropMark();if(a.isDropInRange(b)){var d=!0;b.dataTransfer?d="none"===b.dataTransfer.effectAllowed?!1:!0:b.originalEvent&&b.originalEvent.dataTransfer&&(d="none"===b.originalEvent.dataTransfer.effectAllowed?!1:!0);if(d&&(d=n.getData(),d.source||(d.source=a.getDnDSource(b)),d.source)){var G={event:b,sourceTree:d.sourceCtrl?d.sourceCtrl.getCtrlName():"",dragRow:d.source,targetTree:a.getCtrlName(),
targetRow:null,isDropAllowed:a.options.allowDrop,dropPos:-1,mousePos:a.getMousePos(b)};!1!==a.callDragDrop(G)&&(a.drop(d),c.$$phase||c.$apply())}}n.clearData()}b.stopPropagation()});e.bind("dragleave",function(b){b.preventDefault();if(a.options.enabled){a.dropMark();var d=n.getData();d.source||(d.source=a.getDnDSource(b));b={event:b,sourceTree:d.sourceCtrl?d.sourceCtrl.getCtrlName():"",dragRow:d.source,targetTree:a.getCtrlName(),targetRow:d.target,mousePos:a.getMousePos(b)};a.callDragLeave(b)}a.cancelScrollTimer()});
e.bind("dragend",function(b){b.preventDefault();a.options.enabled&&(a.dropMark(),n.getData().source||n.clearData(),a.dragDropStatus(!1))});e.bind("mouseleave",function(b){b.preventDefault();a.options.enabled&&(a.dropMark(),a.hoverColumn=null,a.hoverRow=null,a.hoverCell=null)});this.containsMousePos=function(a,d){return n.hitTest(a,d,{left:0,top:0,right:e[0].clientWidth,bottom:e[0].clientHeight})};this.isPopupActive=function(){return!1};var ya=function(b,d){var c=a.options.rowFields;if(!b[c.cells]){b[c.cells]=
[];var h={};h[a.options.cellFields.text]=b[d.text];b[c.cells].push(h)}b[c.rows]||(b[c.rows]=[]);b[c.rows].length=0;if(b[d.items]&&0<b[d.items].length)for(h=0;h<b[d.items].length;h++)b[c.rows].push(ya(b[d.items][h],d));return b},za=function(b,d){var c=!1;d.sourceCtrl&&(c=d.sourceCollection.removeAt(b,-1,null,d.sourceCtrl.objIsRemoved));c&&("item"==b.type&&(b=ya(b,d.sourceCtrl.options.dataFields)),0===d.dropPos?a.rowsObj.insertAt(b,-1,d.target,a.rowIsAdded):1===d.dropPos||2===d.dropPos?1===d.dropPos?
a.rowsObj.insertByRef(b,d.target,!1,a.rowIsAdded):a.rowsObj.insertByRef(b,d.target,!0,a.rowIsAdded):a.rowsObj.insertAt(b,-1,null,a.rowIsAdded))};this.setDropSelection=function(b,d){var c=b;!c&&0<=d&&d<a.currentList.length&&(c=a.currentList[d]);a.clearPrevSelection(c);a.rowSelection(c)};this.drop=function(b){if(b&&b.sourceCtrl){b.sourceCtrl.suppressProcess=!0;a.allowUpdate=!1;b.sourceCtrl.allowUpdate=!1;var d=b.source,c=-1;if(Array.isArray(b.source)){0<b.source.length&&(c=b.sourceCtrl.getObjCurrentIndex(b.source[b.source.length-
1]));for(var h=[],e=0;e<b.source.length;e++){for(var g=!1,m=b.sourceCollection.getParent(b.source[e]);m;){if(b.sourceCtrl.isObjInSelList(m)){g=!0;break}m=b.sourceCollection.getParent(m)}g||h.push(b.source[e])}if(0<h.length)if(d=h[h.length-1],e=b.sourceCtrl.getObjCurrentIndex(h[0]),g=b.sourceCtrl.getObjCurrentIndex(d),e<=g)for(e=0;e<h.length;e++)za(h[e],b);else for(e=h.length-1;0<=e;e--)za(h[e],b)}else c=b.sourceCtrl.getObjCurrentIndex(b.source),za(b.source,b);b.sourceCtrl!==a?(a.allowUpdate=!0,b.sourceCtrl.allowUpdate=
!0,a.updateCurrentLayout(),b.sourceCtrl.updateCurrentLayout()):(a.allowUpdate=!0,a.updateCurrentLayout());b.sourceCtrl.multiSelection(!1);var k=f(function(){b.sourceCtrl!==a&&b.sourceCtrl.setDropSelection(null,c);a.setDropSelection(d);a.updateFocus(a.getObjCurrentIndex(d),0);f.cancel(k)},1);b.sourceCtrl.suppressProcess=!1}};this.isDragAllowed=function(b){return a.options.allowDrag?b&&(b[a.options.rowFields.allowDrag]||void 0===b[a.options.rowFields.allowDrag])?!0:!1:!1};this.isChildOf=function(b,
d){var c=!1;if(b&&d){var h=d[a.options.rowFields.rows];if(h&&0<h.length)for(var e=0;e<h.length;e++){if(m.isEqual(b[a.options.rowFields.id],h[e][a.options.rowFields.id])){c=!0;break}else c=a.isChildOf(b,h[e]);if(c)break}}return c};this.isParentOf=function(b,d){var c=a.rowsObj.getParent(d);return b&&d&&c&&m.isEqual(b[a.options.rowFields.id],c[a.options.rowFields.id])?!0:!1};this.isDropAllowed=function(b,d,c){var h=a.options.allowDrop;if(h&&b&&d&&(h=d[a.options.rowFields.allowDrop]||void 0===d[a.options.rowFields.allowDrop]?
!0:!1))if(Array.isArray(b))for(var e=0;e<b.length;e++){if(m.isEqual(b[e][a.options.rowFields.id],d[a.options.rowFields.id])||0===c&&a.isParentOf(d,b[e])||a.isChildOf(d,b[e])){h=!1;break}if(!h)break}else if(m.isEqual(b[a.options.rowFields.id],d[a.options.rowFields.id])||0===c&&a.isParentOf(d,b)||a.isChildOf(d,b))h=!1;return h};this.getDropMarkWindow=function(){for(var a=Ga,d=angular.element(document.body).children(),c=0;c<d.length;c++){var h=angular.element(d[c]);if(h[0].attributes&&h[0].attributes["data-element"]&&
"dropmark"===h[0].attributes["data-element"].value){a=h;break}}return a};this.dropMark=function(b,d){d||(d=a.getDropMarkWindow());if(d){var c="none";this.options.allowDrop&&(c=b?"block":"none");angular.element(d).css("display",c)}};this.updateDropMarkElem=function(a,d){a&&d&&(a.css("top",d.top+"px"),a.css("left",d.left+"px"),a.css("width",d.width+"px"))};c.$on(c.name+"-open-editor",function(b,d){a.openEditor(d)});c.$on(c.name+"-close-editor",function(b,d){a.closeEditor(d)});this.updateEditorSettings=
function(b){a.options.editorSettings=b?{activate:m.isFieldAvailable(b.activate,"click")}:{activate:"click"}};this.allowEvents=!0;this.callAfterCollapse=function(a){angular.isDefined(c.events)&&c.events.afterCollapse&&c.events.afterCollapse({row:a});c.afterCollapse({e:{row:a}})};this.callAfterExpand=function(a){angular.isDefined(c.events)&&c.events.afterExpand&&c.events.afterExpand({row:a});c.afterExpand({e:{row:a}})};this.callAfterEdit=function(a){angular.isDefined(c.events)&&c.events.afterEdit&&
c.events.afterEdit({cell:a});c.afterEdit({e:{cell:a}})};this.callAfterLabelEdit=function(a){angular.isDefined(c.events)&&c.events.afterLabelEdit&&c.events.afterLabelEdit({cell:a});c.afterLabelEdit({e:{cell:a}})};this.callAfterSelect=function(a){angular.isDefined(c.events)&&c.events.afterSelect?c.events.afterSelect({object:a}):c.afterSelect({e:{object:a}});angular.isDefined(c.events)&&c.events.selectionChanged?c.events.selectionChanged({object:a}):c.selectionChanged({e:{object:a}})};this.callBeforeCollapse=
function(a){return angular.isDefined(c.events)&&c.events.beforeCollapse?c.events.beforeCollapse({row:a}):c.beforeCollapse({e:{row:a}})};this.callBeforeExpand=function(a){return angular.isDefined(c.events)&&c.events.beforeExpand?c.events.beforeExpand({row:a}):c.beforeExpand({e:{row:a}})};this.callBeforeEdit=function(a){return angular.isDefined(c.events)&&c.events.beforeEdit?c.events.beforeEdit({cell:a}):c.beforeEdit({e:{cell:a}})};this.callBeforeLabelEdit=function(a){return angular.isDefined(c.events)&&
c.events.beforeLabelEdit?c.events.beforeLabelEdit({cell:a}):c.beforeLabelEdit({e:{cell:a}})};this.callCellValueChanging=function(b,d,G){var h=!0;a.allowEvents&&(h=angular.isDefined(c.events)&&c.events.cellvalueChanging?c.events.cellvalueChanging({row:b,cell:d,value:G}):c.cellvalueChanging({e:{row:b,cell:d,value:G}}));return h};this.callCellValueChanged=function(b,d,G){a.allowEvents&&(angular.isDefined(c.events)&&c.events.cellvalueChanged?c.events.cellvalueChanged({row:b,cell:d,value:G}):c.cellvalueChanged({e:{row:b,
cell:d,value:G}}))};this.callChange=function(){angular.isDefined(c.events)&&c.events.change?c.events.change():c.change()};this.callColumnClick=function(a,d){angular.isDefined(c.events)&&c.events.columnClick&&c.events.columnClick({column:a,mousePos:d});c.columnClick({e:{column:a,mousePos:d}})};this.callColumnDblClick=function(a,d){angular.isDefined(c.events)&&c.events.columnDblclick&&c.events.columnDblclick({column:a,mousePos:d});c.columnDblclick({e:{column:a,mousePos:d}})};this.callColumnHover=function(a){angular.isDefined(c.events)&&
c.events.columnHover&&c.events.columnHover({column:a});c.columnHover({e:{column:a}})};this.callColumnPosChanging=function(a,d){return angular.isDefined(c.events)&&c.events.columnPoschanging?c.events.columnPoschanging({sourceColumn:a,targetColumn:d}):c.columnPoschanging({e:{sourceColumn:a,targetColumn:d}})};this.callColumnPosChanged=function(a,d){angular.isDefined(c.events)&&c.events.columnPoschanged&&c.events.columnPoschanged({sourceColumn:a,targetColumn:d});c.columnPoschanged({e:{sourceColumn:a,
targetColumn:d}})};this.callColumnRightClick=function(a,d){angular.isDefined(c.events)&&c.events.columnRightclick&&c.events.columnRightclick({column:a,mousePos:d});c.columnRightclick({e:{column:a,mousePos:d}})};this.callColumnSizeChanged=function(a,d){angular.isDefined(c.events)&&c.events.columnSizechanged&&c.events.columnSizechanged({column:a});c.columnSizechanged({e:{column:a}})};this.callDragEnter=function(a){angular.isDefined(c.events)&&c.events.dragEnter?c.events.dragEnter({event:a.event,sourceTree:a.sourceTree,
dragRow:a.dragRow,targetTree:a.targetTree,targetRow:a.targetRow,mousePos:a.mousePos}):c.dragEnter({e:{event:a.event,sourceTree:a.sourceTree,dragRow:a.dragRow,targetTree:a.targetTree,targetRow:a.targetRow,mousePos:a.mousePos}})};this.callDragOver=function(b){var d=a.getCellAt(b.mousePos.x,b.mousePos.y);return angular.isDefined(c.events)&&c.events.dragOver?c.events.dragOver({event:b.event,sourceTree:b.sourceTree,dragRow:b.dragRow,targetTree:b.targetTree,targetRow:b.targetRow,targetCell:d,isDropAllowed:b.isDropAllowed,
dropPos:b.dropPos,mousePos:b.mousePos}):c.dragOver({e:{event:b.event,sourceTree:b.sourceTree,dragRow:b.dragRow,targetTree:b.targetTree,targetRow:b.targetRow,targetCell:d,isDropAllowed:b.isDropAllowed,dropPos:b.dropPos,mousePos:b.mousePos}})};this.callDragDrop=function(b){var d=a.getCellAt(b.mousePos.x,b.mousePos.y);return angular.isDefined(c.events)&&c.events.dragDrop?c.events.dragDrop({event:b.event,sourceTree:b.sourceTree,dragRow:b.dragRow,targetTree:b.targetTree,targetRow:b.targetRow,targetCell:d,
isDropAllowed:b.isDropAllowed,dropPos:b.dropPos,mousePos:b.mousePos}):c.dragDrop({e:{event:b.event,sourceTree:b.sourceTree,dragRow:b.dragRow,targetTree:b.targetTree,targetRow:b.targetRow,targetCell:d,isDropAllowed:b.isDropAllowed,dropPos:b.dropPos,mousePos:b.mousePos}})};this.callDragLeave=function(a){angular.isDefined(c.events)&&c.events.dragLeave?c.events.dragLeave({event:a.event,sourceTree:a.sourceTree,dragRow:a.dragRow,targetTree:a.targetTree,targetRow:a.targetRow,mousePos:a.mousePos}):c.dragLeave({e:{event:a.event,
sourceTree:a.sourceTree,dragRow:a.dragRow,targetTree:a.targetTree,targetRow:a.targetRow,mousePos:a.mousePos}})};this.callCellClick=function(a,d,G,h){angular.isDefined(c.events)&&c.events.cellClick&&c.events.cellClick({event:a,row:d,cell:G,mousePos:h});c.cellClick({e:{event:a,row:d,cell:G,mousePos:h}})};this.callCellHover=function(a,d){angular.isDefined(c.events)&&c.events.cellHover?c.events.cellHover({event:a,cell:d}):c.cellHover({e:{event:a,cell:d}})};this.callEnabledChanged=function(a){angular.isDefined(c.events)&&
c.events.enabledChanged?c.events.enabledChanged({enabled:a}):c.enabledChanged({e:{enabled:a}})};this.callRowClick=function(a,d,G){angular.isDefined(c.events)&&c.events.rowClick?c.events.rowClick({event:a,row:d,mousePos:G}):c.rowClick({e:{event:a,row:d,mousePos:G}})};this.callRowDblClick=function(a,d){return angular.isDefined(c.events)&&c.events.rowDblClick?c.events.rowDblClick({row:a,mousePos:d}):c.rowDblclick({e:{row:a,mousePos:d}})};this.callRowHover=function(a,d){angular.isDefined(c.events)&&c.events.rowHover?
c.events.rowHover({event:a,row:d}):c.rowHover({e:{event:a,row:d}})};this.callRowRightClick=function(a,d){angular.isDefined(c.events)&&c.events.rowRightClick&&c.events.rowRightClick({row:a,mousePos:d});c.rowRightclick({e:{row:a,mousePos:d}})};this.callKeyDown=function(a,d){angular.isDefined(c.events)&&c.events.keyDown?c.events.keyDown({event:a,row:d}):c.keyDown({e:{event:a,row:d}})};this.callKeyPress=function(a,d){angular.isDefined(c.events)&&c.events.keyPress?c.events.keyPress({event:a,row:d}):c.keyPress({e:{event:a,
row:d}})};this.callKeyUp=function(a,d){angular.isDefined(c.events)&&c.events.keyUp?c.events.keyUp({event:a,row:d}):c.keyUp({e:{event:a,row:d}})};this.callScrollPosChanged=function(){angular.isDefined(c.events)&&c.events.scrollPosChanged?c.events.scrollPosChanged({scrollPos:a.scrollPos}):c.scrollposChanged({e:{scrollPos:a.scrollPos}})};e.bind("click",function(b){a.options.enabled&&1===b.which&&a.callRowClick(b,null,a.getMousePos(b))});e.bind("dblclick",function(b){b.preventDefault();a.options.enabled&&
1===b.which&&a.callRowDblClick(null,a.getMousePos(b));b.stopPropagation()});e.bind("mousedown",function(b){a.options.enabled&&3===b.which&&a.callRowRightClick(null,a.getMousePos(b));a.removeDropDownList();a.closeFilterWindow();a.closeEditor();b.stopPropagation()});this.expandList=[];this.expandIndentList=[];var qb=function(b,d,c){b.type="row";b[a.options.rowFields.id]||(b[a.options.rowFields.id]=m.getUniqueId());c&&(b[a.options.rowFields.pid]=c);c=!0;var h=b[a.options.rowFields.cells];if(h&&0<h.length){c=
A(b);for(var e,f,g,k=0;k<a.columnList.length;k++){g=a.columnList[k];e=g[a.options.columnFields.id];f=g[a.options.columnFields.editorType];g=g[a.options.columnFields.editorSettings];var n=k;e&&(n=a.getCellIndexById(h,k,e));0<=n&&n<h.length&&(h[n].type="cell",a.setDefaultCellValue(h[n],f,g))}}c&&(a.expandList.push(b),a.expandIndentList.push(d));return c},B=function(b,d,c){if(!b[a.options.rowFields.rows])return c=qb(b,d+X,c);if(c=qb(b,d+X,c)){var h=0,e;if(a.isRowExpanded(b)){var f=b[a.options.rowFields.rows];
if(f){a.applySorting(f);for(var g=0;g<f.length;g++)(e=B(f[g],d+X,b[a.options.rowFields.id]))&&h++}}!a.isThereChildRows&&(0<h||!a.isRowExpanded(b)&&b[a.options.rowFields.rows]&&0<b[a.options.rowFields.rows].length&&a.isThereVisibleChildren(b))&&(a.isThereChildRows=!0)}return c};this.expand=function(b){a.expandList.length=[];a.expandIndentList.length=[];if(!a.isRowExpanded(b)){var d=a.getRowCurrentIndex(b);if(b=a.getList(b)){a.applySorting(b);for(var c=0;c<b.length;c++)B(b[c],a.indentList[d],null)}if(0<
a.expandList.length){a.allowEvents=!1;d++;Array.prototype.splice.apply(a.currentList,[d,0].concat(a.expandList));Array.prototype.splice.apply(a.indentList,[d,0].concat(a.expandIndentList));a.getRowScope()?a.updateView():a.updateLayout();var h=f(function(){a.updateViewSize();a.updateViewSize();a.updateScrollVisibility();a.updateScrollView();f.cancel(h);a.allowEvents=!0},1)}}};this.collapse=function(b){a.expandList.length=[];a.expandIndentList.length=[];if(a.isRowExpanded(b)){var d=null,c=!1,h=b,e=
-1,g=a.getRowCurrentIndex(b);for(b=a.getParent(b);b&&!c;){d=a.getList(b);for(e=d.indexOf(h)+1;!c&&e<d.length;)h=d[e],0<a.getRowCurrentIndex(h)&&(c=!0),e++;c||(h=b);b=a.getParent(b)}if(!c&&h)for(d=a.getList(),e=d.indexOf(h)+1;e<d.length;)if(h=d[e],0<a.getRowCurrentIndex(h)){c=!0;break}else e++;g++;d=a.currentList.length-g;c&&(d=a.getRowCurrentIndex(h)-g);if(0<d){a.currentList.splice(g,d);a.indentList.splice(g,d);a.getRowScope()?a.updateView():a.updateLayout();var m=f(function(){a.updateViewSize();
a.updateViewSize();a.updateScrollVisibility();a.updateScrollView();f.cancel(m);a.allowEvents=!0},1)}}};this.toggle=function(b,d){if(b){if(b[a.options.rowFields.hasChildren]||b[a.options.rowFields.rows]&&0!=b[a.options.rowFields.rows].length)if(!d||0==b[a.options.rowFields.expanded])if(!1!==d||0!=b[a.options.rowFields.expanded]){a.updateType="view";var c=void 0!==d?d:!1!==b[a.options.rowFields.expanded]?!0:!1;!1!==(void 0!==d?d?a.callBeforeExpand(b):a.callBeforeCollapse(b):c?a.callBeforeCollapse(b):
a.callBeforeExpand(b))&&(c=void 0!=d?d:!c,c!=b[a.options.rowFields.expanded]&&(0!=c?a.expand(b):a.collapse(b),b[a.options.rowFields.expanded]=c),a.isRowExpanded(b)?a.callAfterExpand(b):a.callAfterCollapse(b))}}else{for(var c=a.getFullList(),h=0;h<c.length;h++)c[h][a.options.rowFields.expanded]=d;a.updateCurrentLayout()}};c.$on(c.name+"-collapse",function(b,d){a.toggle(d,!1)});c.$on(c.name+"-expand",function(b,d){a.toggle(d,!0)});c.$on(c.name+"-expand-col-index",function(b,d){0<=d&&d<a.columnList.length&&
(a.options.expandColIndex=d)});c.$on(c.name+"-toggle",function(b,d){a.toggle(d)});this.isFilteringAllowed=function(b){return b&&b[a.options.columnFields.allowFilter]};c.$on(c.name+"-filter",function(b,d,c){a.filter(d,c)});this.filter=function(b,d){if(b)b[a.options.columnFields.filterParams]=d;else for(var c=0;c<a.columnList.length;c++)a.columnList[c][a.options.columnFields.filterParams]=null;a.closeFilterWindow();a.updateCurrentLayout();a.callChange()};this.callGotFocus=function(a,d,e,h,f){angular.isDefined(c.events)&&
c.events.gotFocus?c.events.gotFocus({event:a,row:d,cell:e,edit:void 0!=h?!0:!1,editValue:f}):c.gotFocus({e:{event:a,row:d,cell:e,edit:void 0!=h?!0:!1,editValue:f}})};this.callLostFocus=function(a,d,e,h,f){angular.isDefined(c.events)&&c.events.lostFocus?c.events.lostFocus({event:a,row:d,cell:e,edit:void 0!=h?!0:!1,editValue:f}):c.lostFocus({e:{event:a,row:d,cell:e,edit:void 0!=h?!0:!1,editValue:f}})};this.getTabIndex=function(){return e[0].attributes&&e[0].attributes.tabindex?e[0].attributes.tabindex.value:
""};this.updateFocus=function(b,d){if(1==a.options.allowFocus)var c=f(function(){if(a.isRowIndexInRange(b)){var h="none";0<=d&&d<a.columnList.length&&(h=a.columnList[d][a.options.columnFields.fixed]);var g=a.getElemFromRow(a.currentList[b],h);g&&(1==a.options.allowCellFocus&&0<=d&&d<a.columnList.length?(h=a.getElemFromCell(b,d,h))&&h[0].focus():g[0].focus())}else e[0].focus();f.cancel(c)},5)};c.$on(c.name+"-focus",function(b,d){if(d){var c,h;switch(d.type){case "row":c=a.getRowCurrentIndex(d);a.updateFocus(c);
break;case "cell":c=a.getCellRowIndex(d),h=a.getCellColumnIndex(d),a.updateFocus(c,h)}}else a.updateFocus()});var Xa=!1;this.getCell=function(b,d){if(0<=b&&b<a.currentList.length){var c=a.currentList[b],h=a.getColumnRealIndex(d);0<=d&&d<a.columnList.length&&(h=a.getCellIndexById(c[a.options.rowFields.cells],d,a.columnList[d].id));if(c[a.options.rowFields.cells]&&0<=h&&h<c[a.options.rowFields.cells].length)return c[a.options.rowFields.cells][h]}return null};this.getCellObject=function(b,d){if(0<=b&&
b<a.currentList.length){var c=a.currentList[b],h=a.getColumnRealIndex(d);0<=d&&d<a.columnList.length&&(h=a.getCellIndexById(c[a.options.rowFields.cells],d,a.columnList[d].id));if(c[a.options.rowFields.cells]&&0<=h&&h<c[a.options.rowFields.cells].length)return c[a.options.rowFields.cells][h]}return null};this.getCellIndexById=function(b,d,c){var h=-1;if(b){d=a.getColumnRealIndex(d);for(var e=0;e<b.length;e++)if(void 0==b[e][a.options.cellFields.cid]){h=d;break}else if(b[e][a.options.cellFields.cid]==
c){h=e;break}}return h};this.getCellIndexFromRow=function(b,d){var c=-1;if(b&&d&&d[a.options.rowFields.cells])for(var e=0;e<d[a.options.rowFields.cells].length;e++)if(d[a.options.rowFields.cells][e]==b){c=e;break}return c};this.getCellColumnIndex=function(b){if(b)if(b[a.options.cellFields.cid]){if(b=a.getColumnById(b[a.options.cellFields.cid]))return a.getColumnCurrentIndex(b)}else return a.getCellColumnIndexFromRow(b);return-1};this.getCellColumnIndexFromRow=function(b){if(b&&b[a.options.cellFields.rid]){var d=
a.findRowById(b[a.options.cellFields.rid]);if(d&&(d=d[a.options.rowFields.cells])&&0<d.length)return d.indexOf(b)}return-1};this.getCellRowIndex=function(b){return b&&b[a.options.cellFields.rid]&&(b=a.findRowById(b[a.options.cellFields.rid]))?a.getRowCurrentIndex(b):-1};this.getColumnById=function(b){for(var d=null,c=0;c<a.columnList.length;c++)if(a.columnList[c][a.options.columnFields.id]==b){d=a.columnList[c];break}return d};this.getColumnObject=function(b){return 0<=b&&b<a.columnList.length?a.columnList[b]:
null};this.getRowObject=function(b){return 0<=b&&b<a.currentList.length?a.currentList[b]:null};this.isRowExpanded=function(b){return b?b[a.options.rowFields.expanded]||void 0===b[a.options.rowFields.expanded]?!0:!1:!0};this.getContentElement=function(a,c){var e=null;c||(c="cell-content");if(a&&0<a.children().length)for(var h=a.children(),f=0;f<h.length;f++){var g=angular.element(h.eq(f));if(g[0].attributes&&g[0].attributes["data-element"]&&g[0].attributes["data-element"].value==c){e=g;break}}return e};
this.getElement=function(a,c){var e=null;c||(c="cell-content");if(a&&0<a.children().length){a=a.children().eq(0);for(var h=a.children(),f=0;f<h.length;f++){var g=angular.element(h.eq(f));if(g[0].attributes&&g[0].attributes["data-element"]&&g[0].attributes["data-element"].value==c){e=g;break}}}return e};this.getChildElement=function(a,c){var e=null;c||(c="content");if(a&&0<a.children().length)for(var h=a.children(),f=0;f<h.length;f++){var g=angular.element(h.eq(f));if(g[0].attributes&&g[0].attributes["data-element"]&&
g[0].attributes["data-element"].value==c){e=g;break}}return e};this.getElemFromColumn=function(b,c,e){var h=null;if(b){b=a.getColumnCurrentIndex(b);var f=a.getHeaderElem(c);"footer"==e&&(f=a.getFooterElem(c));if(f&&(c=f.find("td"))&&0<c.length)for(e=0;e<c.length;e++)if(f=angular.element(c[e]),f[0].attributes["data-index"]&&f[0].attributes["data-index"].value.toString()===b.toString()){h=f;break}}return h};this.getElemFromRow=function(b,c){var e=null;if(b){var h=a.getRowCurrentIndex(b),f=a.getRowElems(c);
if(f&&0<f.length)for(var g=0;g<f.length;g++){var m=angular.element(f[g]);if(m[0].attributes["data-index"]&&m[0].attributes["data-index"].value.toString()===h.toString()){e=m;break}}}return e};this.getElemFromCell=function(b,c,e){var h=null;if(0<=b&&b<a.currentList.length&&(b=a.getElemFromRow(a.currentList[b],e))&&(b=b.find("td"))&&0<b.length)for(e=0;e<b.length;e++){var f=angular.element(b[e]);if(f[0].attributes["data-index"]&&f[0].attributes["data-index"].value.toString()===c.toString()){h=f;break}}return h};
this.getElemFromColumnCell=function(b,c,e){var h=null;if((c=e?a.getFooterElem(c):a.getHeaderElem(c))&&(c=c.find("td"))&&0<c.length)for(e=0;e<c.length;e++){var f=angular.element(c[e]);if(f[0].attributes["data-index"]&&f[0].attributes["data-index"].value.toString()===b.toString()){h=f;break}}return h};this.getIndent=function(b){var c=0;if(b)for(parent=a.rowsObj.getParent(b);parent;)c+=a.options.indent,parent=a.rowsObj.getParent(parent);return c};this.getObjState=function(b){if(b)switch(b.type){case "column":if(0==
a.options.enabled)return"disabled";if(1==b.selected)return"selected";if(b==a.hoverColumn)return"hovered";break;case "row":if(0==a.options.enabled||0==b[a.options.rowFields.enabled])return"disabled";if(1==b.selected)return"selected";if(b==a.hoverRow)return"hovered";break;case "cell":if(0==a.options.enabled||0==b[a.options.cellFields.enabled])return"disabled";if(1==b.selected)return"selected";if(b==a.hoverCell)return"hovered"}return"normal"};this.getColumnAt=function(b,c){if(void 0==b||void 0==c)return a.hoverColumn;
var e,h,f=null;e="left";for(var g=0;!f&&3>g;){if(e=a.getHeaderElem(e)){var k=e.find("td");if(k&&0<k.length)for(var n=0;n<k.length;n++)if(e=angular.element(k[n]),h=m.getPageRect(e),m.checkHit(b,c,h)){f=a.getColumnFromElem(e);break}}g++;e=1==g?"right":"none"}return f};this.getCellAt=function(b,c){var e=null,h=a.getRowAt(b,c);if(h){var f,g,k=a.getElemFromRow(h).find("td");if(k&&0<k.length)for(var n=0;n<k.length&&!(f=angular.element(k[n]),g=m.getPageRect(f),m.checkHit(b,c,g)&&(e=a.getRowCurrentIndex(h),
f=a.getIndexFromElem(f),e=a.getCellObject(e,f)));n++);}return e};this.getRowAt=function(b,c){var e,f,g=null;e="none";for(var k=0;!g&&3>k;){var n=a.getRowElems(e);if(n&&0<n.length)for(var t=0;t<n.length;t++)if(e=angular.element(n[t]),f=m.getPageRect(e),m.checkHit(b,c,f)){g=a.getRowFromElem(e);break}k++;e=1==k?"left":"right"}return g};this.getRowCurrentIndex=function(b){return b&&a.currentList?a.currentList.indexOf(b):-1};this.getObjCurrentIndex=function(b){return a.getRowCurrentIndex(b)};this.getRowFromChildElem=
function(b){if(b&&(b=angular.element(b))){for(b=b.parent();b&&b[0].tagName&&"tr"!==b[0].tagName.toLowerCase();)b=b.parent();return b?a.getRowFromElem(b):null}return null};this.getColumnCurrentIndex=function(b){return b&&a.columnList?a.columnList.indexOf(b):-1};this.getFullColumnList=function(){return a.columnsObj.getList()};this.getColumnRealIndex=function(b){var c=a.getFullColumnList();return 0<=b&&b<c.length&&b<a.columnList.length?c.indexOf(a.columnList[b]):-1};this.getColumnFromChildElem=function(b){return b?
a.getColumnFromElem(b):null};this.getColumnFromElem=function(b){return b&&(b=angular.element(b))&&b[0].attributes["data-index"]&&(b=b[0].attributes["data-index"].value,0<=b&&b<a.columnList.length)?a.columnList[b]:null};this.getIndexFromElem=function(a){return a&&(a=angular.element(a))&&a[0].attributes["data-index"]?a[0].attributes["data-index"].value:-1};this.getRowFromElem=function(b){if(b&&(b=angular.element(b))&&b[0].attributes["data-index"]&&(b=b[0].attributes["data-index"].value,a.isRowIndexInRange(b)))return a.currentList[b]};
this.isRowIndexInRange=function(b){return 0<=b&&b<a.currentList.length};this.isColIndexInRange=function(b){return 0<=b&&b<a.columnList.length};this.isRowEnabled=function(b){return b&&1==a.options.enabled&&m.isEnabled(b[a.options.rowFields.enabled])};this.mouseButtonStatus=function(a){Xa=a};c.$on(c.name+"-ensure-visible",function(b,c){a.ensureVisible(c)});c.$on(c.name+"-find-row-by-id",function(b,c){k.setTempData(a.findRowById(c))});c.$on(c.name+"-find-row-by-path",function(b,c,e){k.setTempData(a.findRowByPath(c,
e))});c.$on(c.name+"-find-row-by-text",function(b,c){k.setTempData(a.findRowByText(c))});c.$on(c.name+"-get-full-path",function(b,c){k.setTempData(a.getFullPath(c))});c.$on(c.name+"-get-cell-at",function(b,c){c?k.setTempData(a.getCellAt(c.x,c.y)):k.setTempData(null)});c.$on(c.name+"-get-row-at",function(b,c){c?k.setTempData(a.getRowAt(c.x,c.y)):k.setTempData(null)});c.$on(c.name+"-get-row-level",function(b,c){k.setTempData(a.getLevel(c))});c.$on(c.name+"-get-row-parent",function(b,c){k.setTempData(a.getParent(c))});
c.$on(c.name+"-get-flat-list",function(b,c){c?k.setTempData(a.getFullList()):k.setTempData(a.currentList)});c.$on(c.name+"-get-list",function(b,c){k.setTempData(a.getList(c))});c.$on(c.name+"-get-top-row",function(b){k.setTempData(a.getTopRow())});c.$on(c.name+"-set-top-row",function(b,c){a.ensureVisible(c)});this.ensureVisible=function(b,c){if(b){for(var e=[],h=a.getParent(b);h;)e.push(h),h=a.getParent(h);for(h=e.length-1;0<=h;h--)e[h][a.options.rowFields.expanded]=!0;a.updateCurrentLayout();var g=
f(function(){c=void 0!=c?c:"center";a.scrollTo(b,c);f.cancel(g)},100)}};this.findRowById=function(b){return a.rowsObj.findObjectById(b)};this.findRowByText=function(b){return a.rowsObj.findObjectByText(b)};this.findRowByPath=function(b,c){var e=null;c||(c=a.getFullList());for(var f=0;f<c.length;f++)if(a.getFullPath(c[f])==b){e=c[f];break}return e};this.getFullPath=function(b){var c="";if(b)for(c=b[a.options.rowFields.text],b=a.getParent(b);b;)c=[b[a.options.rowFields.text],a.options.pathSeparator,
c].join(""),b=a.getParent(b);return c};this.getLevel=function(a){var c=0;for(a=this.getParent(a);a;)c++,a=this.getParent(a);return c};this.getParent=function(b){return a.rowsObj.getParent(b)};this.getList=function(b){return a.rowsObj.getList(b)};this.getFirstRow=function(){for(var b=null,c=0;c<a.currentList.length;c++)if(m.isEnabled(a.currentList[c][a.options.rowFields.enabled])){b=a.currentList[c];break}return b};this.getPrevRow=function(b){var c=null;if(0<=b&&b<a.currentList.length)for(--b;0<=b;b--)if(m.isEnabled(a.currentList[b][a.options.rowFields.enabled])){c=
a.currentList[b];break}return c};this.getNextRow=function(b){var c=null;for(b+=1;b<a.currentList.length;b++)if(m.isEnabled(a.currentList[b][a.options.rowFields.enabled])){c=a.currentList[b];break}return c};this.getLastRow=function(){for(var b=null,c=a.currentList.length-1;0<=c;c--)if(m.isEnabled(a.currentList[c][a.options.rowFields.enabled])){b=a.currentList[c];break}return b};this.updateSelectionStatus=function(b){switch(b){case "shift":switch(a.options.selectionMode){case "multi-simple":a.multiSelection(!0);
break;case "multi-extended":a.multiSelection(!0);break;default:a.multiSelection(!1)}break;case "ctrl":switch(a.options.selectionMode){case "multi-simple":a.multiSelection(!0);break;case "multi-extended":a.multiSelection(!0);break;default:a.multiSelection(!1)}}};e.bind("keydown",function(b){if(a.options.enabled)switch(b.keyCode){case 16:a.updateSelectionStatus("shift");break;case 17:a.updateSelectionStatus("ctrl");break;default:(b.ctrlKey||b.metaKey)&&a.updateSelectionStatus("ctrl"),b.shiftKey&&a.updateSelectionStatus("shift")}});
this.allowUpdate=!0;this.updateType="all";this.suspendLayout=function(b){a.allowUpdate=!1};this.resumeLayout=function(b){a.allowUpdate=!0;b?a.updateCurrentLayout():a.updateLayout()};c.$on(c.name+"-refresh",function(b,c,e){a.refresh(c,e)});c.$on(c.name+"-resume-layout",function(b,c){a.resumeLayout(c)});c.$on(c.name+"-suspend-layout",function(b,c){a.suspendLayout(c)});c.$on(c.name+"-update-layout",function(b,c){c?a.updateCurrentLayout():a.updateLayout()});c.$on(c.name+"-update-view",function(b){a.updateView()});
c.$on(c.name+"-begin-load",function(b,c,e){c?(0>a.options.loadRows.indexOf(c)&&a.options.loadRows.push(c),a.updateView()):a.beginLoad(e)});c.$on(c.name+"-end-load",function(b,c){a.endLoad(c)});this.callLoadComplete=function(a){angular.isDefined(c.events)&&c.events.loadComplete?c.events.loadComplete():c.loadComplete()};this.callUpdateComplete=function(){angular.isDefined(c.events)&&c.events.updateComplete?c.events.updateComplete():c.updateComplete()};c.$on(c.name+"-get-current-page",function(b){k.setTempData(a.currentPageNumber)});
c.$on(c.name+"-set-current-page",function(b,c){a.setCurrentPage(c)});c.$on(c.name+"-first-page",function(b){a.firstPage()});c.$on(c.name+"-last-page",function(b){a.lastPage()});c.$on(c.name+"-next-page",function(b){a.nextPage()});c.$on(c.name+"-prev-page",function(b){a.prevPage()});this.setCurrentPage=function(b){a.currentPageNumber!=b&&1<=b&&b<=a.pageList.length&&(a.currentPageNumber=b,a.updateCurrentLayout())};this.firstPage=function(){1!=a.currentPageNumber&&(a.currentPageNumber=1,a.updateCurrentLayout())};
this.lastPage=function(){a.currentPageNumber!=a.pageList.length&&(a.currentPageNumber=a.pageList.length,a.updateCurrentLayout())};this.nextPage=function(){a.currentPageNumber<a.pageList.length&&(a.currentPageNumber++,a.updateCurrentLayout())};this.prevPage=function(){1<a.currentPageNumber&&(a.currentPageNumber--,a.updateCurrentLayout())};c.$on(c.name+"-get-max-scroll-pos",function(b){k.setTempData(a.getMaxScrollPos())});c.$on(c.name+"-get-scroll-pos",function(b){k.setTempData(a.getScrollPos())});
c.$on(c.name+"-set-scroll-pos",function(b,c){a.setScrollPos(c)});c.$on(c.name+"-scroll-to",function(b,c,e){a.scrollTo(c,e)});var pa=!1;this.multiSelection=function(a){if(void 0!=a)pa=a;else return pa};this.columnSelection=function(b,d){if(b){var e=!0;a.options.selectedColumn&&(e=!m.isEqual(a.options.selectedColumn[a.options.columnFields.id],b[a.options.columnFields.id]));var f;f=angular.isDefined(c.events)&&c.events.beforeSelect?c.events.beforeSelect({object:b}):c.beforeSelect({e:{object:b}});e&&
!1!==f&&(a.options.selectedColumn&&(a.options.selectedColumn.selected=!1,a.refresh(a.options.selectedColumn)),a.options.selectedColumn=b,b.selected=!0,angular.isDefined(c.selectedColumn)&&(c.selectedColumn=b),a.refresh(a.options.selectedColumn),a.callAfterSelect(b))}else return a.options.selectedColumn};this.isRowSelected=function(a){return m.isSelected(a)};this.clearPrevSelection=function(b){for(var c=0;c<a.options.selectedRows.length;c++)b&&!m.isEqual(a.options.selectedRows[c][a.options.rowFields.id],
b[a.options.rowFields.id])?a.options.selectedRows[c].selected=!1:b||(a.options.selectedRows[c].selected=!1);a.options.selectedRows.length=0;b&&0!=b[a.options.rowFields.enabled]&&a.options.selectedRows.push(b);a.refreshRows()};this.markSelColumn=function(){for(var b=0;b<a.columnList.length;b++)a.refresh(a.columnList[b])};this.updateSelectionList=function(){for(var b=a.options.selectedRows.length-1;0<=b;)0==a.options.selectedRows[b][a.options.rowFields.enabled]&&a.options.selectedRows.splice(b,1),b--};
this.rowSelection=function(b,d,e,f,g){if(b){if("none"!=a.options.selectionMode)if(a.isRowEnabled(b)){var k=a.rowSelection(),n=!0;k&&(n=!m.isEqual(k[a.options.rowFields.id],b[a.options.rowFields.id])||e||f);var t=!0,t=angular.isDefined(c.events)&&c.events.beforeSelect?c.events.beforeSelect({object:b}):c.beforeSelect({e:{object:b}});if(!1!==t)if(n){var v=d||e||f?!0:!1,n=!0;"multi-extended"==a.options.selectionMode&&(n=!a.isObjInSelList(b));n&&("one"==a.options.selectionMode?a.clearPrevSelection():Xa&&
d?a.clearPrevSelection():pa||v||"multi-simple"===a.options.selectionMode||a.clearPrevSelection());a.options.selectedRow=b;if(Xa&&d&&"one"!=a.options.selectionMode){if(d=a.getRowCurrentIndex(k),g=a.getRowCurrentIndex(b),d>g&&(e=d,d=g,g=e),a.isRowIndexInRange(d)&&a.isRowIndexInRange(g))for(;d<=g;d++)a.currentList[d].selected=!0,a.options.selectedRows.push(a.currentList[d])}else Xa&&(pa||v||"multi-simple"===a.options.selectionMode)?(d=null===b.selected||"undefined"===b.selected?!1:b.selected,b.selected=
!d,b.selected?a.isObjInSelList(b)||a.options.selectedRows.push(b):a.options.selectedRows=a.options.selectedRows.filter(function(a){return a!=b})):(b.selected=!0,a.isObjInSelList(b)||a.options.selectedRows.push(b));angular.isDefined(c.selectedRow)&&(c.selectedRow=b);a.callAfterSelect(b);a.refresh(null,null,!0)}else if(pa||v||"multi-simple"===a.options.selectionMode)d=null===b.selected||"undefined"===b.selected?!1:b.selected,g&&"undefined"!==g&&(d=g),b.selected=!d,b.selected?a.isObjInSelList(b)||a.options.selectedRows.push(b):
a.options.selectedRows=a.options.selectedRows.filter(function(a){return a!=b}),a.callAfterSelect(b),a.refresh(null,null,!0)}else a.clearPrevSelection()}else return a.options.selectedRow};this.updateSelection=function(b,c,e){b=b&&(b.shiftKey||b.ctrlKey||b.metaKey)?!0:!1;"multi-extended"==a.options.selectionMode&&0<a.options.selectedRows.length&&!e&&!pa&&!b&&(a.clearPrevSelection(c),a.refresh(null,null,!0))};this.isObjInSelList=function(b){var c=!1,e=a.options.selectedRows;if(b&&e)for(var f=0;f<e.length;f++)if(m.isEqual(e[f][a.options.rowFields.id],
b[a.options.rowFields.id])){c=!0;break}return c};c.$on(c.name+"-clear-selection",function(b){a.options.selectedColumn&&(a.options.selectedColumn.selected=!1);a.options.selectedColumn=null;a.clearPrevSelection();a.options.selectedRow=null});c.$on(c.name+"-get-hover-column",function(b,c){a.hoverColumn?k.setTempData(a.hoverColumn):c&&k.setTempData(a.getColumnAt({x:c.x,y:c.y}))});c.$on(c.name+"-get-selected-column",function(b){k.setTempData(a.columnSelection())});c.$on(c.name+"-set-selected-column",function(b,
c){a.columnSelection(c)});c.$on(c.name+"-get-selected-row",function(b){k.setTempData(a.rowSelection())});c.$on(c.name+"-set-selected-row",function(b,c){var e=f(function(){a.rowSelection(c);f.cancel(e)},1)});c.$on(c.name+"-get-selected-rows",function(b){k.setTempData(a.options.selectedRows)});c.$on(c.name+"-set-selected-rows",function(b,c){c&&Array.isArray(c)&&f(function(){for(var b=a.options.selectedRows.length=0;b<c.length;b++)c[b].selected=!0,a.options.selectedRows.push(c[b]);0<c.length?(a.options.selectedRow=
c[c.length-1],a.callAfterSelect(a.options.selectedRow)):a.options.selectedRow=null;a.refresh(null,null,!0)},1)});c.$on(c.name+"-move-column",function(b,c,e){a.moveColumn(c,e)});c.$on(c.name+"-move-row",function(b,c,e,f,g){a.moveRow(c,e,f,g)});c.$watch("options",function(b,c){b!==c&&(a.updateOptions(b),a.updateLayout())},!0);c.$watch("allowCellFocus",function(b,c){b!==c&&(a.options.allowCellFocus=b)});c.$watch("allowColumnReorder",function(b,c){b!==c&&(a.options.allowColumnReorder=b)});c.$watch("allowFilter",
function(b,c){b!==c&&(a.options.allowFilter=b)});c.$watch("allowFocus",function(b,c){b!==c&&(a.options.allowFocus=b)});c.$watch("allowDrag",function(b,c){b!==c&&(a.options.allowDrag=b,a.updateView())});c.$watch("allowDrop",function(b,c){b!==c&&(a.options.allowDrop=b,a.updateView())});c.$watch("autoExpand",function(b,c){b!==c&&(a.options.autoExpand=b)});c.$watch("controlStyle",function(b,c){b!==c&&a.updateControlStyle(b)});c.$watch("editorSettings",function(b,c){b!==c&&a.updateEditorSettings(b)});
c.$watch("enabled",function(b,c){b!==c&&(a.options.enabled=b,a.updateView(),a.options.paging.enabled&&a.options.paging.showControlPanel&&a.updatePaginationPanel(),a.callEnabledChanged(b))});c.$watch("expandingColumnIndex",function(b,c){b!==c&&(a.options.expandColIndex=b)});c.$watch("fields",function(b,c){b!==c&&(a.updateDataFields(b),a.UpdateData())});c.$watch("fillSpace",function(b,c){b!==c&&(a.options.fillSpace=b)});c.$watch("gridLines",function(b,c){b!==c&&(a.options.gridLines=b,a.updateView())});
c.$watch("hoverSelection",function(b,c){b!==c&&(a.options.hoverSelection=b)});c.$watch("indent",function(b,c){b!==c&&(a.options.indent=b,a.updateLayout())});c.$watch("rowHeight",function(b,c){b!==c&&(a.options.rowHeight=b,a.updateLayout())});c.$watch("rowIcon",function(b,c){b!==c&&(a.options.rowIcon=b,a.updateLayout())});c.$watch("labelEdit",function(b,c){b!==c&&(a.options.labelEdit=b)});c.$watch("paging",function(b,c){b!==c&&(a.updatePaging(b),a.resetPageNumber(),a.updateCurrentLayout())},!0);c.$watch("pathSeparator",
function(b,c){b!==c&&(a.options.pathSeparator=b)});c.$watch("rtl",function(b,c){b!==c&&(a.options.rtl=b,a.updateLayout())});a.resetSelection=function(){switch(a.options.selectionMode){case "none":a.clearPrevSelection();break;default:a.clearPrevSelection(a.rowSelection())}};c.$watch("selectionMode",function(b,c){b!==c&&(a.options.selectionMode=b,a.resetSelection())});c.$watch("showExpandBoxes",function(b,c){b!==c&&(a.options.showExpandBoxes=b,a.updateLayout())});c.$watch("showFooter",function(b,c){b!==
c&&(a.options.showFooter=b,a.updateLayout())});c.$watch("showHeader",function(b,c){b!==c&&(a.options.showHeader=b,a.updateLayout())});c.$watch("showIcons",function(b,c){b!==c&&(a.options.showIcons=b,a.updateLayout())});c.$watch("selectedRow",function(b,c){b!==c&&(c&&(c.selected=!1),a.options.selectedRow=b,a.callAfterSelect(b))});this.sortComparer=this.sortColumn=null;c.$watch("sorting",function(b,c){b!==c&&(a.options.sorting=b)});c.$on(c.name+"-sort",function(b,c,e,f){a.sort(c,e,f)});this.sort=function(b,
c,e){a.sortColumn=b;a.sortComparer=e;if("ascending"==c||"descending"==c||"none"==c)a.options.sorting=c;a.updateCurrentLayout();a.callChange()};this.getCellIndexInCollection=function(b,c,e){var f=-1;if(b)for(var g=0;g<b.length;g++)if(void 0==b[g][a.options.cellFields.cid]){f=c;break}else if(b[g][a.options.cellFields.cid]==e){f=g;break}return f};this.isSortingAllowed=function(){return"ascending"==a.options.sorting||"descending"==a.options.sorting};this.applySorting=function(b){if(b&&(!a.sortColumn||
0!=a.sortColumn[a.options.columnFields.visible])){var c=a.getColumnCurrentIndex(a.sortColumn),e=0<=c?c:a.options.expandColIndex;if(e<a.columnList.length){var f=a.columnList[e][a.options.columnFields.id];a.sortColumn&&a.sortColumn[a.options.columnFields.comparer]?b.sort(a.sortColumn[a.options.columnFields.comparer]):a.sortComparer?b.sort(a.sortComparer):a.isSortingAllowed()&&b.sort(function(b,c){var d=null,g=null;if(b[a.options.rowFields.cells]){var k=a.getCellIndexInCollection(b[a.options.rowFields.cells],
e,f);0<=k&&((d=b[a.options.rowFields.cells][k][a.options.cellFields.value])||(d=b[a.options.rowFields.cells][k][a.options.cellFields.text]),m.isObject(d)&&(d=d.value?d.value:d.text))}c[a.options.rowFields.cells]&&(k=a.getCellIndexInCollection(c[a.options.rowFields.cells],e,f),0<=k&&((g=c[a.options.rowFields.cells][k][a.options.cellFields.value])||(g=c[a.options.rowFields.cells][k][a.options.cellFields.text]),m.isObject(g)&&(g=g.value?g.value:g.text)));d=void 0!=d?d:null;g=void 0!=g?g:null;switch(a.options.sorting){case "ascending":if(d<
g)return-1;if(d>g)return 1;break;case "descending":if(d>g)return-1;if(d<g)return 1;break;default:return 0}})}}};var C=function(b){if(b){var c=m.isFieldAvailable(b.general,"iui-treegrid-column"),e;e=(e=b.header)?{content:m.isFieldAvailable(e.content,"iui-treegrid-column-header-cell-content"),disabled:m.isFieldAvailable(e.disabled,"iui-treegrid-column-header-disabled"),normal:m.isFieldAvailable(e.normal,"iui-treegrid-column-header"),hovered:m.isFieldAvailable(e.hovered,"iui-treegrid-column-header-hovered"),
selected:m.isFieldAvailable(e.selected,"iui-treegrid-column-header-selected")}:a.options.controlStyle.column.header;b=(b=b.footer)?{content:m.isFieldAvailable(b.content,"iui-treegrid-column-footer-cell-content"),disabled:m.isFieldAvailable(b.disabled,"iui-treegrid-column-footer-disabled"),normal:m.isFieldAvailable(b.normal,"iui-treegrid-column-footer"),hovered:m.isFieldAvailable(b.hovered,"iui-treegrid-column-footer-hovered"),selected:m.isFieldAvailable(b.selected,"iui-treegrid-column-footer-selected")}:
a.options.controlStyle.column.footer;return{general:c,header:e,footer:b}}return a.options.controlStyle.column};this.getExpandBoxStyle=function(b){return b?{general:m.isFieldAvailable(b.general,"iui-treegrid-expand-box"),animated:m.isFieldAvailable(b.animated,"iui-treegrid-expand-box-load"),expanded:m.isFieldAvailable(b.expanded,"iui-treegrid-expand-box-open"),collapsed:m.isFieldAvailable(b.collapsed,"iui-treegrid-expand-box-close")}:a.options.controlStyle.row.expandBox};var rb=function(b){if(b){var c;
c=(c=b.general)?{disabled:m.isFieldAvailable(c.disabled,"iui-treegrid-row-disabled"),focused:m.isFieldAvailable(c.focused,"iui-treegrid-row-focused"),normal:m.isFieldAvailable(c.normal,"iui-treegrid-row"),hovered:m.isFieldAvailable(c.hovered,"iui-treegrid-row-hovered"),selected:m.isFieldAvailable(c.selected,"iui-treegrid-row-selected")}:a.options.controlStyle.row.general;var e;var f=b.checkBox;f?(e=m.isFieldAvailable(f.general,"iui-checkbox"),f=(f=f.box)?{general:m.isFieldAvailable(f.general,"iui-checkbox-box"),
disabled:m.isFieldAvailable(f.disabled,"iui-checkbox-disabled"),checked:m.isFieldAvailable(f.checked,"iui-checkbox-checked"),indeterminate:m.isFieldAvailable(f.indeterminate,"iui-checkbox-indeterminate"),unchecked:m.isFieldAvailable(f.unchecked,"iui-checkbox-unchecked")}:a.options.controlStyle.row.checkBox.box,e={general:e,box:f}):e=a.options.controlStyle.row.checkBox;f=a.getExpandBoxStyle(b.expandBox);b=(b=b.cell)?{content:m.isFieldAvailable(b.content,"iui-treegrid-row-cell-content"),general:m.isFieldAvailable(b.general,
"iui-treegrid-row-cell"),disabled:m.isFieldAvailable(b.disabled,"iui-treegrid-row-cell-disabled"),focused:m.isFieldAvailable(b.focused,"iui-treegrid-row-cell-focused"),normal:m.isFieldAvailable(b.normal,"iui-treegrid-row-cell"),hovered:m.isFieldAvailable(b.hovered,"iui-treegrid-row-cell-hovered"),selected:m.isFieldAvailable(b.selected,"iui-treegrid-row-cell-selected")}:a.options.controlStyle.row.cell;return{general:c,checkBox:e,expandBox:f,cell:b}}return a.options.controlStyle.row},z=function(b){return b?
{content:m.isFieldAvailable(b.content,"iui-treegrid-row-cell-content"),general:m.isFieldAvailable(b.general,"iui-treegrid-row-cell"),disabled:m.isFieldAvailable(b.disabled,"iui-treegrid-row-cell-disabled"),focused:m.isFieldAvailable(b.focused,"iui-treegrid-row-cell-focused"),normal:m.isFieldAvailable(b.normal,"iui-treegrid-row-cell"),hovered:m.isFieldAvailable(b.hovered,"iui-treegrid-row-cell-hovered"),selected:m.isFieldAvailable(b.selected,"iui-treegrid-row-cell-selected")}:a.options.controlStyle.cell};
this.updateControlStyle=function(b){a.options.controlStyle=b?{general:m.isFieldAvailable(b.general,"iui-treegrid"),column:C(b.column),row:rb(b.row),cell:z(b.cell)}:{general:m.isFieldAvailable(a.defaultStyle.general,"iui-treegrid"),column:C(a.defaultStyle.column),row:rb(a.defaultStyle.row),cell:z(a.defaultStyle.cell)}};this.getCurrentColumnStyle=function(b,c,e){var f=a.options.controlStyle.column;b&&b.style&&(f=b.style);b=a.options.controlStyle.column.body;var g=f.body;switch(c){case "header":b=a.options.controlStyle.column.header;
g=f.header;break;case "footer":b=a.options.controlStyle.column.footer,g=f.footer}if(e)switch(e){case "content":return g&&g.content?g.content:b.content;case "disabled":return g&&g.disabled?g.disabled:b.disabled;case "hovered":return g&&g.hovered?g.hovered:b.hovered;case "selected":return g&&g.selected?g.selected:b.selected;default:return g&&g.normal?g.normal:b.normal}else return c?g?g:b:f?f:a.options.controlStyle.column};this.getCurrentRowStyle=function(b,c){var e=a.options.controlStyle.row;if(b)switch(b[a.options.rowFields.style]){case "initial":break;
case "parent":return a.getCurrentRowStyle(a.getParent(b),c);default:null!=b.style&&(e=b.style)}if(c){if(m.isString(e.general))return e.general;switch(c){case "disabled":return e.general&&e.general.disabled?e.general.disabled:a.options.controlStyle.row.general.disabled;case "focused":return e.general&&e.general.focused?e.general.focused:a.options.controlStyle.row.general.focused;case "hovered":return e.general&&e.general.hovered?e.general.hovered:a.options.controlStyle.row.general.hovered;case "selected":return e.general&&
e.general.selected?e.general.selected:a.options.controlStyle.row.general.selected;default:return e.general&&e.general.normal?e.general.normal:a.options.controlStyle.row.general.normal}}else return e?e:a.options.controlStyle.row};this.getDefaultCellContentClass=function(){return"iui-treegrid-row-cell-content"};this.getDefaultCellLabelClass=function(){return"iui-treegrid-row-cell-label"};this.getDefaultCellBorderClass=function(){return"iui-treegrid-lines-both"};this.getCurrentCellStyle=function(b,c,
e){var f=a.options.controlStyle.row.cell;if(c)switch(c[a.options.cellFields.style]){case "initial":break;case "parent":b&&(f=z(a.getCurrentRowStyle(b)));break;default:c.style&&(f=c.style)}if(e)switch(e){case "content":return f.content?f.content:a.options.controlStyle.cell.content;case "disabled":return f.disabled?f.disabled:a.options.controlStyle.cell.disabled;case "focused":return f.focused?f.focused:a.options.controlStyle.cell.focused;case "hovered":return f.hovered?f.hovered:a.options.controlStyle.cell.hovered;
case "selected":return f.selected?f.selected:a.options.controlStyle.cell.selected;default:return f.normal?f.normal:a.options.controlStyle.cell.normal}else return f?f:a.options.controlStyle.row.cell}}]).directive("iuiTreegrid",["$compile","$timeout","$interval","IntegralUIInternalService","IntegralUIDragDrop","$window","IntegralUIListCtrlService",function(c,e,f,g,t,m,ba){return{restrict:"EA",controller:"IntegralUITreeGridController",transclude:!0,replace:!0,template:'<div class="iui-treegrid" data-element="treegrid"><div class="iui-treegrid-block"></div></div>',
scope:{allowAnimation:"=",allowCellFocus:"=",allowColumnReorder:"=",allowFilter:"=",allowFocus:"=",allowDrag:"=",allowDrop:"=",animationSpeed:"=",autoExpand:"=",columns:"=",controlStyle:"=",editorSettings:"=",enabled:"=",expandingColumnIndex:"=",fields:"=",fillSpace:"=",gridLines:"=",hoverSelection:"=",indent:"=",labelEdit:"=",name:"@",options:"=?",paging:"=?",pathSeparator:"@",rowHeight:"=",rowIcon:"=",rows:"=",selectedIndex:"=",selectedRow:"=",selectionMode:"@",showExpandBoxes:"=",showFooter:"=",
showHeader:"=",showIcons:"=",sorting:"@",afterCollapse:"&",afterEdit:"&",afterExpand:"&",afterLabelEdit:"&",afterSelect:"&",beforeCollapse:"&",beforeEdit:"&",beforeExpand:"&",beforeLabelEdit:"&",beforeSelect:"&",cellClick:"&",cellHover:"&",cellvalueChanged:"&",cellvalueChanging:"&",change:"&",clearColumns:"&",clearRows:"&",columnAdded:"&",columnAdding:"&",columnClick:"&",columnDblclick:"&",columnHover:"&",columnPoschanging:"&",columnPoschanged:"&",columnRemoved:"&",columnRemoving:"&",columnRightclick:"&",
columnSizechanged:"&",dragDrop:"&",dragEnter:"&",dragLeave:"&",dragOver:"&",enabledChanged:"&",events:"=?",gotFocus:"&",keyDown:"&",keyPress:"&",keyUp:"&",loadComplete:"&",lostFocus:"&",rowAdded:"&",rowAdding:"&",rowClick:"&",rowDblclick:"&",rowHover:"&",rowRemoved:"&",rowRemoving:"&",rowRightclick:"&",scrollposChanged:"&",selectionChanged:"&",updateComplete:"&"},link:function(k,n,Wb,a,sc){var A=this,X=n.children().eq(0),J=angular.element('<div class="iui-scrollbar-vertical"><div class="iui-scroll-button-thumb-vertical"></div></div>'),
v=angular.element('<div class="iui-scrollbar-horizontal"><div class="iui-scroll-button-thumb-horizontal"></div></div>'),xa=angular.element('<div class="iui-scrollbar-corner"></div>'),Ga=null,ya=null,za=null,qb=!1,B=angular.element('<input type="text" class="iui-label-editor" draggable="false" />');a.labelEditStatus=function(a){if(void 0!=a)qb=a;else return qb};var Xa=function(){var b="iui-treegrid-block";a.options.showStatusIcons&&(b+=" "+b+"-shift-left");a.options.rtl&&(b+=" "+b+"-rtl");return b};
k.$on("$destroy",function(a){A.s2t();Aa&&(e.cancel(Aa),Aa=null);ia&&ia.unbind("mousedown");n.unbind("click dblclick dragenter dragleave dragend drop keydown mousedown mouseleave mousemove mousewheel scroll touchstart touchmove touchend");angular.element(m).unbind("dragenter",tc);angular.element(m).unbind("dragover",uc);angular.element(m).unbind("dragend",vc);angular.element(m).unbind("keyup",wc);angular.element(m).unbind("mousemove",xc);angular.element(m).unbind("mousedown",yc);angular.element(m).unbind("mouseup",
zc);B&&B.unbind("blur focus keydown mousedown");Ac();D&&D.$destroy();w&&w.$destroy()});a.dragIcon=document.createElement("img");a.dragIcon.width=1;n.append(a.getDropMarkWindow());a.dropMark();var pa=function(){Ga&&(e.cancel(Ga),Ga=null)};a.addDropMark=function(){var b;b=n[0];for(var c=null;b;){if(b===document.getElementsByTagName("body")[0]){c=b;break}b=b.offsetParent}if(b=c)angular.element(b).append(a.getDropMarkWindow()),a.dropMark()};a.removeDropMark=function(){a.getDropMarkWindow().remove()};
a.isDropInRange=function(b){b=a.getMousePos(b);var c=n[0].getBoundingClientRect();b.x-=angular.element(m)[0].pageXOffset;b.y-=angular.element(m)[0].pageYOffset;var q=c.top+y,c=c.bottom-O;I&&v&&(c-=v[0].offsetHeight);return b.y<q||b.y>c?!1:!0};var C=angular.element('<div style="opacity:0.75;position:absolute;z-index:999"></div>'),rb=function(){C&&(C.remove(),C.css("top","-9999999px"),C.css("left","-9999999px"))};a.getCellElemFromRow=function(b){return b&&(b=a.getElemFromRow(b))?a.getChildElement(b,
"cell"):null};a.openEditor=function(b,c){if(b)switch(b.type){case "cell":c||(c=a.getColumnById(b[a.options.cellFields.cid]));if(!c){var q=a.getCellColumnIndex(b),r=a.columnsObj.getList();r&&0<=q&&q<r.length&&(c=r[q])}if(c){var q=a.getCellType(b,a.getColumnRealIndex(c)),r=a.getCellRowIndex(b),x=a.getCellColumnIndex(b);if(r=a.getElemFromCell(r,x,c[a.options.columnFields.fixed]))switch(q){case "checkbox":break;case "combobox":break;case "incell":a.openInCellEditor(r,b,c);break;case "dropdown":a.openDropDownEditor(r,
b,c);break;default:0!=b[a.options.cellFields.allowEdit]&&sb(null,r,0)}}}};a.closeEditor=function(b,c){if(b)switch(b.type){case "cell":if(c||(c=a.getColumnById(b[a.options.cellFields.cid])),c)switch(a.getCellType(b,a.getColumnRealIndex(c))){case "incell":a.closeActiveEditor(b);break;case "dropdown":a.closeActiveEditor(b)}else a.closeActiveEditor()}else a.closeActiveEditor();d=null};var z=null,b=!1,d=null,G=null,h=angular.element('<span class="iui-edit-mark"></span>');a.openInCellEditor=function(l,
p,q){b&&a.closeActiveEditor(p,!0);u();if(p&&q&&(d=p,q='<div ng-include="'+q[a.options.columnFields.editorTemplate]+'"></div>',z=angular.element('<div class="iui-incell-editor"></div>'),z.append(c(q)(k.$parent)),0!=a.callBeforeEdit(p))){l.children().eq(0).append(z);b=!0;G="incell";pb();z.bind("mousedown",function(a){a.stopPropagation()});z.bind("mouseup",function(a){a.stopPropagation()});z.bind("click",function(a){a.stopPropagation()});z.bind("keydown",function(b){switch(b.keyCode){case 27:a.closeActiveEditor(d)}b.stopPropagation()});
z.bind("keypress",function(a){a.stopPropagation()});z.bind("keyup",function(a){a.stopPropagation()});var r=e(function(){var a=g.getPadding(l[0]),b=parseInt(getComputedStyle(l[0]).width,10)-(a.left+a.right),a=parseInt(getComputedStyle(l[0]).height,10)+2;z.css("width",b+"px");z.css("height",a+"px");z.css("top",l[0].offsetTop+"px");k.$apply();z.children&&1==z.children().length&&(b=z.children().eq(0),b.children&&1==b.children().length&&b.children().eq(0).css("height",a+"px"));e.cancel(r)},1)}};a.openDropDownEditor=
function(l,p,q){b&&a.closeActiveEditor(p,!0);u();if(p&&q&&(d=p,q='<div ng-include="'+q[a.options.columnFields.editorTemplate]+'"></div>',z=angular.element('<div class="iui-dropdown-editor"></div>'),z.append(c(q)(k.$parent)),0!=a.callBeforeEdit(p)))var r=e(function(){angular.element(Qa).append(z);z.bind("mousedown",function(a){a.stopPropagation()});z.bind("mouseup",function(a){a.stopPropagation()});z.bind("click",function(a){a.stopPropagation()});b=!0;G="dropdown";var a=l[0].getBoundingClientRect(),
c=angular.element(m)[0].pageXOffset,p=angular.element(m)[0].pageYOffset,q=e(function(){var b=g.getPadding(l[0]),b=parseInt(getComputedStyle(l[0]).width,10)+(b.left+b.right),r=g.getPadding(z[0]),b=b-(r.left+r.right),r=parseInt(getComputedStyle(z[0]).width,10);b<r&&(b=r);r=a.right-(b+3)+c;z.css("top",a.bottom+p+"px");z.css("left",r+"px");z.css("width",b+"px");k.$apply();e.cancel(q)},1);e.cancel(r)},1)};a.closeActiveEditor=function(c,p){b=!1;u();z&&z.remove();G=d=null;p||a.callAfterEdit(c)};var u=function(){z&&
z.unbind("click keydown keypress keyup mousedown mouseup")},Ab=function(a,b){a&&(h.addClass("iui-edit-mark iui-edit-mark-"+b),a.append(h),h.css("left",a[0].offsetLeft+a[0].offsetWidth-h[0].offsetWidth-2+"px"),h.css("top",a[0].offsetTop+(a[0].offsetHeight-h[0].offsetHeight)/2+"px"))},pb=function(){h&&("dropdown"!=G||"dropdown"==G&&!b)&&(h.removeAttr("class"),h.remove())},Xb=null,Fa=angular.element('<div class="iui-dropdown-mark"><span></span></div>'),Yb=function(a,b){!a||Ya&&!b||(a.append(Fa),Fa.css("top",
a[0].offsetTop+"px"),Fa.css("left",a[0].offsetLeft+a[0].offsetWidth-Fa[0].offsetWidth+"px"),Fa.css("height",getComputedStyle(a[0]).height))},Ha=function(a){!Fa||Ya&&!a||Fa.remove()};a.getCellType=function(b,c){var q=null,r="label";b&&(q=a.getColumnById(b[a.options.cellFields.cid]));!q&&0<=c&&c<a.columnList.length&&(q=a.columnList[c]);q&&(r=q[a.options.columnFields.editorType]);return r};var Qa=g.getBodyElem(n[0]),tb=g.getUniqueId(4),ca=null,Ya=!1,ub=0,id=function(b,p,q){if(Qa&&b.items&&0<b.items.length){b=
g.getUniqueId(4);var r=c('<iui-list name="'+b+'" style="position:absolute;top:-99px;height:100px" items="data['+p+"].column."+a.options.columnFields.editorSettings+'.items"></iui-list>')(D);angular.element(Qa).append(r);ba.updateLayout(b);var x=e(function(){if(0<r.children().length){var a=r.children().eq(0);0<a.children().length&&(ub=angular.element(a.children().eq(0))[0].offsetHeight,q&&(q.avgItemHeight=ub))}r.remove();e.cancel(x)},1)}},Ra=null,Bb=function(b,p,q,r){var x=a.getCell(q,r);if(x!=Xb&&
(Xb=x,ca&&ca.remove(),Ra&&Ra.$destroy(),Qa)){Ra=k.$new();Ra.data=a.columnList[r];d=x;var f='<iui-list name="'+tb+'" style="position:absolute;"',f=f+(' items="data.'+a.options.columnFields.editorSettings+'.items"'),f=f+(' item-icon="data.'+a.options.columnFields.editorSettings+'.itemIcon"'),f=f+(' show-icons="data.'+a.options.columnFields.editorSettings+'.showIcons"'),f=f+(' checkbox-settings="data.'+a.options.columnFields.editorSettings+'.checkBoxSettings"'),f=f+(' show-check-boxes="data.'+a.options.columnFields.editorSettings+
'.checkBoxSettings.showCheckBoxes"');ca=c(f+(' nav-selection="false" before-select="onCellValueChanging(e, '+q+", "+r+')" after-select="onCellValueChanged(e, '+q+", "+r+')"></iui-list>'))(Ra);ub=0;Za&&r<Za.length&&(ub=Za[r].avgItemHeight);var hd=e(function(){angular.element(Qa).append(ca);var c=b[0].getBoundingClientRect(),r=angular.element(m)[0].pageXOffset,q=angular.element(m)[0].pageYOffset,q=c.bottom+q-1,c=c.left+r,r=b.children().eq(0),d=g.getPadding(r[0]),r=parseInt(getComputedStyle(r[0]).width,
10)+(d.left+d.right),d=g.getPadding(ca[0]),r=r-(d.left+d.right);void 0!=p.dropDownWidth&&r<p.dropDownWidth&&(r=p.dropDownWidth);d=void 0!=p.dropDownHeight?p.dropDownHeight:100;void 0!=p.maxDropDownItems&&(d=ub*p.maxDropDownItems);ca.css("top",q+"px");ca.css("left",c+"px");ca.css("width",r+"px");ca.css("height",d+"px");ca.css("z-index","999");x&&x[a.options.cellFields.value]&&ba.selectedItem(tb,x[a.options.cellFields.value]);ba.updateLayout(tb);var f=e(function(){if(x&&x[a.options.cellFields.value]){ba.ensureVisible(tb,
x[a.options.cellFields.value]);var b=e(function(){ba.focus(tb,x[a.options.cellFields.value]);e.cancel(b)},1)}e.cancel(f)},10);Fa&&(Ha(!0),Yb(b,!0));Ya=!0;jd();e.cancel(hd)},1)}};a.removeDropDownList=function(a){ca&&(Xb=null,ca.remove(),Ya=!1,a||Ha(),ca.unbind("keydown"));Ra&&Ra.$destroy();d=null};var jd=function(){ca.bind("keydown",function(b){switch(b.keyCode){case 27:a.removeDropDownList(),Ha()}})},sb=function(b,c,q){a.options.labelEdit&&(void 0===q&&(q=500),ya=e(function(){if(ya)var a=e(function(){Cb(b,
c,!0);e.cancel(a)},q);e.cancel(ya)},q/3))},Db=function(){ya&&(e.cancel(ya),ya=null)},$a=null,ab=null,Cb=function(b,c,q){if(a.dragDropStatus())g=B[0].value,a.labelEditStatus(!1),B.unbind("blur focus keydown mousedown"),B.remove(),ab=$a=null;else{var r=a.getRowFromChildElem(c);if(r){var x=a.getRowCurrentIndex(r),d=a.getIndexFromElem(c),f=a.getCellObject(x,d),g="",g=c.children().eq(0);if(f)if(q){if(0!=a.callBeforeLabelEdit(f)){$a=r;ab=f;a.labelEditStatus(!0);B.unbind("blur focus keydown mousedown");
b=parseInt(getComputedStyle(c[0]).width,10)-4;q=parseInt(getComputedStyle(c[0]).height,10)-3;B.css("top",c[0].offsetTop+"px");B.css("left",c[0].offsetLeft+"px");B.css("width",b+"px");B.css("height",q+"px");g.append(B);B[0].value=f[a.options.cellFields.text];B.bind("keydown",function(b){switch(b.keyCode){case 13:f[a.options.cellFields.text]=B[0].value?B[0].value:"null";Cb(b,c,!1);break;case 27:Cb(b,c,!1)}b.stopPropagation()});B.bind("focus",function(b){var c=angular.element(this);a.callGotFocus(b,
$a,ab,!0,c[0].value)});B.bind("blur",function(a){Cb(a)});B.bind("mousedown",function(a){a.stopPropagation()});var h=e(function(){B[0].focus();B[0].select();e.cancel(h)},10)}}else g=B[0].value,a.labelEditStatus(!1),B.unbind("blur focus keydown mousedown"),B.remove(),a.updateView(),a.updateFocus(x,d),a.callAfterLabelEdit(f),a.callLostFocus(b,r,f,!0,g),ab=$a=null}else g=B[0].value,a.labelEditStatus(!1),B.unbind("blur focus keydown mousedown"),B.remove(),a.callAfterLabelEdit(),a.updateView(),a.callLostFocus(b,
$a,ab,!0,g),ab=$a=null}};n.bind("mousemove",function(b){if(a.options.enabled&&0===b.button&&la&&P){a.getColumnCurrentIndex(P);var c=a.getMousePos(b),q=c.y+16,c=c.x+20;qa.empty();qa.append("<span>"+P[a.options.columnFields.headerText]+"</span>");qa.css("top",q+"px");qa.css("left",c+"px");qa.css("display","block");Bc();b.stopPropagation()}});var Fc=function(){for(var b=0,c="none";3>b;){if((c=a.getRowElems(c))&&0<c.length)for(var q=0;q<c.length;q++){var r=angular.element(c[q]);Cc(r);for(var r=r.find("td"),
x=0;x<r.length;x++){var d=angular.element(r[x]);Dc(a.getElement(d,"expandbox"));Ec(d)}}b++;c=1==b?"left":"right"}},Ac=function(){u();for(var b=0,c="none";3>b;){var q=a.getRowElems(c);if(q&&0<q.length)for(var r=0;r<q.length;r++){var x=angular.element(q[r]);Cc(x);for(var x=x.find("td"),d=0;d<x.length;d++){var e=angular.element(x[d]);Dc(a.getElement(e,"expandbox"));Ec(e)}}if((q=a.getHeaderElem(c))&&0<q.length)for(r=0;r<q.length;r++)for(x=angular.element(q[r]),x=x.find("td"),d=0;d<x.length;d++)(e=angular.element(x[d]))&&
(c=a.getChildElement(e,"column-header-cell"))&&(c=a.getContentElement(c,"filter-button"))&&c.unbind("mousedown");b++;c=1==b?"left":"right"}},nd=function(){Fc();for(var b=0,c="none";3>b;){if((c=a.getRowElems(c))&&0<c.length)for(var q,r=c.length-1,x=0;x<=r;x++){q=angular.element(c[x]);kd(q);for(var d=q.find("td"),e=0;e<d.length;e++){var f=angular.element(d[e]);ld(a.getElement(f,"expandbox"));md(f,a.getRowFromElem(q),e)}}b++;c=1==b?"left":"right"}},la=!1,P=null,bb=-1,Eb=function(b,c){if(b){var q=a.getColumnCurrentIndex(b),
r=a.getColumnWidth(b);return a.isColumnWithFixedWidth(q)||10<c.x&&c.x<r-10}return!1},ac=function(b){b=b.find("td");for(var c=0;c<b.length;c++)currentElem=angular.element(b[c]),currentElem.bind("click",function(b){if(a.options.enabled&&1===b.which){var c=g.getClientMousePos(b,this),l=a.getColumnFromElem(this);l&&Eb(l,c)&&a.callColumnClick(l,a.getMousePos(b))}b.stopPropagation()}),currentElem.bind("dblclick",function(b){b.preventDefault();if(a.options.enabled&&1===b.which){var c=g.getClientMousePos(b,
this),l=a.getColumnFromElem(this);l&&Eb(l,c)&&a.callColumnDblClick(l,a.getMousePos(b))}b.stopPropagation()}),currentElem.bind("mouseenter",function(b){if(a.options.enabled&&!R&&!ma){var c=a.getColumnFromElem(this);c&&(a.hoverColumn=c,a.refresh(c),a.callColumnHover(c));if(1===b.which&&la&&P&&a.hoverColumn&&0!=a.hoverColumn[a.options.columnFields.allowDrop]&&da&&(da.remove(),a.hoverColumn!=P)){var l=angular.element(this);l.append(da);b=parseInt(getComputedStyle(l[0]).height,10);c=parseInt(getComputedStyle(da[0]).height,
10);l=g.getPadding(l[0]);da.css("top",(b+l.top+l.bottom-c)/2+"px")}}}),currentElem.bind("mouseleave",function(b){!a.options.enabled||R||ma||(a.hoverColumn=null,(b=a.getColumnFromElem(this))&&a.refresh(b),da&&da.remove(),R||n.css("cursor","default"))}),currentElem.bind("mousemove",function(b){if(a.options.enabled){var c=angular.element(this);if(1===b.which&&la&&P&&a.hoverColumn&&a.hoverColumn!=P&&0!=a.hoverColumn[a.options.columnFields.allowDrop]&&P[a.options.columnFields.fixed]==a.hoverColumn[a.options.columnFields.fixed])c=
parseInt(getComputedStyle(c[0]).width,10),da.empty(),bb=-1,b.offsetX>c/2?(bb=2,da.append('<span class="iui-treegrid-column-reorder-mark-right"></span>'),da.css("left","auto"),da.css("right","0")):(bb=1,da.append('<span class="iui-treegrid-column-reorder-mark-left"></span>'),da.css("left","0"),da.css("right","auto"));else{b=g.getClientMousePos(b,this);var c=parseInt(a.getIndexFromElem(this),10),l=a.getColumnWidth(a.columnList[c]),p=10;a.isFilteringAllowed(a.columnList[c])&&(p=0);10>b.x&&!a.isColumnWithFixedWidth(c-
1)&&Gc(c,"left")?(n.css("cursor","ew-resize"),Ba="left"):b.x>l-p&&!a.isColumnWithFixedWidth(c)&&Gc(c,"right")?(n.css("cursor","ew-resize"),Ba="right"):R||(n.css("cursor","default"),Ba="none")}}}),currentElem.bind("mouseup",function(b){if(a.options.enabled){if(1===b.which&&la&&P&&a.hoverColumn&&a.hoverColumn!=P&&0!=a.hoverColumn[a.options.columnFields.allowDrop]&&P[a.options.columnFields.fixed]==a.hoverColumn[a.options.columnFields.fixed]&&0!=a.callColumnPosChanging(P,a.hoverColumn)){b=a.columnList[0];
0<=a.options.expandColIndex&&a.options.expandColIndex<a.columnList.length&&(b=a.columnList[a.options.expandColIndex]);var c=a.getColumnCurrentIndex(P),c=a.getColumnRealIndex(c),l=a.getColumnCurrentIndex(a.hoverColumn),l=a.getColumnRealIndex(l);c!=l&&(c<l?1==bb&&l--:c>l&&2==bb&&l++,a.columnsObj.moveObject(c,l),a.updateColumnList(),b=a.getColumnCurrentIndex(b),b!=a.options.expandColIndex&&(a.options.expandColIndex=b),a.updateLayout(),a.callColumnPosChanged(P,a.hoverColumn))}P=null;bb=-1;R=la=!1;n.css("cursor",
"default")}}),currentElem.bind("mousedown",function(b){if(a.options.enabled){a.removeDropDownList();a.closeFilterWindow();a.closeEditor();g.getClientMousePos(b,this);var c=parseInt(a.getIndexFromElem(this),10);if(0===b.button&&!R){var l=c,p="none";0<=c&&c<a.columnList.length&&(p=a.columnList[c][a.options.columnFields.fixed]);switch(Ba){case "left":"right"==p?l=c:(c=Zb(l-1,p))?(l=a.getColumnCurrentIndex(c),0<=l&&l<a.columnList.length&&(a.columnList[l][a.options.columnFields.fixed]!=p?(l=-1,R=!1):R=
!0)):R=!1;0<=l&&(R=!0);break;case "right":"right"==p?(c=$b(l+1,p))?(l=a.getColumnCurrentIndex(c),0<=l&&l<a.columnList.length&&(a.columnList[l][a.options.columnFields.fixed]!=p?(l=-1,R=!1):R=!0)):R=!1:(l=c,R=!0)}!a.isColumnWithFixedWidth(l)&&R?a.setColumnResizingParams(l,Ba,a.getMousePos(b).x):R=!1}if(!R&&(l=a.getColumnFromChildElem(this)))switch(p=g.getClientMousePos(b,this),Eb(l,p)&&a.columnSelection(l),b.which){case 1:a.options.allowColumnReorder&&0!=l[a.options.columnFields.allowDrag]&&0==la&&
(P=l,a.getMousePos(b),la=!0,(l=g.getBodyElem(n[0]))&&angular.element(l).append(qa));break;case 3:Eb(l,p)&&a.callColumnRightClick(l,a.getMousePos(b))}}b.stopPropagation()}),function(b){b&&(b=a.getChildElement(b,"column-header-cell"))&&(b=a.getContentElement(b,"filter-button"))&&b.bind("mousedown",function(a){1==a.which&&od(this);a.stopPropagation()})}(currentElem)},ia=null,od=function(b){a.closeFilterWindow();var p=a.getColumnFromChildElem(b);if(p){var q=angular.element(b),r=q.parent().parent();if(Qa){b=
'<div ng-include="'+p[a.options.columnFields.filterTemplate]+'"></div>';ia=angular.element('<div class="iui-filter-window"></div>');ia.append(c(b)(k.$parent));var x=e(function(){angular.element(Qa).append(ia);ia.bind("mousedown",function(a){a.stopPropagation()});q[0].getBoundingClientRect();var a=r[0].getBoundingClientRect(),b=angular.element(m)[0].pageXOffset,c=angular.element(m)[0].pageYOffset,l=e(function(){var r=a.bottom+c,p=a.right-(parseInt(getComputedStyle(ia[0]).width,10)+3)+b;ia.css("top",
r+"px");ia.css("left",p+"px");e.cancel(l)},1);e.cancel(x)},1)}}};a.closeFilterWindow=function(){ia&&(ia.unbind("mousedown"),ia.remove())};var Cc=function(a){a&&a.unbind("blur dragover dragend focus keydown keyup keypress mousedown mouseenter mouseleave")},kd=function(b){b&&(b.bind("dragover",function(b){var c=a.getRowFromElem(this);if(c&&a.isRowEnabled(c)){if(a.isScrollBarVisible("vertical")){var c=a.getMousePos(b),l=n[0].getBoundingClientRect();c.x-=angular.element(m)[0].pageXOffset;c.y-=angular.element(m)[0].pageYOffset;
var x=l.top+y+25,l=l.bottom-O-25;I&&v&&(l-=v[0].offsetHeight);c.y<x?Fb(!1):c.y>l?Fb(!0):cb()}else cb();b.stopPropagation()}}),b.bind("dragend",function(b){var c=a.getRowFromElem(this);c&&a.isRowEnabled(c)&&(b.preventDefault(),a.dragDropStatus(!1),a.dropMark(),t.getData().source||t.clearData())}),b.bind("mouseenter",function(b){if(!ma){var c=a.getRowFromElem(this);c&&a.isRowEnabled(c)&&!la&&(a.hoverRow=c,a.refresh(c),a.callRowHover(b,c),a.options.hoverSelection&&(za=e(function(){za&&a.rowSelection(c,
b.shiftKey,b.ctrlKey,b.metaKey)},500)))}}),b.bind("mouseleave",function(b){ma||(a.hoverRow=null,(b=a.getRowFromElem(this))&&a.isRowEnabled(b)&&a.refresh(b),za&&(e.cancel(za),za=null))}),b.bind("keydown",function(b){var c=a.getRowFromElem(this);if(c&&a.isRowEnabled(c)){var l=!0;a.callKeyDown(b,c);var x=a.getRowCurrentIndex(c);switch(b.keyCode){case 9:Hc(b,c,x);break;case 16:a.updateSelectionStatus("shift");break;case 17:a.updateSelectionStatus("ctrl");break;case 27:l=!1;break;case 33:Ic(b,x);break;
case 34:Jc(b,x);break;case 35:Kc(b,x);break;case 36:Lc(b,x);break;case 37:Mc(b,c,x);break;case 32:Nc(b,c);break;case 38:bc(b,x);break;case 39:Oc(b,c,x);break;case 40:cc(b,x);break;default:(b.ctrlKey||b.metaKey)&&a.updateSelectionStatus("ctrl"),b.shiftKey&&a.updateSelectionStatus("shift")}l&&b.stopPropagation()}}),b.bind("keyup",function(b){var c=a.getRowFromElem(this);if(c&&a.isRowEnabled(c)){switch(b.keyCode){case 16:a.multiSelection(!1);break;case 17:a.multiSelection(!1);break;default:b.ctrlKey||
b.metaKey||a.multiSelection(!1),b.shiftKey||a.multiSelection(!1)}a.callKeyUp(b,c)}}),b.bind("keypress",function(b){var c=a.getRowFromElem(this);c&&a.isRowEnabled(c)&&a.callKeyPress(b,c)}),b.bind("mousedown",function(b){a.removeDropDownList();a.closeFilterWindow();a.closeEditor()}),b.bind("focus",function(b){var c=a.getRowFromElem(this);c&&a.isRowEnabled(c)?a.callGotFocus(b,c):a.updateFocus()}),b.bind("blur",function(b){var c=a.getRowFromElem(this);c&&a.isRowEnabled(c)&&a.callLostFocus(b,c)}))},ld=
function(b){b&&(b.bind("dblclick",function(b){var c=a.getRowFromChildElem(this);c&&a.isRowEnabled(c)&&(a.toggle(c),a.updateFocus(a.getRowCurrentIndex(c),a.options.expandColIndex),b.stopPropagation())}),b.bind("click",function(b){var c=a.getRowFromChildElem(this);c&&a.isRowEnabled(c)&&(a.toggle(c),a.updateFocus(a.getRowCurrentIndex(c),a.options.expandColIndex),b.stopPropagation())}),b.bind("touchend",function(b){b.preventDefault();var c=a.getRowFromChildElem(this);c&&a.isRowEnabled(c)&&(a.toggle(c),
a.updateFocus(a.getRowCurrentIndex(c),a.options.expandColIndex),b.stopPropagation())}))},Dc=function(a){a&&a.unbind("click dblclick touchend")},Gb={x:0,y:0},db={x:0,y:0},eb=!1,dc=!1,Ca=null,Pc=function(){return{x:angular.element(m)[0].pageXOffset,y:angular.element(m)[0].pageYOffset}},fb=function(a){var b=Pc();return{x:a.x-b.x,y:a.y-b.y}},md=function(c,p,q){c&&(c.bind("dragstart",function(b){if(a.labelEditStatus())b.preventDefault();else{document.activeElement&&document.activeElement.blur();t.clearData();
var c=a.getRowFromChildElem(this);if(c&&a.isRowEnabled(c))if(Db(),a.isDragAllowed(c)){a.dragDropStatus(!0);a.addDropMark();b.dataTransfer?(b.dataTransfer.effectAllowed="move",b.dataTransfer.setData("text",c[a.options.rowFields.id]?c[a.options.rowFields.id].toString():"")):b.originalEvent&&b.originalEvent.dataTransfer&&(b.originalEvent.dataTransfer.effectAllowed="move",b.originalEvent.dataTransfer.setData("text",c[a.options.rowFields.id]?c[a.options.rowFields.id].toString():""));b={source:c,sourceCtrl:a,
sourceCollection:a.rowsObj};switch(a.options.selectionMode){case "multi-simple":b.source=a.options.selectedRows;break;case "multi-extended":b.source=a.options.selectedRows}t.setData(b)}else b.dataTransfer?b.dataTransfer.effectAllowed="none":b.originalEvent&&b.originalEvent.dataTransfer&&(b.originalEvent.dataTransfer.effectAllowed="none")}}),c.bind("dragover",function(b){var c=a.getRowFromChildElem(this);if(c&&a.isRowEnabled(c)){var l=angular.element(this);b.preventDefault();var p=!0;b.dataTransfer?
p="none"===b.dataTransfer.effectAllowed?!1:!0:b.originalEvent&&b.originalEvent.dataTransfer&&(p="none"===b.originalEvent.dataTransfer.effectAllowed?!1:!0);if(p&&(c=a.getRowFromChildElem(l))){var p=l[0].getBoundingClientRect(),d=angular.element(m)[0].pageXOffset,q=angular.element(m)[0].pageYOffset,e=a.getMousePos(b);e.x-=p.left+d;e.y-=p.top+q;l=t.getDropPos(e,{x:0,y:0,width:l[0].offsetWidth,height:l[0].offsetHeight});d=t.getData();p=a.isDropAllowed(d.source,c,l);q={event:b,sourceTree:d.sourceCtrl?
d.sourceCtrl.getCtrlName():"",dragRow:d.source,targetTree:a.getCtrlName(),targetRow:c,isDropAllowed:p,dropPos:l,mousePos:a.getMousePos(b)};q=a.callDragOver(q);if(p&&!1!==q){q=a.getMousePos(b);b=q.y+16;q=q.x+20;e=a.getDropMarkWindow();e.empty();var f="iui-drop-marker-move-in";switch(l){case 1:f="iui-drop-marker-move-up";break;case 2:f="iui-drop-marker-move-down"}e.append("<span class='"+f+"'></span><span class='iui-drop-marker-title'>"+c[a.options.rowFields.text]+"</span>");a.updateDropMarkElem(a.getDropMarkWindow(),
{top:b,left:q});a.dropMark(p);t.setData({source:d.source,sourceList:d.sourceList,target:c,dropPos:l})}else b.dataTransfer?b.dataTransfer.dropEffect="none":b.originalEvent&&b.originalEvent.dataTransfer&&(b.originalEvent.dataTransfer.dropEffect="none"),a.dropMark()}}}),c.bind("drop",function(b){var c=a.getRowFromChildElem(this);if(c&&a.isRowEnabled(c)){var l=angular.element(this);b.preventDefault();pa();a.dropMark();c=!0;b.dataTransfer?c="none"===b.dataTransfer.effectAllowed?!1:!0:b.originalEvent&&
b.originalEvent.dataTransfer&&(c="none"===b.originalEvent.dataTransfer.effectAllowed?!1:!0);if(c){var p=a.getRowFromChildElem(l);if(p){var l=t.getData(),d=l.source;d||(d=a.getDnDSource(b));if(c=a.isDropAllowed(d,p,l.dropPos)){a.toggle(p,!0);var q=a.getMousePos(b);d&&(c={event:b,sourceTree:l.sourceCtrl?l.sourceCtrl.getCtrlName():"",dragRow:d,targetTree:a.getCtrlName(),targetRow:p,targetCell:a.getCellAt(q.x,q.y),isDropAllowed:c,dropPos:l.dropPos,mousePos:q},!1!==a.callDragDrop(c)&&(a.drop(l),k.$$phase||
k.$apply()))}}}t.clearData();b.stopPropagation()}}),c.bind("dragenter",function(b){var c=a.getRowFromChildElem(this);if(c&&a.isRowEnabled(c)){b.preventDefault();if(a.options.autoExpand)var l=e(function(){Ga||(Ga=e(function(){Ga&&a.toggle(c,!0)},750));e.cancel(l)},1);var p=t.getData();p.source||(p.source=a.getDnDSource(b));p={event:b,sourceTree:p.sourceCtrl?p.sourceCtrl.getCtrlName():"",dragRow:p.source,targetTree:a.getCtrlName(),targetRow:p.target,mousePos:a.getMousePos(b)};a.callDragEnter(p);b.stopPropagation()}}),
c.bind("dragleave",function(b){a.hoverRow=null;var c=a.getRowFromChildElem(this);c&&a.isRowEnabled(c)&&(b.preventDefault(),pa(),c=t.getData(),c.source||(c.source=a.getDnDSource(b)),c={event:b,sourceTree:c.sourceCtrl?c.sourceCtrl.getCtrlName():"",dragRow:c.source,targetTree:a.getCtrlName(),targetRow:c.target,mousePos:a.getMousePos(b)},a.callDragLeave(c),b.stopPropagation())}),c.bind("touchstart",function(c){var l=a.getRowFromChildElem(this);if(l&&a.isRowEnabled(l)&&(c.preventDefault(),(l=a.getTouchData(c))&&
0<l.length)){dc=!0;var p=e(function(){dc=!1;e.cancel(p)},750);Gb=fb({x:l[0].pageX,y:l[0].pageY});a.closeFilterWindow();l=Gb;if((l=a.getRowAt(l.x,l.y))&&a.isRowEnabled(l)){var q=angular.element(this);a.mouseButtonStatus(!0);Ca=l;var f=a.getRowCurrentIndex(l),g=parseInt(a.getIndexFromElem(this),10),h=a.getCell(f,g),k=a.getCellType(h,g),m=null,n=a.options.editorSettings;q[0].focus();a.updateFocus(f,g);h&&(m=a.getColumnById(h[a.options.cellFields.cid]));!m&&0<=g&&g<a.columnList.length&&(m=a.columnList[g]);
var t="click"==a.options.editorSettings.activate;m&&m[a.options.columnFields.editorSettings]&&(n=m[a.options.columnFields.editorSettings],t=void 0!=n.activate?"click"==n.activate:t);h&&h!=d?a.closeEditor(d):a.closeEditor();switch(k){case "checkbox":break;case "combobox":a.rowSelection(l,c.shiftKey,c.ctrlKey,c.metaKey);h&&0!=h[a.options.cellFields.allowEdit]&&m&&t?Bb(angular.element(this),n,f,g):a.removeDropDownList();break;case "incell":a.rowSelection(l,c.shiftKey,c.ctrlKey,c.metaKey);!b&&h&&0!=h[a.options.cellFields.allowEdit]&&
t&&a.openInCellEditor(q,h,m);break;case "dropdown":a.rowSelection(l,c.shiftKey,c.ctrlKey,c.metaKey);!b&&h&&0!=h[a.options.cellFields.allowEdit]&&t&&a.openDropDownEditor(q,h,m);break;default:a.rowSelection(l,c.shiftKey,c.ctrlKey,c.metaKey),a.removeDropDownList(),h&&0!=h[a.options.cellFields.allowEdit]&&t&&sb(c,angular.element(this))}}}}),c.bind("touchmove",function(b){var c,l,p=a.getRowFromChildElem(this);if(p&&a.isRowEnabled(p)&&(p=a.getTouchData(b))&&0<p.length){db=fb({x:p[0].pageX,y:p[0].pageY});
var p=Math.abs(db.x-Gb.x),d=Math.abs(db.y-Gb.y),q=n[0].getBoundingClientRect();if(t.hitTest(db.x,db.y,q)){if(b.preventDefault(),C&&C.css("display","block"),!dc)if(!eb&&(2<p||2<d)&&Ca&&a.isRowEnabled(Ca))if(angular.element(this),a.labelEditStatus())b.preventDefault();else{eb=!0;t.clearData();if((p=a.getTouchData(b))&&0<p.length&&(fb({x:p[0].pageX,y:p[0].pageY}),Ca&&a.isRowEnabled(Ca)&&(Db(),a.isDragAllowed(Ca)))){a.dragDropStatus(!0);a.addDropMark();p={source:Ca,sourceCtrl:a,sourceCollection:a.rowsObj};
switch(a.options.selectionMode){case "multi-simple":p.source=a.options.selectedRows;break;case "multi-extended":p.source=a.options.selectedRows}t.setData(p);if(p=a.getCellElemFromRow(Ca))if(p=a.getContentElement(p))C.empty(),C.append(p.clone()),C.css("display","none"),n.append(C)}b.stopPropagation()}else if(eb&&(angular.element(this),b.preventDefault(),(d=a.getTouchData(b))&&0<d.length)){var p=Pc(),e=fb({x:d[0].pageX,y:d[0].pageY});if(d=a.getRowAt(e.x,e.y)){var f=a.getCellElemFromRow(d);if(f){var q=
f[0].getBoundingClientRect(),f=t.getDropPos({x:e.x-q.left,y:e.y-q.top},{x:0,y:0,width:f[0].offsetWidth,height:f[0].offsetHeight}),q=t.getData(),g=a.isDropAllowed(q.source,d,f);b={event:b,sourceTree:q.sourceCtrl?q.sourceCtrl.getCtrlName():"",dragRow:q.source,targetTree:a.getCtrlName(),targetRow:d,isDropAllowed:g,dropPos:f,mousePos:e};l=n[0].getBoundingClientRect();c=e.x-l.left;l=e.y-l.top;C.css("top",l-16+"px");C.css("left",c+"px");C.css("display","block");b=a.callDragOver(b);if(g&&0!=b){b=e.y+p.y+
16;p=e.x+p.x+20;e=a.getDropMarkWindow();e.empty();c="iui-drop-marker-move-in";switch(f){case 1:c="iui-drop-marker-move-up";break;case 2:c="iui-drop-marker-move-down"}e.append("<span class='"+c+"'></span><span class='iui-drop-marker-title'>"+d[a.options.rowFields.text]+"</span>");a.updateDropMarkElem(a.getDropMarkWindow(),{top:b,left:p});a.dropMark(g);t.setData({source:q.source,sourceList:q.sourceList,target:d,dropPos:f})}else a.dropMark(),C&&C.css("display","none")}}else q=n[0].getBoundingClientRect(),
d=q.top+y,q=q.bottom-O,I&&v&&(q-=v[0].offsetHeight),!a.options.allowDrop||e.y<d||e.y>q?(a.dropMark(),C&&C.css("display","none")):(l=n[0].getBoundingClientRect(),c=e.x-l.left,l=e.y-l.top,C.css("top",l-16+"px"),C.css("left",c+"px"),C.css("display","block"),d=t.getData(),q={source:d.source,sourceCtrl:d.sourceCtrl,target:null,dropPos:-1},t.setData(q),b={event:b,sourceTree:d.sourceCtrl?d.sourceCtrl.getCtrlName():"",dragRow:d.source,targetTree:a.getCtrlName(),targetRow:null,isDropAllowed:a.options.allowDrop,
dropPos:-1,mousePos:e},b=a.callDragOver(b),0==b?a.dropMark():(b=e.y+p.y+16,p=e.x+p.x+20,e=a.getDropMarkWindow(),e.empty(),e.append("<span class='iui-drop-marker-move-end'></span><span class='iui-drop-marker-title'>"+(k.name?k.name:"TreeGrid")+"</span>"),a.updateDropMarkElem(a.getDropMarkWindow(),{top:b,left:p}),a.dropMark(!0)))}}else b.preventDefault(),a.dropMark(),a.cancelScrollTimer(),C&&C.css("display","none")}}),c.bind("touchend",function(b){var c=a.getRowFromChildElem(this);if(c&&a.isRowEnabled(c)){if((c=
a.getTouchData(b))&&0<c.length){var c=fb({x:c[0].pageX,y:c[0].pageY}),l=n[0].getBoundingClientRect();if(t.hitTest(c.x,c.y,l))if(eb){angular.element(this);b.preventDefault();pa();a.dropMark();rb();if((c=a.getTouchData(b))&&0<c.length){var c=fb({x:c[0].pageX,y:c[0].pageY}),p=a.getRowAt(c.x,c.y);if(p){var l=t.getData(),d=l.source,q=a.isDropAllowed(d,p,l.dropPos);q&&(a.toggle(p,!0),d&&(c={event:b,sourceTree:l.sourceCtrl?l.sourceCtrl.getCtrlName():"",dragRow:d,targetTree:a.getCtrlName(),targetRow:p,isDropAllowed:q,
dropPos:l.dropPos,mousePos:c},c=a.callDragDrop(c),!1!==c&&(a.drop(l),k.$$phase||k.$apply())))}else a.dropMark(),p=n[0].getBoundingClientRect(),l=p.top+y,p=p.bottom-O,I&&v&&(p-=v[0].offsetHeight),c.y>=l&&c.y<=p&&(l=t.getData(),l.source&&(c={event:b,sourceTree:l.sourceCtrl?l.sourceCtrl.getCtrlName():"",dragRow:l.source,targetTree:a.getCtrlName(),targetRow:null,isDropAllowed:a.options.allowDrop,dropPos:-1,mousePos:c},c=a.callDragDrop(c),!1!==c&&(a.drop(l),k.$$phase||k.$apply())))}t.clearData();a.dragDropStatus(!1);
b.stopPropagation()}else a.mouseButtonStatus(!1),(c=a.getRowFromChildElem(this))&&a.isRowEnabled(c)&&a.updateSelection(b,c,b.shiftKey),Db()}c=eb;a.removeDropMark();rb();db={x:0,y:0};eb=!1;Ca=null;c&&b.stopPropagation()}}),c.bind("dblclick",function(c){var l=a.getRowFromChildElem(this);if(l&&a.isRowEnabled(l)){var p=angular.element(this);c.preventDefault();if(1===c.which){var d=a.getRowCurrentIndex(l),q=parseInt(a.getIndexFromElem(this),10),e=a.getCell(d,q),f=a.getCellType(e,q),g=null,h=a.options.editorSettings;
e&&(g=a.getColumnById(e[a.options.cellFields.cid]));!g&&0<=q&&q<a.columnList.length&&(g=a.columnList[q]);var k="dblclick"==a.options.editorSettings.activate;g&&g[a.options.columnFields.editorSettings]&&(h=g[a.options.columnFields.editorSettings],k=void 0!=h.activate?"dblclick"==h.activate:k);switch(f){case "checkbox":break;case "combobox":e&&0!=e[a.options.cellFields.allowEdit]&&g&&k?Bb(angular.element(this),h,d,q):a.removeDropDownList();break;case "incell":!b&&e&&0!=e[a.options.cellFields.allowEdit]&&
k&&a.openInCellEditor(p,e,g);break;case "dropdown":!b&&e&&0!=e[a.options.cellFields.allowEdit]&&k&&a.openDropDownEditor(p,e,g);break;default:a.removeDropDownList(),e&&0!=e[a.options.cellFields.allowEdit]&&k&&sb(c,angular.element(this),0)}0!=a.callRowDblClick(l,a.getMousePos(c))&&"checkbox"!=f&&"checkbox"!=f&&e&&!k&&(a.toggle(l),a.updateFocus(d,q))}c.stopPropagation()}}),c.bind("mouseenter",function(c){if(!ma){var l=a.getRowFromChildElem(this);if(l&&a.isRowEnabled(l)&&!la){var p=a.getRowCurrentIndex(l),
q=parseInt(a.getIndexFromElem(this),10);if(p=a.getCell(p,q))if(a.hoverCell=p,a.refresh(l),a.callCellHover(c,p),c=angular.element(this),p&&0!=p[a.options.cellFields.allowEdit])switch(q=a.getCellType(p,q),q){case "combobox":Ya||Yb(c);break;case "incell":b&&p==d||Ab(c,q);break;case "dropdown":b&&p!=d||Ab(c,q);break;default:Ha(),pb()}else Ha()}}}),c.bind("mouseleave",function(b){if(!ma&&(a.hoverCell=null,(b=a.getRowFromChildElem(this))&&a.isRowEnabled(b))){b=a.getRowCurrentIndex(b);var c=parseInt(a.getIndexFromElem(this),
10);a.getCell(b,c)&&(Ha(),pb())}}),c.bind("keydown",function(c){var l=a.getRowFromChildElem(this);if(l&&a.isRowEnabled(l)){var p=!0,q=angular.element(this);a.callKeyDown(c,l);var d=a.getRowCurrentIndex(l),e=parseInt(a.getIndexFromElem(this),10),f=a.getCell(d,e),g=a.getCellType(f,e),h=a.getColumnById(f[a.options.cellFields.cid]);!h&&0<=e&&e<a.columnList.length&&(h=a.columnList[e]);switch(c.keyCode){case 9:Hc(c,l,d,e);break;case 13:switch(g){case "checkbox":Qc(f,e);break;case "combobox":f&&0!=f[a.options.cellFields.allowEdit]?
h&&Bb(angular.element(this),h[a.options.columnFields.editorSettings],d,e):a.removeDropDownList();break;case "incell":!b&&f&&0!=f[a.options.cellFields.allowEdit]&&a.openInCellEditor(q,f,h);break;case "dropdown":!b&&f&&0!=f[a.options.cellFields.allowEdit]&&a.openDropDownEditor(q,f,h);break;default:f&&0!=f[a.options.cellFields.allowEdit]&&sb(c,angular.element(this),0)}break;case 16:a.updateSelectionStatus("shift");break;case 17:a.updateSelectionStatus("ctrl");break;case 27:p=!1;break;case 33:Ic(c,d,
e);break;case 34:Jc(c,d,e);break;case 35:Kc(c,d,e);break;case 36:Lc(c,d,e);break;case 37:Mc(c,l,d,e);break;case 32:Nc(c,l,f,e);break;case 38:bc(c,d,e);break;case 39:Oc(c,l,d,e);break;case 40:cc(c,d,e);break;default:(c.ctrlKey||c.metaKey)&&a.updateSelectionStatus("ctrl"),c.shiftKey&&a.updateSelectionStatus("shift")}p&&c.stopPropagation()}}),c.bind("keyup",function(b){var c=a.getRowFromChildElem(this);if(c&&a.isRowEnabled(c)){switch(b.keyCode){case 16:a.multiSelection(!1);break;case 17:a.multiSelection(!1);
break;default:b.ctrlKey||b.metaKey||a.multiSelection(!1),b.shiftKey||a.multiSelection(!1)}a.callKeyUp(b,c);b.stopPropagation()}}),c.bind("keypress",function(b){var c=a.getRowFromChildElem(this);c&&a.isRowEnabled(c)&&(a.callKeyPress(b,c),b.stopPropagation())}),c.bind("click",function(b){var c=a.getRowFromChildElem(this);if(c&&a.isRowEnabled(c)){if(1===b.which){var l=a.getRowCurrentIndex(c),p=parseInt(a.getIndexFromElem(this),10),l=a.getCell(l,p);a.callCellClick(b,c,l,a.getMousePos(b));a.callRowClick(b,
c,a.getMousePos(b))}b.stopPropagation()}}),c.bind("mousedown",function(c){a.closeFilterWindow();var l=a.getRowFromChildElem(this);if(l&&a.isRowEnabled(l)){var p=angular.element(this);a.mouseButtonStatus(!0);switch(c.which){case 1:var q=a.getRowCurrentIndex(l),e=parseInt(a.getIndexFromElem(this),10),f=a.getCell(q,e),g=a.getCellType(f,e),h=null,k=a.options.editorSettings;f&&(h=a.getColumnById(f[a.options.cellFields.cid]));!h&&0<=e&&e<a.columnList.length&&(h=a.columnList[e]);var m="click"==a.options.editorSettings.activate;
h&&h[a.options.columnFields.editorSettings]&&(k=h[a.options.columnFields.editorSettings],m=void 0!=k.activate?"click"==k.activate:m);f&&f!=d?a.closeEditor(d):a.closeEditor();switch(g){case "checkbox":break;case "combobox":a.rowSelection(l,c.shiftKey,c.ctrlKey,c.metaKey);f&&0!=f[a.options.cellFields.allowEdit]&&h&&m?Bb(angular.element(this),k,q,e):a.removeDropDownList();break;case "dropdown":a.rowSelection(l,c.shiftKey,c.ctrlKey,c.metaKey);!b&&f&&0!=f[a.options.cellFields.allowEdit]&&m&&a.openDropDownEditor(p,
f,h);break;case "incell":a.rowSelection(l,c.shiftKey,c.ctrlKey,c.metaKey);!b&&f&&0!=f[a.options.cellFields.allowEdit]&&m&&a.openInCellEditor(p,f,h);break;default:if("image"==g?0!=k.allowSelection:1)a.rowSelection(l,c.shiftKey,c.ctrlKey,c.metaKey),a.removeDropDownList(),f&&0!=f[a.options.cellFields.allowEdit]&&m&&sb(c,angular.element(this))}break;case 3:a.rowSelection(l,c.shiftKey,c.ctrlKey,c.metaKey),a.callRowRightClick(l,a.getMousePos(c))}c.stopPropagation()}}),c.bind("mouseup",function(b){a.mouseButtonStatus(!1);
if(1==b.which){var c=a.getRowFromChildElem(this);if(c&&a.isRowEnabled(c)){var l=a.getRowCurrentIndex(c),p=parseInt(a.getIndexFromElem(this),10),l=a.getCell(l,p),q=a.getCellType(l,p),d=null,e=a.options.editorSettings;l&&(d=a.getColumnById(l[a.options.cellFields.cid]));!d&&0<=p&&p<a.columnList.length&&(d=a.columnList[p]);d&&d[a.options.columnFields.editorSettings]&&(e=d[a.options.columnFields.editorSettings]);("image"==q?0!=e.allowSelection:1)&&a.updateSelection(b,c,b.shiftKey)}Db()}}),c.bind("focus",
function(c){var l=a.getRowFromChildElem(this);if(l&&a.isRowEnabled(l)){var p=a.getRowCurrentIndex(l),d=parseInt(a.getIndexFromElem(this),10),p=a.getCell(p,d);a.callGotFocus(c,l,p);if(p&&0!=p[a.options.cellFields.allowEdit])switch(c=angular.element(this),d=a.getCellType(p,d),d){case "combobox":Ya||Yb(c);break;case "incell":b||Ab(c,d);break;case "dropdown":b||Ab(c,d);break;default:Ha()}else Ha()}}),c.bind("blur",function(b){var c=a.getRowFromChildElem(this);if(c&&a.isRowEnabled(c)){var l=a.getRowCurrentIndex(c),
p=parseInt(a.getIndexFromElem(this),10),l=a.getCell(l,p);a.callLostFocus(b,c,l)}}))},Ec=function(a){a&&a.unbind("blur click dragstart dragover drop dragenter dragleave dblclick focus keydown keypress keyup mouseenter mouseleave mousemove mousedown mouseup touchstart touchmove touchend")};a.getTopRow=function(){return a.isRowIndexInRange(E-1)?a.currentList[E]:0<a.currentList.length?a.currentList[0]:null};a.getFooterElem=function(a){switch(a){case "left":return ja;case "right":return Y}return ra};a.getHeaderElem=
function(a){switch(a){case "left":return Z;case "right":return S}return ea};a.getRowElems=function(a){switch(a){case "left":return Ia?Ia.find("tr"):null;case "right":return Ja?Ja.find("tr"):null}return fa?fa.find("tr"):null};var Hc=function(b,c,d,e){var f=a.currentList.length;0<f&&(b.shiftKey?g.isEqual(c[a.options.rowFields.id],a.currentList[0][a.options.rowFields.id])||bc(b,d,e):g.isEqual(c[a.options.rowFields.id],a.currentList[f-1][a.options.rowFields.id])||cc(b,d,e))},cc=function(b,c,d){b.preventDefault();
focusDelayTime=0;var r=c,f=E+ga-2,f=f<a.currentList.length-1?f:a.currentList.length-1;r>=f&&K&&(a.setScrollPos({x:a.scrollPos.x,y:a.scrollPos.y+Math.floor(n[0].clientHeight/4)}),focusDelayTime=1);if(r=a.getNextRow(r)){c=a.getRowCurrentIndex(r);c>f&&K&&(a.ensureVisible(r,"bottom"),focusDelayTime=100);a.rowSelection(r,b.shiftKey,b.ctrlKey,b.metaKey);var g=e(function(){a.updateFocus(c,d);e.cancel(g)},focusDelayTime)}},bc=function(b,c,d){b.preventDefault();focusDelayTime=0;var r=E,r=0<r?r:0;c==r&&K&&
(a.setScrollPos({x:a.scrollPos.x,y:a.scrollPos.y-Math.floor(n[0].clientHeight/4)}),focusDelayTime=1);var f=a.getPrevRow(c);if(f){c=a.getRowCurrentIndex(f);c<r&&K&&(a.ensureVisible(f,"bottom"),focusDelayTime=100);a.rowSelection(f,b.shiftKey,b.ctrlKey);var g=e(function(){a.updateFocus(c,d);e.cancel(g)},focusDelayTime)}},Oc=function(b,c,d,r){b.preventDefault();if((void 0===r||0<=r&&r==a.options.expandColIndex)&&!a.isRowExpanded(c)&&c[a.options.rowFields.rows]&&0<c[a.options.rowFields.rows].length)a.toggle(c,
!0),a.updateFocus(d,r);else if(0<=r){focusDelayTime=0;var f=r+1;b=a.columnList.length-1;f===b&&(focusDelayTime=1);if(0<=f&&f<=b){b=g.getPageRect(n);c=a.getElemFromCell(d,f);c=g.getPageRect(c);c.left+c.width>b.left+b.width&&(b=a.scrollPos,b.x+=c.width,a.setScrollPos(b));var h=e(function(){a.updateFocus(d,f);e.cancel(h)},focusDelayTime)}}},Mc=function(b,c,d,r){b.preventDefault();if((void 0===r||0<=r&&r==a.options.expandColIndex)&&a.isRowExpanded(c)&&c[a.options.rowFields.rows]&&0<c[a.options.rowFields.rows].length)a.toggle(c,
!1),a.updateFocus(d,r);else if(0<=r){focusDelayTime=0;var f=1<r?r-1:0;if(0<=f){b=g.getPageRect(n);c=a.getElemFromCell(d,f);c=g.getPageRect(c);c.left<b.left&&(b=a.scrollPos,b.x-=c.width,a.setScrollPos(b));var h=e(function(){a.updateFocus(d,f);e.cancel(h)},focusDelayTime)}}},Ic=function(b,c,d){b.preventDefault();var r=c-ga,r=0<r?r:0;if(r!==c){focusDelayTime=1;var f=a.getPrevRow(r+1);if(f){a.scrollTo(f);a.rowSelection(f,b.shiftKey,b.ctrlKey,b.metaKey);k.$apply();var g=e(function(){a.updateFocus(a.getRowCurrentIndex(f),
d);e.cancel(g)},focusDelayTime)}}},Jc=function(b,c,d){b.preventDefault();var r=c+ga;a.options.showHeader&&r--;a.options.showFooter&&r--;r=r<a.currentList.length-1?r:a.currentList.length-1;if(r!==c){focusDelayTime=1;var f=a.getNextRow(r-1);if(f){a.scrollTo(f,"bottom");a.rowSelection(f,b.shiftKey,b.ctrlKey,b.metaKey);k.$apply();var g=e(function(){a.updateFocus(a.getRowCurrentIndex(f),d);e.cancel(g)},focusDelayTime)}}},Kc=function(b,c,d){b.preventDefault();a.setScrollPos({x:a.scrollPos.x,y:L.y});var f=
a.getLastRow();if(f){a.rowSelection(f,b.shiftKey,b.ctrlKey,b.metaKey);var g=e(function(){a.updateFocus(a.getRowCurrentIndex(f),d);e.cancel(g)},1)}},Lc=function(b,c,d){b.preventDefault();a.setScrollPos({x:a.scrollPos.x,y:0});var f=a.getFirstRow();if(f){a.rowSelection(f,b.shiftKey,b.ctrlKey,b.metaKey);var g=e(function(){a.updateFocus(a.getRowCurrentIndex(f),d);e.cancel(g)},1)}},Qc=function(b,c){if(b&&0!=b[a.options.cellFields.allowEdit]){var d=a.getColumnById(b[a.options.cellFields.cid]);!d&&0<=c&&
c<a.columnList.length&&(d=a.columnList[c]);if(d){var e=b[a.options.cellFields.value];if((d=d[a.options.columnFields.editorSettings])&&1==d.threeState)switch(g.isString(e)||(e="unchecked"),e){case "checked":e="unchecked";break;case "indeterminate":e="checked";break;default:e="indeterminate"}else e=g.isBoolean(e)?!e:!0;b[a.options.cellFields.value]=e;k.$apply()}}},Nc=function(b,c,d,e){b.preventDefault();Qc(d,e);a.rowSelection(c,b.shiftKey,b.ctrlKey,b.metaKey,c.selected);k.$apply()},fa=null,sa=angular.element('<div class="iui-treegrid-block iui-treegrid-block-top"></div>'),
ea=null,Da=angular.element('<div class="iui-treegrid-block iui-treegrid-block-left"></div>'),Q=0,gb=0,Z=null,ja=null,Ia=null,ta=angular.element('<div class="iui-treegrid-block iui-treegrid-block-right"></div>'),ua=0,hb=0,S=null,Y=null,Ja=null,na=angular.element('<div class="iui-treegrid-block iui-treegrid-block-bottom"></div>'),ra=null,E=0,D=null,w=null,H=100,T=0,ga=0,Sa=0,Hb=0,y=0,O=0,ib=0,Ib=!1,ma=!1,vb=9,wb=9,Jb=0,va=0,Ka=0,Ta=1,Kb=0,Lb=0,La=0,jb=0,Mb=1,N=null,U=null,I=!1,K=!1;this.scrollMousePos=
null;var L={x:0,y:0},Za=[];k.verScrollVisibility=!1;k.$watch("verScrollVisibility",function(b,c){b!=c&&a.updateCurrentLayout(!0)});a.getColumnWidth=function(b){var c=100;b&&b[a.options.columnFields.width]&&(c=b[a.options.columnFields.width],g.isPercent(c)?(b=n[0].clientWidth-2*a.columnList.length,K&&J&&(b-=J[0].offsetWidth),c=Math.floor(parseInt(c,10)/100*b)):g.isString&&(c=parseInt(c,10)));return c};var xb=function(b){var c=0;if((b=a.getRowElems(b))&&0<b.length&&(b=angular.element(b[0]))&&(b=b.find("td"))&&
0<b.length)for(var d=0;d<b.length;d++)var e=angular.element(b[d]),c=c+e[0].offsetWidth;return c},pd=function(){var b=0;if(a.options.showHeader||a.options.showFooter){var c=a.options.showHeader?a.getHeaderElem():a.getFooterElem();if(c&&(c=c.find("td"))&&0<c.length)for(var d=0;d<c.length;d++)var e=angular.element(c[d]),b=b+e[0].offsetWidth;a.isThereLeftFixedColumns&&(Z?Q=Z[0].offsetWidth:ja&&(Q=ja[0].offsetWidth),b+=Q);a.isThereRightFixedColumns&&(S?ua=S[0].offsetWidth:Y&&(ua=Y[0].offsetWidth),b+=ua)}else 0<
a.currentList.length&&(fa&&(b+=xb()),a.isThereLeftFixedColumns&&(b+=xb("left")),a.isThereRightFixedColumns&&(b+=xb("right")));return b};a.updateScrollVisibility=function(){var a=e(function(){I||(v.css("display","none"),L.x=0);K||(J.css("display","none"),L.y=0);I&&K||xa.css("display","none");e.cancel(a)},1)};n.append(v);n.append(J);n.append(xa);a.updateScrollVisibility();a.updateViewSize=function(b){var c=e(function(){ib=0;var b=n[0].clientWidth;K&&J&&(b-=J[0].offsetWidth);I=!1;0<a.columnList.length&&
(ib+=pd(),ib>b&&(v.unbind("mousedown"),v.css("display","block"),v.bind("mousedown",function(b){if(a.options.enabled){a.removeDropDownList();a.closeFilterWindow();a.closeEditor();b=g.getClientMousePos(b,this);var c=Math.floor(n[0].clientWidth);N&&(b.x<N[0].offsetLeft?a.setScrollPos({x:a.scrollPos.x-c,y:a.scrollPos.y}):b.x>N[0].offsetLeft+N[0].offsetWidth&&a.setScrollPos({x:a.scrollPos.x+c,y:a.scrollPos.y}))}}),N=angular.element(v.children().eq(0)),I=!0,N.bind("mousedown",function(b){a.options.enabled&&
(a.removeDropDownList(),a.closeFilterWindow(),a.closeEditor(),1===b.which&&(A.scrollMousePos=a.getMousePos(b),Ib=!0));b.stopPropagation()})));K=!1;k.verScrollVisibility=!1;0<a.currentList.length&&(b=0,a.options.paging.enabled&&V&&(b=V[0].offsetHeight),b=n[0].clientHeight-b-(y+O),I&&v&&(b-=v[0].offsetHeight),H=0<T?Math.floor(b/T)+1:0<y?Math.floor(b/y):100,H<a.currentList.length+1&&(J.unbind("mousedown"),J.css("display","block"),J.bind("mousedown",function(b){if(a.options.enabled){a.removeDropDownList();
a.closeFilterWindow();a.closeEditor();b=g.getClientMousePos(b,this);var c=Math.floor(n[0].clientHeight);U&&(b.y<U[0].offsetTop?(a.setScrollPos({x:a.scrollPos.x,y:a.scrollPos.y-c}),Fb(!1,c)):b.y>U[0].offsetTop+U[0].offsetHeight&&(a.setScrollPos({x:a.scrollPos.x,y:a.scrollPos.y+c}),Fb(!0,c)))}}),U=angular.element(J.children().eq(0)),K=!0,k.verScrollVisibility=!0,U.bind("mousedown",function(b){a.options.enabled&&(a.removeDropDownList(),a.closeFilterWindow(),a.closeEditor(),1===b.which&&(A.scrollMousePos=
a.getMousePos(b),ma=!0));b.stopPropagation()})));I||(v.unbind("mousedown"),L.x=0);K||(J.unbind("mousedown"),L.y=0);I&&K&&v.css("display","block");e.cancel(c);!I&&0<a.scrollPos.x&&a.setScrollPos({x:0,y:a.scrollPos.y});!K&&0<a.scrollPos.y&&a.setScrollPos({x:a.scrollPos.x,y:0})},1)};a.updateScrollView=function(){ec()};var ec=function(){var b=e(function(){var c=0;a.options.paging.enabled&&V&&(c=V[0].offsetHeight);Sa=n[0].offsetWidth-2;Hb=n[0].offsetHeight-2-c;I&&(Hb-=v[0].offsetHeight);K&&(Sa-=J[0].offsetWidth);
X.css("width",Sa+"px");X.css("height",Hb+"px");I&&(v.css("left","0px"),v.css("bottom",c+"px"),v.css("width",Sa-2+"px"));var d=2;a.options.paging.enabled&&V&&(d=4);K&&(J.css("top","0px"),J.css("right","0px"),J.css("height",Hb-d+"px"));I&&K&&(xa.css("left","auto"),xa.css("right","0px"));var f=e(function(){I&&Sa<ib&&(va=2,Ka=v[0].clientWidth-4,Jb=0,Ka>va&&(Jb=Ka-va),vb=Math.floor(Jb*Sa/ib),9>vb&&(vb=9),N.css("width",vb+"px"),L.x=ib-Sa,Ta=L.x/(Jb-vb-2));var b=a.currentList.length+1;K&&0<a.currentList.length&&
H<b&&(La=2,jb=J[0].clientHeight-4,Kb=0,jb>La&&(Kb=jb-La),wb=Math.floor(Kb*H/b),9>wb&&(wb=9),U.css("height",wb+"px"),Mb=(b-H+1)/(Kb-wb-2),L.y=Math.floor((b-H+1)*T),0>L.y&&(L.y=0),0==E?U.css("top",La+"px"):E+H-1==a.currentList.length&&U.css("top",jb-U[0].offsetHeight+"px"));a.isThereLeftFixedColumns&&(Z?Q=Z[0].offsetWidth:ja?Q=ja[0].offsetWidth:0<a.currentList.length&&(Q=xb("left")),gb=n[0].clientHeight-c-y-O,I&&(gb-=v[0].offsetHeight),Da.css("top",y+"px"),Da.css("width",Q+"px"),Da.css("height",gb+
"px"),ea&&ea.css("left",Q+"px"),fa&&fa.css("left",Q+"px"),ra&&ra.css("left",Q+"px"));a.isThereRightFixedColumns&&(S?ua=S[0].offsetWidth:Y?ua=Y[0].offsetWidth:0<a.currentList.length&&(ua=xb("right")),hb=n[0].clientHeight-c-y-O,I&&(hb-=v[0].offsetHeight),b=0,K&&(b=J[0].offsetWidth),S&&S.css("right",b+"px"),ta.css("top",y+"px"),ta.css("right",b+"px"),ta.css("width",ua+"px"),ta.css("height",hb+"px"),Y&&Y.css("right",b+"px"));b=c;I&&v&&(b+=v[0].offsetHeight);na.css("bottom",b+"px");b=a.scrollPos.x;void 0!=
b&&(0>b&&(b=0),b>L.x&&(b=L.x),a.scrollPos.x=b,b=!1!==a.options.rtl?Math.floor(a.scrollPos.x/Ta)-(Ka-N[0].offsetWidth-va):Math.floor(a.scrollPos.x/Ta)+va,I&&N&&N.css("left",b+"px"),fc());e.cancel(f)},1);e.cancel(b)},5)};a.updateColumnWidth=function(){if(a.options.fillSpace){for(var b=0,c=0;c<a.columnList.length;c++)b+=a.getColumnWidth(a.columnList[c])+4;if(b<n[0].clientWidth){for(var b=(n[0].clientWidth-b)/a.columnList.length,d,c=0;c<a.columnList.length;c++)d=a.getColumnWidth(a.columnList[c])+b,a.columnList[c][a.options.columnFields.width]=
d;return!0}}return!1};k.onCellValueChanging=function(b,c,d){var e=c+E,f=a.getCell(e,d);if(f&&0==f[a.options.cellFields.allowEdit])return!1;var f=!0,g=a.getColumnObject(d),h="label",k=null;g&&(h=g[a.options.columnFields.editorType],k=g[a.options.columnFields.editorSettings]);switch(h){case "checkbox":b=k&&1==k.threeState?b.checkState:b.checked;f=a.callCellValueChanging(a.getRowObject(e),a.getCellObject(e,d),b);break;case "combobox":f=a.callCellValueChanging(a.getRowObject(c),a.getCellObject(c,d),b.item)}return f};
k.onCellValueChanged=function(b,c,d){var e=c+E,f=a.getColumnObject(d),g="label",h=null;f&&(g=f[a.options.columnFields.editorType],h=f[a.options.columnFields.editorSettings]);switch(g){case "checkbox":b=h&&1==h.threeState?b.checkState:b.checked;a.callCellValueChanged(a.getRowObject(e),a.getCellObject(e,d),b);break;case "combobox":if(e=a.getCell(c,d))e[a.options.cellFields.value]=b.item,k.$apply();a.removeDropDownList(!0);a.updateFocus(c,d);a.callCellValueChanged(a.getRowObject(c),a.getCellObject(c,
d),b.item)}};k.onEditorClick=function(b,c,d){c+=E;var e=a.getColumnObject(d),f="label";e&&(f=e[a.options.columnFields.editorType]);switch(f){case "checkbox":a.callCellClick(b,a.getRowObject(c),a.getCellObject(c,d),a.getMousePos(b))}};a.setDefaultCellValue=function(b,c,d){if(void 0==b[a.options.cellFields.value]){var e=void 0;switch(c){case "checkbox":e=d&&1==d.threeState?"unchecked":!1;break;case "image":e=""}void 0!=e&&(b[a.options.cellFields.value]=e)}};a.getColumnTemplateUrl=function(b,c){return c?
b[a.options.columnFields.templateSettings].footer?b[a.options.columnFields.templateSettings].footer.url:null:b[a.options.columnFields.templateSettings].header?b[a.options.columnFields.templateSettings].header.url:null};var kb=function(b,c){c=void 0==c?"none":c;for(var d='<table cellpadding="0" cellspacing="0" style="position:absolute;',d=(b?d+'bottom:0;">':d+'top:0;">')+"<tr>",e,f=0;f<a.columnList.length;f++)e=a.columnList[f][a.options.columnFields.fixed],e=void 0==e?"none":e,e==c&&(b?(d+='<td iui-class="{{data['+
f+'].style.footer.general}}" data-index="'+f+'" data-element="column-footer">',d+='<div iui-class="{{data['+f+'].style.footer.cell}}" data-element="column-footer-cell"'):(d+='<td iui-class="{{data['+f+'].style.header.general}}" data-index="'+f+'" data-element="column-header">',d+='<div iui-class="{{data['+f+'].style.header.cell}}" data-element="column-header-cell"'),d+=' iui-contextmenu menu-items="data['+f+"].column."+a.options.columnFields.contextMenu+'"',b?(d+=' iui-style="overflow:hidden;width:{{data['+
f+"].width}}px;text-align:{{data["+f+"].footerAlignment}};",d=f==a.options.expandColIndex?d+("padding-left:{{data["+f+'].indent}}px;">'):d+'">',a.columnList[f][a.options.columnFields.templateSettings]&&a.getColumnTemplateUrl(a.columnList[f],!0)?(d+='<iui-item-content obj="data['+f+"].column."+a.options.columnFields.templateSettings+'.footer.templateObj" template-url="{{data['+f+"].column."+a.options.columnFields.templateSettings+'.footer.url}}"',d+=' data-element="footer-template-content" ng-cloak></iui-item-content>'):
a.columnList[f][a.options.columnFields.footerContent]?d+=a.columnList[f][a.options.columnFields.footerContent]:a.columnList[f][a.options.columnFields.footerTemplate]?d+='<div ng-include="'+a.columnList[f][a.options.columnFields.footerTemplate]+'" style="margin:0;padding:0"></div>':(d+='<span iui-class="{{data['+f+'].style.footer.content}}" data-element="cell-content"',d+=' iui-tooltip="data['+f+"].column."+a.options.columnFields.footerTooltip+'">',d+="{{data["+f+"].column."+a.options.columnFields.footerText+
"}}</span>")):(d+=' iui-style="overflow:hidden;width:{{data['+f+"].width}}px;text-align:{{data["+f+"].headerAlignment}};",d=f==a.options.expandColIndex?d+("padding-left:{{data["+f+'].indent}}px;">'):d+'">',d+='<span iui-class="{{data['+f+'].style.header.content}}" data-element="cell-content"',d+=' iui-tooltip="data['+f+"].column."+a.options.columnFields.headerTooltip+'">',d+="{{data["+f+"].column."+a.options.columnFields.headerText+"}}</span>",d+='<span iui-class="{{data['+f+'].style.filtering}}" data-index="'+
f+'" data-element="filter-button" ng-show="data['+f+'].showFiltering"></span>',d+='<span iui-class="{{data['+f+'].style.sorting}}" data-index="'+f+'" data-element="sort-button" ng-show="data['+f+'].showSorting"></span>'),d+="</div>",d+="</td>");return d+"</tr></table>"},lb=function(b,c,d){c=void 0==c?"none":c;var e,f='<tr iui-class="{{data['+b+'].style}}" data-index="{{data['+b+'].index}}" tabindex="{{data['+b+'].tabindex}}"';d&&(f+=' style="position:absolute;top:-9999px"');f+=">";for(d=0;d<a.columnList.length;d++)if(e=
a.columnList[d][a.options.columnFields.fixed],e=void 0==e?"none":e,e==c){f+='<td iui-class="{{data['+b+"].cells["+d+'].style.cell}}" data-element="cell" data-index="'+d+'" draggable="{{data['+b+'].draggable}}" tabindex="{{data['+b+"].cells["+d+'].tabindex}}">';f+='<div ng-show="data['+b+'].visible"';f+=' iui-class="{{data['+b+"].cells["+d+'].style.content}}" data-element="cell-content"';f+=' iui-contextmenu menu-items="data['+b+"].row."+a.options.rowFields.contextMenu+'" menu-update="{{data['+b+'].updateContextMenu}}"';
f+=' iui-style="width:{{data['+b+"].cells["+d+"].width}}px;text-align:{{data["+b+"].cells["+d+"].alignment}};";0<a.options.rowHeight&&(f+="height:"+a.options.rowHeight+"px;");f=d==a.options.expandColIndex?f+("padding-left:{{data["+b+"].cells["+d+'].indent}}px;">'):f+'">';e=b;var h=d,k="";h===a.options.expandColIndex&&(k=k+('<span iui-class="{{data['+e+'].expandBox}}" data-element="expandbox"></span>')+('<span iui-class="{{data['+e+'].icon}}" data-element="icon" ng-show="data['+e+'].iconVisible"></span>'));
var m=a.columnList[h][a.options.columnFields.editorSettings],n=Nb(h);switch(a.columnList[h][a.options.columnFields.editorType]){case "checkbox":k+='<iui-checkbox name="cb-'+g.getUniqueId(4)+'"';m&&1==m.threeState?(k+=' check-state="data['+e+"].cells["+h+"].related."+a.options.cellFields.value+'"',k=k+(' checkstate-changing="onCellValueChanging(e, '+e+", "+h+')"')+(' checkstate-changed="onCellValueChanged(e, '+e+", "+h+')"')+' three-state="true"'):(k+=' checked="data['+e+"].cells["+h+"].related."+
a.options.cellFields.value+'"',k=k+(' checked-changing="onCellValueChanging(e, '+e+", "+h+')"')+(' checked-changed="onCellValueChanged(e, '+e+", "+h+')"'));k+=' click="onEditorClick(e, '+e+", "+h+')"';m&&m.style&&(k+=' control-style="data['+e+"].cells["+h+'].editorStyle"');k=k+(' enabled="data['+e+"].cells["+h+'].enabled"')+(' style="vertical-align:middle;" iui-show="{{data['+e+"].cells["+h+'].visible}}"')+(' iui-tooltip="data['+e+"].cells["+h+"].related."+a.options.cellFields.tooltip+'">');k+="</iui-checkbox>";
break;case "combobox":k=k+('<span iui-class="{{data['+e+"].cells["+h+'].style.label}}" data-element="content"')+(' iui-tooltip="data['+e+"].cells["+h+"].related."+a.options.cellFields.tooltip+'">');k+="{{data["+e+"].cells["+h+"].related."+a.options.cellFields.value+".text}}";k+="</span>";break;case "image":k+='<img data-element="image" style="vertical-align:middle" ng-src="{{data['+e+"].cells["+h+"].related."+a.options.cellFields.value+'}}"  iui-show="{{data['+e+"].cells["+h+'].visible}}" show-default="true"';
k+=' iui-tooltip="data['+e+"].cells["+h+"].related."+a.options.cellFields.tooltip+'">';break;default:n&&""!=n?k+='<iui-item-content obj="data['+e+"].cells["+h+"].related."+a.options.cellFields.templateObj+'" template-url="{{data['+e+"].cells["+h+'].templateUrl}}" iui-show="{{data['+e+"].cells["+h+'].templateVisible}}" data-element="template-content"></iui-item-content>':(k=k+('<span iui-class="{{data['+e+"].cells["+h+'].style.label}}" data-element="content"')+(' iui-tooltip="data['+e+"].cells["+h+
"].related."+a.options.cellFields.tooltip+'">'),k+="{{data["+e+"].cells["+h+"].related."+a.options.cellFields.text+"}}",k+="</span>")}f+=k;f+="</div>";f+="</td>"}return f+"</tr>"},qd=function(){T=0;if(0<a.options.rowHeight){var b={top:0,bottom:0};if(a.options.controlStyle&&a.options.controlStyle.row&&a.options.controlStyle.row.cell&&a.options.controlStyle.row.cell.content){var d=angular.element('<div class="'+a.options.controlStyle.row.cell.content+'" style="position:absolute;top:-9999999px;">Temp</div>');
n.append(d);b=g.getPadding(d[0]);d.remove()}T=a.options.rowHeight+b.top+b.bottom+3}else if(0<a.currentList.length&&w){for(var b=[],f=[],d=[],r=[],h=[],k=[],m=0,t=0;t<a.currentList.length&&10>t;t++)b.push(lb(t,"none",!0)),f.push(c(b[t])(w)),n.append(f[t]),a.isThereLeftFixedColumns&&(d.push(lb(t,"left",!0)),r.push(c(d[t])(w)),n.append(r[t])),a.isThereRightFixedColumns&&(h.push(lb(t,"right",!0)),k.push(c(h[t])(w)),n.append(k[t])),m++;if(0<m)var u=e(function(){for(var b=0,c=0,d=0,l=0;l<m;l++)b+=f[l][0].offsetHeight,
f[l].remove(),a.isThereLeftFixedColumns&&(c+=r[l][0].offsetHeight,r[l].remove()),a.isThereRightFixedColumns&&(d+=k[l][0].offsetHeight,k[l].remove());T=Math.floor(Math.max(Math.max(b,c),d)/m);e.cancel(u)},1)}},F=null,gc=0,hc=0,V=angular.element('<div class="iui-pagination-panel"></div>'),rd=function(){F&&F.$destroy();V.empty();V.remove();hc=gc=0;if(a.options.paging.showControlPanel){F=k.$new();F.currentPage=0;F.minPages=0;F.numPages=a.pageList.length;0<F.numPages&&0==F.currentPage&&(F.currentPage=
1);F.onFirstPage=function(){a.options.enabled&&(a.firstPage(),F.currentPage=a.currentPageNumber)};F.onLastPage=function(){a.options.enabled&&(a.lastPage(),F.currentPage=a.currentPageNumber)};F.onNextPage=function(){a.options.enabled&&(a.nextPage(),F.currentPage=a.currentPageNumber)};F.onPrevPage=function(){a.options.enabled&&(a.prevPage(),F.currentPage=a.currentPageNumber)};F.$watch("currentPage",function(b,c){a.options.enabled&&b!=c&&1<=b&&b<=a.pageList.length&&a.setCurrentPage(b)});gc=n[0].clientWidth;
var b="iui-pagination-panel-button";a.options.enabled||(b+=" iui-pagination-panel-button-disabled");for(var d="",e=0;6>e;e++)switch(e){case 0:d+='<span class="'+b+' iui-pagination-first" ng-click="onFirstPage()"></span>';break;case 1:d+='<span class="'+b+' iui-pagination-prev" ng-click="onPrevPage()"></span>';break;case 2:d+='<input class="iui-pagination-panel-input" ng-model="currentPage" type="number" ng-attr-min="{{minPages}}" ng-attr-max="{{numPages}}" />';break;case 3:d+='<span class="iui-pagination-panel-label"> / {{numPages}}</span>';
break;case 4:d+='<span class="'+b+' iui-pagination-next" ng-click="onNextPage()"></span>';break;case 5:d+='<span class="'+b+' iui-pagination-last" ng-click="onLastPage()"></span>'}b=c(d)(F);V.append(b);n.append(V);V.css("width",gc+"px");b&&(g.getMargin(b[0]),d=g.getPadding(V[0]),hc=b[0].offsetHeight+(d.top+d.bottom)-2,V.css("height",hc+"px"));a.updatePaginationPanel()}};a.updatePaginationPanel=function(){var b=1;a.options.enabled||(b=.5);if(V){var c=V.find("span"),d;if(c&&0<c.length)for(var e=0;e<
c.length;e++)d=angular.element(c[e]),d.css("opacity",b);(c=V.find("input"))&&0<c.length&&(d=angular.element(c[0]),a.options.enabled?d.removeAttr("disabled"):d.attr("disabled","true"))}};a.resetPageNumber=function(){a.currentPageNumber=1;F&&(F.currentPage=0<F.numPages?1:0)};a.updatePageNumber=function(){a.currentPageNumber>a.pageList.length&&(0==a.pageList.length?a.resetPageNumber():(a.currentPageNumber=a.pageList.length,F&&(F.currentPage=a.currentPageNumber)))};var Ua=angular.element('<div class="iui-treegrid-block" style="position:absolute;top:-9999999px"></div>'),
ha=angular.element('<div class="iui-treegrid-block iui-treegrid-block-top" style="position:absolute;top:-9999999px"></div>'),ka=angular.element('<div class="iui-treegrid-block iui-treegrid-block-bottom" style="position:absolute;top:-9999999px"></div>'),Ma=angular.element('<div class="iui-treegrid-block iui-treegrid-block-left" style="position:absolute;top:-9999999px"></div>'),Na=angular.element('<div class="iui-treegrid-block iui-treegrid-block-right" style="position:absolute;top:-9999999px"></div>'),
Rc=function(){Ua&&(Ua.empty(),Ua.remove());ha&&(ha.empty(),ha.remove());ka&&(ka.empty(),ka.remove());Ma&&(Ma.empty(),Ma.remove());Na&&(Na.empty(),Na.remove())},sd=function(){if(1<a.updateStatus)M("end");else var b=e(function(){if(0<a.columnList.length&&1==a.updateStatus){D=k.$new();D.data=Sc();a.refreshColumns();D.$apply();var d;for(d=O=y=0;d<a.columnList.length;d++){var f={columnID:void 0!=a.columnList[d][a.options.columnFields.id]?a.columnList[d][a.options.columnFields.id]:d,avgItemHeight:0};switch(a.columnList[d][a.options.columnFields.editorType]){case "combobox":id(a.columnList[d].editorSettings,
d,f);Za.push(f);break;default:Za.push(f)}}a.options.showHeader&&(n.append(ha),aa&&(sa.css("opacity",W.opacity),ha.css("opacity",W.opacity)),d=kb(),ea=angular.element(c(d)(D)),ha.append(ea),a.isThereLeftFixedColumns&&(d=kb(!1,"left"),Z=c(d)(D),ha.append(Z),Z.css("z-index","2"),Z.addClass("iui-treegrid-column-header-left")),a.isThereRightFixedColumns&&(d=kb(!1,"right"),S=c(d)(D),ha.append(S),S.css("right","0"),S.css("z-index","1"),S.addClass("iui-treegrid-column-header-right")));a.options.showFooter&&
(n.append(ka),aa&&(na.css("opacity",W.opacity),ka.css("opacity",W.opacity)),d=kb(!0),ra=c(d)(D),ka.append(ra),a.isThereLeftFixedColumns&&(d=kb(!0,"left"),ja=c(d)(D),ka.append(ja),ja.css("z-index","2"),ja.addClass("iui-treegrid-column-footer-left")),a.isThereRightFixedColumns&&(d=kb(!0,"right"),Y=c(d)(D),ka.append(Y),Y.css("right","0"),Y.css("z-index","1"),Y.addClass("iui-treegrid-column-footer-right")));var g,h;d=-1;for(f=0;f<a.columnList.length;f++)if(h=g=null,a.columnList[f][a.options.columnFields.templateSettings]&&
a.getColumnTemplateUrl(a.columnList[f])?(g=a.columnList[f][a.options.columnFields.templateSettings].header,d=1):a.columnList[f][a.options.columnFields.headerContent]?(g=a.columnList[f][a.options.columnFields.headerContent],d=2):a.columnList[f][a.options.columnFields.headerTemplate]&&(g=a.columnList[f][a.options.columnFields.headerTemplate],d=3),a.columnList[f][a.options.columnFields.templateSettings]&&a.getColumnTemplateUrl(a.columnList[f],!0)?h=a.columnList[f][a.options.columnFields.templateSettings].footer:
a.columnList[f][a.options.columnFields.footerContent]?h=a.columnList[f][a.options.columnFields.footerContent]:a.columnList[f][a.options.columnFields.footerTemplate]&&(h=a.columnList[f][a.options.columnFields.footerTemplate]),(g||h)&&(h=a.getElemFromColumn(a.columnList[f],a.columnList[f][a.options.columnFields.fixed]))&&g&&g&&(h=a.getChildElement(h,"column-header-cell")))switch(h.empty(),d){case 1:D&&(g='<iui-item-content obj="data['+f+"].column."+a.options.columnFields.templateSettings+'.header.templateObj" template-url="{{data['+
f+"].column."+a.options.columnFields.templateSettings+'.header.url}}" draggable="{{data['+f+'].draggable}}"',g+=' data-element="header-template-content" ng-cloak></iui-item-content>',h.append(c(g)(D)));break;case 2:h.append(c(g)(k.$parent));break;case 3:g='<div ng-include="'+g+'"',a.columnList[f][a.options.columnFields.headerTemplateModel]&&(g+=' onload="'+a.columnList[f][a.options.columnFields.headerTemplateModel]+'"'),g+=' style="margin:0;padding:0"></div>',h.append(c(g)(k.$parent))}oa(40);M("rows")}else oa(70),
M("scroll");e.cancel(b)},1)},td=function(){if(1<a.updateStatus)M("end");else var b=e(function(){var d=0;a.options.paging.enabled&&V&&(d=V[0].offsetHeight);if(0<a.columnList.length){var f=0;if(a.options.showHeader&&ea){y=ea[0].offsetHeight;a.isThereLeftFixedColumns&&Z?y=Z[0].offsetHeight:a.isThereRightFixedColumns&&S&&(y=S[0].offsetHeight);var g=0,h=ea.find("td");if(h&&0<h.length)for(var m=0;m<h.length;m++)var t=angular.element(h[m]),g=g+t[0].offsetWidth;g>n[0].clientWidth&&(g=angular.element('<div class="iui-scrollbar-horizontal"><div class="iui-scroll-button-thumb-horizontal"></div></div>'),
g.css("bottom","-9999px"),n.append(g),f=g[0].offsetHeight,g.remove());ha.css("width",n[0].clientWidth+"px");ha.css("height",y+"px");a.isThereLeftFixedColumns&&(Q=Z[0].offsetWidth,gb=n[0].clientHeight-y-O,ea.css("left",Q+"px"));a.isThereRightFixedColumns&&(ua=S[0].offsetWidth,hb=n[0].clientHeight-y-O)}a.options.showFooter&&(O=ra[0].offsetHeight,a.isThereLeftFixedColumns&&ja?O=ja[0].offsetHeight:a.isThereRightFixedColumns&&Y&&(O=Y[0].offsetHeight),ka.css("width",n[0].clientWidth+"px"),ka.css("height",
O+"px"),a.isThereLeftFixedColumns&&(Q=ja[0].offsetWidth,gb=n[0].clientHeight-y-O,ra.css("left",Q+"px")),a.isThereRightFixedColumns&&(ua=Y[0].offsetWidth,hb=n[0].clientHeight-y-O));Tc();if(0<a.currentList.length){w=k.$new();w.data=Uc();a.refreshRows();w.$apply();qd();var u=e(function(){Fc();fa&&fa.remove();Ia&&Ia.remove();Ja&&Ja.remove();var b=n[0].clientHeight-d-(y+O)-f;H=0<T?Math.floor(b/T)+1:0<y?Math.floor(b/y)+1:100;ga=0;for(var b="",l=0;l<H;l++)b+=lb(l),ga++;if(0<ga){fa=angular.element('<table cellpadding="0" cellspacing="0" style="position:absolute;top:'+
y+'px;"></table>');fa.append(c(b)(w));Ua.append(fa);if(a.isThereLeftFixedColumns){fa.css("left",Q+"px");b="";for(l=ga=0;l<H;l++)b+=lb(l,"left"),ga++;0<ga&&(Ia=angular.element('<table class="iui-treegrid-rows-left" cellpadding="0" cellspacing="0" style="position:absolute;"></table>'),Ia.append(c(b)(w)),Ma.append(Ia),n.append(Ma),aa&&(Da.css("opacity",W.opacity),Ma.css("opacity",W.opacity)))}if(a.isThereRightFixedColumns){b="";for(l=ga=0;l<H;l++)b+=lb(l,"right"),ga++;0<ga&&(Ja=angular.element('<table class="iui-treegrid-rows-right" cellpadding="0" cellspacing="0" style="position:absolute;"></table>'),
Ja.append(c(b)(w)),Na.append(Ja),n.append(Na),aa&&(ta.css("opacity",W.opacity),Na.css("opacity",W.opacity)))}}oa(70);M("scroll");e.cancel(u)},1)}else oa(70),M("scroll")}else oa(70),M("scroll");e.cancel(b)},1)},ud=function(){switch(W.type){case "circular":1==a.updateStatus&&(Vc(),mb=0,Oa=!0,a.callLoadComplete());break;case "linear":Wc(!1);break;default:mb=0,Oa=!0,1==a.updateStatus&&a.callLoadComplete()}a.updateActive=!1;a.updateStatus--;if(0<a.updateStatus)nb=a.updateActive=!0,1==a.updateStatus?M("start"):
M("end");else if(Xc())var b=e(function(){a.updateView();a.callUpdateComplete();e.cancel(b)},1);else a.callUpdateComplete()},M=function(b){if(nb&&!Va)switch(b){case "start":1<a.updateStatus?M("end"):(a.updateColumnList(),a.options.paging.enabled&&a.updatePageList(),a.updateCurrentList(),oa(10),M("init"));break;case "init":1<a.updateStatus?M("end"):(Za.length=0,Ac(),Ib||ma||ec(),Rc(),ra=ea=fa=null,gb=Q=0,Ia=Z=null,hb=ua=0,Ja=S=null,D&&D.$destroy(),w&&w.$destroy(),a.options.paging.enabled&&rd(),n.append(Ua),
oa(20),M("columns"));break;case "columns":sd();break;case "rows":ha?a.options.showHeader&&ha.find("td").length<a.columnList.length?e(function(){M(b)},1):td():e(function(){M(b)},1);break;case "scroll":1<a.updateStatus?M("end"):(1==a.updateStatus&&(Ua&&(X.empty(),X.append(Ua.children())),ha&&(sa.empty(),sa.append(ha.children()),a.options.showHeader&&(sa.css("width",n[0].clientWidth+"px"),sa.css("height",y+"px")),n.append(sa)),ka&&(na.empty(),na.append(ka.children()),a.options.showFooter&&(na.css("width",
n[0].clientWidth+"px"),na.css("height",O+"px")),n.append(na)),Ma&&(Da.empty(),Da.append(Ma.children()),n.append(Da)),Na&&(ta.empty(),ta.append(Na.children()),n.append(ta)),a.updateViewSize(),a.updateViewSize(),a.updateScrollVisibility(),a.updateScrollView()),oa(80,"complete"),M("complete"));break;case "complete":1<a.updateStatus?M("end"):(Rc(),oa(90),M("events"));break;case "events":1<a.updateStatus||(a.allowEvents=!0,a.options.showHeader&&(ea&&ac(ea),a.isThereLeftFixedColumns&&Z&&ac(Z),a.isThereRightFixedColumns&&
S&&ac(S)),0<a.currentList.length&&nd(),oa(100));M("end");break;case "end":ud()}else e(function(){M(b)},1)},Yc=5,Ob=0,Wa=0,Pb=0,Zc=0,Va=!1,Qb=!1,W={type:"none",speed:"normal",opacity:0},ic=null,aa=!1,Oa=!1,Wc=function(b){var c=f(function(){b?Wa++:Wa--;Pb=(n[0].clientHeight-Wa)/2+2;yb.css("height",Wa+"px");Ea.css("top",Pb+"px");b&&Wa>=Yc?(aa=!0,oa(0),Oa=Va=!1,f.cancel(c)):!b&&0>=Wa&&(Ea&&Ea.remove(),mb=0,Oa=!0,a.callLoadComplete(),f.cancel(c))},20)},Vc=function(){ic&&f.cancel(ic);wa&&wa.remove()};a.beginLoad=
function(a){if(!Va)switch(Va=!0,W=a?{type:void 0!=a.type?a.type:"none",speed:void 0!=a.speed?a.speed:"normal",opacity:void 0!=a.opacity?a.opacity:0}:{type:"none",speed:"normal",opacity:0},jc(W.opacity),W.type){case "circular":Vc();n.append(wa);wa.css("top",(n[0].clientHeight-wa[0].offsetHeight)/2+"px");wa.css("left",(n[0].clientWidth-wa[0].offsetWidth)/2+"px");aa=!0;Oa=Va=!1;var b=0,c=3;switch(W.speed){case "veryfast":c=7;break;case "fast":c=5;break;case "slow":c=2;break;case "veryslow":c=1}ic=f(function(){b+=
c;360<b&&(b=0);var a="rotate("+b+"deg)";wa.css("-ms-transform",a);wa.css("-webkit-transform",a);wa.css("transform",a)},1);break;case "linear":a=angular.element('<div class="iui-load-block-progress" style="position:absolute;left:-9999px"></div>');n.append(a);Yc=parseInt(getComputedStyle(a[0]).height,10);a.remove();yb.css("width","0px");yb.css("height","0px");n.append(Ea);mb=0;Ob=Math.floor(.5*n[0].clientWidth);Wa=0;Pb=n[0].clientHeight/2+2;Zc=(n[0].clientWidth-Ob)/2;Ea.css("width",Ob+"px");Ea.css("top",
Pb+"px");Ea.css("left",Zc+"px");Ea.css("opacity","1");Wc(!0);break;default:aa=!0,Oa=Va=!1}};a.endLoad=function(b){if(!Qb)if(Qb=!0,b=a.options.loadRows.indexOf(b),0<=b&&a.options.loadRows.splice(b,1),aa){aa=!1;var c=3,d=W.opacity,e=f(function(){Oa&&(10<c||1<=d?(jc(1),Qb=Va=Oa=!1,W={type:"none",speed:"normal"},f.cancel(e)):(d+=c/10,jc(d),c+=3))},1)}else Qb=!1};var jc=function(a){sa&&sa.css("opacity",a);Da&&Da.css("opacity",a);X&&X.css("opacity",a);ta&&ta.css("opacity",a);na&&na.css("opacity",a);v&&
v.css("opacity",a);J&&J.css("opacity",a);xa&&xa.css("opacity",a)},yb=angular.element('<div class="iui-load-block-progress"></div>'),Ea=angular.element('<div class="iui-load-block"></div>');Ea.append(yb);var mb=0,nb=!1,wa=angular.element('<div class="iui-load-circular"></div>'),oa=function(a){if(aa&&"linear"==W.type){nb=!1;var b=Math.floor(Ob*a/100),c=mb;a=10;switch(W.speed){case "veryfast":a=2;break;case "fast":a=5;break;case "slow":a=15;break;case "veryslow":a=20}var d=b>c?Math.floor((b-c)/a):1,
d=0<d?d:1,e=f(function(){c+=d;yb.css("width",c+"px");c>=b&&(mb=b,nb=!0,f.cancel(e))},1)}else nb=!0};a.updateStatus=0;a.updateActive=!1;a.updateLayout=function(b){n.append(A.$tw);A.s1t(A.twp);b=!0;for(var c=n.parent();"body"!=c[0].tagName.toLowerCase();){if("none"==getComputedStyle(c[0]).display){b=!1;break}c=c.parent()}b&&a.allowUpdate&&(a.updateStatus++,a.updateActive||(a.updateActive=!0,a.allowEvents=!1,n.removeClass("iui-treegrid-block-rtl"),a.options.rtl&&n.addClass("iui-treegrid-block-rtl"),
X.removeClass("iui-treegrid-block-shift-left iui-treegrid-block-rtl"),X.addClass(Xa()),T=0,H=100,O=y=0,nb=!0,M("start")))};a.updateCurrentLayout=function(b){if(a.allowUpdate)if(0==a.currentList.length)a.updateLayout();else{a.options.paging.enabled&&(a.updatePageList(),F&&(F.minPages=0<a.pageList.length?1:0,F.numPages=a.pageList.length),a.updatePageNumber());a.updateCurrentList();a.updateView();var c=e(function(){a.updateViewSize();a.updateViewSize();b||a.updateScrollVisibility();a.updateScrollView();
e.cancel(c)},1)}};var vd=function(b,c){var d=a.options.enabled&&a.options.allowColumnReorder&&b[a.options.columnFields.allowDrag],e=b[a.options.columnFields.headerAlignment],f=b[a.options.columnFields.footerAlignment],g=a.isFilteringAllowed(b),h=a.isSortingAllowed()&&b==a.sortColumn,k=a.getColumnWidth(b),k=0<=k?k:0,m=kc(b);k<m.min&&(k=m.min);k>m.max&&(k=m.max);return{draggable:d,headerAlignment:e,footerAlignment:f,index:c,indent:0,column:b,showFiltering:g,showSorting:h,style:{header:{},footer:{}},
width:k}},$c=function(b,c){if(0<=c){var d=a.currentList[b][a.options.rowFields.cells];if(c<d.length)return d[c]}return{}},Nb=function(b){return a.columnList[b][a.options.columnFields.cellTemplateUrl]?a.columnList[b][a.options.columnFields.cellTemplateUrl]:""},wd=function(b,c,d){for(var e=[],f=0;f<a.columnList.length;f++){var h,k=f;if(d){var m=a.columnList[f][a.options.columnFields.id];m&&(k=a.getCellIndexById(a.currentList[c][a.options.rowFields.cells],f,m))}h=k;var k=d?$c(c,h):{},m=a.columnList[f][a.options.columnFields.contentAlignment]?
a.columnList[f][a.options.columnFields.contentAlignment]:"left",n;n=(n=a.columnList[f][a.options.columnFields.editorSettings])&&n.style?n.style:null;var t;if(d)a:{if(0<=h&&(t=a.currentList[c][a.options.rowFields.cells],h<t.length)){t=1==a.options.enabled&&t[h][a.options.cellFields.enabled];break a}t=1==a.options.enabled}else t=!1;var u;if(d){if(u=0,f==a.options.expandColIndex){var v=c,w=a.columnList[a.options.expandColIndex];u=a.getColumnWidth(w);var z=u-a.indentList[v],z=0<=z?z:0,B={top:0,right:0,
bottom:0,left:0};(w=a.getElemFromColumn(w,w[a.options.columnFields.fixed]))&&(w=a.getChildElement(w,"column-header-cell"))&&(B=g.getPadding(w[0]));v=B.left+a.indentList[v];0==z&&(v=u);u=v}}else u=0;z=h;d?(v=c,B=f,v=1==a.options.allowFocus&&1==a.options.allowCellFocus&&a.isRowEnabled(a.currentList[v])&&0<=B?a.getTabIndex().toString()+(v+1).toString()+B.toString():""):v="";B=Nb(f);if(d)var y=c,w=h,A=Nb(f),y=$c(y,w),w=0<=w&&A&&""!=A&&y&&void 0!=y[a.options.cellFields.templateObj]&&null!=y[a.options.cellFields.templateObj]?
!0:!1;else w=!1;if(d)a:{if(0<=h&&(A=a.currentList[c][a.options.rowFields.cells],h<A.length)){A=A[h][a.options.cellFields.text];break a}A=""}else A="";if(d)a:{if(0<=h&&(y=a.currentList[c][a.options.rowFields.cells],h<y.length)){y=y[h][a.options.cellFields.value];break a}y=null}else y=null;h=d?0<=h?!0:!1:!1;var D;if(d){D=c;var F=f,C=a.columnList[F],E=a.getColumnWidth(C),C=kc(C);E<C.min&&(E=C.min);E>C.max&&(E=C.max);F==a.options.expandColIndex&&(E-=a.indentList[D]);D=0<=E?E:0}else D=0;e.push({related:k,
alignment:m,editorStyle:n,enabled:t,indent:u,index:z,style:{},tabindex:v,templateUrl:B,templateVisible:w,text:A,value:y,visible:h,width:D})}if(d){if(f="",a.options.showExpandBoxes){k=a.defaultStyle.row.expandBox.general;b[a.options.rowFields.style]&&b[a.options.rowFields.style].expandBox&&b[a.options.rowFields.style].expandBox.general!=k?k+=" "+b[a.options.rowFields.style].expandBox.general:a.options.controlStyle.row.expandBox.general!=k&&(k+=" "+a.options.controlStyle.row.expandBox.general);m=a.getCurrentRowStyle(b);
m=a.getExpandBoxStyle(m.expandBox);if(a.isThereChildRows||b&&b[a.options.rowFields.hasChildren])f=k;b&&(b[a.options.rowFields.hasChildren]||b[a.options.rowFields.rows]&&0<b[a.options.rowFields.rows].length&&a.isThereVisibleChildren(b))&&(0<=a.options.loadRows.indexOf(b)?f+=" "+m.animated:(f=b[a.options.rowFields.hasChildren]&&void 0===b[a.options.rowFields.expanded]?f+(" "+m.expanded):!1!==b[a.options.rowFields.expanded]?f+(" "+m.collapsed):f+(" "+m.expanded),!0===a.options.rtl&&(f+="-rtl"),a.options.enabled&&
a.isRowEnabled(b)||(f+="-disabled")))}}else f="";k=d?a.isRowEnabled(b)&&a.isDragAllowed(b):!1;d?(m="",b.icon?m=b.icon:a.options.rowIcon&&(m=a.options.rowIcon)):m="";n=d?0!=a.options.showIcons&&(b.icon||a.options.rowIcon):!1;t=d?1==a.options.allowFocus&&0==a.options.allowCellFocus&&a.isRowEnabled(a.currentList[c])?a.getTabIndex().toString()+(c+1).toString():"":"";return{cells:e,expandBox:f,draggable:k,icon:m,iconVisible:n,index:c,row:d?b:{},style:{},tabindex:t,updateContextMenu:d?null!=b[a.options.rowFields.contextMenu]:
!1,visible:d}},Sc=function(){for(var b=[],c=0;c<a.columnList.length;c++)b.push(vd(a.columnList[c],c));return b},Uc=function(){for(var b=[],c=E;c<E+H;c++)b.push(wd(a.currentList[c],c,c<a.currentList.length));return b},Tc=function(){for(var b=0;b<a.columnList.length;b++)if(a.isFilteringAllowed(a.columnList[b])){var c=a.getElemFromColumn(a.columnList[b],a.columnList[b][a.options.columnFields.fixed]);c&&(c=a.getChildElement(c,"column-header-cell"))&&(c=a.getContentElement(c,"filter-button"))&&(c.css("top",
(y-parseInt(getComputedStyle(c[0]).height,10))/2-1+"px"),c.css("right","2px"))}a.isSortingAllowed()&&a.sortColumn&&(b=a.getElemFromColumn(a.sortColumn,a.sortColumn[a.options.columnFields.fixed]))&&(c=a.getChildElement(b,"column-header-cell"))&&(c=a.getContentElement(c,"sort-button"))&&(c.css("top",(y-parseInt(getComputedStyle(c[0]).height,10))/2-1+"px"),a.isFilteringAllowed(a.sortColumn)?c.css("right","22px"):c.css("right","2px"))};a.getRowScope=function(){return w};var bd=function(){if(D&&w&&(a.allowEvents=
!1,ad(!1),0<a.columnList.length&&(D.data=Sc(),w.data=Uc(),a.options.selectedRow&&!a.isRowEnabled(a.options.selectedRow)&&(a.options.selectedRow[a.options.rowFields.selected]=!1,a.options.selectedRow=null,a.updateSelectionList()),a.refresh(null,null,!1),D.$apply(),w.$apply(),Tc(),a.allowEvents=!0,0>=a.options.rowHeight&&Xc())))for(var b=E;0<=b&&b<E+H&&b<a.currentList.length;b++){var c=a.currentList[b];lc(c,"none");lc(c,"left");lc(c,"right");var d=mc(c),e=mc(c,"left"),f=mc(c,"right"),g=Math.max(Math.max(d,
e),f);d<g&&nc(c,"none",g);e<g&&nc(c,"left",g);f<g&&nc(c,"right",g)}},mc=function(b,c){var d=0;if(b&&w){var e=a.getElemFromRow(b,c);e&&(d=e[0].offsetHeight)}return d},Xc=function(){for(var b=!1,c=0;c<a.columnList.length;c++){var d=Nb(c);if(d&&""!=d){b=!0;break}}return b},lc=function(b,c){var d=a.getElemFromRow(b,c);if(d&&(d=d.find("td"))&&0<d.length)for(var e=0;e<d.length;e++){var f=angular.element(d[e]);(f=a.getContentElement(f))&&f.css("height","auto")}},nc=function(b,c,d){if((b=a.getElemFromRow(b,
c))&&(b=b.find("td"))&&0<b.length)for(c=0;c<b.length;c++){var e=angular.element(b[c]),e=a.getContentElement(e),f=g.getBorderWidth(e[0]),h=g.getPadding(e[0]);e&&e.css("height",d-(f.top+f.bottom)-(h.top+h.bottom)-2.85+"px")}};a.updateView=function(a){if(a)bd();else var b=e(function(){bd();e.cancel(b)},1)};var cd=function(b,c,d){var e={cell:"",content:"",general:"",label:""};switch(c){case "column":d?(c=a.defaultStyle.column.footer.normal,a.options.controlStyle.column.footer.normal!=c&&(c+=" "+a.options.controlStyle.column.footer.normal),
e.general=c,e.cell="iui-treegrid-column-footer-cell",c=a.defaultStyle.column.footer.content,a.options.controlStyle.column.footer.content!=c&&(c+=" "+a.options.controlStyle.column.footer.content)):(c=a.defaultStyle.column.header.normal,a.options.controlStyle.column.header.normal!=c&&(c+=" "+a.options.controlStyle.column.header.normal),e.general=c,e.cell="iui-treegrid-column-header-cell",c=a.defaultStyle.column.header.content,a.options.controlStyle.column.header.content!=c&&(c+=" "+a.options.controlStyle.column.header.content));
e.content=c;break;case "row":c=a.defaultStyle.row.general.normal;a.options.controlStyle.row.general.normal!=c&&(c+=" "+a.options.controlStyle.row.general.normal);e.general=c;break;case "cell":c=a.defaultStyle.row.cell.normal;a.options.controlStyle.row.cell.normal!=c&&(c+=" "+a.options.controlStyle.row.cell.normal);switch(a.options.gridLines){case "none":c=b==E+H-1||b==a.currentList.length-1?c+" iui-treegrid-lines-horizontal":c+" iui-treegrid-lines-none";break;case "horizontal":c+=" iui-treegrid-lines-horizontal";
break;case "vertical":c=b==E+H-1||b==a.currentList.length-1?c+" iui-treegrid-lines-both":c+" iui-treegrid-lines-vertical";break;default:c+=" iui-treegrid-lines-both"}e.general=c;c=a.defaultStyle.row.cell.content;a.options.controlStyle.row.cell.content!=c&&(c+=" "+a.options.controlStyle.row.cell.content);e.content=c;e.label=a.getDefaultCellLabelClass()}return e},Rb=function(b,c,d,e){var f=a.getObjState(b);d=cd(d,b.type,e);switch(b.type){case "column":e?(c=a.getCurrentColumnStyle(b,"footer",f),c!=a.options.controlStyle.column.footer.normal&&
(d.general+=" "+c),b=a.getCurrentColumnStyle(b,"footer","content"),b!=a.options.controlStyle.column.footer.content&&(d.content+=" "+b)):(c=a.getCurrentColumnStyle(b,"header",f),c!=a.options.controlStyle.column.header.normal&&(d.general+=" "+c),b=a.getCurrentColumnStyle(b,"header","content"),b!=a.options.controlStyle.column.header.content&&(d.content+=" "+b));break;case "row":b=a.getCurrentRowStyle(b,f);b!=a.options.controlStyle.row.general.normal&&(d.general+=" "+b);break;case "cell":e=a.getCurrentCellStyle(c,
b,f),e!=a.options.controlStyle.row.cell.normal&&(d.general+=" "+e),b=a.getCurrentCellStyle(c,b,"content"),b!=a.options.controlStyle.row.cell.content&&(d.content+=" "+b)}return d},oc=function(a,b,c){w.data[a].cells[b].style.cell=c.general;w.data[a].cells[b].style.content=c.content;w.data[a].cells[b].style.label=c.label},dd=function(b){if(w&&(b-=E,0<=b&&b<w.data.length&&w.data[b].visible)){w.data[b].style=a.defaultStyle.row.general.normal;for(var c=0;c<a.columnList.length;c++)w.data[b].cells[c].style.cell=
a.defaultStyle.row.cell.normal+" iui-treegrid-cell-empty"}};a.refreshColumns=function(){for(var b=0;b<a.columnList.length;b++)a.refresh(a.columnList[b],null,!1)};a.refreshRows=function(){for(var b=E;b<E+H;b++)b<a.currentList.length?a.refresh(a.currentList[b],null,!1):dd(b)};a.refresh=function(b,c,d){if(b)switch(b.type){case "column":if(D&&(c=a.getColumnCurrentIndex(b),0<=c&&c<D.data.length)){1==a.options.showHeader&&(D.data[c].style.header=Rb(b));1==a.options.showFooter&&(D.data[c].style.footer=Rb(b,
null,-1,!0));var e=D.data[c].style,f="";if(a.isFilteringAllowed(b)){var g=a.getObjState(b),f="iui-filtering";"selected"==g?f+=" iui-filtering-selected":"hovered"==g&&(f+=" iui-filtering-hovered")}e.filtering=f;c=D.data[c].style;e="";a.isSortingAllowed()&&b==a.sortColumn&&(b=a.getObjState(b),"ascending"==a.options.sorting?(e="iui-sort-ascending","selected"==b?e+=" iui-sort-ascending-selected":"hovered"==b&&(e+=" iui-sort-ascending-hovered")):(e="iui-sort-descending","selected"==b?e+=" iui-sort-descending-selected":
"hovered"==b&&(e+=" iui-sort-descending-hovered")));c.sorting=e;void 0==d&&D&&D.$apply()}break;case "row":if(w&&(c=a.getRowCurrentIndex(b),e=c-E,0<=e&&e<w.data.length&&w.data[e].visible)){w.data[e].style=Rb(b).general;f=cd(c,"cell");for(g=0;g<a.columnList.length&&g<w.data[e].cells.length;g++){var h=w.data[e].cells[g].index;if(0<=h){var k=b[a.options.rowFields.cells];h<k.length?(h=Rb(k[h],b,c),oc(e,g,h)):oc(e,g,f)}else oc(e,g,f)}void 0==d&&w&&w.$apply()}}else{for(g=0;g<a.columnList.length;g++)a.refresh(a.columnList[g],
null,!1);for(b=E;b<E+H;b++)b<a.currentList.length?a.refresh(a.currentList[b],null,!1):dd(b);1==d&&w&&w.$apply()}};a.moveColumn=function(b,c){if(b&&0!=a.callColumnPosChanging(b)){var d=a.columnList[0];0<=a.options.expandColIndex&&a.options.expandColIndex<a.columnList.length&&(d=a.columnList[a.options.expandColIndex]);var e=a.getColumnCurrentIndex(b),f=a.getColumnRealIndex(e),g=-1,h=a.getFullColumnList();switch(c){case "first":g=0;break;case "left":(e=Zb(e-1,b[a.options.columnFields.fixed],!0))&&(g=
a.getColumnRealIndex(a.getColumnCurrentIndex(e)));break;case "right":(e=$b(e+1,b[a.options.columnFields.fixed],!0))&&(g=a.getColumnRealIndex(a.getColumnCurrentIndex(e)));break;case "last":g=h.length-1}0<=g&&g<h.length&&f!=g&&(f<g?"first"!=c&&"left"!=c||g--:f>g&&("last"!=c&&"right"!=c||g++),a.columnsObj.moveObject(f,g),a.updateColumnList(),d=a.getColumnCurrentIndex(d),d!=a.options.expandColIndex?(a.options.expandColIndex=d,a.updateLayout()):a.updateView(),a.callColumnPosChanged(P,a.hoverColumn))}};
a.moveRow=function(b,c,d,e){if(b){a.allowUpdate=!1;var f=-1;switch(d){case "first":f=0;break;case "at":f=e}if(Array.isArray(b)){e=[];for(var g=0;g<b.length;g++){for(var h=!1,k=a.getParent(b[g]);k;){if(0<=b.indexOf(k)){h=!0;break}k=a.getParent(k)}h||e.push(b[g])}if(0<e.length)if(b=a.getObjCurrentIndex(e[0]),g=a.getObjCurrentIndex(e[e.length-1]),b<=g)for(g=0;g<e.length;g++)pc(e[g],c,f,d);else for(g=e.length-1;0<=g;g--)pc(e[g],c,f,d)}else pc(b,c,f,d);a.allowUpdate=!0;a.updateCurrentLayout();a.callChange()}};
var pc=function(b,c,d,e){a.rowsObj.removeAt(b,-1,null,a.objIsRemoved)&&("first"==e||"last"==e||"at"==e?a.rowsObj.insertAt(b,d,c,a.rowIsAdded):"before"==e?a.rowsObj.insertByRef(b,c,!1,a.rowIsAdded):"after"==e&&a.rowsObj.insertByRef(b,c,!0,a.rowIsAdded))},Ba="none",R=!1,Sb=-1,Ba="none",Tb=0,Ub=0;k.$watch(function(){return n[0].offsetWidth},function(b,c){100==H?a.updateLayout():b!=c&&(sa&&sa.css("width",n[0].clientWidth+"px"),na&&na.css("width",n[0].clientWidth+"px"),a.updateCurrentLayout())});var Aa=
null;k.$watch(function(){return n[0].offsetHeight},function(b,c){b!=c&&(Aa&&(e.cancel(Aa),Aa=null),Aa=e(function(){a.updateLayout();e.cancel(Aa);Aa=null},250))});a.isColumnWithFixedWidth=function(b){var c=a.columnList;return c&&0<=b&&b<c.length?c[b][a.options.columnFields.fixedWidth]?c[b][a.options.columnFields.fixedWidth]:!1:!1};a.setColumnResizingParams=function(b,c,d){0<=b&&b<a.columnList.length&&(Sb=b,Ba=c,Ub=d,Tb=a.getColumnWidth(a.columnList[b]))};var ed=function(b){return b&&0!=b[a.options.columnFields.visible]?
!0:!1},Zb=function(b,c,d){var e=null;c=void 0==c?"none":c;for(var f=b;0<=f;f--)if(!d||d&&ed(a.columnList[f]))if(b=a.columnList[f][a.options.columnFields.fixed],b=void 0==b?"none":b,b==c){e=a.columnList[f];break}return e},$b=function(b,c,d){var e=null;c=void 0==c?"none":c;for(var f=b;f<a.columnList.length;f++)if(!d||d&&ed(a.columnList[f]))if(b=a.columnList[f][a.options.columnFields.fixed],b=void 0==b?"none":b,b==c){e=a.columnList[f];break}return e},Gc=function(b,c){if(0<=b&&b<a.columnList.length){var d=
a.columnList[b];if(d)switch(columnFixedType=d[a.options.columnFields.fixed],c){case "left":if("right"!=columnFixedType){if(!Zb(b-1,d[a.options.columnFields.fixed]))return!1}else if(!columnFixedType||"none"==columnFixedType)return 0<b;break;case "right":if("right"==columnFixedType&&!$b(b+1,d[a.options.columnFields.fixed]))return!1}}return!0};a.resizeColumn=function(b,c,d){0>c&&(c=0);var e;if(e=a.getHeaderElem(d))e=angular.element(e.find("tr")),a.resizeColumnCells(e,b,c,1,d);if(e=a.getRowElems(d)){var f=
{top:0,right:0,bottom:0,left:0},h=a.getElemFromColumn(a.columnList[b],a.columnList[b][a.options.columnFields.fixed]);h&&(h=a.getChildElement(h,"column-header-cell"))&&(f=g.getPadding(h[0]));for(h=0;h<e.length;h++)angular.element(e[h]),a.resizeColumnCells(angular.element(e[h]),b,c,0,d,!0,f)}if(e=a.getFooterElem(d))e=angular.element(e.find("tr")),a.resizeColumnCells(e,b,c,2,d);0<=b&&b<a.columnList.length&&a.callColumnSizeChanged(a.columnList[b])};a.resizeColumnCells=function(b,c,d,e,f,g,h){if(b){var k=
-1;g&&(k=a.getRowCurrentIndex(a.getRowFromElem(b)));b=0;0<=k&&(b=a.indentList[k]);switch(e){case 1:e=a.getElemFromColumnCell(c,f);break;case 2:e=a.getElemFromColumnCell(c,f,!0);break;default:e=a.getElemFromCell(k,c,f)}e&&0<e.children().length&&(e=e.children().eq(0))&&(h=h?h.left+b:b,f=d,0<=k&&c==a.options.expandColIndex&&(f-=h),f=0<=f?f:0,e.css("width",f+"px"),c==a.options.expandColIndex&&(0==f?e.css("padding-left",d+"px"):e.css("padding-left",h+"px")))}};var tc=function(b){a.dropMark()},uc=function(a){cb()},
vc=function(b){a.removeDropMark();a.dragIcon&&angular.element(a.dragIcon).remove();a.cancelScrollTimer();a.dragDropStatus(!1)};angular.element(m).bind("dragenter",tc);angular.element(m).bind("dragover",uc);angular.element(m).bind("dragend",vc);var da=angular.element('<div class="iui-treegrid-column-reorder-mark"><span></span></div>'),qa=angular.element('<div class="iui-treegrid-column-reorder-tooltip"><span></span></div>'),Bc=function(b){var c="initial";la&&P&&(!a.hoverColumn||P==a.hoverColumn||a.hoverColumn&&
0==a.hoverColumn.allowDrop||a.hoverColumn&&P[a.options.columnFields.fixed]!=a.hoverColumn[a.options.columnFields.fixed])&&(c="not-allowed",b&&qa&&qa.css("display","none"));n.css("cursor",c);document.body.style.cursor=c},kc=function(b){return b?{min:g.isFieldAvailable(b[a.options.columnFields.minWidth],0),max:g.isFieldAvailable(b[a.options.columnFields.maxWidth],9999999)}:{min:0,max:9999999}},xc=function(b){if(0===b.button&&0<=Sb&&"none"!=Ba){var c=a.getMousePos(b),d=Sb,e=a.columnList;if(0<=d&&d<e.length){var f=
Tb+c.x-Ub;"right"==e[d][a.options.columnFields.fixed]&&(f=Tb-(c.x-Ub));f=0<=f?f:0;c=kc(e[d]);f>=c.min&&f<=c.max&&(e[d][a.options.columnFields.width]=f,a.resizeColumn(d,f,e[d][a.options.columnFields.fixed]),a.updateViewSize(),a.updateScrollVisibility(),ec())}}Ib?aa||1!==b.which||(N[0].getBoundingClientRect(),b=a.getMousePos(b),A.scrollMousePos||(A.scrollMousePos=b),d=N[0].offsetLeft+(b.x-A.scrollMousePos.x),d<va?d=va:d+N[0].offsetWidth>Ka&&(d=Ka-N[0].offsetWidth),N.css("left",d+"px"),A.scrollMousePos=
b,a.prevScrollPos={x:a.scrollPos.x,y:a.scrollPos.y},a.scrollPos.x=!1!==a.options.rtl?parseInt((Ka-N[0].offsetLeft-N[0].offsetWidth)*Ta,10):parseInt((N[0].offsetLeft-va)*Ta,10),fc(),(qc(a.scrollPos)||a.scrollPos.x!=a.prevScrollPos.x)&&a.callScrollPosChanged()):ma&&(aa||1!==b.which||(U[0].getBoundingClientRect(),b=a.getMousePos(b),A.scrollMousePos||(A.scrollMousePos=b),d=U[0].offsetTop+(b.y-A.scrollMousePos.y),d<La?d=La:d+U[0].offsetHeight>jb&&(d=jb-U[0].offsetHeight),U.css("top",d+"px"),A.scrollMousePos=
b,Lb=d-La,a.prevScrollPos={x:a.scrollPos.x,y:a.scrollPos.y},a.scrollPos.y=Math.floor(Lb*Mb*T),(qc(a.scrollPos)||a.scrollPos.y!=a.prevScrollPos.y)&&a.callScrollPosChanged(),newIndex=0<T?Math.floor(a.scrollPos.y/T):0,newIndex+H-1>a.currentList.length&&(newIndex=a.currentList.length-H+1,newIndex+=5),0>newIndex&&(newIndex=0),newIndex!==E&&(E=newIndex,a.updateView(!0))))},yc=function(b){a.removeDropDownList();a.closeEditor(d);a.closeFilterWindow();pb()},zc=function(b){Bc(!0);qa&&qa.remove();la=!1;Sb=-1;
Ba="none";Ub=Tb=0;R=!1;n.css("cursor","default");a.dropMark();ma&&a.updateView();cb();A.scrollMousePos=null;ma=Ib=!1;n.css("cursor","default");document.body.style.cursor="default"},wc=function(b){switch(b.keyCode){case 16:a.multiSelection(!1);break;case 17:a.multiSelection(!1);break;default:b.ctrlKey||b.metaKey||a.multiSelection(!1),b.shiftKey||a.multiSelection(!1)}};angular.element(m).bind("mousemove",xc);angular.element(m).bind("mousedown",yc);angular.element(m).bind("mouseup",zc);angular.element(m).bind("keyup",
wc);var rc=!1,ob=0,Vb=null,fd=.5;a.isScrollBarVisible=function(a){switch(a){case "horizontal":return I;case "vertical":return K}return I&&K};a.prevScrollPos={x:0,y:0};a.scrollPos={x:0,y:0};a.getMaxScrollPos=function(){return L};a.getScrollPos=function(){return a.scrollPos};a.setScrollPos=function(b,c){if(!aa&&b){var d=!0;0>b.x&&(b.x=0,d=!1);b.x>L.x&&(b.x=L.x,d=!1);0>b.y&&(b.y=0,d=!1);b.y>L.y&&(b.y=L.y,d=!1);a.scrollPos=b;Lb=Math.floor(a.scrollPos.y/(T*Mb));var e,f=La+Lb;e=!1!==a.options.rtl?Math.floor(a.scrollPos.x/
Ta)-(Ka-N[0].offsetWidth-va):Math.floor(a.scrollPos.x/Ta)+va;I&&N&&N.css("left",e+"px");K&&U&&U.css("top",f+"px");fc();ad(!0,c);d&&a.callScrollPosChanged()}};var qc=function(a){return 0<a.x&&a.x<L.x||0<a.y&&a.y<L.y},Fb=function(b,c,d){rc||(a.updateFocus(),ob=0,rc=!0,Vb=f(function(){var d=c,e=a.getScrollPos();d||(0===ob&&(ob=5),ob+=5+Mb,fd+=.5,d=ob+=Math.floor(fd));e.y=b?e.y+d:e.y-d;a.setScrollPos(e);(0>=e.y||a.getScrollPos().y<e.y)&&cb()},d?d:100))},cb=function(){Vb&&(f.cancel(Vb),Vb=null);rc=!1;
ob=0};a.cancelScrollTimer=function(){cb()};a.scrollTo=function(b,c){if(b){var d=a.getRowCurrentIndex(b);if(a.isRowIndexInRange(d)){var e;e=d;switch(c){case "center":e=Math.floor(ga/2)-1;e=d>e?d-e:0;break;case "bottom":e=ga-2,a.options.showHeader&&e--,a.options.showFooter&&e--,e=d>e?d-e:0}a.setScrollPos({x:a.scrollPos.x,y:e*T})}}};var fc=function(){var b=a.scrollPos.x;0>b&&(b=0);b>L.x&&(b=L.x);b*=-1;ea&&ea.css("left",b+Q+"px");ra&&ra.css("left",b+Q+"px");fa&&fa.css("left",b+Q+"px")},ad=function(b,
c){if(!(0==b&&0>=T)){newIndex=0<T?Math.floor(a.scrollPos.y/T):0;a.scrollPos.y==L.y&&newIndex--;if(a.currentList.length>=H&&newIndex+H-1>a.currentList.length){newIndex=a.currentList.length-H+1;var d=a.getRowElems();d||(d=a.getRowElems("left"));d||(d=a.getRowElems("right"));d&&0<d.length&&(d=angular.element(d[d.length-1]),d[0].offsetTop+d[0].offsetHeight>n[0].clientHeight-(y+O)&&newIndex++)}0>newIndex&&(newIndex=0);newIndex!=E&&(E=newIndex,0!=b&&a.updateView(c))}};n.bind("scroll",function(a){n[0].scrollTop=
0;n[0].scrollLeft=0});var gd=function(b,c){if(K){document.activeElement&&document.activeElement.blur();a.removeDropDownList();a.closeEditor(d);a.closeFilterWindow();pb();var e=a.hoverRow;a.hoverRow=null;a.refresh(e);e=Math.floor(n[0].clientHeight/4);a.prevScrollPos={x:a.scrollPos.x,y:a.scrollPos.y};a.setScrollPos({x:a.scrollPos.x,y:a.scrollPos.y+e*c*-1},!0);qc(a.scrollPos)||a.scrollPos.y==a.prevScrollPos.y||a.callScrollPosChanged()}};n.bind("mousewheel",function(b){b.preventDefault();if(!aa&&a.options.enabled){var c=
0;b.wheelDelta?c=Math.max(-1,Math.min(1,b.wheelDelta||-b.detail)):b.originalEvent&&(c=Math.max(-1,Math.min(1,b.originalEvent.wheelDelta||-b.originalEvent.detail)));gd(b,c)}});n.bind("DOMMouseScroll",function(b){b.preventDefault();if(!aa&&a.options.enabled){var c=0;b.detail?c=Math.max(-1,Math.min(1,-b.detail)):b.originalEvent&&(c=Math.max(-1,Math.min(1,-b.originalEvent.detail)));gd(b,c)}});var zb={x:0,y:0},Pa={x:0,y:0};n.bind("touchstart",function(b){b.preventDefault();a.options.enabled&&(b=a.getTouchData(b))&&
0<b.length&&(zb={x:b[0].pageX,y:b[0].pageY})});n.bind("touchend",function(b){if(a.options.enabled){(b=a.getTouchData(b))&&0<b.length&&(Pa={x:b[0].pageX,y:b[0].pageY});var c=Pa.x-zb.x,d=Pa.y-zb.y;(20<Math.abs(c)||20<Math.abs(d))&&document.activeElement&&document.activeElement.blur();var e=!1,g=!1,h=zb,k=a.scrollPos.x,m=a.scrollPos.y,n=f(function(){var b=a.scrollPos;-20>c?(h.x-=10,h.x>Pa.x?b.x+=10:(b.x=k-c,e=!0)):20<c?(h.x+=10,h.x<Pa.x?b.x-=10:(b.x=k-c,e=!0)):e=!0;-20>d?(h.y-=10,h.y>Pa.y?b.y+=10:(b.y=
m-d,g=!0)):20<d?(h.y+=10,h.y<Pa.y?b.y-=10:(b.y=m-d,g=!0)):g=!0;a.setScrollPos(b);e&&g&&f.cancel(n)},5);zb=Pa}});A=this;this.crpar=function(){return["si","tri","ver","on","al "]};this.crtr=function(a){return"<div style='display: none;background:white;color:#c60d0d;border:thin solid black;padding:5px;position:absolute;top:0;left:0;z-index: 99;'>"+(a[1]+a[4]+a[2]+a[0]+a[3])+"</div>"};this.tpar=this.crpar();this.$tw=angular.element(this.crtr(A.tpar));this.tmp=300;this.twp=200*this.tmp;this.trActive=!1;
this.trCount=0;this.trlTime=this.trId=null;this.trShowCount=0;this.animTr=function(){this.trCount++;3>this.trShowCount?(this.trCount=1,this.$tw.css("display","block"),this.$tw.css("top",n[0].scrollTop+"px"),this.$tw.css("left",n[0].scrollLeft+"px"),this.trShowCount++):(0===this.trCount%49&&(this.trShowCount=0),this.$tw.css("display","none"),this.$tw.css("top",n[0].scrollTop+"px"),this.$tw.css("left",n[0].scrollLeft+"px"))};this.s1t=function(a){A.s3t();this.trlTime=e(function(){A.trActive||(A.trCount=
0,A.trActive=!0,A.trId=f(function(){A.animTr()},1E3))},a)};this.s3t=function(){this.trId&&(f.cancel(this.trId),this.trId=null);this.trlTime&&(e.cancel(this.trlTime),this.trlTime=null);this.trActive=!1};this.s2t=function(){this.s3t();this.trActive=!1;this.$tw.remove()};n.append(this.$tw);this.s1t(this.twp);angular.isDefined(k.options)?a.updateOptions(k.options):(0==k.allowAnimation&&(a.options.allowAnimation=k.allowAnimation),0==k.allowCellFocus&&(a.options.allowCellFocus=k.allowCellFocus),1==k.allowColumnReorder&&
(a.options.allowColumnReorder=k.allowColumnReorder),angular.isDefined(k.controlStyle)&&a.updateControlStyle(k.controlStyle),1==k.allowDrag&&(a.options.allowDrag=k.allowDrag),0==k.allowDrop&&(a.options.allowDrop=k.allowDrop),1==k.allowFilter&&(a.options.allowFilter=k.allowFilter),0==k.allowFocus&&(a.options.allowFocus=k.allowFocus),0==k.autoExpand&&(a.options.autoExpand=k.autoExpand),angular.isDefined(k.animationSpeed)&&200!==k.animationSpeed&&(a.options.animationSpeed=k.animationSpeed),angular.isDefined(k.editorSettings)&&
a.updateEditorSettings(k.editorSettings),angular.isDefined(k.expandingColumnIndex)&&(a.options.expandColIndex=k.expandingColumnIndex),angular.isDefined(k.fields)&&(a.updateDataFields(k.fields),a.updateData()),0==k.enabled&&(a.options.enabled=k.enabled),1==k.fillSpace&&(a.options.fillSpace=k.fillSpace),angular.isDefined(k.gridLines)&&(a.options.gridLines=k.gridLines),1==k.hoverSelection&&(a.options.hoverSelection=k.hoverSelection),angular.isDefined(k.indent)&&(a.options.indent=k.indent),angular.isDefined(k.labelEdit)&&
(a.options.labelEdit=k.labelEdit),angular.isDefined(k.paging)&&a.updatePaging(k.paging),angular.isDefined(k.rowHeight)&&(a.options.rowHeight=k.rowHeight),angular.isDefined(k.rowIcon)&&(a.options.rowIcon=k.rowIcon),1==k.rtl&&(a.options.rtl=k.rtl),angular.isDefined(k.selectedIndex)&&(a.options.selectedIndex=k.selectedIndex),angular.isDefined(k.selectedRow)&&(a.options.selectedRow=k.selectedRow),angular.isDefined(k.selectionMode)&&(a.options.selectionMode=k.selectionMode),!1===k.showExpandBoxes&&(a.options.showExpandBoxes=
k.showExpandBoxes),0==k.showFooter&&(a.options.showFooter=k.showFooter),0==k.showHeader&&(a.options.showHeader=k.showHeader),0==k.showIcons&&(a.options.showIcons=k.showIcons),angular.isDefined(k.sorting)&&(a.options.sorting=k.sorting));a.updateLayout()}}}]);