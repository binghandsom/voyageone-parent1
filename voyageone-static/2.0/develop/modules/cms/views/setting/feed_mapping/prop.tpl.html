<div class="wrapper-md" ng-controller="feedPropMappingController as ctrl" ng-init="ctrl.init()">
    <tabset class="tab-container vo_nav-tabs">
        <div class="form-inline pull-right">
            <select class="form-control m-r-xxs" title="必填情况"
                    ng-model="ctrl.show.hasRequired"
                    ng-options="v as k for (k,v) in ctrl.options.hasRequired"></select>
            <select class="form-control m-r-xxs" title="设定情况"
                    ng-model="ctrl.show.matched"
                    ng-options="v as k for (k,v) in ctrl.options.matched"></select>
            <input type="text" placeholder="快速检索" class="form-control">
            <button type="submit" class="btn btn-vo btn-xxs"><i class="fa fa-search"></i></button>
        </div>
        <tab>
            <tab-heading>类目属性匹配</tab-heading>
            <div class="container-fluid" ng-controller="popupCtrl">
                <div class="col-sm-6">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <h4 class="panel-title">普通属性匹配</h4>
                        </div>
                        <form class="form-horizontal clearfix">
                            <div class="col-sm-12 platform_mapping_bg_list"
                                 ng-repeat="bean in ctrl.dataSources.fields"
                                 ng-include="'feedMapping.fieldBean.html'"
                                 ng-if="ctrl.shown(bean)"></div>
                        </form>
                    </div>
                </div>
                <div class="col-sm-6">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <h4 class="panel-title">通用属性</h4>
                        </div>
                        <form class="form-horizontal clearfix">
                            <div class="col-sm-12 platform_mapping_bg_list"
                                 ng-repeat="bean in ctrl.dataSources.common"
                                 ng-include="'feedMapping.fieldBean.html'"
                                 ng-if="ctrl.shown(bean)"></div>
                        </form>
                    </div>
                </div>
                <div class="col-sm-6">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <h4 class="panel-title">SKU匹配</h4>
                        </div>
                        <form class="form-horizontal clearfix">
                            <div class="col-sm-12 platform_mapping_bg_list"
                                 ng-repeat="bean in ctrl.dataSources.sku"
                                 ng-include="'feedMapping.fieldBean.html'"
                                 ng-if="ctrl.shown(bean)"></div>
                        </form>
                    </div>
                </div>
            </div>
        </tab>
    </tabset>
    <script type="text/ng-template" id="feedMapping.fieldBean.html">
        <div class="col-sm-5 text-left"
             ng-style="{'margin-left': bean.level * 30}">
            <i class="fa"
               ng-class="{'fa-plus':!bean.isSimple, 'fa-minus': bean.isSimple}"></i>
            {{ bean.field.name }}
            <span ng-if="bean.required">(必填)</span>
        </div>
        <div class="col-sm-1 pull-center" ng-if="bean.isSimple">
            <button class="badge badge-empty"
                    ng-click="popupFeed(ctrl.popupContext(bean)).then(ctrl.saveMapping)">
                值匹配
            </button>
        </div>
        <div class="pull-right">
            <span class="{{ bean.iconClass }}">{{ bean.field.type }}</span>
        </div>
    </script>
</div>