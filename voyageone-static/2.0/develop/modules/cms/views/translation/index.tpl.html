<div class="wrapper-md" ng-init="initialize()">
    <div class="vo_accordion vo_attr">
        <div class="panel-group">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h4 class="panel-title"><i class="fa fa-reorder"></i>&nbsp;{{'TXT_TRANSLATION_MANAGER' | translate}}
                    </h4>
                </div>
                <div class="container-fluid m-t-xs m-b-xs">
                    <div class="col-sm-12">
                        <div class="col-sm-4" style="margin-bottom: 8px;">
                            <div class="panel panel-default">
                                <div class="panel-heading" style="background-color: #666666;">
                                    <h3 class="panel-title"><i class="fa fa-bar-chart-o"></i> {{'TXT_TRANSLATION_STATUS' | translate}}</h3>
                                </div>
                                <div class="panel-body" style="background-color: #F8F8F8;">
                                    <ul class="data-display-boxes data-display-boxes-mini" style="min-height: 90px">
                                        <li>
                                            <div class="data" style="line-height: 16px"><strong style="font-size: 18px">{{vm.taskInfos.totalUndoneCount}}</strong> {{'TXT_UN_TRANSLATION' | translate}}</div>
                                        </li>
                                        <li>
                                            <div class="data" style="line-height: 16px"><strong style="font-size: 18px">{{vm.taskInfos.totalDistributeUndoneCount}}</strong> {{'TXT_DISTRIBUTE_UN_TRANSLATION' | translate}}</div>
                                        </li>
                                        <li>
                                            <div class="data" style="line-height: 16px"><strong style="font-size: 18px">{{vm.taskInfos.totalDoneCount}}</strong> {{'TXT_TRANSLATED' | translate}}</div>
                                        </li>
                                        <li>
                                            <div class="data" style="line-height: 16px"><strong style="font-size: 18px">{{vm.taskInfos.userDoneCount}}</strong> {{'TXT_PERSONAL_FINISHED_TRANSLATION' | translate}}</div>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-5" style="margin-bottom: 8px;">
                            <div class="panel panel-default">
                                <div class="panel-heading" style="background-color: #666666;">
                                    <h3 class="panel-title"><i class="fa fa-tasks"></i>&nbsp;&nbsp;{{'TXT_TRANSLATION_TASK_GET' | translate}}</h3>
                                </div>
                                <div class="panel-body" style="background-color: #F8F8F8;">
                                    <form class="form-horizontal">
                                        <div class="form-group">
                                            <label class="col-sm-3 control-label">{{'TXT_DISTRIBUTION_RULE' | translate}}</label>
                                            <div class="col-sm-3">
                                                <select class="form-control" ng-model="vm.getTaskInfo.sortCondition"
                                                        ng-options="option.value as option.name for option in vm.sortFieldOptions">
                                                    <option value="">{{'TXT_SELECT_NO_VALUE' | translate}}</option>
                                                </select>
                                            </div>
                                            <div class="col-sm-3">
                                                <label class="checkbox-inline c-radio ng-binding">
                                                    <input name="sortOne" type="radio" value="1" ng-model="vm.getTaskInfo.sortRule"
                                                           class="ng-pristine ng-untouched ng-valid ng-empty"><span class="fa fa-check"></span>&nbsp;{{'TXT_SORT_ASC' | translate }}
                                                </label>
                                            </div>
                                            <div class="col-sm-3">
                                                <label class="checkbox-inline c-radio ng-binding">
                                                    <input name="sortOne" type="radio" value="-1" ng-model="vm.getTaskInfo.sortRule"
                                                           class="ng-pristine ng-untouched ng-valid ng-empty"><span class="fa fa-check"></span>&nbsp;{{'TXT_SORT_DESC' | translate }}
                                                </label>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <label class="col-sm-3 control-label">{{'TXT_ITEM_CODE' | translate}}</label>
                                            <div class="col-sm-8">
                                                <input type="text" class="form-control" ng-model="ctrl.code">
                                            </div>
                                        </div>
                                        <!--<div class="form-group">-->
                                            <!--<label class="col-sm-3 control-label"-->
                                                   <!--translate="TXT_GET_TASK_COUNT"></label>-->
                                            <!--<div class="col-sm-8">-->
                                                <!--<input type="number" class="form-control" ng-model="ctrl.hsCodeTaskCnt"-->
                                                       <!--ng-pattern="/^(\d+)$/">-->
                                            <!--</div>-->
                                        <!--</div>-->
                                        <div class="col-sm-2 col-sm-offset-4" style="margin-bottom: -7px;">
                                            <button class="btn btn-success" ng-click="ctrl.get()"><i
                                                    class="glyphicon glyphicon-check"></i>&nbsp;{{'BTN_GET_TASK'|translate}}
                                            </button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-3">
                            <uib-accordion class="vo_accordion vo_attr" close-others="oneAtATime">
                                <uib-accordion-group is-open="ctrl.status">
                                    <uib-accordion-heading>
                                        <i class="fa fa-search"></i>&nbsp;个人翻译成果搜索
                                        <i class="pull-right glyphicon glyphicon-menu-down"
                                           ng-class="{'glyphicon-menu-up': ctrl.status, 'glyphicon-menu-down': !ctrl.status}"></i>
                                    </uib-accordion-heading>
                                    <form class="form-horizontal m-l-md">
                                        <div class="form-group">
                                            <label class="col-sm-4 control-label text-left"
                                                   translate="TXT_HS_CODE_STATUS"></label>
                                            <div class="col-sm-7">
                                                <select class="form-control" ng-model="ctrl.hsCodeStatus">
                                                    <option value="">{{'TXT_SELECT_NO_VALUE' | translate}}</option>
                                                    <option value="0">已设置</option>
                                                    <option value="1">未设置</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="col-sm-11">
                                                <textarea type="text" rows="4" class="form-control"
                                                          placeholder="模糊查询(ProductCode，商品名称)"
                                                          ng-model="ctrl.code"></textarea>
                                            </div>
                                        </div>
                                        <div class="form-group text-center">
                                            <button class="btn btn-default ng-binding" ng-click="ctrl.clear()"><i
                                                    class="fa fa-remove"></i>&nbsp;清空
                                            </button>
                                            <button class="btn btn-vo" type="button" ng-click="ctrl.search(1)">
                                                <i class="fa fa-search"></i>&nbsp;{{'BTN_SEARCH' | translate}}
                                            </button>
                                        </div>
                                    </form>
                                </uib-accordion-group>
                            </uib-accordion>
                        </div>
                    </div>
                    <form class="form-horizontal">
                        <div class="form-group">
                            <div class="col-sm-3">
                                <label class="col-sm-3 control-label" translate="TXT_UN_TRANSLATION"></label>

                                <div class="col-sm-6">
                                    <input type="text" class="form-control" ng-model="vm.taskInfos.totalUndoneCount"
                                           disabled>
                                </div>
                            </div>
                            <div class="col-sm-3">
                                <label class="col-sm-6 control-label"
                                       translate="TXT_DISTRIBUTE_UN_TRANSLATION"></label>

                                <div class="col-sm-6">
                                    <input type="text" class="form-control"
                                           ng-model="vm.taskInfos.totalDistributeUndoneCount" disabled>
                                </div>
                            </div>
                            <div class="col-sm-3">
                                <label class="col-sm-6 control-label" translate="TXT_TRANSLATED"></label>

                                <div class="col-sm-6">
                                    <input type="text" class="form-control" ng-model="vm.taskInfos.totalDoneCount"
                                           disabled>
                                </div>
                            </div>
                            <div class="col-sm-3">
                                <label class="col-sm-6 control-label"
                                       translate="TXT_PERSONAL_FINISHED_TRANSLATION"></label>

                                <div class="col-sm-6">
                                    <input type="text" class="form-control" ng-model="vm.taskInfos.userDoneCount"
                                           disabled>
                                </div>
                            </div>
                        </div>
                    </form>
                    <!-- .form -->
                </div>
            </div>

            <div class="panel panel-default">
                <div class="panel-heading">
                    <h4 class="panel-title"><i class="fa fa-reorder"></i>&nbsp;{{'TXT_TRANSLATION_TASK_GET' |
                        translate}}</h4>
                </div>
                <div class="container-fluid m-t-xs m-b-xs">
                    <form class="form-horizontal">
                        <div class="row">
                            <div class="col-sm-6">
                                <label class="col-sm-3 control-label text-right"
                                       translate="TXT_DISTRIBUTION_RULE"></label>
                                <div class="col-sm-5">
                                    <select class="form-control" ng-model="vm.getTaskInfo.sortCondition"
                                            ng-options="option.value as option.name for option in vm.sortFieldOptions">
                                        <option value="">{{'TXT_SELECT_NO_VALUE' | translate}}</option>
                                    </select>
                                </div>
                                <div class="col-sm-2 text-right">
                                    <label class="checkbox-inline c-radio">
                                        <input name="sortOne" type="radio" value="1"
                                               ng-model="vm.getTaskInfo.sortRule"><span
                                            class="fa fa-check"></span>&nbsp;{{'TXT_SORT_ASC' | translate }}
                                    </label>
                                </div>
                                <div class="col-sm-2">
                                    <label class="checkbox-inline c-radio">
                                        <input name="sortOne" type="radio" value="-1"
                                               ng-model="vm.getTaskInfo.sortRule"><span
                                            class="fa fa-check"></span>&nbsp;{{'TXT_SORT_DESC' | translate }}
                                    </label>
                                </div>
                            </div>
                            <div class="col-sm-3">
                                <label class="col-sm-6 control-label" translate="TXT_GET_TASK_COUNT"></label>

                                <div class="col-sm-6">
                                    <input type="text" class="form-control"
                                           ng-model="vm.getTaskInfo.distributeCount"
                                           ng-pattern="/^(\d+)$/">
                                </div>
                            </div>
                            <div class="col-sm-3">
                                <label class="col-sm-4 control-label"></label>

                                <div class="col-sm-8">

                                    <!--<div class="form-inline">-->
                                    <!--<button class="btn btn-default" ng-click="clearConditions()"><i-->
                                    <!--class="fa fa-remove"></i>&nbsp;{{'BTN_CANCEL'-->
                                    <!--| translate}}-->
                                    <!--</button>-->
                                    <button class="btn btn-success" ng-click="assignTasks()"><i
                                            class="glyphicon glyphicon-check"></i>&nbsp;{{'BTN_GET_TASK'
                                        | translate}}
                                    </button>
                                    <!--</div>-->
                                </div>
                            </div>
                        </div>
                    </form>
                    <!-- .form-->
                </div>
            </div>

            <div class="panel panel-default">
                <div class="panel-heading">
                    <h4 class="panel-title"><i class="fa fa-reorder"></i>&nbsp;{{'TXT_TRANSLATION_SEARCH' | translate}}
                    </h4>
                </div>
                <div class="container-fluid m-t-xs m-b-xs">
                    <form class="form-horizontal">
                        <div class="form-group">
                            <div class="row">
                                <label class="col-sm-2 control-label text-right"
                                       translate="TXT_TRANSSTS_ATTRIBUTE"></label>
                                <div class="col-sm-2">
                                    <select class="form-control" ng-model="vm.searchInfo.tranSts">
                                        <option value="">{{'TXT_TRANSLATION_SEARCH_SELECT_ALL' | translate}}</option>
                                        <option value="0">{{'TXT_TRANSLATION_SEARCH_SELECT_NOT_TRANSLATED' |
                                            translate}}
                                        </option>
                                        <option value="1">{{'TXT_TRANSLATION_SEARCH_SELECT_TRANSLATED' |
                                            translate}}
                                        </option>
                                    </select>
                                </div>
                                <div class="col-sm-4">
                                    <label class="col-sm-4 control-label" translate="TXT_FUZZY_SEARCH"></label>

                                    <div class="col-sm-8">
                                        <input class="form-control no-resize"
                                               ng-model="vm.searchInfo.searchCondition">
                                    </div>
                                </div>
                                <div class="col-sm-2">
                                    <div class="col-sm-2"></div>
                                    <div class="col-sm-5">
                                        <button class="btn btn-vo" ng-click="clearConditions()" type="button">
                                            <i class="fa fa-search"></i>&nbsp;{{'BTN_CLEAR' | translate}}
                                        </button>
                                    </div>
                                    <div class="col-sm-5">
                                        <button class="btn btn-vo" ng-click="searchHistoryTasks(1)" type="button">
                                            <i class="fa fa-search"></i>&nbsp;{{'BTN_SEARCH' | translate}}
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <div class="box">
        <div class="box-body-new">
            <uib-tabset class="tab-container vo_nav-tabs" ng-show="!btnclick">
                <uib-tab></uib-tab>
                <uib-tab></uib-tab>
            </uib-tabset>
            <table ng-show="btnclick">
                fafas
            </table>
            <table class="table table-hover-new table-hover">
                <thead>
                <tr>
                    <th class="text-center mfb-xt" translate="TXT_SEQ"></th>
                    <th class="text-left mfb-xxt" translate="TXT_PRODUCT_CODE"></th>
                    <th class="text-left mfb-xxs" translate="TXT_PRODUCT_NAME_WITH_LONG_DESCRIPTION"></th>
                    <th class="text-left mfb-xxs" translate="TXT_LONG_TITLE_WITH_LONG_DESCRIPTION"></th>
                    <th class="text-left mfb-xxx" translate="TXT_MID_TITLE_WITH_SHORT_DESCRIPTION"></th>
                    <th class="text-left mfb-xxx" translate="TXT_SHORT_TITLE_WITH_MORE_SHORT_DESCRIPTION"></th>
                    <th class="text-center" translate="Action"></th>
                </tr>
                </thead>
                <tbody ng-if="vm.taskInfos.productTranslationBeanList.length == 0">
                <tr style="padding-left:0px">
                    <td colspan="7">
                        <div if-no-rows="vm.taskInfos.productTranslationBeanList.length"></div>
                    </td>
                </tr>
                </tbody>
                <tbody ng-if="vm.taskInfos.productTranslationBeanList.length > 0"
                       ng-repeat="translationModel in vm.taskInfos.productTranslationBeanList">
                <tr>
                    <td class="text-center mfb-xt">{{$index + 1}}</td>
                    <td class="text-left mfb-xxt yellowLink" ng-controller="popupCtrl">
                        <p><a ng-click="openTranslate('md',translationModel)">{{translationModel.productCode}}</a></p>

                        <p><img image="{{translationModel.productImage}}" alt=""
                                class="thumb-lg pull-left"
                                ng-click="openImagedetail({'mainPic':translationModel.productImage,'picList':translationModel.prodImageList,'search':'master'})"/>
                        </p>

                        <p class="col-sm-12 text-left text-vo m-t-xs">{{'TXT_TRANSLATOR_WIT_COLON'|
                            translate}}{{translationModel.translator}}</p>
                    </td>
                    <td class="text-left mfb-xxs">{{translationModel.productName}}</td>
                    <td class="text-left mfb-xxs">
                        <textarea class="form-control" style="resize:none" rows="6"
                                  ng-model="translationModel.longTitle"
                                  maxlength="{{vm.lenInfo.long_title.maxLen}}" ng-required="required"
                                  placeholder="{{'TXT_MSG_LONG_TITLE' | translate}}"></textarea>

                        <div class="text-warnings text-left" style="padding-left:0px"><i class="icon fa fa-bell-o">
                            {{translationModel.longTitle == null || translationModel.longTitle.length == 0?'required':
                            (('TXT_MSG_INPUT_WORD_LENCHK' | translate) + (vm.lenInfo.long_title.maxLen -
                            translationModel.longTitle.length) +
                            ('TXT_MSG_INPUT_WORD_LENCHK2' | translate))}}</i></div>
                    </td>
                    <td class="text-left mfb-xxx">
                        <textarea class="form-control" style="resize:none" rows="6"
                                  ng-model="translationModel.middleTitle"
                                  maxlength="{{vm.lenInfo.middle_title.maxLen}}"
                                  placeholder="{{'TXT_MSG_MIDDLE_TITLE' | translate}}"></textarea>

                        <div class="text-warnings text-left" style="padding-left:0px"><i class="icon fa fa-bell-o">{{('TXT_MSG_INPUT_WORD_LENCHK'
                            |
                            translate) + (vm.lenInfo.middle_title.maxLen - translationModel.middleTitle.length) +
                            ('TXT_MSG_INPUT_WORD_LENCHK2' |
                            translate)}}</i></div>
                    </td>
                    <td class="text-left mfb-xxx">
                        <textarea class="form-control" style="resize:none" rows="6"
                                  ng-model="translationModel.shortTitle"
                                  maxlength="{{vm.lenInfo.short_title.maxLen}}"
                                  placeholder="{{'TXT_MSG_SHORT_TITLE' | translate}}"></textarea>

                        <div class="text-warnings text-left" style="padding-left:0px"><i class="icon fa fa-bell-o">{{('TXT_MSG_INPUT_WORD_LENCHK'
                            |
                            translate) + (vm.lenInfo.short_title.maxLen - translationModel.shortTitle.length) +
                            ('TXT_MSG_INPUT_WORD_LENCHK2' |
                            translate)}}</i></div>
                    </td>
                    <td class="text-center">
                        <!--<button title="从已有数据拷贝" class="btn btn-danger btn-xs m-b-xs" ng-click="vm.copyFormMainProduct(translationModel,$index)"><i class="fa fa-cloud-download"></i> 从已有数据拷贝</button>-->
                        <!--<br/>-->
                        <button class="btn btn-vo btn-xs" ng-click="saveTask(translationModel,$index)"><i
                                class="glyphicon glyphicon-floppy-disk"></i>&nbsp;{{'BTN_SAVE'
                            | translate}}
                        </button>
                        <button class="btn btn-success btn-xs" ng-click="submitTask(translationModel,$index)"><i
                                class="glyphicon glyphicon-star"></i>&nbsp;{{'BTN_COMPLETE'
                            | translate}}
                        </button>
                        <button ng-if="translationModel.tranSts == 1" class="btn btn-success btn-xs"
                                style="background-color:skyblue"
                                ng-click="cancelTask(translationModel,$index)"><i class="glyphicon glyphicon-star"></i>&nbsp;撤销
                        </button>
                    </td>
                </tr>
                <tr>
                    <td class="text-left" colspan="2" style="border-top:0px">
                        <div class="form-inline">
                            <a href="" ng-repeat="product in translationModel.otherProducts">
                                <img image="{{::product.image1}}" alt="" class="thumb-xs m-b-xs"/>
                            </a>
                        </div>
                    </td>
                    <!--<td class="text-center mfb-x" style="border-top:0px"></td>-->
                    <td class="text-left" colspan="2" style="border-top:0px">{{translationModel.longDescription}}</td>
                    <td class="text-left" colspan="2" style="border-top:0px">
                        <textarea class="form-control" style="resize:none" rows="6"
                                  ng-model="translationModel.longDesCn" ng-required="required"
                                  placeholder="{{'TXT_MSG_LONG_DESCRIPTION' | translate}}"></textarea>

                        <div class="text-warnings text-left" style="padding-left:0px"><i class="icon fa fa-bell-o">{{translationModel.longDesCn
                            ==
                            null || translationModel.longDesCn.length == 0 ? 'required':''}}</i></div>
                    </td>
                    <td class="text-center" style="border-top:0px">
                    </td>
                </tr>
                <tr>
                    <td class="text-left" style="border-top:0px"></td>
                    <td class="text-left mfb-x" style="border-top:0px"><a ng-if="translationModel.clientProductUrl"
                                                                          href="{{translationModel.clientProductUrl}}"
                                                                          target="_blank">官网链接</a></td>
                    <td class="text-left" colspan="2" style="border-top:0px">{{translationModel.shortDescription}}</td>
                    <td class="text-left" colspan="2" style="border-top:0px">
                        <textarea class="form-control" style="resize:none" rows="6"
                                  ng-model="translationModel.shortDesCn"
                                  maxlength="{{vm.lenInfo.short_desc.maxLen}}"
                                  placeholder="{{'TXT_MSG_SHORT_DESCRIPTION' | translate}}"></textarea>

                        <div class="text-warnings text-left" style="padding-left:0px"><i class="icon fa fa-bell-o">{{('TXT_MSG_INPUT_WORD_LENCHK'
                            |
                            translate) + (vm.lenInfo.short_desc.maxLen - translationModel.shortDesCn.length) +
                            ('TXT_MSG_INPUT_WORD_LENCHK2' |
                            translate)}}</i></div>
                    </td>
                    <td class="text-center" style="border-top:0px">
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
        <div class="col-sm-12 m-t-lg m-b-lg">
            <vpagination config="vm.prodPageOption"></vpagination>
        </div>
    </div><!-- tabs ng-controller -->
</div><!-- .col-lg-12 -->