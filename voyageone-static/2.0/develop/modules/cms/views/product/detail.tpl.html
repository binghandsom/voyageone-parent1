<!-- .wrapper-md .vo_page_header -->
<div class="wrapper-md ng-pristine category-search ng-valid">
	<div class="row">
		<div class="col-lg-12">
			<div class="vo_accordion vo_attr vo_product">
				<div class="panel-collapse">
					<div class="hbox hbox-auto-xs no-border vo_prodBox">
						<div class="col-sm-10 p-l-none p-r-none">
							<div class="col vo_prodDataPanel">
								<div class="categoryFormTitle">
									<div class="categoryList">
										<div class="panel panel-default">
											<div ng-repeat="fieldItem in tarFields">
												<div ng-include="'mainView'"  ng-init="field = fieldItem">
												</div>
											</div>
										</div>

										<div ng-if="isSave&&!isNew" class="topPadding"><button class="btn btn-vo btn-xl" type="button" ng-click="submit()">提交</button></div>
									</div>
								</div>
							</div>
						</div>

					</div>
				</div>
			</div>
		</div>

	</div>
</div>
<a id="bottom"></a>
</div>

<script id="mainView" type="text/ng-template">

	<!-- input -->
	<fieldset ng-if="FieldTypeEnum.input == field.type">
		<legend ng-bind = "field.name"></legend>
		<fieldset ng-if="field.rules.length>0" >
			<legend><span class="legendTitle">填写规则：</span></legend>
			<ul>
				<li ng-repeat="rule in model.rules">

				</li>
			</ul>
		</fieldset>
		<label>{{field.name}}：</label><input type="text"  ng-model="field.value">
	</fieldset>
	<!-- singleCheck -->
	<fieldset ng-if="FieldTypeEnum.singleCheck == field.type">
		<legend ng-bind="field.name"></legend>
		<div class="pull-right"><button class="btn btn-danger btn-xs" ng-click="clearValue(field)"><i class="fa fa-eraser"></i> 清除</button></div>
		<div ng-if="model.rules.length==0" >
			<br/>
			<br/>
		</div>
		<fieldset ng-if="field.rules.length>0" >
			<legend><span class="legendTitle">填写规则：</span></legend>
			<ul>
				<li ng-repeat="rule in field.rules">
				</li>
			</ul>
		</fieldset>
		<label ng-repeat="option in field.options" >
			<input type="radio" ng-model="field.value" ng-value="option.value">{{option.displayName}}
		</label>

	</fieldset>
	<!-- multiCheck -->
	<fieldset ng-if="FieldTypeEnum.multiCheck == field.type">
		<legend ng-bind="field.name"></legend>
		<fieldset ng-if="field.rules.length>0">
			<legend><span class="legendTitle">填写规则：</span></legend>
			<ul>
				<li ng-repeat="rule in field.rules">
				</li>
			</ul>
		</fieldset>
		<label ng-repeat="option in field.options" >
			<input type="checkbox" ng-model="option.selectedValue" ng-true-value="'{{option.value}}'">{{option.displayName}}&nbsp;&nbsp;
		</label>
	</fieldset>
	<!-- label -->
	<fieldset ng-if="FieldTypeEnum.label == field.type">
		<legend>{{field.name}}</legend>
		<fieldset ng-if="field.rules.length>0">
			<legend><span class="legendTitle">填写规则：</span></legend>
			<ul>
				<li ng-repeat="rule in field.rules">

				</li>
			</ul>
		</fieldset>
		<label>
		</label>
	</fieldset>
	<!-- complex -->
	<fieldset ng-if="FieldTypeEnum.complex == field.type">
		<legend>{{field.name}}</legend>
		<fieldset ng-if="field.rules.length > 0" >
			<legend><span class="legendTitle">填写规则：</span></legend>
			<ul>
				<li ng-repeat="rule in field.rules">
				</li>
			</ul>
		</fieldset>
		<fieldset ng-if="field.rules.length == 0" >
			<legend><span class="legendTitle">填写规则：</span></legend>
			<ul>
				<li>
					<span>必须填写</span>
				</li>
			</ul>
		</fieldset>
		<div ng-repeat="subField in field.fieldList" ng-include="'mainView'"  ng-init="field = subField"></div>
	</fieldset>
	<!-- multiComplex -->
	<fieldset ng-if="FieldTypeEnum.multiComplex == field.type" class="legendTitle">
		<legend>{{field.name}}</legend>
		<fieldset ng-if="field.rules.length>0" >
			<legend><span class="legendTitle">填写规则：</span></legend>
			<ul>
				<li ng-repeat="rule in model.rules">
				</li>
			</ul>
		</fieldset>
		<div class="panel vo_panel tab_panel" >
			<div class="table-responsive" >
				<table class="table table-striped hover b-t b-b vo_table" style="margin:0px;padding:0px">
					<thead>

					<tr>
						<th ng-repeat="th in field.fieldList">{{th.name}}</th>
						<th>删除</th>
					</tr>
					</thead>
					<tbody>
					<tr ng-repeat="tr in model.items as list" class="ng-scope">
						<td ng-repeat="td in tr" >

							<input ng-if ="td.propType == 1" ng-disabled="isNew||!isSave" type="text" ng-model="td.propValue" ng-mousedown="openPropValueSetting(td)" class="ng-pristine ng-untouched ng-valid">

							<select ng-if ="td.propType == 2" ng-disabled="isNew||!isSave" ng-model="td.propValue" ng-options="option.prop_option_value as option.prop_option_name for option in td.options" class="ng-pristine ng-untouched ng-valid">
								<option value="">-- 选择 --</option>
							</select>

							<div ng-if ="td.propType == 3">
								<label ng-repeat="check in td.options">
									<input type="checkbox" ng-disabled="isNew||!isSave" ng-model="check.selectedValue" ng-true-value="'{{check.prop_option_value}}'">{{check.prop_option_name}}
								</label>
							</div>

							<label ng-if ="td.propType == 4">
								{{td.propValue}}
							</label>

							<div ng-if="td.propType == 5 && td.children!=null" ng-repeat="reModel in td.children">
								<div ng-include="'mainView'"  ng-init="model = reModel"></div>
							</div>

						</td>
						<td style="white-space: nowrap">
							<div class="buttons">
								<button ng-click="removeItem(list,$index)"  ng-disabled="isNew||!isSave" title="Delete" class="btn btn-sm btn-danger">
									<em class="fa fa-trash"/>
								</button>
							</div>
						</td>
					</tr>
					</tbody>
				</table>
			</div>
		</div>
		<button class="btn m-b-xs btn-sm btn-success btn-addon pull-right"  ng-disabled="isNew||!isSave" style="margin-top:20px" ng-click="addItem(list)" >
			<i class="fa fa-plus"></i>
			<span translate="CORE_BTN_ADD"></span>
		</button>
	</fieldset>
</script>
