{"version":3,"sources":["voyageone.angular.com.js","controllers/datePicker.ctrl.js","controllers/selectRows.ctrl.js","controllers/showPopover.ctrl.js","factories/dialogs.factory.js","factories/interceptor.factory.js","factories/notify.factory.js","factories/schema.factory.js","factories/vpagination.factory.js","directives/dateModelFormat.directive.js","directives/enterClick.directive.js","directives/filestyle.directive.js","directives/ifNoRows.directive.js","directives/navigation.directive.js","directives/schema.directive.js","directives/voption.directive.js","directives/vpagination.directive.js","directives/vvalidator.directive.js","providers/vresources.js","services/ajax.service.js","services/cookie.service.js","services/message.service.js","services/permission.service.js","services/translate.service.js"],"names":["define","angular","module","controller","$scope","vm","this","formats","formatDate","formatDateTime","open","$event","preventDefault","stopPropagation","opened","selectAll","selectOne","objectList","id","selAllFlag","forEach","currPageRows","object","selFlag","hasOwnProperty","selList","indexOf","push","splice","currentId","_","isEqual","showInfo","values","tempHtml","data","index","length","factory","$modal","$filter","$templateCache","templateName","put","tran","translationId","options","isObject","content","title","modalInstance","templateUrl","scope","extend","size","close","dismiss","ok","$dialogs","isAlert","vConfirm","InterceptorFactory","config","$httpProvider","interceptors","UNKNOWN_CODE","CODE_SYS_REDIRECT","MSG_TIMEOUT","autoRedirect","res","code","location","href","redirectTo","sessionTimeout","unknownException","response","window","$$lastUnknow","console","error","message","request","result","requestError","responseError","notify","isString","$","success","className","warning","danger","_schemaHeaderInfo","isRequired","isMultiComplex","isComplex","tipMsg","value","undefined","schemaHearInfo","_schemaInfo","type","name","rowNum","checkValues","html","htmlToString","schemaInfo","htmls","_pages","_lastTotal","_showPages","getTotal","total","getCurr","pageNo","curr","start","getCurrStartItems","end","getCurrEndItems","isFirst","isLast","pages","createShowPages","isShowStart","isShowEnd","goPage","load","getPageCount","getPages","isCurr","page","fetch","minPage","maxPage","showPageNo","i","parseInt","currEndItems","directive","restrict","require","link","elem","attrs","ngModel","$parsers","viewValue","dateModelFormat","attr","keyup","e","keyCode","selectExp","enterClick","targetElem","handler","click","element","$eval","$element","classInput","filestyle","$compile","tempNoDataKey","get","replace","$$data","$parent","$watch","find","remove","append","el","_window","_mb","wrap","next","backdrop","on","trigger","_this","parent","siblings","toggleClass","is","width","removeClass","target","top","w_h","height","offset","min","closest","addClass","position","css","appendTo","off","insertAfter","constant","INPUT","DATE","DATETIME","TEXTAREA","SINGLE_CHECK","RADIO","MULTI_INPUT","MULTI_CHECK","COMPLEX","MULTI_COMPLEX","LABEL","VALUE_TYPE_RULE","REQUIRED_RULE","DISABLE_RULE","READ_ONLY_RULE","REGEX_RULE","SET_RULE","TIP_RULE","DEV_TIP_RULE","MIN_LENGTH_RULE","MAX_LENGTH_RULE","MIN_VALUE_RULE","MAX_VALUE_RULE","MIN_INPUT_NUM_RULE","MAX_INPUT_NUM_RULE","MIN_DECIMAL_DIGITS_RULE","MAX_DECIMAL_DIGITS_RULE","MIN_TARGET_SIZE_RULE","MAX_TARGET_SIZE_RULE","MIN_IMAGE_SIZE_RULE","MAX_IMAGE_SIZE_RULE","TEXT","DECIMAL","INTEGER","LONG","TIME","URL","HTML","schemaHeaderFactory","fieldTypes","ruleTypes","valueTypes","templateKey_header","transclude","schemaHeader","_returnType","_operateRule","rules","showHtmlData","copy","addField","newFieldMap","fields","field","eval","fieldMap","rule","_requiredRule","_tipRule","requiredRule","tipRule","schemaFactory","templateKey_label","templateKey_input","templateKey_date","templateKey_datetime","templateKey_textarea","templateKey_select","templateKey_radio","templateKey_checkbox","templateKey_multiComplex","templateKey_complex","templateKey_multiComplex_tip","bindToController","controllerAs","$$hastip","$$complex","ctrl","schema","$$from","checkboxValue","contains","obj","isSelected","delField","_setCheckValues","complexValues","_resetMultiComplex","_resetComplex","tempValues","tempFieldMap","tempField","complexValue","isEmpty","_valueTypeRule","_disableRule","_readOnlyRule","_regexRule","_minLengthRule","_maxLengthRule","_minValueRule","_maxValueRule","_minInputNumRule","_maxInputNumRule","valueTypeRule","disableRule","dependGroup","readOnlyRule","regexRule","minLengthRule","isNaN","exProperty","unit","maxLengthRule","minValueRule","parseFloat","maxValueRule","minInputNumRule","maxInputNumRule","typeList","refresh","vpagination","templateKey","templateKeyNoData","defConfig","$$configNameForA","$$configNameForE","userConfigName","userConfig","userWithDefConfig","p","num","Number","totalPages","totalItems","elm","maxlength","$observe","intVal","$validate","$validators","modelValue","$isEmpty","getByteLength","byteLen","len","charCodeAt","minlength","maxvalue","test","Date","minvalue","maxinputnum","mininputnum","provider","$provide","getActionUrl","root","action","lastIndexOf","closureDataService","actions","ajaxService","DataResource","log","JSON","stringify","actionUrl","post","service","$get","register","childName","run","$vresources","$actions","$Ajax","AjaxService","$http","blockUI","$q","$inject","prototype","url","defer","then","alert","reject","resolve","promise","$ajax","messageService","show","CookieService","keys","language","company","channel","application","gentProps","key","val","arguments","set","$cookieStore","removeAll","MessageService","DISPLAY_TYPES","ALERT","NOTIFY","POP","CUSTOM","confirm","displayType","PermissionService","$rootScope","permissions","setPermissions","$broadcast","has","permission","trim","TranslateService","$translate","languages","en","zh","setLanguage","getBrowserLanguage","use","currentLang","navigator","browserLanguage","substr"],"mappings":"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","file":"voyageone.angular.com.js","sourcesContent":["define(function(){\n/**\n * @Description:\n * 弹出日期控件\n * @User:    Edward\n * @Version: 0.2.0, 2015-10-10\n */\n\nangular.module('voyageone.angular.controllers.datePicker', [])\n    .controller('datePickerCtrl', [\"$scope\", function ($scope) {\n        var vm = this;\n\n        vm.formats = ['yyyy-MM-dd', 'yyyy-MM-dd HH:mm:ss'];\n\n        $scope.formatDate = vm.formats[0];\n        $scope.formatDateTime = vm.formats[1];\n\n        $scope.open = open;\n\n        function open($event) {\n            $event.preventDefault();\n            $event.stopPropagation();\n\n            $scope.opened = true;\n        }\n    }]);\n/**\n * @Description:\n * select tables items\n * @User: linanbin\n * @Version: 2.0.0, 15/12/16\n */\n\nangular.module('voyageone.angular.controllers.selectRows', [])\n    .controller('selectRowsCtrl', [\"$scope\", function ($scope) {\n\n        $scope.selectAll = selectAll;\n        $scope.selectOne = selectOne;\n\n        /**\n         * 全部选中当前页数据\n         * @param objectList\n         */\n        function selectAll(objectList,id) {\n\n            objectList.selAllFlag = !objectList.selAllFlag;\n            if(!id){\n                id=\"id\";\n            }\n\n            // 循环处理全选中的数据\n            angular.forEach(objectList.currPageRows, function (object) {\n                //if(objectList.selFlag.hasOwnProperty(object[id])) {\n\n                    // 单签页面所有产品选中flag被标示\n                    objectList.selFlag[object[id]] = objectList.selAllFlag;\n\n                    if (objectList.hasOwnProperty('selList')) {\n                        if (objectList.selAllFlag && objectList.selList.indexOf(object) < 0) {\n                            objectList.selList.push(object);\n                        } else if (!objectList.selAllFlag && objectList.selList.indexOf(object) > -1) {\n                            objectList.selList.splice(objectList.selList.indexOf(object), 1);\n                        }\n                    }\n                //}\n            });\n        }\n\n        /**\n         * 选中单条数据\n         * @param currentId\n         * @param objectList\n         */\n        function selectOne(currentId, objectList,id) {\n            if(!id){\n                id=\"id\";\n            }\n            if (objectList.hasOwnProperty('selList')) {\n\n                angular.forEach(objectList.currPageRows, function(object) {\n\n                    if (_.isEqual(object[id], currentId)) {\n                        if (objectList.selList.indexOf(object) > -1) {\n                            objectList.selList.splice(objectList.selList.indexOf(object), 1);\n                        } else {\n                            objectList.selList.push(object);\n                        }\n                    }\n                });\n            }\n\n            objectList.selAllFlag = true;\n            angular.forEach(objectList.currPageRows, function(object) {\n                //if (!objectList.selFlag[object.id]) {\n                //    objectList.selAllFlag = false;\n                //}\n                if (objectList.selList.indexOf(object) == -1) {\n                    objectList.selAllFlag = false;\n                }\n            })\n        }\n    }]);\n/**\n * @Description:\n * 显示html的popover的共同方法\n * @User: linanbin\n * @Version: 2.0.0, 15/12/14\n */\n\nangular.module('voyageone.angular.controllers.showPopover', [])\n    .controller('showPopoverCtrl', [\"$scope\", function ($scope) {\n\n        $scope.showInfo = showInfo;\n\n        function showInfo(values) {\n            var tempHtml = \"\";\n\n            angular.forEach(values, function (data, index) {\n                tempHtml += data;\n                if (index !== values.length) {\n                    tempHtml += \"<br>\";\n                }\n            });\n            return tempHtml\n        }\n    }]);\n\n/**\n * @User: Jonas\n * @Date: 2015-3-31 14:39:26\n * @Version: 2.0.0\n */\n\nangular.module('voyageone.angular.factories.dialogs', [])\n  .factory(\"$dialogs\", [\"$modal\", \"$filter\", \"$templateCache\", function ($modal, $filter, $templateCache) {\n\n    var templateName = 'voyageone.angular.factories.dialogs.tpl.html';\n    $templateCache.put(templateName, '<div class=\"vo_modal\"><div class=\"modal-header\"><button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\" ng-click=\"close()\"><span aria-hidden=\"true\"><i ng-click=\"close()\" class=\"fa fa-close\"></i></span></button><h4 class=\"modal-title\" ng-bind-html=\"title\"></h4></div><div class=\"modal-body wrapper-lg\"><div class=\"row\"><p ng-bind-html=\"content\"></p></div></div><div class=\"modal-footer\"><button class=\"btn btn-default btn-sm\" ng-if=\"!isAlert\" ng-click=\"close()\" translate=\"BTN_COM_CANCEL\"></button><button class=\"btn btn-vo btn-sm\" ng-click=\"ok()\" translate=\"BTN_COM_OK\"></button></div></div>');\n\n    function tran(translationId, values) {\n      return $filter('translate')(translationId, values);\n    }\n\n    return function (options) {\n\n      if (!_.isObject(options)) throw \"arg type must be object\";\n\n      var values;\n\n      if (_.isObject(options.content)) {\n        values = options.content.values;\n        options.content = options.content.id;\n      }\n\n      options.title = tran(options.title);\n      options.content = tran(options.content, values);\n\n      var modalInstance = $modal.open({\n        templateUrl: templateName,\n        controller: [\"$scope\", function (scope) {\n          _.extend(scope, options);\n        }],\n        size: 'md'\n      });\n\n      options.close = function () {\n        modalInstance.dismiss('close')\n      };\n\n      options.ok = function () {\n        modalInstance.close('');\n      };\n\n      return modalInstance;\n    };\n  }])\n\n  .factory(\"alert\", [\"$dialogs\", function ($dialogs) {\n    return function (content, title) {\n      return $dialogs({\n        title: title || 'TXT_COM_ALERT',\n        content: content,\n        isAlert: true\n      });\n    };\n  }])\n\n  .factory(\"confirm\", [\"$dialogs\", function vConfirm($dialogs) {\n    return function (content, title) {\n      return $dialogs({\n        title: title || 'TXT_COM_CONFIRM',\n        content: content,\n        isAlert: false\n      });\n    };\n  }]);\n/**\n * @Date:    2015-11-16 20:51:05\n * @User:    Jonas\n * @Version: 0.2.0\n */\n\nangular.module('voyageone.angular.factories.interceptor', [])\n  .factory('interceptorFactory', InterceptorFactory)\n  .config([\"$httpProvider\", function ($httpProvider) {\n    $httpProvider.interceptors.push('interceptorFactory');\n  }]);\n\nfunction InterceptorFactory() {\n\n  // 未知的系统错误\n  var UNKNOWN_CODE = \"5\";\n  // 和 JAVA 同步,系统通知前端自动跳转的特殊代码\n  var CODE_SYS_REDIRECT = \"SYS_REDIRECT\";\n  // 和 JAVA 同步,回话过期的信息\n  var MSG_TIMEOUT = \"300001\";\n\n  /**\n   * 对系统自动跳转的响应,执行跳转\n   * @param {{code:string,redirectTo:string}} res\n   * @returns {boolean}\n   */\n  function autoRedirect(res) {\n    if (res.code != CODE_SYS_REDIRECT) {\n      return false;\n    }\n    // 如果跳转数据异常,则默认跳转登陆页\n    location.href = res.redirectTo || '/login.html';\n    return true;\n  }\n\n  /**\n   * 对会话超时和未登录进行特殊处理\n   * @param {{code:string}} res\n   * @returns {boolean}\n   */\n  function sessionTimeout(res) {\n    if (res.code != MSG_TIMEOUT) {\n      return false;\n    }\n    // 会话超时,默认跳转到登陆页\n    location.href = '/login.html';\n    return true;\n  }\n\n  /**\n   * 处理位置的异常\n   * @param response\n   */\n  function unknownException(response) {\n\n    if (response.data.code !== UNKNOWN_CODE) {\n      return;\n    }\n\n    window.$$lastUnknow = response;\n    console.error('Server throw unknown exceptio. Message:', response.data.message);\n  }\n\n  return {\n    request: function (config) {\n      return config;\n    },\n    response: function (res) {\n      var result = res.data;\n\n      if (autoRedirect(result) || sessionTimeout(result)) {\n        return res;\n      }\n\n      unknownException(res);\n\n      return res;\n    },\n    requestError: function (config) {\n      return config;\n    },\n    responseError: function (res) {\n    }\n  };\n}\n/**\n * Notify 的可用参数\n * {\n *    // whether to hide the notification on click\n *    clickToHide: true,\n *    // whether to auto-hide the notification\n *    autoHide: true,\n *    // if autoHide, hide after milliseconds\n *    autoHideDelay: 5000,\n *    // show the arrow pointing at the element\n *    arrowShow: true,\n *    // arrow size in pixels\n *    arrowSize: 5,\n *    // position defines the notification position though uses the defaults below\n *    position: '...',\n *    // default positions\n *    elementPosition: 'bottom left',\n *    globalPosition: 'top right',\n *    // default style\n *    style: 'bootstrap',\n *    // default class (string or [string])\n *    className: 'error',\n *    // show animation\n *    showAnimation: 'slideDown',\n *    // show animation duration\n *    showDuration: 400,\n *    // hide animation\n *    hideAnimation: 'slideUp',\n *    // hide animation duration\n *    hideDuration: 200,\n *    // padding between element and notification\n *    gap: 2\n * }\n * @User: Jonas\n * @Date: 2015-3-31 14:39:26\n * @Version: 2.0.0\n */\n\nangular.module('voyageone.angular.factories.notify', [])\n\n    .factory('notify', [\"$filter\", function ($filter) {\n\n        /**\n         * @ngdoc function\n         * @name voNotify\n         * @description\n         * 自动关闭的弹出提示框\n         */\n        function notify(options) {\n\n            if (!options) return;\n            if (_.isString(options)) options = {message: options};\n            if (!_.isObject(options)) return;\n\n            var values;\n\n            // 为 translate 的格式化提供支持，检测类型并转换\n            if (_.isObject(options.message)) {\n\n                values = options.message.values;\n                options.message = options.message.id;\n            }\n\n            options.message = $filter('translate')(options.message, values);\n\n            return $.notify(options.message, options);\n        }\n\n        notify.success = function (message) {\n            return notify({message: message, className: \"success\"});\n        };\n\n        notify.warning = function (message) {\n            return notify({message: message, className: \"warning\"});\n        };\n\n        notify.danger = function (message) {\n            return notify({message: message, className: \"danger\"});\n        };\n\n        return notify;\n    }]);\n/**\n * @Description:\n *\n * @User: linanbin\n * @Version: 2.0.0, 15/12/25\n */\n\n\nangular.module('voyageone.angular.factories.schema', [])\n\n    // 定义schemaHeaderFactory\n    .factory('schemaHeaderFactory', function () {\n        return function (config) {\n            var _schemaHeaderInfo = config ? config : {\n                isRequired: false,\n                //size: null,\n                isMultiComplex: false,\n                isComplex: false,\n                tipMsg: []\n            };\n\n            this.isRequired = function (value) {\n                return value !== undefined ? _schemaHeaderInfo.isRequired = value : _schemaHeaderInfo.isRequired;\n            };\n\n            //this.size = function (value) {\n            //    return value !== undefined ? _schemaHeaderInfo.size = value : _schemaHeaderInfo.size;\n            //};\n\n            this.isComplex = function (value) {\n                return value !== undefined ? _schemaHeaderInfo.isComplex = value : _schemaHeaderInfo.isComplex;\n            };\n\n            this.isMultiComplex = function (value) {\n                return value !== undefined ? _schemaHeaderInfo.isMultiComplex = value : _schemaHeaderInfo.isMultiComplex;\n            };\n\n            this.tipMsg = function (value) {\n                return value !== undefined ? _schemaHeaderInfo.tipMsg.push(value) : _schemaHeaderInfo.tipMsg;\n            };\n\n            this.schemaHearInfo = _schemaHeaderInfo;\n        }\n    })\n\n    // 定义schemaFactory\n    .factory('schemaFactory', function () {\n\n        return function (config) {\n\n            var _schemaInfo = config ? config : {\n                type: null,\n                name: null,\n                rowNum: null,\n                isRequired: false,\n                checkValues: [],\n                tipMsg: [],\n                html: []\n            };\n\n            this.type = function (value) {\n                return value !== undefined ? _schemaInfo.type = value : _schemaInfo.type;\n            };\n\n            this.name = function (value) {\n                return value !== undefined ? _schemaInfo.name = value : _schemaInfo.name;\n            };\n\n            this.html = function (value) {\n                return value !== undefined ? _schemaInfo.html.push(value) : htmlToString(_schemaInfo.html);\n            };\n\n            this.isRequired = function (value) {\n                return value !== undefined ? _schemaInfo.isRequired = value : _schemaInfo.isRequired;\n            };\n\n            this.rowNum = function (value) {\n                return value !== undefined ? _schemaInfo.rowNum = value : _schemaInfo.rowNum;\n            };\n\n            this.tipMsg = function (value) {\n                return value !== undefined ? _schemaInfo.tipMsg.push(value) : _schemaInfo.tipMsg;\n            };\n\n            this.checkValues = function (value) {\n                return value !== undefined ? _schemaInfo.checkValues.push(value) : _schemaInfo.checkValues;\n            };\n\n            this.schemaInfo = function () {\n                return _schemaInfo;\n            };\n\n            function htmlToString (htmls) {\n                var result = \"\";\n                angular.forEach(htmls, function (html) {\n                    result += \" \" + html + \" \";\n                });\n                return result;\n            }\n        };\n    });\n/**\n * @User: Edward\n * @Version: 2.0.0, 2015-12-09\n */\n\nangular.module('voyageone.angular.factories.vpagination', [])\n    .factory('vpagination', function () {\n\n        /**\n         * 创建一个分页服务\n         * @param {{ curr: number, size: number, total: number, fetch: function }} config 配置\n         */\n        return function (config) {\n\n            var _pages, _lastTotal = 0, _showPages = [];\n\n            /**\n             * 返回总件数\n             * @returns {*}\n             */\n            this.getTotal = function () {\n                return config.total;\n            };\n\n            /**\n             * 返回当前页的开始和结束号\n             * @returns {{start: number, end: number}}\n             */\n            this.getCurr = function () {\n                return {\n                    pageNo: curr(),\n                    start: getCurrStartItems(),\n                    end: getCurrEndItems(),\n                    isFirst: isFirst(),\n                    isLast: isLast(),\n                    pages: createShowPages(),\n                    isShowStart: isShowStart(),\n                    isShowEnd: isShowEnd()\n                }\n            };\n\n            // 跳转到指定页\n            this.goPage = load;\n            // 返回总页数\n            this.getPageCount = getPages;\n            // 是否是当前页\n            this.isCurr = isCurr;\n\n            /**\n             * 跳转到指定页\n             * @param {number} page 页号\n             */\n            function load(page) {\n                page = page || config.curr;\n\n                if (page < 1 || page > getPages() || isCurr(page)) return;\n\n                config.curr = page;\n\n                config.fetch(page, config.size);\n            }\n\n            /**\n             * 初始化page列表\n             * @returns {Array}\n             */\n            function createShowPages () {\n\n                var minPage, maxPage, _showPages= [];\n                if (config.curr < config.showPageNo) {\n                    minPage = 1;\n                    if(_pages <= config.showPageNo) maxPage = _pages;\n                    else maxPage = config.showPageNo;\n                } else if (config.curr + 2 > _pages) {\n                    minPage = _pages + 1 - config.showPageNo;\n                    maxPage = _pages;\n                } else {\n                    minPage = config.curr + 3 - config.showPageNo;\n                    maxPage = config.curr + 2;\n                }\n\n                // 按照指定数量创建按钮\n                for (var i =  minPage; i <= maxPage; i++) {\n                    //scope.pages.push({num: 1, active: \"\", show: false});\n                    _showPages.push(i);\n                }\n\n                return _showPages;\n            }\n\n            /**\n             * 获取当前总页数\n             * @returns {number}\n             */\n            function getPages() {\n                if (_lastTotal != config.total) {\n                    _pages = parseInt(config.total / config.size) + ((config.total % config.size) > 0 ? 1 : 0);\n                    _lastTotal = config.total;\n                }\n                return _pages;\n            }\n\n            /**\n             * 返回当前页的起始号\n             * @returns {number}\n             */\n            function getCurrStartItems() {\n                return (config.curr - 1) * config.size + 1\n            }\n\n            /**\n             * 返回当前页的结束号\n             * @returns {number}\n             */\n            function getCurrEndItems() {\n                var currEndItems = config.curr * config.size;\n                return currEndItems <= config.total ? currEndItems : config.total;\n\n            }\n\n            /**\n             * 是否是最后一页\n             * @returns {boolean}\n             */\n            function isLast() {\n                return config.curr == getPages();\n            }\n\n            /**\n             * 是否是第一页\n             * @returns {boolean}\n             */\n            function isFirst() {\n                return config.curr == 1;\n            }\n\n            /**\n             * 是否是当前页\n             * @param page 页码\n             * @returns {boolean}\n             */\n            function isCurr(page) {\n                return config.curr == page;\n            }\n\n            function curr() {\n                return config.curr;\n            }\n\n            /**\n             * 是否显示开始...项目\n             * @returns {boolean}\n             */\n            function isShowStart () {\n                _showPages = createShowPages();\n                return _showPages[0] > 1\n            }\n\n            /**\n             * 是否显示结束...项目\n             * @returns {boolean}\n             */\n            function isShowEnd () {\n                _showPages = createShowPages();\n                return _showPages[_showPages.length - 1] < _pages;\n            }\n\n        };\n    });\n/**\n * @Date: 2015-11-19 15:13:02\n * @User: Jonas\n * @Version: 2.0.0\n */\n\nangular.module('voyageone.angular.directives.dateModelFormat', [])\n    .directive('dateModelFormat', [\"$filter\", function ($filter) {\n        return {\n            restrict: \"A\",\n            require: 'ngModel',\n            link: function (scope, elem, attrs, ngModel) {\n                ngModel.$parsers.push(function (viewValue) {\n                    return $filter('date')(viewValue, attrs.dateModelFormat || 'yyyy-MM-dd HH:mm:ss');\n                });\n            }\n        };\n    }]);\n\n/**\n * @Date: 2015-11-19 15:13:02\n * @User: Jonas\n * @Version: 0.2.0\n */\n\nangular.module('voyageone.angular.directives.enterClick', [])\n  .directive('enterClick', function() {\n    return {\n      restrict: \"A\",\n      link: function(scope, elem, attr) {\n        $(elem).keyup(function(e) {\n          if (e.keyCode !== 13) return;\n\n          var selectExp = attr.enterClick;\n\n          var targetElem, handler = function() {\n            targetElem.click();\n          };\n\n          try {\n            targetElem = angular.element(selectExp);\n          } catch (e) {\n            targetElem = null\n          }\n\n          if (!targetElem || !targetElem.length) {\n            // 如果取不到元素，则尝试作为表达式执行\n            handler = function() {\n              scope.$eval(selectExp);\n            };\n          } else if (targetElem.attr(\"disabled\")) {\n            // 如果元素存在，但是是禁用状态的，放弃执行\n            return;\n          }\n\n          handler();\n        });\n      }\n    };\n  });\n\n/**\n * @Description:\n * 引入对上传框插件 fileStyle 的指令支持\n * @Date:    2015-11-19 17:35:22\n * @User:    Jonas\n * @Version: 2.0.0\n */\n\nangular.module('voyageone.angular.directives.fileStyle', [])\n  .directive('fileStyle', function () {\n    return {\n      restrict: 'A',\n      controller: [\"$scope\", \"$element\", function ($scope, $element) {\n        var options = $element.data();\n        // old usage support\n        options.classInput = $element.data('classinput') || options.classInput;\n        if ($element.filestyle) {\n          $element.filestyle(options);\n        }\n      }]\n    };\n  });\n/**\n * @Description:\n * table中无数据范围的数据\n * @User: linanbin\n * @Version: 2.0.0, 15/12/11\n */\n\nangular.module('voyageone.angular.directives.ifNoRows', [])\n    .directive('ifNoRows', [\"$templateCache\", \"$compile\", function ($templateCache, $compile) {\n\n        var tempNoDataKey = \"voyageone.angular.directives.ifNoRows.tpl.html\";\n\n        // 没有数据显示警告\n        if (!$templateCache.get(tempNoDataKey)) {\n            $templateCache.put(tempNoDataKey,\n            '<div class=\"text-center text-hs\" id=\"noData\">\\n' +\n            '    <h4 class=\"text-vo\"><i class=\"icon fa fa-warning\"></i>&nbsp;{{\\'TXT_COM_WARNING\\' | translate}}</h4>\\n' +\n            '{{\\'TXT_COM_MSG_NO_DATE\\' | translate}}' +\n            '</dv>');\n        }\n\n        return {\n            restrict: \"A\",\n            replace: false,\n            scope: {\n                $$data: \"@ifNoRows\"\n            },\n            link: function (scope, element) {\n\n                scope.$parent.$watch(scope.$$data, function () {\n\n                    // 如果数据不存在则显示警告信息\n                    if(scope.$parent.$eval(scope.$$data)  == 0) {\n                        element.find(\"#noData\").remove();\n                        element.append($compile($templateCache.get(tempNoDataKey))(scope));\n                    } else {\n                        element.find(\"#noData\").remove();\n                    }\n                })\n            }\n        };\n    }]);\n\n/**\n * @Description:\n * 用于菜单目录二级展开\n * @User:    Jonas\n * @Version: 0.2.0, 2015-12-07\n */\n\nangular.module('voyageone.angular.directives.uiNav', [])\n    .directive('uiNav', function () {\n\n        return {\n            restrict: 'AC',\n            link: function(scope, el) {\n                var _window = $(window),\n                    _mb = 768,\n                    wrap = $('.app-aside'),\n                    next,\n                    backdrop = '.dropdown-backdrop';\n                // unfolded\n                el.on('click', 'a', function(e) {\n                    next && next.trigger('mouseleave.nav');\n                    var _this = $(this);\n                    _this.parent().siblings( \".active\" ).toggleClass('active');\n                    _this.next().is('ul') &&  _this.parent().toggleClass('active') &&  e.preventDefault();\n                    // mobile\n                    _this.next().is('ul') || ( ( _window.width() < _mb ) && $('.app-aside').removeClass('show off-screen') );\n                });\n\n                // folded & fixed\n                el.on('mouseenter', 'a', function(e){\n                    next && next.trigger('mouseleave.nav');\n                    $('> .nav', wrap).remove();\n                    if ( !$('.app-aside-fixed.app-aside-folded').length || ( _window.width() < _mb ) || $('.app-aside-dock').length) return;\n                    var _this = $(e.target)\n                        , top\n                        , w_h = $(window).height()\n                        , offset = 50\n                        , min = 150;\n\n                    !_this.is('a') && (_this = _this.closest('a'));\n                    if( _this.next().is('ul') ){\n                        next = _this.next();\n                    }else{\n                        return;\n                    }\n\n                    _this.parent().addClass('active');\n                    top = _this.parent().position().top + offset;\n                    next.css('top', top);\n                    if( top + next.height() > w_h ){\n                        next.css('bottom', 0);\n                    }\n                    if(top + min > w_h){\n                        next.css('bottom', w_h - top - offset).css('top', 'auto');\n                    }\n                    next.appendTo(wrap);\n\n                    next.on('mouseleave.nav', function(e){\n                        $(backdrop).remove();\n                        next.appendTo(_this.parent());\n                        next.off('mouseleave.nav').css('top', 'auto').css('bottom', 'auto');\n                        _this.parent().removeClass('active');\n                    });\n\n                    $('.smart').length && $('<div class=\"dropdown-backdrop\"/>').insertAfter('.app-aside').on('click', function(next){\n                        next && next.trigger('mouseleave.nav');\n                    });\n\n                });\n\n                wrap.on('mouseleave', function(e){\n                    next && next.trigger('mouseleave.nav');\n                    $('> .nav', wrap).remove();\n                });\n            }\n        };\n    });\n/**\n * @Description:\n *\n * @User: linanbin\n * @Version: 2.0.0, 15/12/24\n */\n\nangular.module('voyageone.angular.directives.schema', [])\n    // 定义fieldTypes\n    .constant('fieldTypes', {\n        INPUT: \"INPUT\",\n        DATE: \"DATE\",\n        DATETIME: \"DATETIME\",\n        TEXTAREA: \"TEXTAREA\",\n        SINGLE_CHECK: \"SINGLECHECK\",// 在complex中的显示select,以外的默认显示singlecheck,如果用户觉得select显示不方便,就将该field的type改成radio\n        RADIO: \"RADIO\",\n        MULTI_INPUT: \"MULTIINPUT\", // 没有被使用\n        MULTI_CHECK: \"MULTICHECK\",\n        COMPLEX: \"COMPLEX\", // TODO\n        MULTI_COMPLEX: \"MULTICOMPLEX\",\n        LABEL: \"LABEL\"  // 可以不显示\n    })\n    // 定义ruleTypes\n    .constant('ruleTypes', {\n        VALUE_TYPE_RULE: \"valueTypeRule\",\n        REQUIRED_RULE: \"requiredRule\",\n        DISABLE_RULE: \"disableRule\",\n        READ_ONLY_RULE: \"readOnlyRule\",\n        REGEX_RULE: \"regexRule\",\n        SET_RULE: \"setRule\", // TODO 暂时不知道怎么用\n        TIP_RULE: \"tipRule\", // TODO 不需要处理\n        DEV_TIP_RULE: \"devTipRule\", // 不需要处理\n        MIN_LENGTH_RULE: \"minLengthRule\",\n        MAX_LENGTH_RULE: \"maxLengthRule\",\n        MIN_VALUE_RULE: \"minValueRule\",\n        MAX_VALUE_RULE: \"maxValueRule\",\n        MIN_INPUT_NUM_RULE: \"minInputNumRule\",\n        MAX_INPUT_NUM_RULE: \"maxInputNumRule\",\n        MIN_DECIMAL_DIGITS_RULE: \"minDecimalDigitsRule\", // TODO\n        MAX_DECIMAL_DIGITS_RULE: \"maxDecimalDigitsRule\", // TODO\n        MIN_TARGET_SIZE_RULE: \"minTargetSizeRule\", // TODO\n        MAX_TARGET_SIZE_RULE: \"maxTargetSizeRule\", // TODO\n        MIN_IMAGE_SIZE_RULE: \"minImageSizeRule\", // TODO\n        MAX_IMAGE_SIZE_RULE: \"maxImageSizeRule\" // TODO\n    })\n    // 定义valueTypes\n    .constant('valueTypes', {\n        TEXT: \"text\",\n        DECIMAL: \"decimal\",\n        INTEGER: \"integer\",\n        LONG: \"long\",\n        DATE: \"date\",\n        TIME: \"time\",\n        URL: \"url\",\n        TEXTAREA: \"textarea\",\n        HTML: \"html\"\n    })\n\n    .directive('schemaHeader', [\"$templateCache\", \"schemaHeaderFactory\", \"fieldTypes\", \"ruleTypes\", \"valueTypes\", function ($templateCache, schemaHeaderFactory, fieldTypes, ruleTypes, valueTypes) {\n\n        // 定义header\n        var templateKey_header = \"voyageone.angular.directives.schemaHeader.tpl.html\";\n        if (!$templateCache.get(templateKey_header)) {$templateCache.put(templateKey_header\n            , '<div class=\"form-group\">' +\n              '  <label class=\"col-sm-2 control-label\" ng-class=\"{\\'vo_reqfield\\': showHtmlData.isRequired}\" ng-bind=\"$$data.name\"></label>' +\n              '  <div class=\"col-sm-8\" ng-class=\"{\\'hierarchy_main modal-open\\' : showHtmlData.isMultiComplex, \\'hierarchy_main\\': showHtmlData.isComplex}\" ng-transclude></div>' +\n              '  <div class=\"col-sm-2\" ng-if=\"showHtmlData.isMultiComplex\"><button class=\"btn btn-success\" ng-click=\"addField($$data)\"><i class=\"fa fa-plus\"></i>{{\\'BTN_COM_ADD\\' | translate}}</button></div>' +\n              '  <div class=\"row\" ng-repeat=\"tipMsg in showHtmlData.tipMsg\"><div class=\"col-sm-8 col-sm-offset-2 text-warnings\"><i class=\"icon fa fa-bell-o\"></i>&nbsp;{{tipMsg}}</div></div>' +\n              '</div>');}\n\n        return {\n            restrict: \"E\",\n            replace: true,\n            transclude: true,\n            templateUrl: templateKey_header,\n            scope: {\n                $$data: \"=data\"\n            },\n            link: function (scope) {\n                var schemaHeader = new schemaHeaderFactory();\n\n                _returnType (scope.$$data.type);\n                _operateRule (scope.$$data.rules);\n                scope.showHtmlData = angular.copy(schemaHeader.schemaHearInfo);\n\n                /**\n                 * 设置multi complex添加一条新记录\n                 * @param data\n                 */\n                scope.addField= function (data) {\n                    var newFieldMap = {};\n                    angular.forEach(data.fields, function (field) {\n                        eval(\"newFieldMap.\" + field.id + \"=field\");\n                    });\n\n                    data.values.push({fieldMap: angular.copy(newFieldMap)});\n                };\n\n                /**\n                 * 返回需要展示的页面样式\n                 * @param type\n                 * @param valueTypeRule\n                 * @private\n                 */\n                function _returnType (type) {\n\n                    switch (type) {\n                        case fieldTypes.MULTI_COMPLEX:\n                            schemaHeader.isMultiComplex(true);\n                            break;\n                        case fieldTypes.COMPLEX:\n                            schemaHeader.isComplex(true);\n                            break;\n                    }\n                }\n\n                /**\n                 * 处理rules\n                 * @param rules\n                 * @private\n                 */\n                function _operateRule (rules) {\n                    angular.forEach(rules, function (rule) {\n                        switch (rule.name) {\n                            case ruleTypes.REQUIRED_RULE:\n                                _requiredRule(rule);\n                                break;\n                            case ruleTypes.TIP_RULE:\n                                _tipRule(rule);\n                                break;\n                        }\n                    })\n\n                }\n\n                /**\n                 * 处理requiredRule\n                 * @param requiredRule\n                 * @private\n                 */\n                function _requiredRule (requiredRule) {\n                    if (\"true\" == requiredRule.value) {\n                        schemaHeader.isRequired(true);\n                    }\n                }\n\n                /**\n                * 处理tipRule\n                * @param tipRule\n                * @private\n                */\n                function _tipRule (tipRule) {\n                    schemaHeader.tipMsg(tipRule.value);\n                }\n            }\n        }\n    }])\n\n    .directive('schemaItem', [\"$templateCache\", \"$compile\", \"schemaFactory\", \"fieldTypes\", \"ruleTypes\", \"valueTypes\", function ($templateCache, $compile, schemaFactory, fieldTypes, ruleTypes, valueTypes) {\n\n        // label\n        var templateKey_label = \"voyageone.angular.directives.schemaLabel.tpl.html\";\n        if (!$templateCache.get(templateKey_label)) {$templateCache.put(templateKey_label,\n            '<input style=\"min-width: 150px; max-width: 250px;\" type=\"text\" readonly ng-model=\"vm.$$data.value\" class=\"form-control inherited\">');}\n\n        // input\n        var templateKey_input = \"voyageone.angular.directives.schemaInput.tpl.html\";\n        if (!$templateCache.get(templateKey_input)) {$templateCache.put(templateKey_input,\n            '<input id=\"quantity\" name=\"quantity\" style=\"min-width: 150px; max-width: 250px;\" ng-model=\"vm.$$data.value\" class=\"form-control inherited\" replaceInfo>' +\n            '{{vm.$$from.quantity}}<span ng-bind=\"vm.$$from.quantity\"></span>');}\n\n        // data\n        var templateKey_date = \"voyageone.angular.directives.schemaDate.tpl.html\";\n        if (!$templateCache.get(templateKey_date)) {$templateCache.put(templateKey_date,\n            '<div class=\"input-group\" style=\"width: 180px;\" ng-controller=\"datePickerCtrl\"><input replaceInfo type=\"text\" class=\"form-control\" datepicker-popup=\"{{formatDate}}\" ng-model=\"vm.$parent.$$data.value\" date-model-format=\"{{formatDate}}\" is-open=\"opened\" datepicker-options=\"dateOptions\" close-text=\"Close\" /><span class=\"input-group-btn\"><button replaceInfo type=\"button\" class=\"btn btn-default\" ng-click=\"open($event)\"><i class=\"glyphicon glyphicon-calendar\"></i></button></span></div>');}\n\n        // datetime\n        var templateKey_datetime = \"voyageone.angular.directives.schemaDatetime.tpl.html\";\n        if (!$templateCache.get(templateKey_datetime)) {$templateCache.put(templateKey_datetime,\n            '<div class=\"input-group\" style=\"width: 180px;\" ng-controller=\"datePickerCtrl\"><input replaceInfo type=\"text\" class=\"form-control\" datepicker-popup=\"{{formatDateTime}}\" ng-model=\"vm.$parent.$$data.value\" is-open=\"opened\" datepicker-options=\"dateOptions\" close-text=\"Close\" /><span class=\"input-group-btn\"><button replaceInfo type=\"button\" class=\"btn btn-default\" ng-click=\"open($event)\"><i class=\"glyphicon glyphicon-calendar\"></i></button></span></div>');}\n\n        // textarea\n        var templateKey_textarea = \"voyageone.angular.directives.schemaTextarea.tpl.html\";\n        if (!$templateCache.get(templateKey_textarea)) {$templateCache.put(templateKey_textarea,\n            '<textarea style=\"min-width: 150px; max-width: 650px;\" class=\"form-control no-resize\" ng-model=\"vm.$$data.value\" rows=\"{{showHtmlData.rowNum}}\" replaceInfo></textarea>');}\n\n        // single check-select\n        var templateKey_select = \"voyageone.angular.directives.schemaSelect.tpl.html\";\n        if (!$templateCache.get(templateKey_select)) {$templateCache.put(templateKey_select,\n            '<select style=\"min-width: 150px; max-width: 250px;\" replaceInfo class=\"form-control\" ng-model=\"vm.$$data.value.value\" ng-options=\"option.value as option.displayName for option in vm.$$data.options\"> <option value=\"\">{{\\'TXT_SELECT_NO_VALUE\\' | translate}}</option></select>');}\n\n        // single check-radio\n        var templateKey_radio = \"voyageone.angular.directives.schemaRadio.tpl.html\";\n        if (!$templateCache.get(templateKey_radio)) {$templateCache.put(templateKey_radio,\n            '<label class=\"checkbox-inline c-radio\" ng-repeat=\"option in vm.$$data.options\"><input name=\"{{vm.$$data.id}}\" type=\"radio\" ng-value=\"option.value\" ng-model=\"vm.$$data.value.value\"><span class=\"fa fa-check\"></span> {{option.displayName}}</label>');}\n\n        // multi check-checkbox\n        var templateKey_checkbox = \"voyageone.angular.directives.schemaCheckbox.tpl.html\";\n        if (!$templateCache.get(templateKey_checkbox)) {$templateCache.put(templateKey_checkbox,\n            '<label class=\"checkbox-inline c-checkbox\" ng-repeat=\"option in vm.$$data.options\"><input type=\"checkbox\" ng-value=\"option.value\" ng-click=\"checkboxValue(option.value)\" ng-checked=\"isSelected(option.value)\"><span class=\"fa fa-check\"></span> {{option.displayName}}</label>');}\n\n        // multi complex\n        var templateKey_multiComplex = \"voyageone.angular.directives.schemaMultiComplex.tpl.html\";\n        if (!$templateCache.get(templateKey_multiComplex)) {$templateCache.put(templateKey_multiComplex,\n            '<table class=\"table text-center\">' +\n            '<thead><tr>' +\n                //'<schema-header ng-repeat=\"field in vm.$$data.fields\" data=\"field\" is-complex=\"true\"></schema-header>' +\n            '<th ng-repeat=\"field in vm.$$data.fields\" ng-class=\"{\\'vo_reqfield\\': showHtmlData.isRequired}\" class=\"text-center\" style=\"min-width: 180px;\">{{field.name}}</th>' +\n            '<th style=\"min-width: 60px;\" class=\"text-center\" translate=\"TXT_COM_EDIT\"></th>' +\n            '</tr></thead>' +\n            '<tbody><tr ng-repeat=\"value in vm.$$data.complexValues\">' +\n            '<td class=\"text-left\" ng-repeat=\"field in value.fieldMap\"><schema-item data=\"field\" hastip=\"true\" complex=\"true\"></schema-item></td>' +\n            '<td style=\"min-width: 60px;\"><button title=\"{\\'BTN_COM_DELETE\\' | translate}\" class=\"btn btn-danger btn-xs\" ng-click=\"delField($index)\"><i class=\"fa  fa-trash-o\"></i></button></td>' +\n            '</tr></tbody>' +\n            '</table>');}\n\n        // complex\n        var templateKey_complex = \"voyageone.angular.directives.schemaComplex.tpl.html\";\n        if (!$templateCache.get(templateKey_complex)) {$templateCache.put(templateKey_complex,\n            '<schema-header ng-repeat=\"field in vm.$$data.fields\" data=\"field\"><schema-item data=\"field\"></schema-item></schema-header>');}\n\n        // multi complex tip\n        var templateKey_multiComplex_tip = \"voyageone.angular.directives.schemaMultiComplexTip.tpl.html\";\n        if (!$templateCache.get(templateKey_multiComplex_tip)) {$templateCache.put(templateKey_multiComplex_tip,\n            '<div class=\"text-warnings\" ng-repeat=\"tipMsg in showHtmlData.tipMsg\"><br><i class=\"icon fa fa-bell-o\"></i>&nbsp;{{tipMsg}}</div>');}\n\n        return {\n            restrict: \"E\",\n            require: ['^?form'],\n            replace: true,\n            bindToController: true,\n            controllerAs: \"vm\",\n            controller: function () {},\n            scope: {\n                $$data: \"=data\",\n                $$hastip: \"=hastip\",\n                $$complex: \"=complex\"\n            },\n            link: function (scope, element, ctrl) {\n\n                var schema = new schemaFactory();\n                scope.vm.$$from = ctrl;\n\n                // 设置空间name\n                schema.name(scope.vm.$$data.id);\n\n                _returnType (scope.vm.$$data.type);\n                _operateRule (scope.vm.$$data.rules);\n\n                var tempHtml = \"\";\n                // 拼接body\n                switch (schema.type()) {\n                    case fieldTypes.INPUT:\n                        tempHtml = $templateCache.get(templateKey_input).replace(\"replaceInfo\", schema.html());\n                        break;\n                    case fieldTypes.DATE:\n                        tempHtml = $templateCache.get(templateKey_date).replace(\"replaceInfo\", schema.html()).replace(\"replaceInfo\", schema.html());\n                        break;\n                    case fieldTypes.DATETIME:\n                        tempHtml = $templateCache.get(templateKey_datetime).replace(\"replaceInfo\", schema.html()).replace(\"replaceInfo\", schema.html());\n                        break;\n                    case fieldTypes.TEXTAREA:\n                        tempHtml = $templateCache.get(templateKey_textarea).replace(\"replaceInfo\", schema.html());\n                        break;\n                    case fieldTypes.SINGLE_CHECK:\n                        tempHtml = $templateCache.get(templateKey_select).replace(\"replaceInfo\", schema.html());\n                        break;\n                    case fieldTypes.RADIO:\n                        tempHtml = $templateCache.get(templateKey_radio).replace(\"replaceInfo\", schema.html());\n                        break;\n                    case fieldTypes.MULTI_CHECK:\n                        tempHtml = $templateCache.get(templateKey_checkbox).replace(\"replaceInfo\", schema.html());\n                        break;\n                    case fieldTypes.LABEL:\n                        tempHtml = $templateCache.get(templateKey_label);\n                        break;\n                    case fieldTypes.MULTI_COMPLEX:\n                        tempHtml = $templateCache.get(templateKey_multiComplex);\n                        break;\n                    case fieldTypes.COMPLEX:\n                        tempHtml = $templateCache.get(templateKey_complex);\n                        break;\n                }\n\n                // 添加规则说明\n                if (schema.tipMsg() != null && scope.vm.$$hastip) {\n                    tempHtml += $templateCache.get(templateKey_multiComplex_tip);\n                }\n                scope.showHtmlData = angular.copy(schema.schemaInfo());\n                element.html($compile(tempHtml)(scope));\n\n                /**\n                 * 设置checkbox被选中的value值处理\n                 * @param value\n                 */\n                scope.checkboxValue = function (value) {\n                    if (_.contains(scope.showHtmlData.checkValues, value)) {\n                        scope.showHtmlData.checkValues.splice(_.indexOf(scope.showHtmlData.checkValues, value), 1);\n                    } else {\n                        scope.showHtmlData.checkValues.push(value);\n                    }\n                    scope.vm.$$data.values = [];\n                    angular.forEach(scope.showHtmlData.checkValues, function (obj) {\n                        scope.vm.$$data.values.push({id: null, value: obj});\n                    })\n                };\n\n                /**\n                 * 判断是否被选中\n                 * @param value\n                 */\n                scope.isSelected = function (value) {\n                    return _.contains(scope.showHtmlData.checkValues, value)\n                };\n\n                /**\n                 * 设置multi complex删除该条记录\n                 * @param index\n                 */\n                scope.delField = function (index) {\n                    scope.vm.$$data.values.splice(index, 1);\n                };\n\n                /**\n                 * 返回需要展示的页面样式\n                 * @param type\n                 * @param valueTypeRule\n                 * @private\n                 */\n                function _returnType (type) {\n                    schema.type(type);\n                    switch (type) {\n                        case fieldTypes.RADIO:\n                            if (scope.vm.$$complex)\n                                schema.type(fieldTypes.SINGLE_CHECK);\n                            break;\n                        case fieldTypes.MULTI_CHECK:\n                            _setCheckValues(scope.vm.$$data.values);\n                            break;\n                        case fieldTypes.MULTI_COMPLEX:\n                            scope.vm.$$data.complexValues = _resetMultiComplex(scope.vm.$$data);\n                            break;\n                        case fieldTypes.COMPLEX:\n                            _resetComplex(scope.vm.$$data);\n                            break;\n                    }\n                }\n\n                /**\n                 * 设置checkvalues\n                 * @param values\n                 * @private\n                 */\n                function _setCheckValues (values) {\n                    if (values != undefined && values != null) {\n                        angular.forEach(values, function (obj) {\n                            schema.checkValues(obj.value);\n                        })\n                    }\n                }\n\n                /**\n                 * 重新设置multicomplex的一些属性\n                 * @param fields\n                 * @private\n                 */\n                function _resetMultiComplex (data) {\n                    var tempValues = [];\n                    angular.forEach(data.complexValues, function (value) {\n                        var tempFieldMap = {};\n                        angular.forEach(data.fields, function (field) {\n                            var tempField = angular.copy(field);\n                            if (value.fieldMap[field.id] != undefined) {\n                                switch (field.type) {\n                                    case fieldTypes.INPUT:\n                                    case fieldTypes.LABEL:\n                                    case fieldTypes.DATE:\n                                    case fieldTypes.DATETIME:\n                                    case fieldTypes.TEXTAREA:\n                                    case fieldTypes.SINGLE_CHECK:\n                                    case fieldTypes.RADIO:\n                                        tempField.value = value.fieldMap[field.id].value;\n                                        break;\n                                    case fieldTypes.MULTI_INPUT:\n                                    case fieldTypes.MULTI_CHECK:\n                                        tempField.values = value.fieldMap[field.id].values;\n                                        break;\n                                    case fieldTypes.COMPLEX:\n                                        tempField.complexValue = value.fieldMap[field.id].complexValue;\n                                        break;\n                                    case fieldTypes.MULTI_COMPLEX:\n                                        tempField.complexValues = value.fieldMap[field.id].complexValues;\n                                        break;\n                                }\n                            }\n                            tempFieldMap[field.id] = tempField;\n                        });\n                        tempValues.push({fieldMap: angular.copy(tempFieldMap)});\n                    });\n\n                    // 如果values为空,默认添加空白行\n                    if (_.isEmpty(data.complexValues)) {\n                        var newFieldMap = {};\n                        angular.forEach(data.fields, function (field) {\n                            eval(\"newFieldMap.\" + field.id + \"=field\");\n                        });\n\n                        tempValues.push({fieldMap: angular.copy(newFieldMap)});\n                    }\n\n                    return tempValues;\n                }\n\n                /**\n                 * 重新\n                 * @param data\n                 * @private\n                 */\n                function _resetComplex (data) {\n                    angular.forEach(data.fields, function (field) {\n                        switch (field.type) {\n                            case fieldTypes.INPUT:\n                            case fieldTypes.LABEL:\n                            case fieldTypes.DATE:\n                            case fieldTypes.DATETIME:\n                            case fieldTypes.TEXTAREA:\n                            case fieldTypes.SINGLE_CHECK:\n                            case fieldTypes.RADIO:\n                                field.value = data.complexValue.fieldMap[field.id].value;\n                                break;\n                            case fieldTypes.MULTI_INPUT:\n                            case fieldTypes.MULTI_CHECK:\n                                field.values = data.complexValue.fieldMap[field.id].values;\n                                break;\n                            case fieldTypes.COMPLEX:\n                                field.complexValue = data.complexValue.fieldMap[field.id].complexValue;\n                                break;\n                            case fieldTypes.MULTI_COMPLEX:\n                                field.complexValues = data.complexValue.fieldMap[field.id].complexValues;\n                                break;\n                        }\n                    });\n                }\n\n                /**\n                 * 处理rules\n                 * @param rules\n                 * @private\n                 */\n                function _operateRule (rules) {\n                    angular.forEach(rules, function (rule) {\n                        switch (rule.name) {\n                            case ruleTypes.VALUE_TYPE_RULE:\n                                _valueTypeRule(rule);\n                                break;\n                            case ruleTypes.REQUIRED_RULE:\n                                _requiredRule(rule);\n                                break;\n                            case ruleTypes.DISABLE_RULE:\n                                _disableRule(rule);\n                                break;\n                            case ruleTypes.READ_ONLY_RULE:\n                                _readOnlyRule(rule);\n                                break;\n                            case ruleTypes.REGEX_RULE:\n                                _regexRule(rule);\n                                break;\n                            case ruleTypes.TIP_RULE:\n                                _tipRule(rule);\n                                break;\n                            case ruleTypes.MIN_LENGTH_RULE:\n                                _minLengthRule(rule);\n                                break;\n                            case ruleTypes.MAX_LENGTH_RULE:\n                                _maxLengthRule(rule);\n                                break;\n                            case ruleTypes.MIN_VALUE_RULE:\n                                _minValueRule(rule);\n                                break;\n                            case ruleTypes.MAX_VALUE_RULE:\n                                _maxValueRule(rule);\n                                break;\n                            case ruleTypes.MIN_INPUT_NUM_RULE:\n                                _minInputNumRule(rule);\n                                break;\n                            case ruleTypes.MAX_INPUT_NUM_RULE:\n                                _maxInputNumRule(rule);\n                                break;\n                        }\n                    })\n                }\n\n                /**\n                 * 处理valueTypeRule\n                 * @param valueTypeRule\n                 * @private\n                 */\n                function _valueTypeRule (valueTypeRule) {\n                    switch (valueTypeRule.value) {\n                        case valueTypes.TEXT:\n                        case valueTypes.DECIMAL:\n                        case valueTypes.INTEGER:\n                        case valueTypes.LONG:\n                            schema.type(fieldTypes.INPUT);\n                            schema.html(\"type=\\\"text\\\"\");\n                            break;\n                        case valueTypes.DATE:\n                            schema.type(fieldTypes.DATE);\n                            break;\n                        case valueTypes.TIME:\n                            schema.type(fieldTypes.DATETIME);\n                            break;\n                        case valueTypes.URL:\n                            schema.type(fieldTypes.INPUT);\n                            schema.html(\"type=\\\"url\\\"\");\n                            break;\n                        case valueTypes.TEXTAREA:\n                            schema.type(fieldTypes.TEXTAREA);\n                            schema.rowNum(4);\n                            break;\n                        case valueTypes.HTML:\n                            schema.type(fieldTypes.TEXTAREA);\n                            schema.rowNum(10);\n                            break;\n                    }\n                }\n\n                /**\n                 * 处理requiredRule\n                 * @param requiredRule\n                 * @private\n                 */\n                function _requiredRule (requiredRule) {\n                    if (\"true\" == requiredRule.value) {\n                        schema.isRequired(true);\n                        schema.html(\"required\");\n                    }\n                }\n\n                /**\n                 * 处理disableRule\n                 * @param disableRule\n                 * @private\n                 */\n                function _disableRule (disableRule) {\n                    if (\"true\" == disableRule.value\n                        && disableRule.dependGroup == null) {\n                        schema.html(\"ng-disabled=\\\"true\\\"\");\n                    }\n                }\n\n                /**\n                 * 处理readOnlyRule\n                 * @param readOnlyRule\n                 * @private\n                 */\n                function _readOnlyRule (readOnlyRule) {\n                    if (\"true\" == readOnlyRule.value) {\n                        schema.html(\"readonly\");\n                    }\n                }\n\n                /**\n                 * 处理regexRule\n                 * @param regexRule\n                 * @private\n                 */\n                function _regexRule (regexRule) {\n                    schema.html(\"ng-pattern=\\\"/\" + regexRule.value +\"/\\\"\");\n                }\n\n                /**\n                 * 处理tipRule\n                 * @param tipRule\n                 * @private\n                 */\n                function _tipRule (tipRule) {\n                    schema.tipMsg(tipRule.value);\n                }\n\n                /**\n                 * 处理minLengthRule\n                 * @param minLengthRule\n                 * @private\n                 */\n                function _minLengthRule (minLengthRule) {\n                    var value = isNaN(parseInt(minLengthRule.value)) ? 0 : minLengthRule.value;\n\n                    if (\"not include\" === minLengthRule.exProperty)\n                        value = (value > 0) ? value -1 : 0;\n\n                    if (\"character\" == minLengthRule.unit)\n                        schema.html(\"ng-minlength=\\\"\" + value +\"\\\"\");\n                    else\n                        schema.html(\"ng-char-minlength=\\\"\" + value +\"\\\"\");\n                }\n\n                /**\n                 * 处理maxLengthRule\n                 * @param maxLengthRule\n                 * @private\n                 */\n                function _maxLengthRule (maxLengthRule) {\n                    var value = isNaN(parseInt(maxLengthRule.value)) ? 0 : maxLengthRule.value;\n\n                    if (\"not include\" === maxLengthRule.exProperty)\n                        value = (value > 0) ? value -1 : 0;\n\n                    if (\"character\" == maxLengthRule.unit)\n                        schema.html(\"ng-maxlength=\\\"\" + value +\"\\\"\");\n                    else\n                        schema.html(\"ng-char-maxlength=\\\"\" + value +\"\\\"\");\n                }\n\n                /**\n                 * 处理minValueRule\n                 * @param minValueRule\n                 * @private\n                 */\n                function _minValueRule (minValueRule) {\n                    var value = isNaN(parseFloat(minValueRule.value)) ? 0 : parseFloat(minValueRule.value);\n\n                    if (\"not include\" === minValueRule.exProperty)\n                        value = (value > 0) ? value - 0.01 : 0;\n\n                    schema.html(\"ng-minvalue=\\\"\" + value +\"\\\"\");\n                }\n\n                /**\n                 * 处理maxValueRule\n                 * @param maxValueRule\n                 * @private\n                 */\n                function _maxValueRule (maxValueRule) {\n                    var value = isNaN(parseFloat(maxValueRule.value)) ? 0 : parseFloat(maxValueRule.value);\n\n                    if (\"not include\" === maxValueRule.exProperty)\n                        value = (value > 0) ? value - 0.01 : 0;\n\n                    schema.html(\"ng-maxvalue=\\\"\" + value +\"\\\"\");\n\n                }\n\n                /**\n                 * 处理minInputNumRule\n                 * @param minInputNumRule\n                 * @private\n                 */\n                function _minInputNumRule (minInputNumRule) {\n                    var value = isNaN(parseInt(minInputNumRule.value)) ? 0 : parseInt(minInputNumRule.value);\n\n                    if (\"not include\" === minInputNumRule.exProperty)\n                        value = (value > 0) ? value - 1 : 0;\n\n                    schema.html(\"ng-mininputnum=\\\"\" + value +\"\\\"\");\n                }\n\n                /**\n                 * 处理maxInputNumRule\n                 * @param maxInputNumRule\n                 * @private\n                 */\n                function _maxInputNumRule (maxInputNumRule) {\n                    var value = isNaN(parseInt(maxInputNumRule.value)) ? 0 : parseInt(maxInputNumRule.value);\n\n                    if (\"not include\" === maxInputNumRule.exProperty)\n                        value = (value > 0) ? value - 1 : 0;\n\n                    schema.html(\"ng-maxinputnum=\\\"\" + value +\"\\\"\");\n                }\n\n                /**\n                 * 如果checkbox被选中,返回被选中的value.\n                 * eg.[{new: true, pending: false, approved: true}] -> [new, approved]\n                 * @param object\n                 * @returns {*}\n                 */\n                //function _returnKey(object) {\n                //    var result = [];\n                //    angular.forEach(object, function(value, index) {\n                //        if (value) result.push(index);\n                //    });\n                //    return result;\n                //}\n            }\n        }\n    }]);\n\n/**\n * @Description:\n * 用于动态显示options\n * @User:    Edward\n * @Version: 0.2.0, 2015-12-22\n */\n\nangular.module('voyageone.angular.directives.voption', [])\n    .directive('voption', [\"$templateCache\", \"$compile\", function ($templateCache, $compile) {\n\n        var templateKey_select = \"voyageone.angular.directives.optionSelect.tpl.html\";\n\n        // 显示成select样式\n        if (!$templateCache.get(templateKey_select)) {\n            $templateCache.put(templateKey_select,\n                '<select class=\"form-control\" ng-model=\"$$data.value.value\" ng-options=\"option.value as option.displayName for option in $$data.options\"> <option value=\"\">{{\\'TXT_SELECT_NO_VALUE\\' | translate}}</option></select>');\n        }\n\n        return {\n            restrict: \"E\",\n            replace: true,\n            scope: {\n                $$data: \"=data\"\n            },\n            link: function (scope, element) {\n\n                // 定义不同的展示种类\n                var typeList = {\n                    SINGLE_CHECK: \"SINGLECHECK\"\n                };\n\n                // 监视配置变动\n                scope.$watch('$$data', function () {\n                    refresh();\n                }, true);\n\n                /**\n                 * 根据type选择展示不同的控件\n                 */\n                function refresh() {\n                    var tempHtml;\n                    switch (scope.$$data.type) {\n                        case typeList.SINGLE_CHECK:\n                            tempHtml = $compile($templateCache.get(templateKey_select))(scope);\n                            break;\n                    }\n                    element.html(tempHtml);\n                }\n            }\n        };\n    }]);\n/**\n * @Description:\n * 用于分页\n * @User:    Edward\n * @Version: 0.2.0, 2015-12-08\n */\n\nangular.module('voyageone.angular.directives.vpagination', [])\n    .directive('vpagination', [\"$templateCache\", \"$compile\", \"vpagination\", function ($templateCache, $compile, vpagination) {\n\n        var templateKey = \"voyageone.angular.directives.pagination.tpl.html\";\n        var templateKeyNoData = \"voyageone.angular.directives.paginationNoData.tpl.html\";\n\n        // 有数据分页样式\n        if (!$templateCache.get(templateKey)) {\n            $templateCache.put(templateKey,\n                '<div class=\"col-sm-2\">\\n' +\n                '    <div class=\"page-main form-inline\">{{\\'TXT_COM_SHOWING_NO\\' | translate}}&nbsp;<input class=\"text-center\" type=\"text\" ng-model=\"curr.pageNo\"/>&nbsp;/&nbsp;{{totalPages}}&nbsp;{{\\'TXT_COM_PAGE\\' | translate}}&nbsp;' +\n                '        <button class=\"btn btn-xs btn-default\" type=\"button\" ng-click=\"goPage(curr.pageNo)\" translate=\"BTN_GO\"></button>\\n' +\n                '    </div>\\n' +\n                '</div>\\n' +\n                '<div class=\"col-sm-7 text-center\">\\n' +\n                '    <small class=\"text-muted inline m-t-sm m-b-sm\">{{\\'TXT_COM_SHOWING\\' | translate}}&nbsp;{{curr.start}}-{{curr.end}}&nbsp;{{\\'TXT_COM_OF\\' | translate}}&nbsp;{{totalItems}}&nbsp{{\\'TXT_COM_ITEMS\\' | translate}}</small>\\n' +\n                '</div>\\n' +\n                '<div class=\"col-sm-3 text-right text-center-xs\"><div>' +\n                '    <ul class=\"pagination-sm m-t-none m-b pagination ng-isolate-scope ng-valid ng-dirty ng-valid-parse\">\\n' +\n                '        <li ng-class=\"{disabled: curr.isFirst ||ngDisabled}\" class=\"pagination-first\"><a href ng-click=\"goPage(1)\" ng-disabled=\"curr.isFirst\">&laquo;</a></li>\\n' +\n                '        <li ng-class=\"{disabled: curr.isFirst ||ngDisabled}\" class=\"pagination-prev\"><a href ng-click=\"goPage(curr.pageNo - 1)\" ng-disabled=\"curr.isFirst\">&lsaquo;</a></li>\\n' +\n                '        <li ng-if=\"curr.isShowStart\" class=\"disabled\" disabled><a href>...</a></li>\\n' +\n                '        <li ng-repeat=\"page in curr.pages track by $index\" ng-class=\"{active: isCurr(page)}\" class=\"pagination-page\"><a href ng-click=\"goPage(page)\">{{page}}</a></li>\\n' +\n                '        <li ng-if=\"curr.isShowEnd\" class=\"disabled\" disabled><a href>...</a></li>\\n' +\n                '        <li ng-class=\"{disabled: curr.isLast ||ngDisabled}\" class=\"pagination-next\"><a href ng-click=\"goPage(curr.pageNo + 1)\" ng-disabled=\"curr.isLast\">&rsaquo;</a></li>\\n' +\n                '        <li ng-class=\"{disabled: curr.isLast ||ngDisabled}\" class=\"pagination-last\"><a href ng-click=\"goPage(totalPages)\" ng-disabled=\"curr.isLast\">&raquo;</a></li>\\n' +\n                '    </ul>\\n' +\n                '</div>');\n        }\n\n        // 无数据分页样式\n        if (!$templateCache.get(templateKeyNoData)) {\n            $templateCache.put(templateKeyNoData,\n                '<div class=\"col-sm-7 col-sm-offset-2 text-center\">\\n' +\n                '    <small class=\"text-muted inline m-t-sm m-b-sm\">{{\\'TXT_COM_SHOWING\\' | translate}}&nbsp;0-0&nbsp;{{\\'TXT_COM_OF\\' | translate}}&nbsp;0&nbsp{{\\'TXT_COM_ITEMS\\' | translate}}</small>\\n' +\n                '</div>');\n        }\n\n        var defConfig = {curr: 1, total: 0, size: 20, showPageNo:5};\n\n        return {\n            restrict: \"AE\",\n            //templateUrl: templateKey,\n            replace: false,\n            scope: {\n                $$configNameForA: \"@vpagination\",\n                $$configNameForE: \"@config\"\n            },\n            link: function (scope, element) {\n\n                // 获取用户的config配置\n                var userConfigName = scope.$$configNameForA || scope.$$configNameForE;\n                var userConfig = scope.$parent.$eval(userConfigName);\n\n                // 将用户配置覆盖到默认配置后，在重新覆盖到用户配置上，用于补全配置属性\n                var userWithDefConfig = angular.extend({}, defConfig, userConfig);\n                scope.config = angular.extend(userConfig, userWithDefConfig);\n\n                var p = new vpagination(scope.config);\n\n                // 监视配置变动\n                scope.$parent.$watch(userConfigName, function () {\n                    refresh();\n                }, true);\n\n                /**\n                 * 跳转到指定页\n                 * @param num\n                 */\n                scope.goPage = function (num) {\n                    p.goPage(isNaN(Number(num)) ? 1 : Number(num));\n                };\n\n                /**\n                 * 判断是否是当前页\n                 * @param num\n                 * @returns {*|boolean}\n                 */\n                scope.isCurr = function (num) {\n                    return p.isCurr(num);\n                };\n\n                function refresh() {\n\n                    // 获取总页数\n                    scope.totalPages = p.getPageCount();\n                    // 获取总items数\n                    scope.totalItems = p.getTotal();\n                    // 获取当前页的信息\n                    scope.curr = p.getCurr();\n\n                    // 根据总数量显示不同的分页样式\n                    var tempHtml;\n                    if(p.getTotal() == 0) {\n                        tempHtml = $compile($templateCache.get(templateKeyNoData))(scope);\n                    } else {\n                        tempHtml = $compile($templateCache.get(templateKey))(scope);\n                    }\n                    element.html(tempHtml);\n\n                }\n            }\n        };\n    }]);\n/**\n * @Description:\n *\n * @User: linanbin\n * @Version: 2.0.0, 15/12/25\n */\n\nangular.module('voyageone.angular.directives.validator', [])\n\n    // 定义ng-char-maxlength\n    .directive('ngCharMaxlength', function () {\n\n        return {\n            restrict: 'A',\n            require: '?ngModel',\n            link: function(scope, elm, attr, ctrl) {\n                if (!ctrl) return;\n\n                var maxlength = -1;\n                attr.$observe('ngCharMaxlength', function(value) {\n                    var intVal =  parseInt(value) ;\n                    maxlength = isNaN(intVal) ? -1 : intVal;\n                    ctrl.$validate();\n                });\n                ctrl.$validators.maxlength = function(modelValue, viewValue) {\n                    return (maxlength < 0) || ctrl.$isEmpty(viewValue) || (getByteLength(viewValue) <= maxlength);\n                };\n            }\n        };\n\n        /**\n         * 取得字段的字节长度.\n         * @param value\n         * @returns {number}\n         */\n        function getByteLength(value) {\n            var byteLen = 0,len = value.length;\n            if(value){\n                for(var i = 0; i<len; i++){\n                    if(value.charCodeAt(i)>255){\n                        byteLen += 2;\n                    }\n                    else{\n                        byteLen++;\n                    }\n                }\n                return byteLen;\n            }\n            else{\n                return 0;\n            }\n        }\n    })\n\n    // 定义ng-char-minlength\n    .directive('ngCharMinlength', function () {\n\n        return {\n            restrict: 'A',\n            require: '?ngModel',\n            link: function(scope, elm, attr, ctrl) {\n                if (!ctrl) return;\n\n                var minlength = -1;\n                attr.$observe('ngCharMinlength', function(value) {\n                    var intVal =  parseInt(value) ;\n                    minlength = isNaN(intVal) ? -1 : intVal;\n                    ctrl.$validate();\n                });\n                ctrl.$validators.minlength = function(modelValue, viewValue) {\n                    return (minlength < 0) || ctrl.$isEmpty(viewValue) || (getByteLength(viewValue) >= minlength);\n                };\n            }\n        };\n\n        /**\n         * 取得字段的字节长度.\n         * @param value\n         * @returns {number}\n         */\n        function getByteLength(value) {\n            var byteLen = 0,len = value.length;\n            if(value){\n                for(var i = 0; i<len; i++){\n                    if(value.charCodeAt(i)>255){\n                        byteLen += 2;\n                    }\n                    else{\n                        byteLen++;\n                    }\n                }\n                return byteLen;\n            }\n            else{\n                return 0;\n            }\n        }\n    })\n\n    // 定义ng-maxvalue\n    .directive('ngMaxvalue', function () {\n        return {\n            restrict: 'A',\n            require: '?ngModel',\n            link: function (scope, elm, attr, ctrl) {\n                if (!ctrl) return;\n\n                var maxvalue = -1;\n                attr.$observe('ngMaxvalue', function(value) {\n                    if(/^(\\d{4})\\/(\\d{1,2})\\/(\\d{1,2})$/.test(value))\n                        maxvalue = new Date(value);\n                    else if (/^(\\d+)(\\.[0-9]{0,2})?$/.test(value))\n                        maxvalue = isNaN(parseFloat(value)) ? -1 : parseFloat(value);\n                    else if (/^(\\d+)$/.test(value))\n                        maxvalue = isNaN(parseInt(value)) ? -1 : parseInt(value);\n                    else\n                        maxvalue = -1;\n                    ctrl.$validate();\n                });\n                ctrl.$validators.maxvalue = function(modelValue, viewValue) {\n                    return (maxvalue < 0) || ctrl.$isEmpty(viewValue) || (viewValue <= maxvalue);\n                };\n            }\n        }\n    })\n\n    // 定义ng-minvalue\n    .directive('ngMinvalue', function () {\n        return {\n            restrict: 'A',\n            require: '?ngModel',\n            link: function (scope, elm, attr, ctrl) {\n                if (!ctrl) return;\n\n                var minvalue = -1;\n                attr.$observe('ngMinvalue', function(value) {\n                    if(/^(\\d{4})\\/(\\d{1,2})\\/(\\d{1,2})$/.test(value))\n                        minvalue = new Date(value);\n                    else if (/^(\\d+)(\\.[0-9]{0,2})?$/.test(value))\n                        minvalue = isNaN(parseFloat(value)) ? -1 : parseFloat(value);\n                    else if (/^(\\d+)$/.test(value))\n                        minvalue = isNaN(parseInt(value)) ? -1 : parseInt(value);\n                    else\n                        minvalue = -1;\n                    ctrl.$validate();\n                });\n                ctrl.$validators.minvalue = function(modelValue, viewValue) {\n                    return (minvalue < 0) || ctrl.$isEmpty(viewValue) || (viewValue >= minvalue);\n                };\n            }\n        }\n    })\n\n    // 定义ng-maxinputnum\n    .directive('ngMaxinputnum', function () {\n        return {\n            restrict: 'A',\n            require: '?ngModel',\n            link: function (scope, elm, attr, ctrl) {\n                if (!ctrl) return;\n\n                var maxvalue = -1;\n                attr.$observe('ngMaxinputvalue', function(value) {\n                    maxvalue = isNaN(parseInt(value)) ? -1 : parseInt(value);\n                    ctrl.$validate();\n                });\n                ctrl.$validators.maxinputnum = function(modelValue, viewValue) {\n                    return (maxvalue < 0) || ctrl.$isEmpty(viewValue) || (viewValue.length <= maxvalue);\n                };\n            }\n        }\n    })\n\n    // 定义ng-mininputnum\n    .directive('ngMininputnum', function () {\n        return {\n            restrict: 'A',\n            require: '?ngModel',\n            link: function (scope, elm, attr, ctrl) {\n                if (!ctrl) return;\n\n                var minvalue = -1;\n                attr.$observe('ngMininputnum', function(value) {\n                    minvalue = isNaN(parseInt(value)) ? -1 : parseInt(value);\n                    ctrl.$validate();\n                });\n                ctrl.$validators.mininputnum = function(modelValue, viewValue) {\n                    return (minvalue < 0) || ctrl.$isEmpty(viewValue) || (viewValue.length >= minvalue);\n                };\n            }\n        }\n    })\n;\n/**\n * @description\n *\n * 自动创建基于地址定义的数据访问 service.\n * 传入的定义必须是 {object}, 并且至少有 root 属性\n *\n * @User: Jonas\n * @Date: 2015-12-10 19:32:37\n * @Version: 2.0.0\n */\n\n//@Skip\nangular.module('voyageone.angular.vresources', [])\n  .provider('$vresources', [\"$provide\", function ($provide) {\n\n    /**\n     * @description 构建请求地址的 url\n     * @param {string} root 请求的根路径\n     * @param {string} action 请求的名称\n     * @returns {string}\n     */\n    function getActionUrl(root, action) {\n      return root + (root.lastIndexOf('/') === root.length - 1 ? '' : '/') + action;\n    }\n\n    /**\n     * 闭包声明一个数据访问的 Service\n     * @param {string} name Service 的名称\n     * @param {object} actions 方法和地址定义\n     * @param {AjaxService} ajaxService 封装的 ajax 发送服务\n     */\n    function closureDataService(name, actions, ajaxService) {\n      /**\n       * @description 与 actions 一同闭包的构造函数\n       * @constructor\n       */\n      function DataResource() {\n        if (!actions) {\n          return;\n        }\n\n        if (typeof actions !== \"object\") {\n          console.log(\"Failed to new DataResource: [\" + actions + \"] is not a object\");\n          return;\n        }\n\n        if (!actions.root) {\n          console.log(\"Failed to new DataResource: no root prop\" + (JSON && JSON.stringify ? \": \" + JSON.stringify(actions) : \"\"));\n          return;\n        }\n\n        // 遍历配置\n        for (var name in actions) {\n          // 不对 root 进行创建\n          if (name === \"root\") continue;\n          // 额外的检查\n          if (actions.hasOwnProperty(name)) {\n            // 闭包创建函数\n            this[name] = (function (actionUrl) {\n              return function (data) {\n                return ajaxService.post(actionUrl, data);\n              };\n            })(getActionUrl(actions.root, actions[name]));\n          }\n        }\n      }\n\n      $provide.service(name, DataResource);\n    }\n\n    this.$get = [\"ajaxService\", function (ajaxService) {\n\n      return {\n        register: function (name, actions) {\n\n          if (!actions) return;\n\n          if (typeof actions !== 'object') return;\n\n          // 如果有 root 这个属性,就创建 service\n          if (actions.root) {\n            closureDataService(name, actions, ajaxService);\n            return;\n          }\n\n          // 否则继续访问子属性\n          for (var childName in actions) {\n            // 额外的检查\n            if (actions.hasOwnProperty(childName)) {\n\n              this.register(childName, actions[childName]);\n            }\n          }\n        }\n      };\n    }];\n  }])\n\n  .run([\"$vresources\", \"$actions\", function ($vresources, $actions) {\n    $vresources.register(null, $actions);\n  }]);\n/**\n * @Date:    2015-11-16 18:48:29\n * @User:    Jonas\n * @Version: 0.2.0\n */\n\nangular.module('voyageone.angular.services.ajax', [])\n  .service('$ajax', $Ajax)\n  .service('ajaxService', AjaxService);\n\nfunction $Ajax($http, blockUI, $q) {\n  this.$http = $http;\n  this.blockUI = blockUI;\n  this.$q = $q;\n}\n$Ajax.$inject = [\"$http\", \"blockUI\", \"$q\"];\n$Ajax.prototype.post = function (url, data) {\n\n  var defer = this.$q.defer();\n  this.$http.post(url, data).then(function (response) {\n    var res = response.data;\n    if (!res) {\n      alert('相应结果不存在?????');\n      defer.reject(null);\n      return;\n    }\n    if (res.message || res.code) {\n      defer.reject(res);\n      return;\n    }\n    defer.resolve(res);\n  }, function (response) {\n    defer.reject(null, response);\n  });\n  return defer.promise;\n};\n\nfunction AjaxService($q, $ajax, messageService) {\n  this.$q = $q;\n  this.$ajax = $ajax;\n  this.messageService = messageService;\n}\nAjaxService.$inject = [\"$q\", \"$ajax\", \"messageService\"];\nAjaxService.prototype.post = function (url, data) {\n\n  var defer = this.$q.defer();\n\n  this.$ajax.post(url, data).then(function(res) {\n    // 成功\n    defer.resolve(res);\n    return res;\n  }, (function (_this) {\n    // 失败\n    return function(res) {\n      _this.messageService.show(res);\n      defer.reject(res);\n      return res;\n    };\n  })(this));\n\n  return defer.promise;\n};\n/**\n * @Date:    2015-11-16 20:30:37\n * @User:    Jonas\n * @Version: 0.2.0\n */\n\nangular.module('voyageone.angular.services.cookie', [])\n  .service('cookieService', CookieService);\n\nvar keys = {\n  language: 'voyageone.user.language',\n  company: 'voyageone.user.company',\n  channel: 'voyageone.user.channel',\n  application: \"voyageone.user.application\",\n};\n\nfunction gentProps(key) {\n  return function(val) {\n    if (arguments.length === 1) {\n      return this.set(key, val);\n    } else if (arguments.length > 1) {\n      return this.set(key, arguments);\n    }\n    return this.get(key);\n  };\n}\n\nfunction CookieService($cookieStore) {\n  this.$cookieStore = $cookieStore;\n}\nCookieService.$inject = [\"$cookieStore\"];\n\nCookieService.prototype.get = function(key) {\n  var result = this.$cookieStore.get(key);\n  return result == undefined || result == null ? \"\" : this.$cookieStore.get(key);\n};\n\nCookieService.prototype.set = function(key, value) {\n  return this.$cookieStore.put(key, value);\n};\n\nCookieService.prototype.language = gentProps(keys.language);\n\nCookieService.prototype.company = gentProps(keys.company);\n\nCookieService.prototype.channel = gentProps(keys.channel);\n\nCookieService.prototype.application = gentProps(keys.application);\n\nCookieService.prototype.removeAll = function () {\n  this.$cookieStore.remove(keys.language);\n  this.$cookieStore.remove(keys.company);\n  this.$cookieStore.remove(keys.channel);\n  this.$cookieStore.remove(keys.application);\n};\n\n/**\n * 对后台的信息进行自动处理\n * @Date:    2015-11-19 14:47:23\n * @User:    Jonas\n * @Version: 0.2.0\n */\n\nangular.module('voyageone.angular.services.message', [])\n  .service('messageService', MessageService);\n\n// 同步,DisplayType 枚举\nvar DISPLAY_TYPES = {\n  /**\n   * 弹出提示\n   */\n  ALERT: 1,\n  /**\n   * 顶端弹出自动关闭\n   */\n  NOTIFY: 2,\n  /**\n   * 右下弹出自动关闭\n   */\n  POP: 3,\n  /**\n   * 用户自定义处理\n   */\n  CUSTOM: 4\n};\n\nfunction MessageService(alert, confirm, notify) {\n  this.alert = alert;\n  this.confirm = confirm;\n  this.notify = notify;\n}\nMessageService.$inject = [\"alert\", \"confirm\", \"notify\"];\n\nMessageService.prototype = {\n  /**\n   * 根据类型自动显示信息\n   * @param {{displayType:Number, message:String}} res\n   */\n  show: function(res) {\n\n    var displayType = res.displayType;\n    var message = res.message;\n\n    switch (displayType) {\n      case DISPLAY_TYPES.ALERT:\n        this.alert(message);\n        break;\n      case DISPLAY_TYPES.NOTIFY:\n        this.notify(message);\n        break;\n      case DISPLAY_TYPES.POP:\n        this.notify({message: message, position: 'right bottom'});\n        break;\n    }\n  }\n};\n/**\n * @Date:    2015-11-19 14:26:43\n * @User:    Jonas\n * @Version: 0.2.0\n */\n\nangular.module('voyageone.angular.services.permission', [])\n  .service('permissionService', PermissionService);\n\nfunction PermissionService($rootScope) {\n  this.$rootScope = $rootScope;\n  this.permissions = [];\n}\nPermissionService.$inject = [\"$rootScope\"];\n\nPermissionService.prototype = {\n  /**\n   * set the action permissions.\n   * @param permissions\n   */\n  setPermissions: function(permissions) {\n    this.permissions = permissions;\n    this.$rootScope.$broadcast('permissionsChanged');\n  },\n  /**\n   * check the permission has been in action permissions.\n   * @param permission\n   * @returns {boolean|*}\n   */\n  has: function(permission) {\n    return _.contains(this.permissions, permission.trim());\n  }\n};\n\n/**\n * @Date:    2015-11-19 14:35:25\n * @User:    Jonas\n * @Version: 0.2.0\n */\n\nangular.module('voyageone.angular.services.translate', [])\n  .service('translateService', TranslateService);\n\nfunction TranslateService($translate) {\n  this.$translate = $translate;\n}\nTranslateService.$inject = [\"$translate\"];\n\nTranslateService.prototype = {\n  languages: {\n    en: \"en\",\n    zh: \"zh\"\n  },\n  /**\n   * set the web side language type.\n   * @param key\n   */\n  setLanguage: function(language) {\n    if (!_.contains(this.languages, language)) {\n      language = this.getBrowserLanguage();\n    }\n    this.$translate.use(language);\n    return language;\n  },\n  /**\n   * get the browser language type.\n   * @returns {string}\n   */\n  getBrowserLanguage: function() {\n    var currentLang = navigator.language;\n    if (!currentLang)\n      currentLang = navigator.browserLanguage;\n    return currentLang.substr(0, 2);\n  }\n};\nangular.module(\"voyageone.angular.directives\",[\"voyageone.angular.directives.dateModelFormat\",\"voyageone.angular.directives.enterClick\",\"voyageone.angular.directives.fileStyle\",\"voyageone.angular.directives.ifNoRows\",\"voyageone.angular.directives.uiNav\",\"voyageone.angular.directives.schema\",\"voyageone.angular.directives.voption\",\"voyageone.angular.directives.vpagination\",\"voyageone.angular.directives.validator\"]);\nangular.module(\"voyageone.angular.factories\",[\"voyageone.angular.factories.dialogs\",\"voyageone.angular.factories.interceptor\",\"voyageone.angular.factories.notify\",\"voyageone.angular.factories.schema\",\"voyageone.angular.factories.vpagination\"]);\nangular.module(\"voyageone.angular.services\",[\"voyageone.angular.services.ajax\",\"voyageone.angular.services.cookie\",\"voyageone.angular.services.message\",\"voyageone.angular.services.permission\",\"voyageone.angular.services.translate\"]);\nangular.module(\"voyageone.angular.controllers\",[\"voyageone.angular.controllers.datePicker\",\"voyageone.angular.controllers.selectRows\",\"voyageone.angular.controllers.showPopover\"]);\nreturn angular.module(\"voyageone.angular\",[\"voyageone.angular.directives\",\"voyageone.angular.factories\",\"voyageone.angular.services\",\"voyageone.angular.controllers\"])});","/**\n * @Description:\n * 弹出日期控件\n * @User:    Edward\n * @Version: 0.2.0, 2015-10-10\n */\n\nangular.module('voyageone.angular.controllers.datePicker', [])\n    .controller('datePickerCtrl', function ($scope) {\n        var vm = this;\n\n        vm.formats = ['yyyy-MM-dd', 'yyyy-MM-dd HH:mm:ss'];\n\n        $scope.formatDate = vm.formats[0];\n        $scope.formatDateTime = vm.formats[1];\n\n        $scope.open = open;\n\n        function open($event) {\n            $event.preventDefault();\n            $event.stopPropagation();\n\n            $scope.opened = true;\n        }\n    });","/**\n * @Description:\n * select tables items\n * @User: linanbin\n * @Version: 2.0.0, 15/12/16\n */\n\nangular.module('voyageone.angular.controllers.selectRows', [])\n    .controller('selectRowsCtrl', function ($scope) {\n\n        $scope.selectAll = selectAll;\n        $scope.selectOne = selectOne;\n\n        /**\n         * 全部选中当前页数据\n         * @param objectList\n         */\n        function selectAll(objectList,id) {\n\n            objectList.selAllFlag = !objectList.selAllFlag;\n            if(!id){\n                id=\"id\";\n            }\n\n            // 循环处理全选中的数据\n            angular.forEach(objectList.currPageRows, function (object) {\n                //if(objectList.selFlag.hasOwnProperty(object[id])) {\n\n                    // 单签页面所有产品选中flag被标示\n                    objectList.selFlag[object[id]] = objectList.selAllFlag;\n\n                    if (objectList.hasOwnProperty('selList')) {\n                        if (objectList.selAllFlag && objectList.selList.indexOf(object) < 0) {\n                            objectList.selList.push(object);\n                        } else if (!objectList.selAllFlag && objectList.selList.indexOf(object) > -1) {\n                            objectList.selList.splice(objectList.selList.indexOf(object), 1);\n                        }\n                    }\n                //}\n            });\n        }\n\n        /**\n         * 选中单条数据\n         * @param currentId\n         * @param objectList\n         */\n        function selectOne(currentId, objectList,id) {\n            if(!id){\n                id=\"id\";\n            }\n            if (objectList.hasOwnProperty('selList')) {\n\n                angular.forEach(objectList.currPageRows, function(object) {\n\n                    if (_.isEqual(object[id], currentId)) {\n                        if (objectList.selList.indexOf(object) > -1) {\n                            objectList.selList.splice(objectList.selList.indexOf(object), 1);\n                        } else {\n                            objectList.selList.push(object);\n                        }\n                    }\n                });\n            }\n\n            objectList.selAllFlag = true;\n            angular.forEach(objectList.currPageRows, function(object) {\n                //if (!objectList.selFlag[object.id]) {\n                //    objectList.selAllFlag = false;\n                //}\n                if (objectList.selList.indexOf(object) == -1) {\n                    objectList.selAllFlag = false;\n                }\n            })\n        }\n    });","/**\n * @Description:\n * 显示html的popover的共同方法\n * @User: linanbin\n * @Version: 2.0.0, 15/12/14\n */\n\nangular.module('voyageone.angular.controllers.showPopover', [])\n    .controller('showPopoverCtrl', function ($scope) {\n\n        $scope.showInfo = showInfo;\n\n        function showInfo(values) {\n            var tempHtml = \"\";\n\n            angular.forEach(values, function (data, index) {\n                tempHtml += data;\n                if (index !== values.length) {\n                    tempHtml += \"<br>\";\n                }\n            });\n            return tempHtml\n        }\n    });\n","/**\n * @User: Jonas\n * @Date: 2015-3-31 14:39:26\n * @Version: 2.0.0\n */\n\nangular.module('voyageone.angular.factories.dialogs', [])\n  .factory(\"$dialogs\", function ($modal, $filter, $templateCache) {\n\n    var templateName = 'voyageone.angular.factories.dialogs.tpl.html';\n    $templateCache.put(templateName, '<div class=\"vo_modal\"><div class=\"modal-header\"><button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\" ng-click=\"close()\"><span aria-hidden=\"true\"><i ng-click=\"close()\" class=\"fa fa-close\"></i></span></button><h4 class=\"modal-title\" ng-bind-html=\"title\"></h4></div><div class=\"modal-body wrapper-lg\"><div class=\"row\"><p ng-bind-html=\"content\"></p></div></div><div class=\"modal-footer\"><button class=\"btn btn-default btn-sm\" ng-if=\"!isAlert\" ng-click=\"close()\" translate=\"BTN_COM_CANCEL\"></button><button class=\"btn btn-vo btn-sm\" ng-click=\"ok()\" translate=\"BTN_COM_OK\"></button></div></div>');\n\n    function tran(translationId, values) {\n      return $filter('translate')(translationId, values);\n    }\n\n    return function (options) {\n\n      if (!_.isObject(options)) throw \"arg type must be object\";\n\n      var values;\n\n      if (_.isObject(options.content)) {\n        values = options.content.values;\n        options.content = options.content.id;\n      }\n\n      options.title = tran(options.title);\n      options.content = tran(options.content, values);\n\n      var modalInstance = $modal.open({\n        templateUrl: templateName,\n        controller: [\"$scope\", function (scope) {\n          _.extend(scope, options);\n        }],\n        size: 'md'\n      });\n\n      options.close = function () {\n        modalInstance.dismiss('close')\n      };\n\n      options.ok = function () {\n        modalInstance.close('');\n      };\n\n      return modalInstance;\n    };\n  })\n\n  .factory(\"alert\", function ($dialogs) {\n    return function (content, title) {\n      return $dialogs({\n        title: title || 'TXT_COM_ALERT',\n        content: content,\n        isAlert: true\n      });\n    };\n  })\n\n  .factory(\"confirm\", function vConfirm($dialogs) {\n    return function (content, title) {\n      return $dialogs({\n        title: title || 'TXT_COM_CONFIRM',\n        content: content,\n        isAlert: false\n      });\n    };\n  });","/**\n * @Date:    2015-11-16 20:51:05\n * @User:    Jonas\n * @Version: 0.2.0\n */\n\nangular.module('voyageone.angular.factories.interceptor', [])\n  .factory('interceptorFactory', InterceptorFactory)\n  .config(function ($httpProvider) {\n    $httpProvider.interceptors.push('interceptorFactory');\n  });\n\nfunction InterceptorFactory() {\n\n  // 未知的系统错误\n  var UNKNOWN_CODE = \"5\";\n  // 和 JAVA 同步,系统通知前端自动跳转的特殊代码\n  var CODE_SYS_REDIRECT = \"SYS_REDIRECT\";\n  // 和 JAVA 同步,回话过期的信息\n  var MSG_TIMEOUT = \"300001\";\n\n  /**\n   * 对系统自动跳转的响应,执行跳转\n   * @param {{code:string,redirectTo:string}} res\n   * @returns {boolean}\n   */\n  function autoRedirect(res) {\n    if (res.code != CODE_SYS_REDIRECT) {\n      return false;\n    }\n    // 如果跳转数据异常,则默认跳转登陆页\n    location.href = res.redirectTo || '/login.html';\n    return true;\n  }\n\n  /**\n   * 对会话超时和未登录进行特殊处理\n   * @param {{code:string}} res\n   * @returns {boolean}\n   */\n  function sessionTimeout(res) {\n    if (res.code != MSG_TIMEOUT) {\n      return false;\n    }\n    // 会话超时,默认跳转到登陆页\n    location.href = '/login.html';\n    return true;\n  }\n\n  /**\n   * 处理位置的异常\n   * @param response\n   */\n  function unknownException(response) {\n\n    if (response.data.code !== UNKNOWN_CODE) {\n      return;\n    }\n\n    window.$$lastUnknow = response;\n    console.error('Server throw unknown exceptio. Message:', response.data.message);\n  }\n\n  return {\n    request: function (config) {\n      return config;\n    },\n    response: function (res) {\n      var result = res.data;\n\n      if (autoRedirect(result) || sessionTimeout(result)) {\n        return res;\n      }\n\n      unknownException(res);\n\n      return res;\n    },\n    requestError: function (config) {\n      return config;\n    },\n    responseError: function (res) {\n    }\n  };\n}","/**\n * Notify 的可用参数\n * {\n *    // whether to hide the notification on click\n *    clickToHide: true,\n *    // whether to auto-hide the notification\n *    autoHide: true,\n *    // if autoHide, hide after milliseconds\n *    autoHideDelay: 5000,\n *    // show the arrow pointing at the element\n *    arrowShow: true,\n *    // arrow size in pixels\n *    arrowSize: 5,\n *    // position defines the notification position though uses the defaults below\n *    position: '...',\n *    // default positions\n *    elementPosition: 'bottom left',\n *    globalPosition: 'top right',\n *    // default style\n *    style: 'bootstrap',\n *    // default class (string or [string])\n *    className: 'error',\n *    // show animation\n *    showAnimation: 'slideDown',\n *    // show animation duration\n *    showDuration: 400,\n *    // hide animation\n *    hideAnimation: 'slideUp',\n *    // hide animation duration\n *    hideDuration: 200,\n *    // padding between element and notification\n *    gap: 2\n * }\n * @User: Jonas\n * @Date: 2015-3-31 14:39:26\n * @Version: 2.0.0\n */\n\nangular.module('voyageone.angular.factories.notify', [])\n\n    .factory('notify', function ($filter) {\n\n        /**\n         * @ngdoc function\n         * @name voNotify\n         * @description\n         * 自动关闭的弹出提示框\n         */\n        function notify(options) {\n\n            if (!options) return;\n            if (_.isString(options)) options = {message: options};\n            if (!_.isObject(options)) return;\n\n            var values;\n\n            // 为 translate 的格式化提供支持，检测类型并转换\n            if (_.isObject(options.message)) {\n\n                values = options.message.values;\n                options.message = options.message.id;\n            }\n\n            options.message = $filter('translate')(options.message, values);\n\n            return $.notify(options.message, options);\n        }\n\n        notify.success = function (message) {\n            return notify({message: message, className: \"success\"});\n        };\n\n        notify.warning = function (message) {\n            return notify({message: message, className: \"warning\"});\n        };\n\n        notify.danger = function (message) {\n            return notify({message: message, className: \"danger\"});\n        };\n\n        return notify;\n    });","/**\n * @Description:\n *\n * @User: linanbin\n * @Version: 2.0.0, 15/12/25\n */\n\n\nangular.module('voyageone.angular.factories.schema', [])\n\n    // 定义schemaHeaderFactory\n    .factory('schemaHeaderFactory', function () {\n        return function (config) {\n            var _schemaHeaderInfo = config ? config : {\n                isRequired: false,\n                //size: null,\n                isMultiComplex: false,\n                isComplex: false,\n                tipMsg: []\n            };\n\n            this.isRequired = function (value) {\n                return value !== undefined ? _schemaHeaderInfo.isRequired = value : _schemaHeaderInfo.isRequired;\n            };\n\n            //this.size = function (value) {\n            //    return value !== undefined ? _schemaHeaderInfo.size = value : _schemaHeaderInfo.size;\n            //};\n\n            this.isComplex = function (value) {\n                return value !== undefined ? _schemaHeaderInfo.isComplex = value : _schemaHeaderInfo.isComplex;\n            };\n\n            this.isMultiComplex = function (value) {\n                return value !== undefined ? _schemaHeaderInfo.isMultiComplex = value : _schemaHeaderInfo.isMultiComplex;\n            };\n\n            this.tipMsg = function (value) {\n                return value !== undefined ? _schemaHeaderInfo.tipMsg.push(value) : _schemaHeaderInfo.tipMsg;\n            };\n\n            this.schemaHearInfo = _schemaHeaderInfo;\n        }\n    })\n\n    // 定义schemaFactory\n    .factory('schemaFactory', function () {\n\n        return function (config) {\n\n            var _schemaInfo = config ? config : {\n                type: null,\n                name: null,\n                rowNum: null,\n                isRequired: false,\n                checkValues: [],\n                tipMsg: [],\n                html: []\n            };\n\n            this.type = function (value) {\n                return value !== undefined ? _schemaInfo.type = value : _schemaInfo.type;\n            };\n\n            this.name = function (value) {\n                return value !== undefined ? _schemaInfo.name = value : _schemaInfo.name;\n            };\n\n            this.html = function (value) {\n                return value !== undefined ? _schemaInfo.html.push(value) : htmlToString(_schemaInfo.html);\n            };\n\n            this.isRequired = function (value) {\n                return value !== undefined ? _schemaInfo.isRequired = value : _schemaInfo.isRequired;\n            };\n\n            this.rowNum = function (value) {\n                return value !== undefined ? _schemaInfo.rowNum = value : _schemaInfo.rowNum;\n            };\n\n            this.tipMsg = function (value) {\n                return value !== undefined ? _schemaInfo.tipMsg.push(value) : _schemaInfo.tipMsg;\n            };\n\n            this.checkValues = function (value) {\n                return value !== undefined ? _schemaInfo.checkValues.push(value) : _schemaInfo.checkValues;\n            };\n\n            this.schemaInfo = function () {\n                return _schemaInfo;\n            };\n\n            function htmlToString (htmls) {\n                var result = \"\";\n                angular.forEach(htmls, function (html) {\n                    result += \" \" + html + \" \";\n                });\n                return result;\n            }\n        };\n    });","/**\n * @User: Edward\n * @Version: 2.0.0, 2015-12-09\n */\n\nangular.module('voyageone.angular.factories.vpagination', [])\n    .factory('vpagination', function () {\n\n        /**\n         * 创建一个分页服务\n         * @param {{ curr: number, size: number, total: number, fetch: function }} config 配置\n         */\n        return function (config) {\n\n            var _pages, _lastTotal = 0, _showPages = [];\n\n            /**\n             * 返回总件数\n             * @returns {*}\n             */\n            this.getTotal = function () {\n                return config.total;\n            };\n\n            /**\n             * 返回当前页的开始和结束号\n             * @returns {{start: number, end: number}}\n             */\n            this.getCurr = function () {\n                return {\n                    pageNo: curr(),\n                    start: getCurrStartItems(),\n                    end: getCurrEndItems(),\n                    isFirst: isFirst(),\n                    isLast: isLast(),\n                    pages: createShowPages(),\n                    isShowStart: isShowStart(),\n                    isShowEnd: isShowEnd()\n                }\n            };\n\n            // 跳转到指定页\n            this.goPage = load;\n            // 返回总页数\n            this.getPageCount = getPages;\n            // 是否是当前页\n            this.isCurr = isCurr;\n\n            /**\n             * 跳转到指定页\n             * @param {number} page 页号\n             */\n            function load(page) {\n                page = page || config.curr;\n\n                if (page < 1 || page > getPages() || isCurr(page)) return;\n\n                config.curr = page;\n\n                config.fetch(page, config.size);\n            }\n\n            /**\n             * 初始化page列表\n             * @returns {Array}\n             */\n            function createShowPages () {\n\n                var minPage, maxPage, _showPages= [];\n                if (config.curr < config.showPageNo) {\n                    minPage = 1;\n                    if(_pages <= config.showPageNo) maxPage = _pages;\n                    else maxPage = config.showPageNo;\n                } else if (config.curr + 2 > _pages) {\n                    minPage = _pages + 1 - config.showPageNo;\n                    maxPage = _pages;\n                } else {\n                    minPage = config.curr + 3 - config.showPageNo;\n                    maxPage = config.curr + 2;\n                }\n\n                // 按照指定数量创建按钮\n                for (var i =  minPage; i <= maxPage; i++) {\n                    //scope.pages.push({num: 1, active: \"\", show: false});\n                    _showPages.push(i);\n                }\n\n                return _showPages;\n            }\n\n            /**\n             * 获取当前总页数\n             * @returns {number}\n             */\n            function getPages() {\n                if (_lastTotal != config.total) {\n                    _pages = parseInt(config.total / config.size) + ((config.total % config.size) > 0 ? 1 : 0);\n                    _lastTotal = config.total;\n                }\n                return _pages;\n            }\n\n            /**\n             * 返回当前页的起始号\n             * @returns {number}\n             */\n            function getCurrStartItems() {\n                return (config.curr - 1) * config.size + 1\n            }\n\n            /**\n             * 返回当前页的结束号\n             * @returns {number}\n             */\n            function getCurrEndItems() {\n                var currEndItems = config.curr * config.size;\n                return currEndItems <= config.total ? currEndItems : config.total;\n\n            }\n\n            /**\n             * 是否是最后一页\n             * @returns {boolean}\n             */\n            function isLast() {\n                return config.curr == getPages();\n            }\n\n            /**\n             * 是否是第一页\n             * @returns {boolean}\n             */\n            function isFirst() {\n                return config.curr == 1;\n            }\n\n            /**\n             * 是否是当前页\n             * @param page 页码\n             * @returns {boolean}\n             */\n            function isCurr(page) {\n                return config.curr == page;\n            }\n\n            function curr() {\n                return config.curr;\n            }\n\n            /**\n             * 是否显示开始...项目\n             * @returns {boolean}\n             */\n            function isShowStart () {\n                _showPages = createShowPages();\n                return _showPages[0] > 1\n            }\n\n            /**\n             * 是否显示结束...项目\n             * @returns {boolean}\n             */\n            function isShowEnd () {\n                _showPages = createShowPages();\n                return _showPages[_showPages.length - 1] < _pages;\n            }\n\n        };\n    });","/**\n * @Date: 2015-11-19 15:13:02\n * @User: Jonas\n * @Version: 2.0.0\n */\n\nangular.module('voyageone.angular.directives.dateModelFormat', [])\n    .directive('dateModelFormat', function ($filter) {\n        return {\n            restrict: \"A\",\n            require: 'ngModel',\n            link: function (scope, elem, attrs, ngModel) {\n                ngModel.$parsers.push(function (viewValue) {\n                    return $filter('date')(viewValue, attrs.dateModelFormat || 'yyyy-MM-dd HH:mm:ss');\n                });\n            }\n        };\n    });\n","/**\n * @Date: 2015-11-19 15:13:02\n * @User: Jonas\n * @Version: 0.2.0\n */\n\nangular.module('voyageone.angular.directives.enterClick', [])\n  .directive('enterClick', function() {\n    return {\n      restrict: \"A\",\n      link: function(scope, elem, attr) {\n        $(elem).keyup(function(e) {\n          if (e.keyCode !== 13) return;\n\n          var selectExp = attr.enterClick;\n\n          var targetElem, handler = function() {\n            targetElem.click();\n          };\n\n          try {\n            targetElem = angular.element(selectExp);\n          } catch (e) {\n            targetElem = null\n          }\n\n          if (!targetElem || !targetElem.length) {\n            // 如果取不到元素，则尝试作为表达式执行\n            handler = function() {\n              scope.$eval(selectExp);\n            };\n          } else if (targetElem.attr(\"disabled\")) {\n            // 如果元素存在，但是是禁用状态的，放弃执行\n            return;\n          }\n\n          handler();\n        });\n      }\n    };\n  });\n","/**\n * @Description:\n * 引入对上传框插件 fileStyle 的指令支持\n * @Date:    2015-11-19 17:35:22\n * @User:    Jonas\n * @Version: 2.0.0\n */\n\nangular.module('voyageone.angular.directives.fileStyle', [])\n  .directive('fileStyle', function () {\n    return {\n      restrict: 'A',\n      controller: [\"$scope\", \"$element\", function ($scope, $element) {\n        var options = $element.data();\n        // old usage support\n        options.classInput = $element.data('classinput') || options.classInput;\n        if ($element.filestyle) {\n          $element.filestyle(options);\n        }\n      }]\n    };\n  });","/**\n * @Description:\n * table中无数据范围的数据\n * @User: linanbin\n * @Version: 2.0.0, 15/12/11\n */\n\nangular.module('voyageone.angular.directives.ifNoRows', [])\n    .directive('ifNoRows', function ($templateCache, $compile) {\n\n        var tempNoDataKey = \"voyageone.angular.directives.ifNoRows.tpl.html\";\n\n        // 没有数据显示警告\n        if (!$templateCache.get(tempNoDataKey)) {\n            $templateCache.put(tempNoDataKey,\n            '<div class=\"text-center text-hs\" id=\"noData\">\\n' +\n            '    <h4 class=\"text-vo\"><i class=\"icon fa fa-warning\"></i>&nbsp;{{\\'TXT_COM_WARNING\\' | translate}}</h4>\\n' +\n            '{{\\'TXT_COM_MSG_NO_DATE\\' | translate}}' +\n            '</dv>');\n        }\n\n        return {\n            restrict: \"A\",\n            replace: false,\n            scope: {\n                $$data: \"@ifNoRows\"\n            },\n            link: function (scope, element) {\n\n                scope.$parent.$watch(scope.$$data, function () {\n\n                    // 如果数据不存在则显示警告信息\n                    if(scope.$parent.$eval(scope.$$data)  == 0) {\n                        element.find(\"#noData\").remove();\n                        element.append($compile($templateCache.get(tempNoDataKey))(scope));\n                    } else {\n                        element.find(\"#noData\").remove();\n                    }\n                })\n            }\n        };\n    });\n","/**\n * @Description:\n * 用于菜单目录二级展开\n * @User:    Jonas\n * @Version: 0.2.0, 2015-12-07\n */\n\nangular.module('voyageone.angular.directives.uiNav', [])\n    .directive('uiNav', function () {\n\n        return {\n            restrict: 'AC',\n            link: function(scope, el) {\n                var _window = $(window),\n                    _mb = 768,\n                    wrap = $('.app-aside'),\n                    next,\n                    backdrop = '.dropdown-backdrop';\n                // unfolded\n                el.on('click', 'a', function(e) {\n                    next && next.trigger('mouseleave.nav');\n                    var _this = $(this);\n                    _this.parent().siblings( \".active\" ).toggleClass('active');\n                    _this.next().is('ul') &&  _this.parent().toggleClass('active') &&  e.preventDefault();\n                    // mobile\n                    _this.next().is('ul') || ( ( _window.width() < _mb ) && $('.app-aside').removeClass('show off-screen') );\n                });\n\n                // folded & fixed\n                el.on('mouseenter', 'a', function(e){\n                    next && next.trigger('mouseleave.nav');\n                    $('> .nav', wrap).remove();\n                    if ( !$('.app-aside-fixed.app-aside-folded').length || ( _window.width() < _mb ) || $('.app-aside-dock').length) return;\n                    var _this = $(e.target)\n                        , top\n                        , w_h = $(window).height()\n                        , offset = 50\n                        , min = 150;\n\n                    !_this.is('a') && (_this = _this.closest('a'));\n                    if( _this.next().is('ul') ){\n                        next = _this.next();\n                    }else{\n                        return;\n                    }\n\n                    _this.parent().addClass('active');\n                    top = _this.parent().position().top + offset;\n                    next.css('top', top);\n                    if( top + next.height() > w_h ){\n                        next.css('bottom', 0);\n                    }\n                    if(top + min > w_h){\n                        next.css('bottom', w_h - top - offset).css('top', 'auto');\n                    }\n                    next.appendTo(wrap);\n\n                    next.on('mouseleave.nav', function(e){\n                        $(backdrop).remove();\n                        next.appendTo(_this.parent());\n                        next.off('mouseleave.nav').css('top', 'auto').css('bottom', 'auto');\n                        _this.parent().removeClass('active');\n                    });\n\n                    $('.smart').length && $('<div class=\"dropdown-backdrop\"/>').insertAfter('.app-aside').on('click', function(next){\n                        next && next.trigger('mouseleave.nav');\n                    });\n\n                });\n\n                wrap.on('mouseleave', function(e){\n                    next && next.trigger('mouseleave.nav');\n                    $('> .nav', wrap).remove();\n                });\n            }\n        };\n    });","/**\n * @Description:\n *\n * @User: linanbin\n * @Version: 2.0.0, 15/12/24\n */\n\nangular.module('voyageone.angular.directives.schema', [])\n    // 定义fieldTypes\n    .constant('fieldTypes', {\n        INPUT: \"INPUT\",\n        DATE: \"DATE\",\n        DATETIME: \"DATETIME\",\n        TEXTAREA: \"TEXTAREA\",\n        SINGLE_CHECK: \"SINGLECHECK\",// 在complex中的显示select,以外的默认显示singlecheck,如果用户觉得select显示不方便,就将该field的type改成radio\n        RADIO: \"RADIO\",\n        MULTI_INPUT: \"MULTIINPUT\", // 没有被使用\n        MULTI_CHECK: \"MULTICHECK\",\n        COMPLEX: \"COMPLEX\", // TODO\n        MULTI_COMPLEX: \"MULTICOMPLEX\",\n        LABEL: \"LABEL\"  // 可以不显示\n    })\n    // 定义ruleTypes\n    .constant('ruleTypes', {\n        VALUE_TYPE_RULE: \"valueTypeRule\",\n        REQUIRED_RULE: \"requiredRule\",\n        DISABLE_RULE: \"disableRule\",\n        READ_ONLY_RULE: \"readOnlyRule\",\n        REGEX_RULE: \"regexRule\",\n        SET_RULE: \"setRule\", // TODO 暂时不知道怎么用\n        TIP_RULE: \"tipRule\", // TODO 不需要处理\n        DEV_TIP_RULE: \"devTipRule\", // 不需要处理\n        MIN_LENGTH_RULE: \"minLengthRule\",\n        MAX_LENGTH_RULE: \"maxLengthRule\",\n        MIN_VALUE_RULE: \"minValueRule\",\n        MAX_VALUE_RULE: \"maxValueRule\",\n        MIN_INPUT_NUM_RULE: \"minInputNumRule\",\n        MAX_INPUT_NUM_RULE: \"maxInputNumRule\",\n        MIN_DECIMAL_DIGITS_RULE: \"minDecimalDigitsRule\", // TODO\n        MAX_DECIMAL_DIGITS_RULE: \"maxDecimalDigitsRule\", // TODO\n        MIN_TARGET_SIZE_RULE: \"minTargetSizeRule\", // TODO\n        MAX_TARGET_SIZE_RULE: \"maxTargetSizeRule\", // TODO\n        MIN_IMAGE_SIZE_RULE: \"minImageSizeRule\", // TODO\n        MAX_IMAGE_SIZE_RULE: \"maxImageSizeRule\" // TODO\n    })\n    // 定义valueTypes\n    .constant('valueTypes', {\n        TEXT: \"text\",\n        DECIMAL: \"decimal\",\n        INTEGER: \"integer\",\n        LONG: \"long\",\n        DATE: \"date\",\n        TIME: \"time\",\n        URL: \"url\",\n        TEXTAREA: \"textarea\",\n        HTML: \"html\"\n    })\n\n    .directive('schemaHeader', function ($templateCache, schemaHeaderFactory, fieldTypes, ruleTypes, valueTypes) {\n\n        // 定义header\n        var templateKey_header = \"voyageone.angular.directives.schemaHeader.tpl.html\";\n        if (!$templateCache.get(templateKey_header)) {$templateCache.put(templateKey_header\n            , '<div class=\"form-group\">' +\n              '  <label class=\"col-sm-2 control-label\" ng-class=\"{\\'vo_reqfield\\': showHtmlData.isRequired}\" ng-bind=\"$$data.name\"></label>' +\n              '  <div class=\"col-sm-8\" ng-class=\"{\\'hierarchy_main modal-open\\' : showHtmlData.isMultiComplex, \\'hierarchy_main\\': showHtmlData.isComplex}\" ng-transclude></div>' +\n              '  <div class=\"col-sm-2\" ng-if=\"showHtmlData.isMultiComplex\"><button class=\"btn btn-success\" ng-click=\"addField($$data)\"><i class=\"fa fa-plus\"></i>{{\\'BTN_COM_ADD\\' | translate}}</button></div>' +\n              '  <div class=\"row\" ng-repeat=\"tipMsg in showHtmlData.tipMsg\"><div class=\"col-sm-8 col-sm-offset-2 text-warnings\"><i class=\"icon fa fa-bell-o\"></i>&nbsp;{{tipMsg}}</div></div>' +\n              '</div>');}\n\n        return {\n            restrict: \"E\",\n            replace: true,\n            transclude: true,\n            templateUrl: templateKey_header,\n            scope: {\n                $$data: \"=data\"\n            },\n            link: function (scope) {\n                var schemaHeader = new schemaHeaderFactory();\n\n                _returnType (scope.$$data.type);\n                _operateRule (scope.$$data.rules);\n                scope.showHtmlData = angular.copy(schemaHeader.schemaHearInfo);\n\n                /**\n                 * 设置multi complex添加一条新记录\n                 * @param data\n                 */\n                scope.addField= function (data) {\n                    var newFieldMap = {};\n                    angular.forEach(data.fields, function (field) {\n                        eval(\"newFieldMap.\" + field.id + \"=field\");\n                    });\n\n                    data.values.push({fieldMap: angular.copy(newFieldMap)});\n                };\n\n                /**\n                 * 返回需要展示的页面样式\n                 * @param type\n                 * @param valueTypeRule\n                 * @private\n                 */\n                function _returnType (type) {\n\n                    switch (type) {\n                        case fieldTypes.MULTI_COMPLEX:\n                            schemaHeader.isMultiComplex(true);\n                            break;\n                        case fieldTypes.COMPLEX:\n                            schemaHeader.isComplex(true);\n                            break;\n                    }\n                }\n\n                /**\n                 * 处理rules\n                 * @param rules\n                 * @private\n                 */\n                function _operateRule (rules) {\n                    angular.forEach(rules, function (rule) {\n                        switch (rule.name) {\n                            case ruleTypes.REQUIRED_RULE:\n                                _requiredRule(rule);\n                                break;\n                            case ruleTypes.TIP_RULE:\n                                _tipRule(rule);\n                                break;\n                        }\n                    })\n\n                }\n\n                /**\n                 * 处理requiredRule\n                 * @param requiredRule\n                 * @private\n                 */\n                function _requiredRule (requiredRule) {\n                    if (\"true\" == requiredRule.value) {\n                        schemaHeader.isRequired(true);\n                    }\n                }\n\n                /**\n                * 处理tipRule\n                * @param tipRule\n                * @private\n                */\n                function _tipRule (tipRule) {\n                    schemaHeader.tipMsg(tipRule.value);\n                }\n            }\n        }\n    })\n\n    .directive('schemaItem', function ($templateCache, $compile, schemaFactory, fieldTypes, ruleTypes, valueTypes) {\n\n        // label\n        var templateKey_label = \"voyageone.angular.directives.schemaLabel.tpl.html\";\n        if (!$templateCache.get(templateKey_label)) {$templateCache.put(templateKey_label,\n            '<input style=\"min-width: 150px; max-width: 250px;\" type=\"text\" readonly ng-model=\"vm.$$data.value\" class=\"form-control inherited\">');}\n\n        // input\n        var templateKey_input = \"voyageone.angular.directives.schemaInput.tpl.html\";\n        if (!$templateCache.get(templateKey_input)) {$templateCache.put(templateKey_input,\n            '<input id=\"quantity\" name=\"quantity\" style=\"min-width: 150px; max-width: 250px;\" ng-model=\"vm.$$data.value\" class=\"form-control inherited\" replaceInfo>' +\n            '{{vm.$$from.quantity}}<span ng-bind=\"vm.$$from.quantity\"></span>');}\n\n        // data\n        var templateKey_date = \"voyageone.angular.directives.schemaDate.tpl.html\";\n        if (!$templateCache.get(templateKey_date)) {$templateCache.put(templateKey_date,\n            '<div class=\"input-group\" style=\"width: 180px;\" ng-controller=\"datePickerCtrl\"><input replaceInfo type=\"text\" class=\"form-control\" datepicker-popup=\"{{formatDate}}\" ng-model=\"vm.$parent.$$data.value\" date-model-format=\"{{formatDate}}\" is-open=\"opened\" datepicker-options=\"dateOptions\" close-text=\"Close\" /><span class=\"input-group-btn\"><button replaceInfo type=\"button\" class=\"btn btn-default\" ng-click=\"open($event)\"><i class=\"glyphicon glyphicon-calendar\"></i></button></span></div>');}\n\n        // datetime\n        var templateKey_datetime = \"voyageone.angular.directives.schemaDatetime.tpl.html\";\n        if (!$templateCache.get(templateKey_datetime)) {$templateCache.put(templateKey_datetime,\n            '<div class=\"input-group\" style=\"width: 180px;\" ng-controller=\"datePickerCtrl\"><input replaceInfo type=\"text\" class=\"form-control\" datepicker-popup=\"{{formatDateTime}}\" ng-model=\"vm.$parent.$$data.value\" is-open=\"opened\" datepicker-options=\"dateOptions\" close-text=\"Close\" /><span class=\"input-group-btn\"><button replaceInfo type=\"button\" class=\"btn btn-default\" ng-click=\"open($event)\"><i class=\"glyphicon glyphicon-calendar\"></i></button></span></div>');}\n\n        // textarea\n        var templateKey_textarea = \"voyageone.angular.directives.schemaTextarea.tpl.html\";\n        if (!$templateCache.get(templateKey_textarea)) {$templateCache.put(templateKey_textarea,\n            '<textarea style=\"min-width: 150px; max-width: 650px;\" class=\"form-control no-resize\" ng-model=\"vm.$$data.value\" rows=\"{{showHtmlData.rowNum}}\" replaceInfo></textarea>');}\n\n        // single check-select\n        var templateKey_select = \"voyageone.angular.directives.schemaSelect.tpl.html\";\n        if (!$templateCache.get(templateKey_select)) {$templateCache.put(templateKey_select,\n            '<select style=\"min-width: 150px; max-width: 250px;\" replaceInfo class=\"form-control\" ng-model=\"vm.$$data.value.value\" ng-options=\"option.value as option.displayName for option in vm.$$data.options\"> <option value=\"\">{{\\'TXT_SELECT_NO_VALUE\\' | translate}}</option></select>');}\n\n        // single check-radio\n        var templateKey_radio = \"voyageone.angular.directives.schemaRadio.tpl.html\";\n        if (!$templateCache.get(templateKey_radio)) {$templateCache.put(templateKey_radio,\n            '<label class=\"checkbox-inline c-radio\" ng-repeat=\"option in vm.$$data.options\"><input name=\"{{vm.$$data.id}}\" type=\"radio\" ng-value=\"option.value\" ng-model=\"vm.$$data.value.value\"><span class=\"fa fa-check\"></span> {{option.displayName}}</label>');}\n\n        // multi check-checkbox\n        var templateKey_checkbox = \"voyageone.angular.directives.schemaCheckbox.tpl.html\";\n        if (!$templateCache.get(templateKey_checkbox)) {$templateCache.put(templateKey_checkbox,\n            '<label class=\"checkbox-inline c-checkbox\" ng-repeat=\"option in vm.$$data.options\"><input type=\"checkbox\" ng-value=\"option.value\" ng-click=\"checkboxValue(option.value)\" ng-checked=\"isSelected(option.value)\"><span class=\"fa fa-check\"></span> {{option.displayName}}</label>');}\n\n        // multi complex\n        var templateKey_multiComplex = \"voyageone.angular.directives.schemaMultiComplex.tpl.html\";\n        if (!$templateCache.get(templateKey_multiComplex)) {$templateCache.put(templateKey_multiComplex,\n            '<table class=\"table text-center\">' +\n            '<thead><tr>' +\n                //'<schema-header ng-repeat=\"field in vm.$$data.fields\" data=\"field\" is-complex=\"true\"></schema-header>' +\n            '<th ng-repeat=\"field in vm.$$data.fields\" ng-class=\"{\\'vo_reqfield\\': showHtmlData.isRequired}\" class=\"text-center\" style=\"min-width: 180px;\">{{field.name}}</th>' +\n            '<th style=\"min-width: 60px;\" class=\"text-center\" translate=\"TXT_COM_EDIT\"></th>' +\n            '</tr></thead>' +\n            '<tbody><tr ng-repeat=\"value in vm.$$data.complexValues\">' +\n            '<td class=\"text-left\" ng-repeat=\"field in value.fieldMap\"><schema-item data=\"field\" hastip=\"true\" complex=\"true\"></schema-item></td>' +\n            '<td style=\"min-width: 60px;\"><button title=\"{\\'BTN_COM_DELETE\\' | translate}\" class=\"btn btn-danger btn-xs\" ng-click=\"delField($index)\"><i class=\"fa  fa-trash-o\"></i></button></td>' +\n            '</tr></tbody>' +\n            '</table>');}\n\n        // complex\n        var templateKey_complex = \"voyageone.angular.directives.schemaComplex.tpl.html\";\n        if (!$templateCache.get(templateKey_complex)) {$templateCache.put(templateKey_complex,\n            '<schema-header ng-repeat=\"field in vm.$$data.fields\" data=\"field\"><schema-item data=\"field\"></schema-item></schema-header>');}\n\n        // multi complex tip\n        var templateKey_multiComplex_tip = \"voyageone.angular.directives.schemaMultiComplexTip.tpl.html\";\n        if (!$templateCache.get(templateKey_multiComplex_tip)) {$templateCache.put(templateKey_multiComplex_tip,\n            '<div class=\"text-warnings\" ng-repeat=\"tipMsg in showHtmlData.tipMsg\"><br><i class=\"icon fa fa-bell-o\"></i>&nbsp;{{tipMsg}}</div>');}\n\n        return {\n            restrict: \"E\",\n            require: ['^?form'],\n            replace: true,\n            bindToController: true,\n            controllerAs: \"vm\",\n            controller: function () {},\n            scope: {\n                $$data: \"=data\",\n                $$hastip: \"=hastip\",\n                $$complex: \"=complex\"\n            },\n            link: function (scope, element, ctrl) {\n\n                var schema = new schemaFactory();\n                scope.vm.$$from = ctrl;\n\n                // 设置空间name\n                schema.name(scope.vm.$$data.id);\n\n                _returnType (scope.vm.$$data.type);\n                _operateRule (scope.vm.$$data.rules);\n\n                var tempHtml = \"\";\n                // 拼接body\n                switch (schema.type()) {\n                    case fieldTypes.INPUT:\n                        tempHtml = $templateCache.get(templateKey_input).replace(\"replaceInfo\", schema.html());\n                        break;\n                    case fieldTypes.DATE:\n                        tempHtml = $templateCache.get(templateKey_date).replace(\"replaceInfo\", schema.html()).replace(\"replaceInfo\", schema.html());\n                        break;\n                    case fieldTypes.DATETIME:\n                        tempHtml = $templateCache.get(templateKey_datetime).replace(\"replaceInfo\", schema.html()).replace(\"replaceInfo\", schema.html());\n                        break;\n                    case fieldTypes.TEXTAREA:\n                        tempHtml = $templateCache.get(templateKey_textarea).replace(\"replaceInfo\", schema.html());\n                        break;\n                    case fieldTypes.SINGLE_CHECK:\n                        tempHtml = $templateCache.get(templateKey_select).replace(\"replaceInfo\", schema.html());\n                        break;\n                    case fieldTypes.RADIO:\n                        tempHtml = $templateCache.get(templateKey_radio).replace(\"replaceInfo\", schema.html());\n                        break;\n                    case fieldTypes.MULTI_CHECK:\n                        tempHtml = $templateCache.get(templateKey_checkbox).replace(\"replaceInfo\", schema.html());\n                        break;\n                    case fieldTypes.LABEL:\n                        tempHtml = $templateCache.get(templateKey_label);\n                        break;\n                    case fieldTypes.MULTI_COMPLEX:\n                        tempHtml = $templateCache.get(templateKey_multiComplex);\n                        break;\n                    case fieldTypes.COMPLEX:\n                        tempHtml = $templateCache.get(templateKey_complex);\n                        break;\n                }\n\n                // 添加规则说明\n                if (schema.tipMsg() != null && scope.vm.$$hastip) {\n                    tempHtml += $templateCache.get(templateKey_multiComplex_tip);\n                }\n                scope.showHtmlData = angular.copy(schema.schemaInfo());\n                element.html($compile(tempHtml)(scope));\n\n                /**\n                 * 设置checkbox被选中的value值处理\n                 * @param value\n                 */\n                scope.checkboxValue = function (value) {\n                    if (_.contains(scope.showHtmlData.checkValues, value)) {\n                        scope.showHtmlData.checkValues.splice(_.indexOf(scope.showHtmlData.checkValues, value), 1);\n                    } else {\n                        scope.showHtmlData.checkValues.push(value);\n                    }\n                    scope.vm.$$data.values = [];\n                    angular.forEach(scope.showHtmlData.checkValues, function (obj) {\n                        scope.vm.$$data.values.push({id: null, value: obj});\n                    })\n                };\n\n                /**\n                 * 判断是否被选中\n                 * @param value\n                 */\n                scope.isSelected = function (value) {\n                    return _.contains(scope.showHtmlData.checkValues, value)\n                };\n\n                /**\n                 * 设置multi complex删除该条记录\n                 * @param index\n                 */\n                scope.delField = function (index) {\n                    scope.vm.$$data.values.splice(index, 1);\n                };\n\n                /**\n                 * 返回需要展示的页面样式\n                 * @param type\n                 * @param valueTypeRule\n                 * @private\n                 */\n                function _returnType (type) {\n                    schema.type(type);\n                    switch (type) {\n                        case fieldTypes.RADIO:\n                            if (scope.vm.$$complex)\n                                schema.type(fieldTypes.SINGLE_CHECK);\n                            break;\n                        case fieldTypes.MULTI_CHECK:\n                            _setCheckValues(scope.vm.$$data.values);\n                            break;\n                        case fieldTypes.MULTI_COMPLEX:\n                            scope.vm.$$data.complexValues = _resetMultiComplex(scope.vm.$$data);\n                            break;\n                        case fieldTypes.COMPLEX:\n                            _resetComplex(scope.vm.$$data);\n                            break;\n                    }\n                }\n\n                /**\n                 * 设置checkvalues\n                 * @param values\n                 * @private\n                 */\n                function _setCheckValues (values) {\n                    if (values != undefined && values != null) {\n                        angular.forEach(values, function (obj) {\n                            schema.checkValues(obj.value);\n                        })\n                    }\n                }\n\n                /**\n                 * 重新设置multicomplex的一些属性\n                 * @param fields\n                 * @private\n                 */\n                function _resetMultiComplex (data) {\n                    var tempValues = [];\n                    angular.forEach(data.complexValues, function (value) {\n                        var tempFieldMap = {};\n                        angular.forEach(data.fields, function (field) {\n                            var tempField = angular.copy(field);\n                            if (value.fieldMap[field.id] != undefined) {\n                                switch (field.type) {\n                                    case fieldTypes.INPUT:\n                                    case fieldTypes.LABEL:\n                                    case fieldTypes.DATE:\n                                    case fieldTypes.DATETIME:\n                                    case fieldTypes.TEXTAREA:\n                                    case fieldTypes.SINGLE_CHECK:\n                                    case fieldTypes.RADIO:\n                                        tempField.value = value.fieldMap[field.id].value;\n                                        break;\n                                    case fieldTypes.MULTI_INPUT:\n                                    case fieldTypes.MULTI_CHECK:\n                                        tempField.values = value.fieldMap[field.id].values;\n                                        break;\n                                    case fieldTypes.COMPLEX:\n                                        tempField.complexValue = value.fieldMap[field.id].complexValue;\n                                        break;\n                                    case fieldTypes.MULTI_COMPLEX:\n                                        tempField.complexValues = value.fieldMap[field.id].complexValues;\n                                        break;\n                                }\n                            }\n                            tempFieldMap[field.id] = tempField;\n                        });\n                        tempValues.push({fieldMap: angular.copy(tempFieldMap)});\n                    });\n\n                    // 如果values为空,默认添加空白行\n                    if (_.isEmpty(data.complexValues)) {\n                        var newFieldMap = {};\n                        angular.forEach(data.fields, function (field) {\n                            eval(\"newFieldMap.\" + field.id + \"=field\");\n                        });\n\n                        tempValues.push({fieldMap: angular.copy(newFieldMap)});\n                    }\n\n                    return tempValues;\n                }\n\n                /**\n                 * 重新\n                 * @param data\n                 * @private\n                 */\n                function _resetComplex (data) {\n                    angular.forEach(data.fields, function (field) {\n                        switch (field.type) {\n                            case fieldTypes.INPUT:\n                            case fieldTypes.LABEL:\n                            case fieldTypes.DATE:\n                            case fieldTypes.DATETIME:\n                            case fieldTypes.TEXTAREA:\n                            case fieldTypes.SINGLE_CHECK:\n                            case fieldTypes.RADIO:\n                                field.value = data.complexValue.fieldMap[field.id].value;\n                                break;\n                            case fieldTypes.MULTI_INPUT:\n                            case fieldTypes.MULTI_CHECK:\n                                field.values = data.complexValue.fieldMap[field.id].values;\n                                break;\n                            case fieldTypes.COMPLEX:\n                                field.complexValue = data.complexValue.fieldMap[field.id].complexValue;\n                                break;\n                            case fieldTypes.MULTI_COMPLEX:\n                                field.complexValues = data.complexValue.fieldMap[field.id].complexValues;\n                                break;\n                        }\n                    });\n                }\n\n                /**\n                 * 处理rules\n                 * @param rules\n                 * @private\n                 */\n                function _operateRule (rules) {\n                    angular.forEach(rules, function (rule) {\n                        switch (rule.name) {\n                            case ruleTypes.VALUE_TYPE_RULE:\n                                _valueTypeRule(rule);\n                                break;\n                            case ruleTypes.REQUIRED_RULE:\n                                _requiredRule(rule);\n                                break;\n                            case ruleTypes.DISABLE_RULE:\n                                _disableRule(rule);\n                                break;\n                            case ruleTypes.READ_ONLY_RULE:\n                                _readOnlyRule(rule);\n                                break;\n                            case ruleTypes.REGEX_RULE:\n                                _regexRule(rule);\n                                break;\n                            case ruleTypes.TIP_RULE:\n                                _tipRule(rule);\n                                break;\n                            case ruleTypes.MIN_LENGTH_RULE:\n                                _minLengthRule(rule);\n                                break;\n                            case ruleTypes.MAX_LENGTH_RULE:\n                                _maxLengthRule(rule);\n                                break;\n                            case ruleTypes.MIN_VALUE_RULE:\n                                _minValueRule(rule);\n                                break;\n                            case ruleTypes.MAX_VALUE_RULE:\n                                _maxValueRule(rule);\n                                break;\n                            case ruleTypes.MIN_INPUT_NUM_RULE:\n                                _minInputNumRule(rule);\n                                break;\n                            case ruleTypes.MAX_INPUT_NUM_RULE:\n                                _maxInputNumRule(rule);\n                                break;\n                        }\n                    })\n                }\n\n                /**\n                 * 处理valueTypeRule\n                 * @param valueTypeRule\n                 * @private\n                 */\n                function _valueTypeRule (valueTypeRule) {\n                    switch (valueTypeRule.value) {\n                        case valueTypes.TEXT:\n                        case valueTypes.DECIMAL:\n                        case valueTypes.INTEGER:\n                        case valueTypes.LONG:\n                            schema.type(fieldTypes.INPUT);\n                            schema.html(\"type=\\\"text\\\"\");\n                            break;\n                        case valueTypes.DATE:\n                            schema.type(fieldTypes.DATE);\n                            break;\n                        case valueTypes.TIME:\n                            schema.type(fieldTypes.DATETIME);\n                            break;\n                        case valueTypes.URL:\n                            schema.type(fieldTypes.INPUT);\n                            schema.html(\"type=\\\"url\\\"\");\n                            break;\n                        case valueTypes.TEXTAREA:\n                            schema.type(fieldTypes.TEXTAREA);\n                            schema.rowNum(4);\n                            break;\n                        case valueTypes.HTML:\n                            schema.type(fieldTypes.TEXTAREA);\n                            schema.rowNum(10);\n                            break;\n                    }\n                }\n\n                /**\n                 * 处理requiredRule\n                 * @param requiredRule\n                 * @private\n                 */\n                function _requiredRule (requiredRule) {\n                    if (\"true\" == requiredRule.value) {\n                        schema.isRequired(true);\n                        schema.html(\"required\");\n                    }\n                }\n\n                /**\n                 * 处理disableRule\n                 * @param disableRule\n                 * @private\n                 */\n                function _disableRule (disableRule) {\n                    if (\"true\" == disableRule.value\n                        && disableRule.dependGroup == null) {\n                        schema.html(\"ng-disabled=\\\"true\\\"\");\n                    }\n                }\n\n                /**\n                 * 处理readOnlyRule\n                 * @param readOnlyRule\n                 * @private\n                 */\n                function _readOnlyRule (readOnlyRule) {\n                    if (\"true\" == readOnlyRule.value) {\n                        schema.html(\"readonly\");\n                    }\n                }\n\n                /**\n                 * 处理regexRule\n                 * @param regexRule\n                 * @private\n                 */\n                function _regexRule (regexRule) {\n                    schema.html(\"ng-pattern=\\\"/\" + regexRule.value +\"/\\\"\");\n                }\n\n                /**\n                 * 处理tipRule\n                 * @param tipRule\n                 * @private\n                 */\n                function _tipRule (tipRule) {\n                    schema.tipMsg(tipRule.value);\n                }\n\n                /**\n                 * 处理minLengthRule\n                 * @param minLengthRule\n                 * @private\n                 */\n                function _minLengthRule (minLengthRule) {\n                    var value = isNaN(parseInt(minLengthRule.value)) ? 0 : minLengthRule.value;\n\n                    if (\"not include\" === minLengthRule.exProperty)\n                        value = (value > 0) ? value -1 : 0;\n\n                    if (\"character\" == minLengthRule.unit)\n                        schema.html(\"ng-minlength=\\\"\" + value +\"\\\"\");\n                    else\n                        schema.html(\"ng-char-minlength=\\\"\" + value +\"\\\"\");\n                }\n\n                /**\n                 * 处理maxLengthRule\n                 * @param maxLengthRule\n                 * @private\n                 */\n                function _maxLengthRule (maxLengthRule) {\n                    var value = isNaN(parseInt(maxLengthRule.value)) ? 0 : maxLengthRule.value;\n\n                    if (\"not include\" === maxLengthRule.exProperty)\n                        value = (value > 0) ? value -1 : 0;\n\n                    if (\"character\" == maxLengthRule.unit)\n                        schema.html(\"ng-maxlength=\\\"\" + value +\"\\\"\");\n                    else\n                        schema.html(\"ng-char-maxlength=\\\"\" + value +\"\\\"\");\n                }\n\n                /**\n                 * 处理minValueRule\n                 * @param minValueRule\n                 * @private\n                 */\n                function _minValueRule (minValueRule) {\n                    var value = isNaN(parseFloat(minValueRule.value)) ? 0 : parseFloat(minValueRule.value);\n\n                    if (\"not include\" === minValueRule.exProperty)\n                        value = (value > 0) ? value - 0.01 : 0;\n\n                    schema.html(\"ng-minvalue=\\\"\" + value +\"\\\"\");\n                }\n\n                /**\n                 * 处理maxValueRule\n                 * @param maxValueRule\n                 * @private\n                 */\n                function _maxValueRule (maxValueRule) {\n                    var value = isNaN(parseFloat(maxValueRule.value)) ? 0 : parseFloat(maxValueRule.value);\n\n                    if (\"not include\" === maxValueRule.exProperty)\n                        value = (value > 0) ? value - 0.01 : 0;\n\n                    schema.html(\"ng-maxvalue=\\\"\" + value +\"\\\"\");\n\n                }\n\n                /**\n                 * 处理minInputNumRule\n                 * @param minInputNumRule\n                 * @private\n                 */\n                function _minInputNumRule (minInputNumRule) {\n                    var value = isNaN(parseInt(minInputNumRule.value)) ? 0 : parseInt(minInputNumRule.value);\n\n                    if (\"not include\" === minInputNumRule.exProperty)\n                        value = (value > 0) ? value - 1 : 0;\n\n                    schema.html(\"ng-mininputnum=\\\"\" + value +\"\\\"\");\n                }\n\n                /**\n                 * 处理maxInputNumRule\n                 * @param maxInputNumRule\n                 * @private\n                 */\n                function _maxInputNumRule (maxInputNumRule) {\n                    var value = isNaN(parseInt(maxInputNumRule.value)) ? 0 : parseInt(maxInputNumRule.value);\n\n                    if (\"not include\" === maxInputNumRule.exProperty)\n                        value = (value > 0) ? value - 1 : 0;\n\n                    schema.html(\"ng-maxinputnum=\\\"\" + value +\"\\\"\");\n                }\n\n                /**\n                 * 如果checkbox被选中,返回被选中的value.\n                 * eg.[{new: true, pending: false, approved: true}] -> [new, approved]\n                 * @param object\n                 * @returns {*}\n                 */\n                //function _returnKey(object) {\n                //    var result = [];\n                //    angular.forEach(object, function(value, index) {\n                //        if (value) result.push(index);\n                //    });\n                //    return result;\n                //}\n            }\n        }\n    });\n","/**\n * @Description:\n * 用于动态显示options\n * @User:    Edward\n * @Version: 0.2.0, 2015-12-22\n */\n\nangular.module('voyageone.angular.directives.voption', [])\n    .directive('voption', function ($templateCache, $compile) {\n\n        var templateKey_select = \"voyageone.angular.directives.optionSelect.tpl.html\";\n\n        // 显示成select样式\n        if (!$templateCache.get(templateKey_select)) {\n            $templateCache.put(templateKey_select,\n                '<select class=\"form-control\" ng-model=\"$$data.value.value\" ng-options=\"option.value as option.displayName for option in $$data.options\"> <option value=\"\">{{\\'TXT_SELECT_NO_VALUE\\' | translate}}</option></select>');\n        }\n\n        return {\n            restrict: \"E\",\n            replace: true,\n            scope: {\n                $$data: \"=data\"\n            },\n            link: function (scope, element) {\n\n                // 定义不同的展示种类\n                var typeList = {\n                    SINGLE_CHECK: \"SINGLECHECK\"\n                };\n\n                // 监视配置变动\n                scope.$watch('$$data', function () {\n                    refresh();\n                }, true);\n\n                /**\n                 * 根据type选择展示不同的控件\n                 */\n                function refresh() {\n                    var tempHtml;\n                    switch (scope.$$data.type) {\n                        case typeList.SINGLE_CHECK:\n                            tempHtml = $compile($templateCache.get(templateKey_select))(scope);\n                            break;\n                    }\n                    element.html(tempHtml);\n                }\n            }\n        };\n    });","/**\n * @Description:\n * 用于分页\n * @User:    Edward\n * @Version: 0.2.0, 2015-12-08\n */\n\nangular.module('voyageone.angular.directives.vpagination', [])\n    .directive('vpagination', function ($templateCache, $compile, vpagination) {\n\n        var templateKey = \"voyageone.angular.directives.pagination.tpl.html\";\n        var templateKeyNoData = \"voyageone.angular.directives.paginationNoData.tpl.html\";\n\n        // 有数据分页样式\n        if (!$templateCache.get(templateKey)) {\n            $templateCache.put(templateKey,\n                '<div class=\"col-sm-2\">\\n' +\n                '    <div class=\"page-main form-inline\">{{\\'TXT_COM_SHOWING_NO\\' | translate}}&nbsp;<input class=\"text-center\" type=\"text\" ng-model=\"curr.pageNo\"/>&nbsp;/&nbsp;{{totalPages}}&nbsp;{{\\'TXT_COM_PAGE\\' | translate}}&nbsp;' +\n                '        <button class=\"btn btn-xs btn-default\" type=\"button\" ng-click=\"goPage(curr.pageNo)\" translate=\"BTN_GO\"></button>\\n' +\n                '    </div>\\n' +\n                '</div>\\n' +\n                '<div class=\"col-sm-7 text-center\">\\n' +\n                '    <small class=\"text-muted inline m-t-sm m-b-sm\">{{\\'TXT_COM_SHOWING\\' | translate}}&nbsp;{{curr.start}}-{{curr.end}}&nbsp;{{\\'TXT_COM_OF\\' | translate}}&nbsp;{{totalItems}}&nbsp{{\\'TXT_COM_ITEMS\\' | translate}}</small>\\n' +\n                '</div>\\n' +\n                '<div class=\"col-sm-3 text-right text-center-xs\"><div>' +\n                '    <ul class=\"pagination-sm m-t-none m-b pagination ng-isolate-scope ng-valid ng-dirty ng-valid-parse\">\\n' +\n                '        <li ng-class=\"{disabled: curr.isFirst ||ngDisabled}\" class=\"pagination-first\"><a href ng-click=\"goPage(1)\" ng-disabled=\"curr.isFirst\">&laquo;</a></li>\\n' +\n                '        <li ng-class=\"{disabled: curr.isFirst ||ngDisabled}\" class=\"pagination-prev\"><a href ng-click=\"goPage(curr.pageNo - 1)\" ng-disabled=\"curr.isFirst\">&lsaquo;</a></li>\\n' +\n                '        <li ng-if=\"curr.isShowStart\" class=\"disabled\" disabled><a href>...</a></li>\\n' +\n                '        <li ng-repeat=\"page in curr.pages track by $index\" ng-class=\"{active: isCurr(page)}\" class=\"pagination-page\"><a href ng-click=\"goPage(page)\">{{page}}</a></li>\\n' +\n                '        <li ng-if=\"curr.isShowEnd\" class=\"disabled\" disabled><a href>...</a></li>\\n' +\n                '        <li ng-class=\"{disabled: curr.isLast ||ngDisabled}\" class=\"pagination-next\"><a href ng-click=\"goPage(curr.pageNo + 1)\" ng-disabled=\"curr.isLast\">&rsaquo;</a></li>\\n' +\n                '        <li ng-class=\"{disabled: curr.isLast ||ngDisabled}\" class=\"pagination-last\"><a href ng-click=\"goPage(totalPages)\" ng-disabled=\"curr.isLast\">&raquo;</a></li>\\n' +\n                '    </ul>\\n' +\n                '</div>');\n        }\n\n        // 无数据分页样式\n        if (!$templateCache.get(templateKeyNoData)) {\n            $templateCache.put(templateKeyNoData,\n                '<div class=\"col-sm-7 col-sm-offset-2 text-center\">\\n' +\n                '    <small class=\"text-muted inline m-t-sm m-b-sm\">{{\\'TXT_COM_SHOWING\\' | translate}}&nbsp;0-0&nbsp;{{\\'TXT_COM_OF\\' | translate}}&nbsp;0&nbsp{{\\'TXT_COM_ITEMS\\' | translate}}</small>\\n' +\n                '</div>');\n        }\n\n        var defConfig = {curr: 1, total: 0, size: 20, showPageNo:5};\n\n        return {\n            restrict: \"AE\",\n            //templateUrl: templateKey,\n            replace: false,\n            scope: {\n                $$configNameForA: \"@vpagination\",\n                $$configNameForE: \"@config\"\n            },\n            link: function (scope, element) {\n\n                // 获取用户的config配置\n                var userConfigName = scope.$$configNameForA || scope.$$configNameForE;\n                var userConfig = scope.$parent.$eval(userConfigName);\n\n                // 将用户配置覆盖到默认配置后，在重新覆盖到用户配置上，用于补全配置属性\n                var userWithDefConfig = angular.extend({}, defConfig, userConfig);\n                scope.config = angular.extend(userConfig, userWithDefConfig);\n\n                var p = new vpagination(scope.config);\n\n                // 监视配置变动\n                scope.$parent.$watch(userConfigName, function () {\n                    refresh();\n                }, true);\n\n                /**\n                 * 跳转到指定页\n                 * @param num\n                 */\n                scope.goPage = function (num) {\n                    p.goPage(isNaN(Number(num)) ? 1 : Number(num));\n                };\n\n                /**\n                 * 判断是否是当前页\n                 * @param num\n                 * @returns {*|boolean}\n                 */\n                scope.isCurr = function (num) {\n                    return p.isCurr(num);\n                };\n\n                function refresh() {\n\n                    // 获取总页数\n                    scope.totalPages = p.getPageCount();\n                    // 获取总items数\n                    scope.totalItems = p.getTotal();\n                    // 获取当前页的信息\n                    scope.curr = p.getCurr();\n\n                    // 根据总数量显示不同的分页样式\n                    var tempHtml;\n                    if(p.getTotal() == 0) {\n                        tempHtml = $compile($templateCache.get(templateKeyNoData))(scope);\n                    } else {\n                        tempHtml = $compile($templateCache.get(templateKey))(scope);\n                    }\n                    element.html(tempHtml);\n\n                }\n            }\n        };\n    });","/**\n * @Description:\n *\n * @User: linanbin\n * @Version: 2.0.0, 15/12/25\n */\n\nangular.module('voyageone.angular.directives.validator', [])\n\n    // 定义ng-char-maxlength\n    .directive('ngCharMaxlength', function () {\n\n        return {\n            restrict: 'A',\n            require: '?ngModel',\n            link: function(scope, elm, attr, ctrl) {\n                if (!ctrl) return;\n\n                var maxlength = -1;\n                attr.$observe('ngCharMaxlength', function(value) {\n                    var intVal =  parseInt(value) ;\n                    maxlength = isNaN(intVal) ? -1 : intVal;\n                    ctrl.$validate();\n                });\n                ctrl.$validators.maxlength = function(modelValue, viewValue) {\n                    return (maxlength < 0) || ctrl.$isEmpty(viewValue) || (getByteLength(viewValue) <= maxlength);\n                };\n            }\n        };\n\n        /**\n         * 取得字段的字节长度.\n         * @param value\n         * @returns {number}\n         */\n        function getByteLength(value) {\n            var byteLen = 0,len = value.length;\n            if(value){\n                for(var i = 0; i<len; i++){\n                    if(value.charCodeAt(i)>255){\n                        byteLen += 2;\n                    }\n                    else{\n                        byteLen++;\n                    }\n                }\n                return byteLen;\n            }\n            else{\n                return 0;\n            }\n        }\n    })\n\n    // 定义ng-char-minlength\n    .directive('ngCharMinlength', function () {\n\n        return {\n            restrict: 'A',\n            require: '?ngModel',\n            link: function(scope, elm, attr, ctrl) {\n                if (!ctrl) return;\n\n                var minlength = -1;\n                attr.$observe('ngCharMinlength', function(value) {\n                    var intVal =  parseInt(value) ;\n                    minlength = isNaN(intVal) ? -1 : intVal;\n                    ctrl.$validate();\n                });\n                ctrl.$validators.minlength = function(modelValue, viewValue) {\n                    return (minlength < 0) || ctrl.$isEmpty(viewValue) || (getByteLength(viewValue) >= minlength);\n                };\n            }\n        };\n\n        /**\n         * 取得字段的字节长度.\n         * @param value\n         * @returns {number}\n         */\n        function getByteLength(value) {\n            var byteLen = 0,len = value.length;\n            if(value){\n                for(var i = 0; i<len; i++){\n                    if(value.charCodeAt(i)>255){\n                        byteLen += 2;\n                    }\n                    else{\n                        byteLen++;\n                    }\n                }\n                return byteLen;\n            }\n            else{\n                return 0;\n            }\n        }\n    })\n\n    // 定义ng-maxvalue\n    .directive('ngMaxvalue', function () {\n        return {\n            restrict: 'A',\n            require: '?ngModel',\n            link: function (scope, elm, attr, ctrl) {\n                if (!ctrl) return;\n\n                var maxvalue = -1;\n                attr.$observe('ngMaxvalue', function(value) {\n                    if(/^(\\d{4})\\/(\\d{1,2})\\/(\\d{1,2})$/.test(value))\n                        maxvalue = new Date(value);\n                    else if (/^(\\d+)(\\.[0-9]{0,2})?$/.test(value))\n                        maxvalue = isNaN(parseFloat(value)) ? -1 : parseFloat(value);\n                    else if (/^(\\d+)$/.test(value))\n                        maxvalue = isNaN(parseInt(value)) ? -1 : parseInt(value);\n                    else\n                        maxvalue = -1;\n                    ctrl.$validate();\n                });\n                ctrl.$validators.maxvalue = function(modelValue, viewValue) {\n                    return (maxvalue < 0) || ctrl.$isEmpty(viewValue) || (viewValue <= maxvalue);\n                };\n            }\n        }\n    })\n\n    // 定义ng-minvalue\n    .directive('ngMinvalue', function () {\n        return {\n            restrict: 'A',\n            require: '?ngModel',\n            link: function (scope, elm, attr, ctrl) {\n                if (!ctrl) return;\n\n                var minvalue = -1;\n                attr.$observe('ngMinvalue', function(value) {\n                    if(/^(\\d{4})\\/(\\d{1,2})\\/(\\d{1,2})$/.test(value))\n                        minvalue = new Date(value);\n                    else if (/^(\\d+)(\\.[0-9]{0,2})?$/.test(value))\n                        minvalue = isNaN(parseFloat(value)) ? -1 : parseFloat(value);\n                    else if (/^(\\d+)$/.test(value))\n                        minvalue = isNaN(parseInt(value)) ? -1 : parseInt(value);\n                    else\n                        minvalue = -1;\n                    ctrl.$validate();\n                });\n                ctrl.$validators.minvalue = function(modelValue, viewValue) {\n                    return (minvalue < 0) || ctrl.$isEmpty(viewValue) || (viewValue >= minvalue);\n                };\n            }\n        }\n    })\n\n    // 定义ng-maxinputnum\n    .directive('ngMaxinputnum', function () {\n        return {\n            restrict: 'A',\n            require: '?ngModel',\n            link: function (scope, elm, attr, ctrl) {\n                if (!ctrl) return;\n\n                var maxvalue = -1;\n                attr.$observe('ngMaxinputvalue', function(value) {\n                    maxvalue = isNaN(parseInt(value)) ? -1 : parseInt(value);\n                    ctrl.$validate();\n                });\n                ctrl.$validators.maxinputnum = function(modelValue, viewValue) {\n                    return (maxvalue < 0) || ctrl.$isEmpty(viewValue) || (viewValue.length <= maxvalue);\n                };\n            }\n        }\n    })\n\n    // 定义ng-mininputnum\n    .directive('ngMininputnum', function () {\n        return {\n            restrict: 'A',\n            require: '?ngModel',\n            link: function (scope, elm, attr, ctrl) {\n                if (!ctrl) return;\n\n                var minvalue = -1;\n                attr.$observe('ngMininputnum', function(value) {\n                    minvalue = isNaN(parseInt(value)) ? -1 : parseInt(value);\n                    ctrl.$validate();\n                });\n                ctrl.$validators.mininputnum = function(modelValue, viewValue) {\n                    return (minvalue < 0) || ctrl.$isEmpty(viewValue) || (viewValue.length >= minvalue);\n                };\n            }\n        }\n    })\n;","/**\n * @description\n *\n * 自动创建基于地址定义的数据访问 service.\n * 传入的定义必须是 {object}, 并且至少有 root 属性\n *\n * @User: Jonas\n * @Date: 2015-12-10 19:32:37\n * @Version: 2.0.0\n */\n\n//@Skip\nangular.module('voyageone.angular.vresources', [])\n  .provider('$vresources', function ($provide) {\n\n    /**\n     * @description 构建请求地址的 url\n     * @param {string} root 请求的根路径\n     * @param {string} action 请求的名称\n     * @returns {string}\n     */\n    function getActionUrl(root, action) {\n      return root + (root.lastIndexOf('/') === root.length - 1 ? '' : '/') + action;\n    }\n\n    /**\n     * 闭包声明一个数据访问的 Service\n     * @param {string} name Service 的名称\n     * @param {object} actions 方法和地址定义\n     * @param {AjaxService} ajaxService 封装的 ajax 发送服务\n     */\n    function closureDataService(name, actions, ajaxService) {\n      /**\n       * @description 与 actions 一同闭包的构造函数\n       * @constructor\n       */\n      function DataResource() {\n        if (!actions) {\n          return;\n        }\n\n        if (typeof actions !== \"object\") {\n          console.log(\"Failed to new DataResource: [\" + actions + \"] is not a object\");\n          return;\n        }\n\n        if (!actions.root) {\n          console.log(\"Failed to new DataResource: no root prop\" + (JSON && JSON.stringify ? \": \" + JSON.stringify(actions) : \"\"));\n          return;\n        }\n\n        // 遍历配置\n        for (var name in actions) {\n          // 不对 root 进行创建\n          if (name === \"root\") continue;\n          // 额外的检查\n          if (actions.hasOwnProperty(name)) {\n            // 闭包创建函数\n            this[name] = (function (actionUrl) {\n              return function (data) {\n                return ajaxService.post(actionUrl, data);\n              };\n            })(getActionUrl(actions.root, actions[name]));\n          }\n        }\n      }\n\n      $provide.service(name, DataResource);\n    }\n\n    this.$get = function (ajaxService) {\n\n      return {\n        register: function (name, actions) {\n\n          if (!actions) return;\n\n          if (typeof actions !== 'object') return;\n\n          // 如果有 root 这个属性,就创建 service\n          if (actions.root) {\n            closureDataService(name, actions, ajaxService);\n            return;\n          }\n\n          // 否则继续访问子属性\n          for (var childName in actions) {\n            // 额外的检查\n            if (actions.hasOwnProperty(childName)) {\n\n              this.register(childName, actions[childName]);\n            }\n          }\n        }\n      };\n    };\n  })\n\n  .run(function ($vresources, $actions) {\n    $vresources.register(null, $actions);\n  });","/**\n * @Date:    2015-11-16 18:48:29\n * @User:    Jonas\n * @Version: 0.2.0\n */\n\nangular.module('voyageone.angular.services.ajax', [])\n  .service('$ajax', $Ajax)\n  .service('ajaxService', AjaxService);\n\nfunction $Ajax($http, blockUI, $q) {\n  this.$http = $http;\n  this.blockUI = blockUI;\n  this.$q = $q;\n}\n$Ajax.prototype.post = function (url, data) {\n\n  var defer = this.$q.defer();\n  this.$http.post(url, data).then(function (response) {\n    var res = response.data;\n    if (!res) {\n      alert('相应结果不存在?????');\n      defer.reject(null);\n      return;\n    }\n    if (res.message || res.code) {\n      defer.reject(res);\n      return;\n    }\n    defer.resolve(res);\n  }, function (response) {\n    defer.reject(null, response);\n  });\n  return defer.promise;\n};\n\nfunction AjaxService($q, $ajax, messageService) {\n  this.$q = $q;\n  this.$ajax = $ajax;\n  this.messageService = messageService;\n}\nAjaxService.prototype.post = function (url, data) {\n\n  var defer = this.$q.defer();\n\n  this.$ajax.post(url, data).then(function(res) {\n    // 成功\n    defer.resolve(res);\n    return res;\n  }, (function (_this) {\n    // 失败\n    return function(res) {\n      _this.messageService.show(res);\n      defer.reject(res);\n      return res;\n    };\n  })(this));\n\n  return defer.promise;\n};","/**\n * @Date:    2015-11-16 20:30:37\n * @User:    Jonas\n * @Version: 0.2.0\n */\n\nangular.module('voyageone.angular.services.cookie', [])\n  .service('cookieService', CookieService);\n\nvar keys = {\n  language: 'voyageone.user.language',\n  company: 'voyageone.user.company',\n  channel: 'voyageone.user.channel',\n  application: \"voyageone.user.application\",\n};\n\nfunction gentProps(key) {\n  return function(val) {\n    if (arguments.length === 1) {\n      return this.set(key, val);\n    } else if (arguments.length > 1) {\n      return this.set(key, arguments);\n    }\n    return this.get(key);\n  };\n}\n\nfunction CookieService($cookieStore) {\n  this.$cookieStore = $cookieStore;\n}\n\nCookieService.prototype.get = function(key) {\n  var result = this.$cookieStore.get(key);\n  return result == undefined || result == null ? \"\" : this.$cookieStore.get(key);\n};\n\nCookieService.prototype.set = function(key, value) {\n  return this.$cookieStore.put(key, value);\n};\n\nCookieService.prototype.language = gentProps(keys.language);\n\nCookieService.prototype.company = gentProps(keys.company);\n\nCookieService.prototype.channel = gentProps(keys.channel);\n\nCookieService.prototype.application = gentProps(keys.application);\n\nCookieService.prototype.removeAll = function () {\n  this.$cookieStore.remove(keys.language);\n  this.$cookieStore.remove(keys.company);\n  this.$cookieStore.remove(keys.channel);\n  this.$cookieStore.remove(keys.application);\n};\n","/**\n * 对后台的信息进行自动处理\n * @Date:    2015-11-19 14:47:23\n * @User:    Jonas\n * @Version: 0.2.0\n */\n\nangular.module('voyageone.angular.services.message', [])\n  .service('messageService', MessageService);\n\n// 同步,DisplayType 枚举\nvar DISPLAY_TYPES = {\n  /**\n   * 弹出提示\n   */\n  ALERT: 1,\n  /**\n   * 顶端弹出自动关闭\n   */\n  NOTIFY: 2,\n  /**\n   * 右下弹出自动关闭\n   */\n  POP: 3,\n  /**\n   * 用户自定义处理\n   */\n  CUSTOM: 4\n};\n\nfunction MessageService(alert, confirm, notify) {\n  this.alert = alert;\n  this.confirm = confirm;\n  this.notify = notify;\n}\n\nMessageService.prototype = {\n  /**\n   * 根据类型自动显示信息\n   * @param {{displayType:Number, message:String}} res\n   */\n  show: function(res) {\n\n    var displayType = res.displayType;\n    var message = res.message;\n\n    switch (displayType) {\n      case DISPLAY_TYPES.ALERT:\n        this.alert(message);\n        break;\n      case DISPLAY_TYPES.NOTIFY:\n        this.notify(message);\n        break;\n      case DISPLAY_TYPES.POP:\n        this.notify({message: message, position: 'right bottom'});\n        break;\n    }\n  }\n};","/**\n * @Date:    2015-11-19 14:26:43\n * @User:    Jonas\n * @Version: 0.2.0\n */\n\nangular.module('voyageone.angular.services.permission', [])\n  .service('permissionService', PermissionService);\n\nfunction PermissionService($rootScope) {\n  this.$rootScope = $rootScope;\n  this.permissions = [];\n}\n\nPermissionService.prototype = {\n  /**\n   * set the action permissions.\n   * @param permissions\n   */\n  setPermissions: function(permissions) {\n    this.permissions = permissions;\n    this.$rootScope.$broadcast('permissionsChanged');\n  },\n  /**\n   * check the permission has been in action permissions.\n   * @param permission\n   * @returns {boolean|*}\n   */\n  has: function(permission) {\n    return _.contains(this.permissions, permission.trim());\n  }\n};\n","/**\n * @Date:    2015-11-19 14:35:25\n * @User:    Jonas\n * @Version: 0.2.0\n */\n\nangular.module('voyageone.angular.services.translate', [])\n  .service('translateService', TranslateService);\n\nfunction TranslateService($translate) {\n  this.$translate = $translate;\n}\n\nTranslateService.prototype = {\n  languages: {\n    en: \"en\",\n    zh: \"zh\"\n  },\n  /**\n   * set the web side language type.\n   * @param key\n   */\n  setLanguage: function(language) {\n    if (!_.contains(this.languages, language)) {\n      language = this.getBrowserLanguage();\n    }\n    this.$translate.use(language);\n    return language;\n  },\n  /**\n   * get the browser language type.\n   * @returns {string}\n   */\n  getBrowserLanguage: function() {\n    var currentLang = navigator.language;\n    if (!currentLang)\n      currentLang = navigator.browserLanguage;\n    return currentLang.substr(0, 2);\n  }\n};\n"],"sourceRoot":"components/angular"}