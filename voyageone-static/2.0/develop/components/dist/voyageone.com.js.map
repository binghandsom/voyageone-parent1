{"version":3,"sources":["voyageone.com.js","simple-download.js"],"names":[],"mappings":"AAAA;AACA,ACDA;AAAA,AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"voyageone.com.js","sourcesContent":[null,"/**\n * 简单下载工具，通过 form 封装 post 请求下载文件\n */\n\n(function ($) {\n\n    if (!$) throw 'require jQery';\n\n    function newId() {\n\n        return \"DOWN\" + Math.random().toString().substr(2, 5);\n    }\n\n    function createIframe(newId) {\n\n        return $('<iframe>').attr({\n            id: newId,\n            name: newId,\n            style: 'display:none'\n        });\n    }\n\n    $.download = {\n        'post': function (url, param, callback, context) {\n\n            var id = newId();\n            var $form = $('<form>').attr({\n                action: url,\n                method: 'POST',\n                style: 'display:none',\n                target: id\n            });\n            var $hiddens = $.map(param, function (val, name) {\n                return $('<input type=\"hidden\">').attr({\n                    id: name,\n                    name: name,\n                    value: val\n                });\n            });\n            var $frame = createIframe(id);\n            $frame.on('load', function () {\n                if (callback) callback($frame, $form, param, context);\n                $form.remove();\n                $frame.remove();\n            });\n            $('body').append($form.append($hiddens), $frame);\n            $form.submit();\n        },\n        'get': function (url, param, callback, context) {\n\n            var id = newId();\n            var $frame = createIframe(id).on('load', function () {\n                if (callback) callback($frame, param, context);\n                $frame.remove();\n            });\n            $('body').append($frame);\n            $frame[0].contentWindow.href = url + '?' + $.param(param);\n        }\n    };\n\n})(jQuery);\n"],"sourceRoot":"/source/"}