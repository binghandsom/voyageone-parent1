<div class="container-fluid" ng-controller="stocktakeListCtrl" ng-init="initialize()" ng-cloak="">
    <div class="panel panel-primary" bs-collapse="">
        <div class="panel-heading" role="tab">
            <h4 class="panel-title"> Advanced Search </h4>
        </div>
        <div class="panel-body">
            <div class="row row-flow">
                <div class="col-md-2">
                    <div class="input-group">
                        <label class="input-group-addon" translate="WMS_STORE"></label>
                        <ui-select ng-model="search.store_id" style="min-width: 220px">
                            <ui-select-match placeholder="select a store">
                                {{$select.selected.store_name}}
                            </ui-select-match>
                            <ui-select-choices repeat="i.store_id as i in userStores | filter: $select.search">
                                <div ng-bind-html="i.store_name"></div>
                            </ui-select-choices>
                        </ui-select>
                    </div>
                </div>
                <div class="col-md-2">
                    <div class="form-group">
                        <div class="input-group">
                            <label class="input-group-addon" translate="WMS_STATUS"></label>
                            <ui-select ng-model="search.stocktake_status" style="min-width: 220px">
                                <ui-select-match placeholder="select a sessionStatus">
                                    {{$select.selected.name}}
                                </ui-select-match>
                                <ui-select-choices repeat="i.id as i in sessionStatus | filter: $select.search">
                                    <div ng-bind-html="i.name"></div>
                                </ui-select-choices>
                            </ui-select>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="form-group">
                        <div class="input-group">
                            <label class="input-group-addon" translate="WMS_FROM"></label>
                            <input class="form-control" type="text" ng-model="search.modifiedTime_s" is-open="fromOpened" ng-click="fromOpened = true" placeholder="Select a date" datepicker-popup="yyyy-MM-dd" max-date="search.modifiedTime_e" datepicker-append-to-body="1" />
                            <label class="input-group-addon" translate="WMS_TO"></label>
                            <input class="form-control" type="text" ng-model="search.modifiedTime_e" is-open="toOpened" ng-click="toOpened = true" placeholder="Select a date" datepicker-popup="yyyy-MM-dd" min-date="search.modifiedTime_s" datepicker-append-to-body="1" />
                        </div>
                    </div>
                </div>
                <div class="col-md-5">
                    <div class="form-group">
                        <button class="btn btn-sm btn-primary" ng-click="searchList(1)"><i class="fa fa-search"></i>&nbsp;<span translate="WMS_SEARCH"></span></button>
                        <button href="#/wms/stockTake/sectionList" class="btn btn-sm btn-success" ng-click="newSession()" translate="WMS_NEWSESSION"></button>
                    </div>
                </div>
            </div>
            <div class="table-responsive mb10">
                <span translate="WMS_RECORDNUMBER"></span><span ng-bind="pageOption.total"></span>
                <!--表格主体-->
                <table if-no-rows="sessionList" class="table table-bordered table-hover table-condensed">
                    <thead>
                    <tr>
                        <th class="col-fix-no">#</th>
                        <th translate="WMS_SESSIONNAME"></th>
                        <th translate="WMS_TYPE"></th>
                        <th translate="WMS_STATUS"></th>
                        <th translate="WMS_STORE"></th>
                        <th translate="WMS_CREATEBY"></th>
                        <th translate="WMS_LASTUPDATETIME"></th>
                        <th class="col-fix-op" translate="WMS_OPERATION"></th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr ng-repeat="sessionInfo in sessionList">
                        <td class="col-fix-no">{{$index + 1 + (pageOption.curr - 1) * pageOption.size}}</td>
                        <td>{{sessionInfo.stocktake_name}}</td>
                        <td>{{sessionInfo.stocktakeType}}</td>
                        <td>{{sessionInfo.stocktake_statusName}}</td>
                        <td>{{sessionInfo.store_name}}</td>
                        <td>{{sessionInfo.creater}}</td>
                        <td>{{sessionInfo.modified_local}}</td>
                        <td class="col-fix-op">
                            <!--<button class="btn btn-xs btn-success" context-menu="session-info-operations" ng-click="sessionList.selected = sessionInfo">--> <button class="btn btn-xs btn-success" context-menu="session-info-operations" ng-click="setValue(sessionInfo)"> <span translate="WMS_OPERATION"></span> <span class="caret"></span> </button> </td>
                    </tr>
                    </tbody>
                </table>
            </div>
            <div class="text-center" paging="pageOption"></div>
        </div>
    </div>
    <ul id="session-info-operations" role="menu" class="dropdown-menu">
        <li><a href="javascript:" ng-click="viewSession()"><i class="fa fa-eye"></i>&nbsp;<span translate="WMS_VIEW"></span></a></li>
        <li><a href="javascript:" ng-click="editSession()" ng-show="liViewCtl.edit"><i class="fa fa-pencil-square"></i>&nbsp;<span translate="WMS_EDIT"></span></a></li>
        <li><a href="javascript:" ng-click="compare()" ng-show="liViewCtl.compare"><i class="fa fa-adjust"></i>&nbsp;<span translate="WMS_COMPARE"></span></a></li>
        <li><a href="javascript:" ng-click="deleteSession()" ng-show="liViewCtl.delete"><i class="fa fa-trash"></i>&nbsp;<span translate="WMS_DELETE"></span></a></li>
    </ul>
    <!--newSession的时候弹出框，选择仓库-->
    <script type="text/ng-template" id="store.choose.html">
        <div class="dialog-contents">
            <h3 class="text-center" translate="WMS_NEWSESSION"></h3>
            <div class="form-group">
                <label class="control-label" translate="WMS_STORE"></label>
                <ui-select ng-model="setValue.store_id" style="min-width: 220px">
                    <ui-select-match placeholder="select a store">{{$select.selected.store_name}}</ui-select-match>
                    <ui-select-choices repeat="i.store_id as i in userStores | filter: $select.search">
                       <div ng-bind-html="i.store_name"></div>
                    </ui-select-choices>
                    </ui-select>
            </div>
            <div class="form-group">
                 <label class="control-label" translate="WMS_STOCKTAKETYPE"></label>
                 <ui-select ng-model="setValue.stocktakeType" style="min-width: 220px">
                     <ui-select-match placeholder="select a type">{{$select.selected.name}}</ui-select-match>
                     <ui-select-choices repeat="i.id as i in stocktakeType | filter: $select.search">
                         <div ng-bind-html="i.name"></div>
                     </ui-select-choices>
                 </ui-select>
            </div>
            <div class="text-center padding-15">
                <button type="button" class="btn btn-sm btn-info" ng-click="createSession()" translate="WMS_CREATE"></button>
                <button type="button" class="btn btn-sm btn-default" ng-click="closeThisDialog()" translate="WMS_CANCEL"></button>
            </div>
        </div>
    </script>
</div>