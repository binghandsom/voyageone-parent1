<div class="container-fluid" ng-controller="transferEditCtrl">
    <div class="panel panel-primary">
        <div class="panel-heading">
            <h3 class="panel-title" translate="WMS_TRANSFER">
            </h3>
        </div>
        <div class="panel-body">
            <div class="row">
                <div class="col-sm-3">
                    <div class="panel panel-primary">
                        <div class="panel-body">
                            <div>
                                <div class="form-group">
                                    <label translate="WMS_TYPE"></label>: <span> {{ getCurrTransferName() }} </span>
                                </div>
                                <div class="form-group" ng-show="isPurchaseOrder()">
                                    <label for="transfer-po" translate="WMS_PONUMBER"></label>
                                    <input id="transfer-po" type="text" class="form-control"
                                           ng-disabled="!isTransferEditable()" ng-model="vm.transfer.po_number"/>
                                </div>
                                <div class="form-group">
                                    <label for="transfer-name" translate="WMS_TRANSFERNAME"></label>
                                    <input id="transfer-name" class="form-control" type="text"
                                           ng-disabled="!isTransferEditable()" ng-model="vm.transfer.transfer_name"/>
                                </div>
                                <div class="form-group"  ng-show="!isPurchaseOrder()">
                                    <label translate="WMS_FROM"></label>
                                    <ui-select ng-model="vm.transfer.transfer_from_store" ng-disabled="!isTransferEditable()">
                                        <ui-select-match placeholder="select a store">{{$select.selected.store_name}}</ui-select-match>
                                        <ui-select-choices repeat="i.store_id as i in fromStores() | filter: $select.search">
                                            <div ng-bind-html="i.store_name"></div>
                                        </ui-select-choices>
                                    </ui-select>
                                </div>
                                <div class="form-group" ng-show="!isWithdrawal()">
                                    <label translate="WMS_TO"></label>
                                    <ui-select ng-model="vm.transfer.transfer_to_store" ng-disabled="!isTransferEditable()">
                                        <ui-select-match placeholder="select a store">{{$select.selected.store_name}}</ui-select-match>
                                        <ui-select-choices repeat="i.store_id as i in toStores() | filter: $select.search">
                                            <div ng-bind-html="i.store_name"></div>
                                        </ui-select-choices>
                                    </ui-select>
                                </div>
                                <div class="form-group" ng-show="isTransferIn()">
                                    <label for="transfer-mapping-out" translate="WMS_TARGETOUT"></label>
                                    <input type="text" name="transfer-mapping-out" id="transfer-mapping-out" class="form-control"
                                           ng-disabled="isTransferClosed() || !isMapFieldEditable()" ng-model="vm.transfer_map_target"/>
                                </div>
                                <div class="form-group" ng-show="isPurchaseOrder()">
                                    <label translate="WMS_CLIENT_SHIPMENT"></label>
                                    <a class="btn btn-sm btn-danger"  ng-show="vm.transfer.client_shipment_id > 0" ng-href="./wms/transfer/edit/downloadClientShipment?param={{vm.transfer}}" target="_blank" ><span translate="WMS_DOWNLOAD"></span></a>
                                    <a class="btn btn-sm btn-success"  ng-show="vm.transfer.client_shipment_id > 0" ng-href="./wms/transfer/edit/downloadTransferCompare?param={{vm.transfer}}" target="_blank" ><span translate="WMS_COMPARE"></span></a>
                                    <ui-select ng-model="vm.transfer.client_shipment_id" ng-disabled="isTransferClosed()">
                                        <ui-select-match placeholder="select a shipment">{{$select.selected.file_name}}</ui-select-match>
                                        <ui-select-choices repeat="i.shipment_id as i in vm.transfer_client_shipments | filter: $select.search">
                                            <div ng-bind-html="i.file_name"></div>
                                        </ui-select-choices>
                                    </ui-select>
                                </div>
                                <div class="form-group">
                                    <label for="transfer-comment" translate="WMS_NOTE"></label>
                                    <textarea id="transfer-comment" cols="30" rows="10" class="form-control" ng-disabled="isTransferClosed()" ng-model="vm.transfer.comment"></textarea>
                                </div>
                            </div>
                        </div>
                        <div class="panel-footer text-right" ng-hide="isEditingPackage()">
                            <span ng-hide="isTransferClosed()">
                                <button class="btn btn-warning" ng-click="submitTransfer()" ng-hide="vm.isAddMode" ng-disabled="vm.btnCtrl.submit" translate="WMS_SUBMIT"></button>
                                <button class="btn btn-success" ng-click="saveTransfer()" ng-disabled="vm.btnCtrl.save" translate="WMS_SAVE"></button>
                                <button class="btn btn-info"  ng-click="compare()" ng-show="isTransferIn() && !isMapFieldEditable()" translate="WMS_COMPARE"></button>
                                <button class="btn btn-danger"  ng-click="deleteTransfer()" ng-hide="vm.isAddMode" translate="WMS_DELETE"></button>
                            </span>
                            <button ng-click="cancel()" class="btn btn-primary" translate="WMS_CANCEL"></button>
                        </div>
                    </div>
                </div>
                <div class="col-sm-9">
                    <div ng-show="!isEditingPackages() && !isEditingPackage()">
                        <p class="h4" translate="WMS_PLEASESAVETRANSFERFIREST"></p>
                    </div>
                    <div ng-show="isEditingPackages() && !isEditingPackage()">
                        <div ng-include=" 'modules/wms/transfer/edit.package.tpl.html' "></div>
                    </div>
                    <div ng-show="isEditingPackage()">
                        <div ng-include=" 'modules/wms/transfer/edit.package.items.tpl.html' "></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
